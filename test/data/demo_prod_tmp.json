{"jobDef":[{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-04-23T04:51:14.554Z","pauseOnFailedJob":false,"name":"Hello Java Artifact Argument","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{},"id":"5ea12aead0e2b3001591bd14","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-07-07T19:05:07.502Z","pauseOnFailedJob":false,"name":"Process Orphaned Tasks","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{},"id":"5f04d16b6f1829001523ca35","version":0},{"status":10,"lastRunId":7,"maxInstances":1,"dateCreated":"2020-08-07T15:37:35.036Z","pauseOnFailedJob":false,"name":"Update Agent Team Version","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{},"id":"5f2d89a689e4c90015e51eb3","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-04-18T14:28:30.732Z","pauseOnFailedJob":false,"name":"Hello and Goodbye","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9b2beacd01580015f02c41","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-04-20T20:45:36.319Z","pauseOnFailedJob":false,"name":"Hello and Goodbye with Conditional Path Routing Fixed","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9e1037a8c93900156144fc","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-04-23T04:51:14.554Z","pauseOnFailedJob":false,"name":"Hello Java","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{},"id":"5ea1221ad0e2b3001591bd03","version":0},{"status":10,"lastRunId":3,"maxInstances":1,"dateCreated":"2020-06-11T00:08:53.592Z","pauseOnFailedJob":false,"name":"BuildAgentStub","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"teamId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"60000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","KIKI_GIT_USERNAME":"richwifunds","KIKI_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","KIKI_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh","logDest":"file"},"id":"5ee2ae88bd2c5a0015991f95","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-06-16T02:48:31.478Z","pauseOnFailedJob":false,"name":"Initialize Demo","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"teamId":"5e99cbcb2317950015edb655"},"id":"5ee83e15f84dd600157d566f","version":0},{"status":10,"lastRunId":8,"maxInstances":1,"dateCreated":"2020-07-01T20:13:30.118Z","pauseOnFailedJob":true,"_teamId":"5e99cbcb2317950015edb655","name":"BuildAgentWinx64","createdBy":"5e99cb8e2317950015edb654","misfireGraceTime":null,"coalesce":false,"runtimeVars":{"teamId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","KIKI_GIT_USERNAME":"richwifunds","KIKI_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","KIKI_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh","logDest":"file","platform":"win","arch":"x64"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"id":"5efcfa2f7bf6520015136286","version":0},{"status":10,"lastRunId":5,"maxInstances":1,"dateCreated":"2020-06-01T23:25:59.201Z","pauseOnFailedJob":true,"name":"BuildAgent","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"teamId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"60000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","KIKI_GIT_USERNAME":"richwifunds","KIKI_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","KIKI_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh","logDest":"file","AGENT_CREATE_TIMEOUT":"60"},"coalesce":false,"id":"5ed6dc9bae918d37ad199d89","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-04-18T21:31:48.690Z","pauseOnFailedJob":false,"name":"Hello and Goodbye with Dynamic Runtime Variables","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9b8516e8875a0015a24f12","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-04-18T23:14:36.373Z","pauseOnFailedJob":false,"name":"Hello and Goodbye with Conditional Path Routing","createdBy":"5e99cb8e2317950015edb654","_teamId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9b8df22ac79d0015a80a43","version":0},{"status":10,"lastRunId":0,"maxInstances":1,"dateCreated":"2020-07-01T18:28:18.497Z","pauseOnFailedJob":false,"_teamId":"5e99cbcb2317950015edb655","name":"BuildAgentStubWinx64","createdBy":"5e99cb8e2317950015edb654","misfireGraceTime":null,"coalesce":null,"runtimeVars":{"teamId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","KIKI_GIT_USERNAME":"richwifunds","KIKI_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","KIKI_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh","logDest":"file","platform":"win","arch":"x64"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"id":"5efcdcf7a225550015b1e3b3","version":0}],"script":[{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg==","shadowCopyCode":"ZWNobyAiaGVsbG8gd29ybGQhIg==","lastEditedDate":"2020-04-18T16:17:02.302Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b27fecd01580015f02be8","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo=","shadowCopyCode":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo=","lastEditedDate":"2020-04-18T16:25:13.837Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b29e9cd01580015f02c36","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"jscript","scriptType":1,"code":"Y29uc29sZS5sb2coJ0hlbGxvIGZyb20gJywgcHJvY2Vzcy5hcmd2WzJdKQ==","shadowCopyCode":"Y29uc29sZS5sb2coJ0hlbGxvIGZyb20gJywgcHJvY2Vzcy5hcmd2WzJdKQ==","lastEditedDate":"2020-04-18T16:46:06.049Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b2ececd01580015f02c61","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Hello_Bug","scriptType":2,"code":"ZWNobyAnaGVsbG8gd29ybGQh","shadowCopyCode":"ZWNobyAnaGVsbG8gd29ybGQh","lastEditedDate":"2020-04-18T21:53:33.170Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b76dde8875a0015a24ecd","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Hello_Arg","scriptType":2,"code":"ZWNobyAiaGVsbG8gJDEhIg==","shadowCopyCode":"ZWNobyAiaGVsbG8gJDEhIg==","lastEditedDate":"2020-04-18T21:54:18.742Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b770ae8875a0015a24ece","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Hello_EnvVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","shadowCopyCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","lastEditedDate":"2020-04-18T21:54:39.818Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b771fe8875a0015a24ecf","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Goodbye_RuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQHNnZygibmFtZSIpISc=","shadowCopyCode":"cHJpbnQgJ2dvb2RieWUgQHNnZygibmFtZSIpISc=","lastEditedDate":"2020-04-18T21:56:01.566Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b7771e8875a0015a24ed1","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Hello_RuntimeVar","scriptType":2,"code":"ZWNobyAnaGVsbG8gQHNnZygibmFtZSIpISc=","shadowCopyCode":"ZWNobyAnaGVsbG8gQHNnZygibmFtZSIpISc=","lastEditedDate":"2020-04-18T22:32:28.075Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b7ffde8875a0015a24f08","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"PrintMessage","scriptType":1,"code":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs=","shadowCopyCode":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs=","lastEditedDate":"2020-04-18T23:38:41.622Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b8f812ac79d0015a80a4a","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"HelloJava_agent001","scriptType":2,"code":"amF2YSAtY3AgLyBIZWxsb1dvcmxk","shadowCopyCode":"amF2YSAtY3AgLyBIZWxsb1dvcmxk","lastEditedDate":"2020-04-23T05:28:09.095Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ea12769d0e2b3001591bd0a","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"HelloJavaArtifact_agent001","scriptType":2,"code":"QHNnZygiZW52aXJvbm1lbnQiKWphdmEgSGVsbG9Bcmd1bWVudCAkMQ==","shadowCopyCode":"QHNnZygiZW52aXJvbm1lbnQiKWphdmEgSGVsbG9Bcmd1bWVudCAkMQ==","lastEditedDate":"2020-04-23T05:45:27.926Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ea12b77d0e2b3001591bd17","version":0},{"teamUsable":true,"teamEditable":true,"isActive":true,"_teamId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","shadowCopyCode":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-16T00:49:01.866Z","id":"5ebf387d615271382b431920","version":0},{"teamUsable":true,"teamEditable":true,"isActive":true,"_teamId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ZWNobyAiaGVsbG8gdGhlcmUiID4gb3V0LnR4dA==","shadowCopyCode":"ZWNobyAiaGVsbG8gdGhlcmUiID4gb3V0LnR4dA==","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-16T00:59:13.758Z","id":"5ebf3ae1615271382b431925","version":0},{"teamUsable":true,"teamEditable":true,"isActive":true,"_teamId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","shadowCopyCode":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-16T01:05:13.846Z","id":"5ebf3c49615271382b43192a","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"bart1","scriptType":1,"code":"Y29uc29sZS5sb2coJ0hlbGxvIEJhcnQnKTs=","shadowCopyCode":"Y29uc29sZS5sb2coJ0hlbGxvIEJhcnQnKTs=","lastEditedDate":"2020-05-17T14:20:36.506Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ec14834615271382b43192e","version":0},{"teamUsable":true,"teamEditable":true,"isActive":true,"_teamId":"5e99cbcb2317950015edb655","name":"cron-richwood-macbook.local-yUZqY","scriptType":2,"code":"Y2Qgfi9kZXYgJiYgLi9jcm9udGVzdC5zaCA+IGNyb25vdXQudHh0","shadowCopyCode":"Y2Qgfi9kZXYgJiYgLi9jcm9udGVzdC5zaCA+IGNyb25vdXQudHh0","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-20T22:59:51.101Z","id":"5ec5b667f54571001520e097","version":0},{"teamUsable":true,"teamEditable":true,"isActive":true,"_teamId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-9sz1w","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","shadowCopyCode":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-21T02:54:48.787Z","id":"5ec5ed7852a8ff00151fefec","version":0},{"teamUsable":true,"teamEditable":true,"isActive":true,"_teamId":"5e99cbcb2317950015edb655","name":"cron-richwood-macbook.local-zcI0X","scriptType":2,"code":"J2hlbGxvIHdvcmxkJw==","shadowCopyCode":"J2hlbGxvIHdvcmxkJw==","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-25T20:23:57.869Z","id":"5ecc295d68983400154166cc","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"hello","scriptType":1,"code":" ","shadowCopyCode":"Y29uc29sZS5sb2coJ2hpJyk=","lastEditedDate":"2020-05-25T21:48:02.830Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ecc3d1268983400154168ce","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","shadowCopyCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","lastEditedDate":"2020-06-04T00:01:39.198Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed839e32a8c780015a489a1","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"install mongolib packages","scriptType":2,"code":"bnBtIGkgbW9uZ29kYg==","shadowCopyCode":"bnBtIGkgbW9uZ29kYg==","lastEditedDate":"2020-06-16T04:26:20.387Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ee849ecf84dd600157d5682","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"hello.bat","scriptType":3,"code":"ZWNobyAnaGVsbG8n","shadowCopyCode":"ZWNobyAnaGVsbG8n","lastEditedDate":"2020-07-01T23:33:07.178Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5efd1d33327c5c00158cce70","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"install process orphaned tasks packages","scriptType":2,"code":"bnBtIGkgbW9uZ29vc2UKbnBtIGkgYXhpb3M=","shadowCopyCode":"bnBtIGkgbW9uZ29vc2UKbnBtIGkgYXhpb3M=","lastEditedDate":"2020-07-07T19:49:58.124Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5f04d1e66f1829001523ca3a","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Goodbye_Route","scriptType":0,"code":"ZnJvbSByYW5kb20gaW1wb3J0IHNlZWQKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKCnByaW50ICdnb29kYnllIEBzZ2coIm5hbWUiKSEnCnByaW50ICdtZXNzYWdlIGZyb20gIkhlbGxvIFRhc2siID0gIkBzZ2coIm1zZyIpIicKCnJvdXRlID0gcmFuZGludCgxLDIpCnByaW50ICdAc2dve3sicm91dGUiOiJ7fSJ9fScuZm9ybWF0KHJvdXRlKQ==","shadowCopyCode":"ZnJvbSByYW5kb20gaW1wb3J0IHNlZWQKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKCnByaW50ICdnb29kYnllIEBzZ2coIm5hbWUiKSEnCnByaW50ICdtZXNzYWdlIGZyb20gIkhlbGxvIFRhc2siID0gIkBzZ2coIm1zZyIpIicKCnJvdXRlID0gcmFuZGludCgxLDIpCnByaW50ICdAc2dve3sicm91dGUiOiJ7fSJ9fScuZm9ybWF0KHJvdXRlKQ==","lastEditedDate":"2020-04-18T21:55:27.164Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b774fe8875a0015a24ed0","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQHNnZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQHNnZygibXNnIikiJw==","shadowCopyCode":"cHJpbnQgJ2dvb2RieWUgQHNnZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQHNnZygibXNnIikiJw==","lastEditedDate":"2020-04-18T21:58:37.932Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b780ee8875a0015a24ed2","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQHNnZygibmFtZSIpISIKZWNobyAnQHNnb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BzZ297Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBzZ2coIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw==","shadowCopyCode":"ZWNobyAiaGVsbG8gQHNnZygibmFtZSIpISIKZWNobyAnQHNnb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BzZ297Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBzZ2coIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw==","lastEditedDate":"2020-04-18T22:55:22.486Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b855ae8875a0015a24f15","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"ShellWkspc","scriptType":2,"code":"ZWNobyAkT1NUWVBFCmlmIFtbICIkT1NUWVBFIiA9PSAibGludXgtZ251IiBdXTsgdGhlbgogIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgUEtHX09LPSQoZHBrZy1xdWVyeSAtVyAtZj0nJHtTdGF0dXN9JyBub2RlanMgMj4vZGV2L251bGwgfCBncmVwIC1jICJvayBpbnN0YWxsZWQiKQogIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICBjdXJsIC1zTCBodHRwczovL2RlYi5ub2Rlc291cmNlLmNvbS9zZXR1cF8xMC54IC1vIG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIC4vbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgYXB0IGluc3RhbGwgbm9kZWpzCiAgICBub2RlIC0tdmVyc2lvbgogIGVsc2UKICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICBmaQpmaQ==","shadowCopyCode":"ZWNobyAkT1NUWVBFCmlmIFtbICIkT1NUWVBFIiA9PSAibGludXgtZ251IiBdXTsgdGhlbgogIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgUEtHX09LPSQoZHBrZy1xdWVyeSAtVyAtZj0nJHtTdGF0dXN9JyBub2RlanMgMj4vZGV2L251bGwgfCBncmVwIC1jICJvayBpbnN0YWxsZWQiKQogIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICBjdXJsIC1zTCBodHRwczovL2RlYi5ub2Rlc291cmNlLmNvbS9zZXR1cF8xMC54IC1vIG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIC4vbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgYXB0IGluc3RhbGwgbm9kZWpzCiAgICBub2RlIC0tdmVyc2lvbgogIGVsc2UKICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICBmaQpmaQ==","lastEditedDate":"2020-04-18T23:49:53.663Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b92212ac79d0015a80a8f","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","shadowCopyCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","lastEditedDate":"2020-04-19T01:01:38.106Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9ba2f22ac79d0015a80b12","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"TerminateEC2Instance","scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","shadowCopyCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","lastEditedDate":"2020-06-03T17:59:09.338Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed7e4ed1299560015b652de","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICdAc2dnKCJzZ0F1dGhUb2tlbiIpJwpwcmludCAnYXV0aCB0b2tlbiAtPiBAc2dnKCJzZ0F1dGhUb2tlbiIpJwoKZGVmIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBtaW5Db3VudCwgbWF4Q291bnQpOgogICAgYXZhaWxhYmxlX2luc3RhbmNlcyA9IFtdCiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgY3VycmVudF9pbnN0YW5jZXMgPSBnZXRfcnVubmluZ19pbnN0YW5jZXNfd2l0aF90YWdzKHRhZ3MpCiAgICBudW1FeGlzdGluZ0luc3RhbmNlcyA9IGxlbihjdXJyZW50X2luc3RhbmNlcykKICAgIHByaW50ICdGb3VuZCB7fSBleGlzdGluZyBlYzIgaW5zdGFuY2VzIHdpdGggdGFncyAie30iJy5mb3JtYXQobnVtRXhpc3RpbmdJbnN0YW5jZXMsIHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCgogICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQoY3VycmVudF9pbnN0YW5jZXMpCgogICAgaWYgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPCBAc2dnKCJNaW5Db3VudCIpOgogICAgICAgIGlmIG5vdCBwYXRoLmV4aXN0cygnYm9vdHN0cmFwLWVjMi5weScpOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24gKCdGaWxlIGJvb3RzdHJhcC1lYzIucHkgbm90IGZvdW5kJykKCiAgICAgICAgd2l0aCBvcGVuKCdib290c3RyYXAtZWMyLnB5JywgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICBkYXRhID0gZmlsZS5yZWFkKCkKCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3RlYW1JZF0nLCAnIkBzZ2coInRlYW1JZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQHNnZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBzZ2coInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBzZ2coIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBzZ2coInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQHNnZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQHNnZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBzZ2coQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAc2dnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBzZ2coSW1hZ2VJZCksIEBzZ2coS2V5TmFtZSksIEBzZ2coSW5zdGFuY2VUeXBlKSwgQHNnZyhTZWN1cml0eUdyb3VwSWRzKSwgQHNnZyhTdWJuZXRJZCksIEBzZ2coVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQHNnZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMjQKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgIyBwcmludCAncmVzIC0+ICcsIHJlcwogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRiZWF0VGltZSA9IHJlc1snZGF0YSddWzBdWydsYXN0SGVhcnRiZWF0VGltZSddCiAgICAgICAgICAgICAgICAgICAgIyBwcmludCAnbGFzdEhlYXJ0YmVhdFRpbWUgLT4gJywgbGFzdEhlYXJ0YmVhdFRpbWUKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBoYkR0ZSA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAobGFzdEhlYXJ0YmVhdFRpbWUvMTAwMCkKICAgICAgICAgICAgICAgICAgICAjIHByaW50ICdoYkR0ZSAtPiAnLCBoYkR0ZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICAjIHByaW50ICdkaWZmU2Vjb25kcyAtPiAnLCBkaWZmU2Vjb25kcywgJywgaW5hY3RpdmVQZXJpb2RXYWl0VGltZSAtPiBAc2dnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpLCBkaWZmU2Vjb25kcyAtPiAnLCBAc2dnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgaWYgZGlmZlNlY29uZHMgLSAgQHNnZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKSA8IC01OgogICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJy4uLmFnZW50IHt9IGlzIGluaXRpYWxpemluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKQHNncygiU0dSZXN0QXBpQ2FsbCIpCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnByaW50ICdAc2dve3sic2dBdXRoVG9rZW4iOiAie30ifX0nLmZvcm1hdCh0b2tlbikKCnRhZ3MgPSBqc29uLmxvYWRzKCdAc2dnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQpyZXN0Y21kID0gJ0BzZ2coInNnQXBpVXJsIikvYXBpL0BzZ2coImFnZW50TG9nc0FQSVZlcnNpb24iKS9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKQpwcmludCAncmVzdGNtZCAtPiAnLCByZXN0Y21kCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbChyZXN0Y21kLCAnR0VUJywge30pCnByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIGFnZW50UXVlcnkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBzZ2coInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQHNnZyhNaW5Db3VudCksIEBzZ2coTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBzZ2coTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAc2dnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBzZ2coTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBzZ2coInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAc2dnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BzZ2coTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQHNnZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","shadowCopyCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICdAc2dnKCJzZ0F1dGhUb2tlbiIpJwpwcmludCAnYXV0aCB0b2tlbiAtPiBAc2dnKCJzZ0F1dGhUb2tlbiIpJwoKZGVmIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBtaW5Db3VudCwgbWF4Q291bnQpOgogICAgYXZhaWxhYmxlX2luc3RhbmNlcyA9IFtdCiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgY3VycmVudF9pbnN0YW5jZXMgPSBnZXRfcnVubmluZ19pbnN0YW5jZXNfd2l0aF90YWdzKHRhZ3MpCiAgICBudW1FeGlzdGluZ0luc3RhbmNlcyA9IGxlbihjdXJyZW50X2luc3RhbmNlcykKICAgIHByaW50ICdGb3VuZCB7fSBleGlzdGluZyBlYzIgaW5zdGFuY2VzIHdpdGggdGFncyAie30iJy5mb3JtYXQobnVtRXhpc3RpbmdJbnN0YW5jZXMsIHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCgogICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQoY3VycmVudF9pbnN0YW5jZXMpCgogICAgaWYgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPCBAc2dnKCJNaW5Db3VudCIpOgogICAgICAgIGlmIG5vdCBwYXRoLmV4aXN0cygnYm9vdHN0cmFwLWVjMi5weScpOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24gKCdGaWxlIGJvb3RzdHJhcC1lYzIucHkgbm90IGZvdW5kJykKCiAgICAgICAgd2l0aCBvcGVuKCdib290c3RyYXAtZWMyLnB5JywgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICBkYXRhID0gZmlsZS5yZWFkKCkKCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3RlYW1JZF0nLCAnIkBzZ2coInRlYW1JZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQHNnZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBzZ2coInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBzZ2coIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBzZ2coInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQHNnZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQHNnZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBzZ2coQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAc2dnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBzZ2coSW1hZ2VJZCksIEBzZ2coS2V5TmFtZSksIEBzZ2coSW5zdGFuY2VUeXBlKSwgQHNnZyhTZWN1cml0eUdyb3VwSWRzKSwgQHNnZyhTdWJuZXRJZCksIEBzZ2coVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQHNnZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMjQKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgIyBwcmludCAncmVzIC0+ICcsIHJlcwogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRiZWF0VGltZSA9IHJlc1snZGF0YSddWzBdWydsYXN0SGVhcnRiZWF0VGltZSddCiAgICAgICAgICAgICAgICAgICAgIyBwcmludCAnbGFzdEhlYXJ0YmVhdFRpbWUgLT4gJywgbGFzdEhlYXJ0YmVhdFRpbWUKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBoYkR0ZSA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAobGFzdEhlYXJ0YmVhdFRpbWUvMTAwMCkKICAgICAgICAgICAgICAgICAgICAjIHByaW50ICdoYkR0ZSAtPiAnLCBoYkR0ZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICAjIHByaW50ICdkaWZmU2Vjb25kcyAtPiAnLCBkaWZmU2Vjb25kcywgJywgaW5hY3RpdmVQZXJpb2RXYWl0VGltZSAtPiBAc2dnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpLCBkaWZmU2Vjb25kcyAtPiAnLCBAc2dnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgaWYgZGlmZlNlY29uZHMgLSAgQHNnZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKSA8IC01OgogICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJy4uLmFnZW50IHt9IGlzIGluaXRpYWxpemluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKQHNncygiU0dSZXN0QXBpQ2FsbCIpCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnByaW50ICdAc2dve3sic2dBdXRoVG9rZW4iOiAie30ifX0nLmZvcm1hdCh0b2tlbikKCnRhZ3MgPSBqc29uLmxvYWRzKCdAc2dnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQpyZXN0Y21kID0gJ0BzZ2coInNnQXBpVXJsIikvYXBpL0BzZ2coImFnZW50TG9nc0FQSVZlcnNpb24iKS9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKQpwcmludCAncmVzdGNtZCAtPiAnLCByZXN0Y21kCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbChyZXN0Y21kLCAnR0VUJywge30pCnByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIGFnZW50UXVlcnkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBzZ2coInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQHNnZyhNaW5Db3VudCksIEBzZ2coTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBzZ2coTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAc2dnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBzZ2coTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBzZ2coInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAc2dnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BzZ2coTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQHNnZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","lastEditedDate":"2020-06-02T03:23:02.982Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed6dc9cae918d37ad199d8b","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"SGApiLogin","scriptType":0,"code":"aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCgoKdG9rZW4gPSAnJwoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ0BzZ2coInNnTG9naW5VcmwiKScKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQHNnZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BzZ2coInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgpwcmludCAnQHNnb3t7InNnQXV0aFRva2VuIjogInt9In19Jy5mb3JtYXQodG9rZW4p","shadowCopyCode":"aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBqc29uCgoKdG9rZW4gPSAnJwoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ0BzZ2coInNnTG9naW5VcmwiKScKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQHNnZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BzZ2coInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgpwcmludCAnQHNnb3t7InNnQXV0aFRva2VuIjogInt9In19Jy5mb3JtYXQodG9rZW4p","lastEditedDate":"2020-06-09T04:28:31.166Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5edf0fefff2d590015ac39fe","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IGNvbXByZXNzaW5nID0gcmVxdWlyZSgiY29tcHJlc3NpbmciKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKCkBzZ3MoIkd6aXBGaWxlLmpzIik7CgpAc2dzKCJNYWtlSWQuanMiKTsKCgpsZXQgZ2V0TmVzdGVkID0gKG9iaiwgLi4uYXJncykgPT4gewogICAgcmV0dXJuIGFyZ3MucmVkdWNlKChvYmosIGxldmVsKSA9PiBvYmogJiYgb2JqW2xldmVsXSwgb2JqKQp9CgoKbGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICB0ZWFtSWRzOiBbJ0BzZ2codGVhbUlkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAc2dnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQHNnZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKCiAgICByZXR1cm4gdG9rZW47Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQHNnZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAc2dnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQHNnZyhzZ0FwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAc2dnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX3RlYW1JZCI6ICJAc2dnKHRlYW1JZCkiLAogICAgICAgICJlbnYiOiAiQHNnZyhlbnZpcm9ubWVudCkiLAogICAgICAgICJsb2dEZXN0IjogIkBzZ2cobG9nRGVzdCkiCiAgICB9OwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Ac2dnKEtJS0lfR0lUX1VTRVJOQU1FKTpAc2dnKEtJS0lfR0lUX1BBU1NXT1JEKUBAc2dnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBzZ2coYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIHRhcmdldCArPSAnLUBzZ2coYXJjaCknOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIGxldCBhcmNoID0gJ0BzZ2coYXJjaCknOwogICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgIGFyY2ggPSAnJzsKCiAgICBsZXQgcGxhdGZvcm0gPSAnQHNnZyhwbGF0Zm9ybSknOwoKICAgIGNvbnN0IGFnZW50VmVyc2lvbk1vbmdvID0gJ0BzZ2coYWdlbnRWZXJzaW9uKScuc3BsaXQoJy4nKS5qb2luKCdfJyk7CgogICAgbGV0IHMzUGF0aCA9IGBhZ2VudC9wcm9kdWN0aW9uL0BzZ2codGVhbUlkKS8ke3BsYXRmb3JtfSR7YXJjaH0vQHNnZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnQuZ3pgOwoKICAgIGNvbnN0IGFnZW50SW5zdGFsbEtleSA9IGBhZ2VudF9pbnN0YWxsLiR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofWA7CiAgICBjb25zdCBzdGF0dXNLZXkgPSBgJHthZ2VudEluc3RhbGxLZXl9LnN0YXR1c2A7CiAgICAvLyBjb25zdCBsYXN0VXBkYXRlS2V5ID0gYCR7YWdlbnRJbnN0YWxsS2V5fS5sYXN0VXBkYXRlVGltZWA7CiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubG9jYXRpb25gOwogICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubWVzc2FnZWA7CgogICAgdHJ5IHsKICAgICAgICAvLyBsZXQgcnVuQnVpbGQgPSB0cnVlOwogICAgICAgIC8vIGxldCB0ZWFtU3RhdHVzUmVzID0gYXdhaXQgUmVzdEFQSUNhbGwoYHRlYW0vQHNnZygidGVhbUlkIik/cmVzcG9uc2VGaWVsZHM9JHtzdGF0dXNLZXl9YCwgJ0dFVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgbnVsbCk7CiAgICAgICAgLy8gaWYgKCdkYXRhJyBpbiB0ZWFtU3RhdHVzUmVzKSB7CiAgICAgICAgLy8gICAgIHRlYW1TdGF0dXNSZXMgPSB0ZWFtU3RhdHVzUmVzLmRhdGE7CiAgICAgICAgLy8gICAgIGlmICh0ZWFtU3RhdHVzUmVzLnN0YXR1c0NvZGUgPT0gMjAwKSB7CiAgICAgICAgLy8gICAgICAgICBsZXQgYWdlbnRTdGF0dXNJbmZvID0gZ2V0TmVzdGVkKHRlYW1TdGF0dXNSZXMsICdkYXRhJywgJ2FnZW50X2luc3RhbGwnLCBhZ2VudFZlcnNpb25Nb25nbywgYCR7cGxhdGZvcm19JHthcmNofWApOwogICAgICAgIC8vICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mbykgewogICAgICAgIC8vICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ2NyZWF0aW5nJykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNTaW5jZVN0YXJ0ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gYWdlbnRTdGF0dXNJbmZvWydsYXN0VXBkYXRlVGltZSddKSAvIDEwMDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc1NpbmNlU3RhcnQgPCBAc2dnKEFHRU5UX0NSRUFURV9USU1FT1VUKSkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFnZW50ICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBjdXJyZW50bHkgYnVpbGRpbmdgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdyZWFkeScpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWdlbnQgJHthZ2VudFZlcnNpb25Nb25nb30uJHtwbGF0Zm9ybX0ke2FyY2h9IGFscmVhZHkgY3JlYXRlZGApOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgfQogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBpZiAoIXJ1bkJ1aWxkKQogICAgICAgIC8vICAgICByZXR1cm47CgogICAgICAgIC8vIGxldCBkYXRhID0ge307CiAgICAgICAgLy8gZGF0YVtzdGF0dXNLZXldID0gJ2NyZWF0aW5nJzsKICAgICAgICAvLyBkYXRhW2xhc3RVcGRhdGVLZXldID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgLy8gZGF0YVtsb2NhdGlvbktleV0gPSBzM1BhdGg7CiAgICAgICAgLy8gbGV0IHRlYW1VcGRhdGVSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbCgndGVhbS9Ac2dnKCJ0ZWFtSWQiKScsICdQVVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIGRhdGEpOwoKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBjb21wcmVzc2VkRmlsZVBhdGggPSBhd2FpdCBHemlwRmlsZShvdXRGaWxlUGF0aCk7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKSc7CiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAnQHNnZygiQVdTX0FDQ0VTU19LRVlfSUQiKSc7CiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke2NvbXByZXNzZWRGaWxlUGF0aH0gczM6Ly9Ac2dnKCJTM19CVUNLRVRfQUdFTlRfQklOQVJJRVMiKS8ke3MzUGF0aH1gOwogICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgYWdlbnQgdG8gczM6ICR7Y21kfWApOwogICAgICAgIGxldCB1cGxvYWRSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CgogICAgICAgIGlmICh1cGxvYWRSZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gczM6ICR7dXBsb2FkUmVzLnN0ZGVycn1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgdXBsb2FkaW5nIGZpbGVgKTsKICAgICAgICB9CgogICAgICAgIGRhdGEgPSB7fTsKICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAicmVhZHkiOwogICAgICAgIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIGxldCBhcnIgPSBvdXRGaWxlUGF0aC5zcGxpdCgnLycpOwogICAgICAgIGNvbnN0IHdvcmtpbmdEaXJlY3RvcnkgPSAnLycgKyBhcnIuc2xpY2UoMSwgNCkuam9pbignLycpCiAgICAgICAgY29uc29sZS5sb2coYERlbGV0aW5nIHdvcmtpbmcgZGlyZWN0b3J5OiAke3dvcmtpbmdEaXJlY3Rvcnl9YCk7CiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMod29ya2luZ0RpcmVjdG9yeSkpCiAgICAgICAgICAgIGZzZS5yZW1vdmVTeW5jKHdvcmtpbmdEaXJlY3RvcnkpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAiZXJyb3IiOwogICAgICAgICAgICBkYXRhW21lc3NhZ2VLZXldID0gZXJyLm1lc3NhZ2U7CiAgICAgICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igc2VuZGluZyBlcnJvciBtZXNzYWdlIHRvIGFwaTogJHtlLm1lc3NhZ2V9IC0gJHtlLnN0YWNrfWApOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","shadowCopyCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IGNvbXByZXNzaW5nID0gcmVxdWlyZSgiY29tcHJlc3NpbmciKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKCkBzZ3MoIkd6aXBGaWxlLmpzIik7CgpAc2dzKCJNYWtlSWQuanMiKTsKCgpsZXQgZ2V0TmVzdGVkID0gKG9iaiwgLi4uYXJncykgPT4gewogICAgcmV0dXJuIGFyZ3MucmVkdWNlKChvYmosIGxldmVsKSA9PiBvYmogJiYgb2JqW2xldmVsXSwgb2JqKQp9CgoKbGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICB0ZWFtSWRzOiBbJ0BzZ2codGVhbUlkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAc2dnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQHNnZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKCiAgICByZXR1cm4gdG9rZW47Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQHNnZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAc2dnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQHNnZyhzZ0FwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAc2dnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX3RlYW1JZCI6ICJAc2dnKHRlYW1JZCkiLAogICAgICAgICJlbnYiOiAiQHNnZyhlbnZpcm9ubWVudCkiLAogICAgICAgICJsb2dEZXN0IjogIkBzZ2cobG9nRGVzdCkiCiAgICB9OwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Ac2dnKEtJS0lfR0lUX1VTRVJOQU1FKTpAc2dnKEtJS0lfR0lUX1BBU1NXT1JEKUBAc2dnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBzZ2coYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIHRhcmdldCArPSAnLUBzZ2coYXJjaCknOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIGxldCBhcmNoID0gJ0BzZ2coYXJjaCknOwogICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgIGFyY2ggPSAnJzsKCiAgICBsZXQgcGxhdGZvcm0gPSAnQHNnZyhwbGF0Zm9ybSknOwoKICAgIGNvbnN0IGFnZW50VmVyc2lvbk1vbmdvID0gJ0BzZ2coYWdlbnRWZXJzaW9uKScuc3BsaXQoJy4nKS5qb2luKCdfJyk7CgogICAgbGV0IHMzUGF0aCA9IGBhZ2VudC9wcm9kdWN0aW9uL0BzZ2codGVhbUlkKS8ke3BsYXRmb3JtfSR7YXJjaH0vQHNnZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnQuZ3pgOwoKICAgIGNvbnN0IGFnZW50SW5zdGFsbEtleSA9IGBhZ2VudF9pbnN0YWxsLiR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofWA7CiAgICBjb25zdCBzdGF0dXNLZXkgPSBgJHthZ2VudEluc3RhbGxLZXl9LnN0YXR1c2A7CiAgICAvLyBjb25zdCBsYXN0VXBkYXRlS2V5ID0gYCR7YWdlbnRJbnN0YWxsS2V5fS5sYXN0VXBkYXRlVGltZWA7CiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubG9jYXRpb25gOwogICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubWVzc2FnZWA7CgogICAgdHJ5IHsKICAgICAgICAvLyBsZXQgcnVuQnVpbGQgPSB0cnVlOwogICAgICAgIC8vIGxldCB0ZWFtU3RhdHVzUmVzID0gYXdhaXQgUmVzdEFQSUNhbGwoYHRlYW0vQHNnZygidGVhbUlkIik/cmVzcG9uc2VGaWVsZHM9JHtzdGF0dXNLZXl9YCwgJ0dFVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgbnVsbCk7CiAgICAgICAgLy8gaWYgKCdkYXRhJyBpbiB0ZWFtU3RhdHVzUmVzKSB7CiAgICAgICAgLy8gICAgIHRlYW1TdGF0dXNSZXMgPSB0ZWFtU3RhdHVzUmVzLmRhdGE7CiAgICAgICAgLy8gICAgIGlmICh0ZWFtU3RhdHVzUmVzLnN0YXR1c0NvZGUgPT0gMjAwKSB7CiAgICAgICAgLy8gICAgICAgICBsZXQgYWdlbnRTdGF0dXNJbmZvID0gZ2V0TmVzdGVkKHRlYW1TdGF0dXNSZXMsICdkYXRhJywgJ2FnZW50X2luc3RhbGwnLCBhZ2VudFZlcnNpb25Nb25nbywgYCR7cGxhdGZvcm19JHthcmNofWApOwogICAgICAgIC8vICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mbykgewogICAgICAgIC8vICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ2NyZWF0aW5nJykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNTaW5jZVN0YXJ0ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gYWdlbnRTdGF0dXNJbmZvWydsYXN0VXBkYXRlVGltZSddKSAvIDEwMDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc1NpbmNlU3RhcnQgPCBAc2dnKEFHRU5UX0NSRUFURV9USU1FT1VUKSkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFnZW50ICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBjdXJyZW50bHkgYnVpbGRpbmdgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdyZWFkeScpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWdlbnQgJHthZ2VudFZlcnNpb25Nb25nb30uJHtwbGF0Zm9ybX0ke2FyY2h9IGFscmVhZHkgY3JlYXRlZGApOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgfQogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBpZiAoIXJ1bkJ1aWxkKQogICAgICAgIC8vICAgICByZXR1cm47CgogICAgICAgIC8vIGxldCBkYXRhID0ge307CiAgICAgICAgLy8gZGF0YVtzdGF0dXNLZXldID0gJ2NyZWF0aW5nJzsKICAgICAgICAvLyBkYXRhW2xhc3RVcGRhdGVLZXldID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgLy8gZGF0YVtsb2NhdGlvbktleV0gPSBzM1BhdGg7CiAgICAgICAgLy8gbGV0IHRlYW1VcGRhdGVSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbCgndGVhbS9Ac2dnKCJ0ZWFtSWQiKScsICdQVVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIGRhdGEpOwoKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBjb21wcmVzc2VkRmlsZVBhdGggPSBhd2FpdCBHemlwRmlsZShvdXRGaWxlUGF0aCk7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKSc7CiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAnQHNnZygiQVdTX0FDQ0VTU19LRVlfSUQiKSc7CiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke2NvbXByZXNzZWRGaWxlUGF0aH0gczM6Ly9Ac2dnKCJTM19CVUNLRVRfQUdFTlRfQklOQVJJRVMiKS8ke3MzUGF0aH1gOwogICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgYWdlbnQgdG8gczM6ICR7Y21kfWApOwogICAgICAgIGxldCB1cGxvYWRSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CgogICAgICAgIGlmICh1cGxvYWRSZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gczM6ICR7dXBsb2FkUmVzLnN0ZGVycn1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgdXBsb2FkaW5nIGZpbGVgKTsKICAgICAgICB9CgogICAgICAgIGRhdGEgPSB7fTsKICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAicmVhZHkiOwogICAgICAgIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIGxldCBhcnIgPSBvdXRGaWxlUGF0aC5zcGxpdCgnLycpOwogICAgICAgIGNvbnN0IHdvcmtpbmdEaXJlY3RvcnkgPSAnLycgKyBhcnIuc2xpY2UoMSwgNCkuam9pbignLycpCiAgICAgICAgY29uc29sZS5sb2coYERlbGV0aW5nIHdvcmtpbmcgZGlyZWN0b3J5OiAke3dvcmtpbmdEaXJlY3Rvcnl9YCk7CiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMod29ya2luZ0RpcmVjdG9yeSkpCiAgICAgICAgICAgIGZzZS5yZW1vdmVTeW5jKHdvcmtpbmdEaXJlY3RvcnkpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAiZXJyb3IiOwogICAgICAgICAgICBkYXRhW21lc3NhZ2VLZXldID0gZXJyLm1lc3NhZ2U7CiAgICAgICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igc2VuZGluZyBlcnJvciBtZXNzYWdlIHRvIGFwaTogJHtlLm1lc3NhZ2V9IC0gJHtlLnN0YWNrfWApOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","lastEditedDate":"2020-06-02T23:20:50.951Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed6ded2759b110015403b73","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNzCm5wbSBpIGF4aW9zCm5wbSBpIGNvbXByZXNzaW5n","shadowCopyCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNzCm5wbSBpIGF4aW9zCm5wbSBpIGNvbXByZXNzaW5n","lastEditedDate":"2020-06-03T20:31:58.476Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed808be2a8c780015a48866","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"BuildSaasglueAgentStub","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IGNvbXByZXNzaW5nID0gcmVxdWlyZSgiY29tcHJlc3NpbmciKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKCkBzZ3MoIkd6aXBGaWxlLmpzIik7CgpAc2dzKCJNYWtlSWQuanMiKTsKCgpsZXQgZ2V0TmVzdGVkID0gKG9iaiwgLi4uYXJncykgPT4gewogICAgcmV0dXJuIGFyZ3MucmVkdWNlKChvYmosIGxldmVsKSA9PiBvYmogJiYgb2JqW2xldmVsXSwgb2JqKQp9CgoKbGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICB0ZWFtSWRzOiBbJ0BzZ2codGVhbUlkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAc2dnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQHNnZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKCiAgICByZXR1cm4gdG9rZW47Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudC1sYXVuY2hlciIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IGxhdW5jaGVyIiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgIGlmIChudWxsICE9IEBzZ2coYXBpUG9ydCkpCiAgICBhcGlQb3J0ID0gQHNnZyhhcGlQb3J0KTsKICAgIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVUb2tlbigpOwoKICAgIGxldCBhcmNoID0gJyc7CiAgICBpZiAoJ251bGwnICE9ICdAc2dnKGFyY2gpJykKICAgICAgICBhcmNoID0gJ0BzZ2coYXJjaCknOwoKICAgIGxldCBjZmdfanNvbiA9IHsKICAgICAgICAiX3RlYW1JZCI6ICJAc2dnKHRlYW1JZCkiLAogICAgICAgICJhcGlVcmwiOiAiQHNnZyhzZ0FwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAc2dnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiYWdlbnRQbGF0Zm9ybSI6ICJAc2dnKHBsYXRmb3JtKSIsCiAgICAgICAgImFnZW50QXJjaCI6IGFyY2gsCiAgICAgICAgImVudiI6ICJAc2dnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQHNnZyhsb2dEZXN0KSIKICAgIH07CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1zdHViLWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQHNnZyhLSUtJX0dJVF9VU0VSTkFNRSk6QHNnZyhLSUtJX0dJVF9QQVNTV09SRClAQHNnZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAc2dnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG8gIiR7Y21kQ2xvbmV9YCk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudF9zdHViYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIHRhcmdldCArPSAnLUBzZ2coYXJjaCknOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudFN0dWIuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnQtbGF1bmNoZXJgOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBsZXQgYXJjaCA9ICdAc2dnKGFyY2gpJzsKICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICBhcmNoID0gJyc7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKCiAgICBjb25zdCBhZ2VudFZlcnNpb25Nb25nbyA9ICdAc2dnKGFnZW50VmVyc2lvbiknLnNwbGl0KCcuJykuam9pbignXycpOwoKICAgIGxldCBzM1BhdGggPSBgYWdlbnQtc3R1Yi9wcm9kdWN0aW9uL0BzZ2codGVhbUlkKS8ke3BsYXRmb3JtfSR7YXJjaH0vQHNnZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnQtbGF1bmNoZXIuZ3pgOwoKICAgIGNvbnN0IGFnZW50U3R1Ykluc3RhbGxLZXkgPSBgYWdlbnRfc3R1Yl9pbnN0YWxsLiR7cGxhdGZvcm19JHthcmNofWA7CiAgICBjb25zdCBzdGF0dXNLZXkgPSBgJHthZ2VudFN0dWJJbnN0YWxsS2V5fS5zdGF0dXNgOwogICAgLy8gY29uc3QgbGFzdFVwZGF0ZUtleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9Lmxhc3RVcGRhdGVUaW1lYDsKICAgIGNvbnN0IG1lc3NhZ2VLZXkgPSBgJHthZ2VudFN0dWJJbnN0YWxsS2V5fS5lcnJvcmA7CiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9LmxvY2F0aW9uYDsKCiAgICB0cnkgewogICAgICAgIC8vIGxldCBydW5CdWlsZCA9IHRydWU7CiAgICAgICAgLy8gbGV0IHRlYW1TdGF0dXNSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbChgdGVhbS9Ac2dnKCJ0ZWFtSWQiKT9yZXNwb25zZUZpZWxkcz0ke3N0YXR1c0tleX1gLCAnR0VUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBudWxsKTsKICAgICAgICAvLyBpZiAoJ2RhdGEnIGluIHRlYW1TdGF0dXNSZXMpIHsKICAgICAgICAvLyAgICAgdGVhbVN0YXR1c1JlcyA9IHRlYW1TdGF0dXNSZXMuZGF0YTsKICAgICAgICAvLyAgICAgaWYgKHRlYW1TdGF0dXNSZXMuc3RhdHVzQ29kZSA9PSAyMDApIHsKICAgICAgICAvLyAgICAgICAgIGxldCBhZ2VudFN0YXR1c0luZm8gPSBnZXROZXN0ZWQodGVhbVN0YXR1c1JlcywgJ2RhdGEnLCAnYWdlbnRfc3R1Yl9pbnN0YWxsJywgYWdlbnRWZXJzaW9uTW9uZ28sIGAke3BsYXRmb3JtfSR7YXJjaH1gKTsKICAgICAgICAvLyAgICAgICAgIGlmIChhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICBpZiAoJ3N0YXR1cycgaW4gYWdlbnRTdGF0dXNJbmZvKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdjcmVhdGluZycpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzU2luY2VTdGFydCA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGFnZW50U3RhdHVzSW5mb1snbGFzdFVwZGF0ZVRpbWUnXSkgLyAxMDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZHNTaW5jZVN0YXJ0IDwgQHNnZyhBR0VOVF9DUkVBVEVfVElNRU9VVCkpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBydW5CdWlsZCA9IGZhbHNlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZ2VudCBTdHViICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBjdXJyZW50bHkgYnVpbGRpbmdgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdyZWFkeScpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWdlbnQgU3R1YiAke2FnZW50VmVyc2lvbk1vbmdvfS4ke3BsYXRmb3JtfSR7YXJjaH0gYWxyZWFkeSBjcmVhdGVkYCk7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgLy8gICAgIH0KICAgICAgICAvLyB9CgogICAgICAgIC8vIGlmICghcnVuQnVpbGQpCiAgICAgICAgLy8gICAgIHJldHVybjsKCiAgICAgICAgLy8gbGV0IGRhdGEgPSB7fTsKICAgICAgICAvLyBkYXRhW3N0YXR1c0tleV0gPSAnY3JlYXRpbmcnOwogICAgICAgIC8vIGRhdGFbbGFzdFVwZGF0ZUtleV0gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAvLyBkYXRhW2xvY2F0aW9uS2V5XSA9IHMzUGF0aDsKICAgICAgICAvLyBsZXQgdGVhbVVwZGF0ZVJlcyA9IGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGNvbXByZXNzZWRGaWxlUGF0aDsKICAgICAgICBjb21wcmVzc2VkRmlsZVBhdGggPSBhd2FpdCBHemlwRmlsZShvdXRGaWxlUGF0aCk7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKSc7CiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAnQHNnZygiQVdTX0FDQ0VTU19LRVlfSUQiKSc7CiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke2NvbXByZXNzZWRGaWxlUGF0aH0gczM6Ly9Ac2dnKCJTM19CVUNLRVRfQUdFTlRfQklOQVJJRVMiKS8ke3MzUGF0aH1gOwogICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgYWdlbnQgdG8gczM6ICR7Y21kfWApOwogICAgICAgIGxldCB1cGxvYWRSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CgogICAgICAgIGlmICh1cGxvYWRSZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gczM6ICR7dXBsb2FkUmVzLnN0ZGVycn1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgdXBsb2FkaW5nIGZpbGVgKTsKICAgICAgICB9CgogICAgICAgIGRhdGEgPSB7fTsKICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAicmVhZHkiOwogICAgICAgIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIGxldCBhcnIgPSBvdXRGaWxlUGF0aC5zcGxpdCgnLycpOwogICAgICAgIGNvbnN0IHdvcmtpbmdEaXJlY3RvcnkgPSAnLycgKyBhcnIuc2xpY2UoMSwgNCkuam9pbignLycpOwogICAgICAgIGNvbnNvbGUubG9nKGBEZWxldGluZyB3b3JraW5nIGRpcmVjdG9yeTogJHt3b3JraW5nRGlyZWN0b3J5fWApOwogICAgICAgIGlmIChmcy5leGlzdHNTeW5jKHdvcmtpbmdEaXJlY3RvcnkpKQogICAgICAgICAgICBmc2UucmVtb3ZlU3luYyh3b3JraW5nRGlyZWN0b3J5KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBvY2N1cnJlZCBidWlsZGluZyBzYWFzIGdsdWUgYWdlbnQgc3R1YjogJHtlcnJ9YCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAiZXJyb3IiOwogICAgICAgICAgICBkYXRhW21lc3NhZ2VLZXldID0gZXJyLm1lc3NhZ2U7CiAgICAgICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igc2VuZGluZyBlcnJvciBtZXNzYWdlIHRvIGFwaTogJHtlLm1lc3NhZ2V9IC0gJHtlLnN0YWNrfWApOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","shadowCopyCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IGNvbXByZXNzaW5nID0gcmVxdWlyZSgiY29tcHJlc3NpbmciKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKCkBzZ3MoIkd6aXBGaWxlLmpzIik7CgpAc2dzKCJNYWtlSWQuanMiKTsKCgpsZXQgZ2V0TmVzdGVkID0gKG9iaiwgLi4uYXJncykgPT4gewogICAgcmV0dXJuIGFyZ3MucmVkdWNlKChvYmosIGxldmVsKSA9PiBvYmogJiYgb2JqW2xldmVsXSwgb2JqKQp9CgoKbGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICB0ZWFtSWRzOiBbJ0BzZ2codGVhbUlkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAc2dnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQHNnZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKCiAgICByZXR1cm4gdG9rZW47Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudC1sYXVuY2hlciIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IGxhdW5jaGVyIiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgIGlmIChudWxsICE9IEBzZ2coYXBpUG9ydCkpCiAgICBhcGlQb3J0ID0gQHNnZyhhcGlQb3J0KTsKICAgIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVUb2tlbigpOwoKICAgIGxldCBhcmNoID0gJyc7CiAgICBpZiAoJ251bGwnICE9ICdAc2dnKGFyY2gpJykKICAgICAgICBhcmNoID0gJ0BzZ2coYXJjaCknOwoKICAgIGxldCBjZmdfanNvbiA9IHsKICAgICAgICAiX3RlYW1JZCI6ICJAc2dnKHRlYW1JZCkiLAogICAgICAgICJhcGlVcmwiOiAiQHNnZyhzZ0FwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAc2dnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiYWdlbnRQbGF0Zm9ybSI6ICJAc2dnKHBsYXRmb3JtKSIsCiAgICAgICAgImFnZW50QXJjaCI6IGFyY2gsCiAgICAgICAgImVudiI6ICJAc2dnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQHNnZyhsb2dEZXN0KSIKICAgIH07CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1zdHViLWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQHNnZyhLSUtJX0dJVF9VU0VSTkFNRSk6QHNnZyhLSUtJX0dJVF9QQVNTV09SRClAQHNnZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAc2dnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG8gIiR7Y21kQ2xvbmV9YCk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudF9zdHViYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIHRhcmdldCArPSAnLUBzZ2coYXJjaCknOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudFN0dWIuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnQtbGF1bmNoZXJgOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBsZXQgYXJjaCA9ICdAc2dnKGFyY2gpJzsKICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICBhcmNoID0gJyc7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKCiAgICBjb25zdCBhZ2VudFZlcnNpb25Nb25nbyA9ICdAc2dnKGFnZW50VmVyc2lvbiknLnNwbGl0KCcuJykuam9pbignXycpOwoKICAgIGxldCBzM1BhdGggPSBgYWdlbnQtc3R1Yi9wcm9kdWN0aW9uL0BzZ2codGVhbUlkKS8ke3BsYXRmb3JtfSR7YXJjaH0vQHNnZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnQtbGF1bmNoZXIuZ3pgOwoKICAgIGNvbnN0IGFnZW50U3R1Ykluc3RhbGxLZXkgPSBgYWdlbnRfc3R1Yl9pbnN0YWxsLiR7cGxhdGZvcm19JHthcmNofWA7CiAgICBjb25zdCBzdGF0dXNLZXkgPSBgJHthZ2VudFN0dWJJbnN0YWxsS2V5fS5zdGF0dXNgOwogICAgLy8gY29uc3QgbGFzdFVwZGF0ZUtleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9Lmxhc3RVcGRhdGVUaW1lYDsKICAgIGNvbnN0IG1lc3NhZ2VLZXkgPSBgJHthZ2VudFN0dWJJbnN0YWxsS2V5fS5lcnJvcmA7CiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9LmxvY2F0aW9uYDsKCiAgICB0cnkgewogICAgICAgIC8vIGxldCBydW5CdWlsZCA9IHRydWU7CiAgICAgICAgLy8gbGV0IHRlYW1TdGF0dXNSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbChgdGVhbS9Ac2dnKCJ0ZWFtSWQiKT9yZXNwb25zZUZpZWxkcz0ke3N0YXR1c0tleX1gLCAnR0VUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBudWxsKTsKICAgICAgICAvLyBpZiAoJ2RhdGEnIGluIHRlYW1TdGF0dXNSZXMpIHsKICAgICAgICAvLyAgICAgdGVhbVN0YXR1c1JlcyA9IHRlYW1TdGF0dXNSZXMuZGF0YTsKICAgICAgICAvLyAgICAgaWYgKHRlYW1TdGF0dXNSZXMuc3RhdHVzQ29kZSA9PSAyMDApIHsKICAgICAgICAvLyAgICAgICAgIGxldCBhZ2VudFN0YXR1c0luZm8gPSBnZXROZXN0ZWQodGVhbVN0YXR1c1JlcywgJ2RhdGEnLCAnYWdlbnRfc3R1Yl9pbnN0YWxsJywgYWdlbnRWZXJzaW9uTW9uZ28sIGAke3BsYXRmb3JtfSR7YXJjaH1gKTsKICAgICAgICAvLyAgICAgICAgIGlmIChhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICBpZiAoJ3N0YXR1cycgaW4gYWdlbnRTdGF0dXNJbmZvKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdjcmVhdGluZycpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzU2luY2VTdGFydCA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGFnZW50U3RhdHVzSW5mb1snbGFzdFVwZGF0ZVRpbWUnXSkgLyAxMDAwOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZHNTaW5jZVN0YXJ0IDwgQHNnZyhBR0VOVF9DUkVBVEVfVElNRU9VVCkpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBydW5CdWlsZCA9IGZhbHNlOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZ2VudCBTdHViICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBjdXJyZW50bHkgYnVpbGRpbmdgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdyZWFkeScpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWdlbnQgU3R1YiAke2FnZW50VmVyc2lvbk1vbmdvfS4ke3BsYXRmb3JtfSR7YXJjaH0gYWxyZWFkeSBjcmVhdGVkYCk7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgLy8gICAgIH0KICAgICAgICAvLyB9CgogICAgICAgIC8vIGlmICghcnVuQnVpbGQpCiAgICAgICAgLy8gICAgIHJldHVybjsKCiAgICAgICAgLy8gbGV0IGRhdGEgPSB7fTsKICAgICAgICAvLyBkYXRhW3N0YXR1c0tleV0gPSAnY3JlYXRpbmcnOwogICAgICAgIC8vIGRhdGFbbGFzdFVwZGF0ZUtleV0gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAvLyBkYXRhW2xvY2F0aW9uS2V5XSA9IHMzUGF0aDsKICAgICAgICAvLyBsZXQgdGVhbVVwZGF0ZVJlcyA9IGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGNvbXByZXNzZWRGaWxlUGF0aDsKICAgICAgICBjb21wcmVzc2VkRmlsZVBhdGggPSBhd2FpdCBHemlwRmlsZShvdXRGaWxlUGF0aCk7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKSc7CiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAnQHNnZygiQVdTX0FDQ0VTU19LRVlfSUQiKSc7CiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke2NvbXByZXNzZWRGaWxlUGF0aH0gczM6Ly9Ac2dnKCJTM19CVUNLRVRfQUdFTlRfQklOQVJJRVMiKS8ke3MzUGF0aH1gOwogICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgYWdlbnQgdG8gczM6ICR7Y21kfWApOwogICAgICAgIGxldCB1cGxvYWRSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CgogICAgICAgIGlmICh1cGxvYWRSZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gczM6ICR7dXBsb2FkUmVzLnN0ZGVycn1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgdXBsb2FkaW5nIGZpbGVgKTsKICAgICAgICB9CgogICAgICAgIGRhdGEgPSB7fTsKICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAicmVhZHkiOwogICAgICAgIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIGxldCBhcnIgPSBvdXRGaWxlUGF0aC5zcGxpdCgnLycpOwogICAgICAgIGNvbnN0IHdvcmtpbmdEaXJlY3RvcnkgPSAnLycgKyBhcnIuc2xpY2UoMSwgNCkuam9pbignLycpOwogICAgICAgIGNvbnNvbGUubG9nKGBEZWxldGluZyB3b3JraW5nIGRpcmVjdG9yeTogJHt3b3JraW5nRGlyZWN0b3J5fWApOwogICAgICAgIGlmIChmcy5leGlzdHNTeW5jKHdvcmtpbmdEaXJlY3RvcnkpKQogICAgICAgICAgICBmc2UucmVtb3ZlU3luYyh3b3JraW5nRGlyZWN0b3J5KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBvY2N1cnJlZCBidWlsZGluZyBzYWFzIGdsdWUgYWdlbnQgc3R1YjogJHtlcnJ9YCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF0YSA9IHt9OwogICAgICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAiZXJyb3IiOwogICAgICAgICAgICBkYXRhW21lc3NhZ2VLZXldID0gZXJyLm1lc3NhZ2U7CiAgICAgICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igc2VuZGluZyBlcnJvciBtZXNzYWdlIHRvIGFwaTogJHtlLm1lc3NhZ2V9IC0gJHtlLnN0YWNrfWApOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","lastEditedDate":"2020-06-11T22:26:52.710Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ee2afacbd2c5a0015991f9f","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"DeleteJobsDataForTeam","scriptType":1,"code":"InVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoKY29uc3QgTW9uZ29MaWJfMSA9IHJlcXVpcmUoIi4vTW9uZ29MaWIiKTsKY29uc3QgbW9uZ29kYiA9IHJlcXVpcmUoIm1vbmdvZGIiKTsKCmxldCBEZWxldGVUZWFtSm9iRGF0YSA9IGFzeW5jICh0ZWFtSWQpID0+IHsKICAgIGNvbnN0IG1vbmdvVXJsID0gJ0BzZ2cobW9uZ29VcmwpJzsKICAgIGNvbnN0IG1vbmdvRGJuYW1lID0gJ0BzZ2cobW9uZ29EYk5hbWUpJzsKCiAgICBsZXQgbW9uZ29SZXBvID0gbmV3IE1vbmdvTGliXzEuTW9uZ29SZXBvKCdEZWxldGVKb2JzRGF0YUZvclRlYW0nLCBtb25nb1VybCwgbW9uZ29EYm5hbWUpOwoKICAgIGxldCByZXM7CgogICAgY29uc3Qgam9icyA9IGF3YWl0IG1vbmdvUmVwby5HZXRNYW55QnlRdWVyeSh7CiAgICAgICAgJ190ZWFtSWQnOiBuZXcgbW9uZ29kYi5PYmplY3RJZCh0ZWFtSWQpCiAgICB9LCAnam9iJyk7CiAgICBmb3IgKGxldCBqb2Igb2Ygam9icykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdqb2IgLT4gJywgSlNPTi5zdHJpbmdpZnkoam9iLCBudWxsLCA0KSk7CiAgICAgICAgaWYgKGpvYi5uYW1lID09ICdJbml0aWFsaXplIERlbW8nICYmIGpvYi5zdGF0dXMgPT0gMTApCiAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBjb25zdCBmaWx0ZXIgPSB7ICJfam9iSWQiOiBuZXcgbW9uZ29kYi5PYmplY3RJZChqb2IuX2lkKSB9OwoKICAgICAgICByZXMgPSBhd2FpdCBtb25nb1JlcG8uRGVsZXRlQnlRdWVyeShmaWx0ZXIsICdzdGVwT3V0Y29tZScpOwogICAgICAgIGNvbnNvbGUubG9nKGBkZWxldGVkICR7cmVzfSBzdGVwT3V0Y29tZXNgKTsKCiAgICAgICAgcmVzID0gYXdhaXQgbW9uZ29SZXBvLkRlbGV0ZUJ5UXVlcnkoZmlsdGVyLCAndGFza091dGNvbWUnKTsKICAgICAgICBjb25zb2xlLmxvZyhgZGVsZXRlZCAke3Jlc30gdGFza091dGNvbWVzYCk7CgogICAgICAgIHJlcyA9IGF3YWl0IG1vbmdvUmVwby5EZWxldGVCeVF1ZXJ5KGZpbHRlciwgJ3N0ZXAnKTsKICAgICAgICBjb25zb2xlLmxvZyhgZGVsZXRlZCAke3Jlc30gc3RlcHNgKTsKCiAgICAgICAgcmVzID0gYXdhaXQgbW9uZ29SZXBvLkRlbGV0ZUJ5UXVlcnkoZmlsdGVyLCAndGFzaycpOwogICAgICAgIGNvbnNvbGUubG9nKGBkZWxldGVkICR7cmVzfSB0YXNrc2ApOwoKICAgICAgICByZXMgPSBhd2FpdCBtb25nb1JlcG8uRGVsZXRlQnlRdWVyeSh7ICJfaWQiOiBuZXcgbW9uZ29kYi5PYmplY3RJZChqb2IuX2lkKSB9LCAnam9iJyk7CiAgICAgICAgY29uc29sZS5sb2coYGRlbGV0ZWQgJHtyZXN9IGpvYnNgKTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygnZG9uZSBkZWxldGluZyBqb2JzJyk7CgogICAgcmVzID0gYXdhaXQgbW9uZ29SZXBvLlVwZGF0ZU1hbnkoJ2pvYkRlZicsIHsgJ190ZWFtSWQnOiBuZXcgbW9uZ29kYi5PYmplY3RJZCh0ZWFtSWQpIH0sIHsgJHNldDogeyBsYXN0UnVuSWQ6IDAgfSB9KTsKICAgIGlmIChyZXMucmVzdWx0ICYmIHJlcy5yZXN1bHQubk1vZGlmaWVkKQogICAgICAgIGNvbnNvbGUubG9nKGB1cGRhdGVkICR7cmVzLnJlc3VsdC5uTW9kaWZpZWR9IGpvYkRlZnNgKTsKCiAgICBjb25zb2xlLmxvZygnZG9uZSB1cGRhdGluZyBqb2IgZGVmcycpOwp9OwoKY29uc3QgdGVhbUlkID0gJ0BzZ2codGVhbUlkKSc7CmlmICh0ZWFtSWQgPT0gJ251bGwnKSB7CiAgICBjb25zb2xlLmxvZyhgdGVhbUlkIHJ1bnRpbWUgdmFyIGlzIG1pc3NpbmcgLSBub3RoaW5nIHRvIGRvYCk7CiAgICBwcm9jZXNzLmV4aXQoKTsKfQoKKGFzeW5jICgpID0+IHsKICAgIGF3YWl0IERlbGV0ZVRlYW1Kb2JEYXRhKHRlYW1JZCk7CiAgICBwcm9jZXNzLmV4aXQoKTsKfSkoKTsK","shadowCopyCode":"InVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoKY29uc3QgTW9uZ29MaWJfMSA9IHJlcXVpcmUoIi4vTW9uZ29MaWIiKTsKY29uc3QgbW9uZ29kYiA9IHJlcXVpcmUoIm1vbmdvZGIiKTsKCmxldCBEZWxldGVUZWFtSm9iRGF0YSA9IGFzeW5jICh0ZWFtSWQpID0+IHsKICAgIGNvbnN0IG1vbmdvVXJsID0gJ0BzZ2cobW9uZ29VcmwpJzsKICAgIGNvbnN0IG1vbmdvRGJuYW1lID0gJ0BzZ2cobW9uZ29EYk5hbWUpJzsKCiAgICBsZXQgbW9uZ29SZXBvID0gbmV3IE1vbmdvTGliXzEuTW9uZ29SZXBvKCdEZWxldGVKb2JzRGF0YUZvclRlYW0nLCBtb25nb1VybCwgbW9uZ29EYm5hbWUpOwoKICAgIGxldCByZXM7CgogICAgY29uc3Qgam9icyA9IGF3YWl0IG1vbmdvUmVwby5HZXRNYW55QnlRdWVyeSh7CiAgICAgICAgJ190ZWFtSWQnOiBuZXcgbW9uZ29kYi5PYmplY3RJZCh0ZWFtSWQpCiAgICB9LCAnam9iJyk7CiAgICBmb3IgKGxldCBqb2Igb2Ygam9icykgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdqb2IgLT4gJywgSlNPTi5zdHJpbmdpZnkoam9iLCBudWxsLCA0KSk7CiAgICAgICAgaWYgKGpvYi5uYW1lID09ICdJbml0aWFsaXplIERlbW8nICYmIGpvYi5zdGF0dXMgPT0gMTApCiAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBjb25zdCBmaWx0ZXIgPSB7ICJfam9iSWQiOiBuZXcgbW9uZ29kYi5PYmplY3RJZChqb2IuX2lkKSB9OwoKICAgICAgICByZXMgPSBhd2FpdCBtb25nb1JlcG8uRGVsZXRlQnlRdWVyeShmaWx0ZXIsICdzdGVwT3V0Y29tZScpOwogICAgICAgIGNvbnNvbGUubG9nKGBkZWxldGVkICR7cmVzfSBzdGVwT3V0Y29tZXNgKTsKCiAgICAgICAgcmVzID0gYXdhaXQgbW9uZ29SZXBvLkRlbGV0ZUJ5UXVlcnkoZmlsdGVyLCAndGFza091dGNvbWUnKTsKICAgICAgICBjb25zb2xlLmxvZyhgZGVsZXRlZCAke3Jlc30gdGFza091dGNvbWVzYCk7CgogICAgICAgIHJlcyA9IGF3YWl0IG1vbmdvUmVwby5EZWxldGVCeVF1ZXJ5KGZpbHRlciwgJ3N0ZXAnKTsKICAgICAgICBjb25zb2xlLmxvZyhgZGVsZXRlZCAke3Jlc30gc3RlcHNgKTsKCiAgICAgICAgcmVzID0gYXdhaXQgbW9uZ29SZXBvLkRlbGV0ZUJ5UXVlcnkoZmlsdGVyLCAndGFzaycpOwogICAgICAgIGNvbnNvbGUubG9nKGBkZWxldGVkICR7cmVzfSB0YXNrc2ApOwoKICAgICAgICByZXMgPSBhd2FpdCBtb25nb1JlcG8uRGVsZXRlQnlRdWVyeSh7ICJfaWQiOiBuZXcgbW9uZ29kYi5PYmplY3RJZChqb2IuX2lkKSB9LCAnam9iJyk7CiAgICAgICAgY29uc29sZS5sb2coYGRlbGV0ZWQgJHtyZXN9IGpvYnNgKTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygnZG9uZSBkZWxldGluZyBqb2JzJyk7CgogICAgcmVzID0gYXdhaXQgbW9uZ29SZXBvLlVwZGF0ZU1hbnkoJ2pvYkRlZicsIHsgJ190ZWFtSWQnOiBuZXcgbW9uZ29kYi5PYmplY3RJZCh0ZWFtSWQpIH0sIHsgJHNldDogeyBsYXN0UnVuSWQ6IDAgfSB9KTsKICAgIGlmIChyZXMucmVzdWx0ICYmIHJlcy5yZXN1bHQubk1vZGlmaWVkKQogICAgICAgIGNvbnNvbGUubG9nKGB1cGRhdGVkICR7cmVzLnJlc3VsdC5uTW9kaWZpZWR9IGpvYkRlZnNgKTsKCiAgICBjb25zb2xlLmxvZygnZG9uZSB1cGRhdGluZyBqb2IgZGVmcycpOwp9OwoKY29uc3QgdGVhbUlkID0gJ0BzZ2codGVhbUlkKSc7CmlmICh0ZWFtSWQgPT0gJ251bGwnKSB7CiAgICBjb25zb2xlLmxvZyhgdGVhbUlkIHJ1bnRpbWUgdmFyIGlzIG1pc3NpbmcgLSBub3RoaW5nIHRvIGRvYCk7CiAgICBwcm9jZXNzLmV4aXQoKTsKfQoKKGFzeW5jICgpID0+IHsKICAgIGF3YWl0IERlbGV0ZVRlYW1Kb2JEYXRhKHRlYW1JZCk7CiAgICBwcm9jZXNzLmV4aXQoKTsKfSkoKTsK","lastEditedDate":"2020-06-16T03:37:38.380Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ee83e82f84dd600157d5672","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"SGRestApiCall","scriptType":0,"code":"ZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfdGVhbUlkJzogJ0BzZ2coInNnVGVhbUlkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIHByaW50ICdoZWFkZXJzIC0+ICcsIGhlYWRlcnMKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX3RlYW1JZCc6ICdAc2dnKCJzZ1RlYW1JZCIpJywgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXg=","shadowCopyCode":"ZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfdGVhbUlkJzogJ0BzZ2coInNnVGVhbUlkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIHByaW50ICdoZWFkZXJzIC0+ICcsIGhlYWRlcnMKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX3RlYW1JZCc6ICdAc2dnKCJzZ1RlYW1JZCIpJywgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXg=","lastEditedDate":"2020-06-20T19:29:28.606Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5eee63989fdaad001513ca07","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"GzipFile.js","scriptType":1,"code":"bGV0IEd6aXBGaWxlID0gYXN5bmMgKGZpbGVQYXRoKSA9PiB7CiAgICBjb25zdCBjb21wcmVzc2VkRmlsZVBhdGggPSBmaWxlUGF0aCArICIuZ3oiOwogICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbXByZXNzaW5nLmd6aXAuY29tcHJlc3NGaWxlKGZpbGVQYXRoLCBjb21wcmVzc2VkRmlsZVBhdGgpCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgcmVzb2x2ZSgpOyB9KQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4geyByZWplY3QoZXJyKTsgfSk7CiAgICB9KTsKICAgIHJldHVybiBjb21wcmVzc2VkRmlsZVBhdGg7Cn07","shadowCopyCode":"bGV0IEd6aXBGaWxlID0gYXN5bmMgKGZpbGVQYXRoKSA9PiB7CiAgICBjb25zdCBjb21wcmVzc2VkRmlsZVBhdGggPSBmaWxlUGF0aCArICIuZ3oiOwogICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbXByZXNzaW5nLmd6aXAuY29tcHJlc3NGaWxlKGZpbGVQYXRoLCBjb21wcmVzc2VkRmlsZVBhdGgpCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgcmVzb2x2ZSgpOyB9KQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4geyByZWplY3QoZXJyKTsgfSk7CiAgICB9KTsKICAgIHJldHVybiBjb21wcmVzc2VkRmlsZVBhdGg7Cn07","lastEditedDate":"2020-06-25T22:21:13.168Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ef5235932acde00153e6249","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"MakeId.js","scriptType":1,"code":"bGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQ==","shadowCopyCode":"bGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQ==","lastEditedDate":"2020-06-25T22:22:08.039Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ef5239032acde00153e624a","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"ZipFile.js","scriptType":1,"code":"QHNncygiQ2hhbmdlRmlsZUV4dC5qcyIpOwoKCmxldCBaaXBGaWxlID0gKGZpbGVQYXRoKSA9PiB7CiAgICBjb25zdCBjb21wcmVzc2VkRmlsZVBhdGggPSBDaGFuZ2VGaWxlRXh0KGZpbGVQYXRoLCAiemlwIik7CiAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpOwogICAgemlwLmZpbGUoZmlsZU5hbWUsIGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCkpOwogICAgY29uc3QgZGF0YSA9IHppcC5nZW5lcmF0ZSh7IGJhc2U2NDogZmFsc2UsIGNvbXByZXNzaW9uOiAnREVGTEFURScgfSk7CiAgICBmcy53cml0ZUZpbGVTeW5jKGNvbXByZXNzZWRGaWxlUGF0aCwgZGF0YSwgJ2JpbmFyeScpOwogICAgcmV0dXJuIGNvbXByZXNzZWRGaWxlUGF0aDsKfTs=","shadowCopyCode":"QHNncygiQ2hhbmdlRmlsZUV4dC5qcyIpOwoKCmxldCBaaXBGaWxlID0gKGZpbGVQYXRoKSA9PiB7CiAgICBjb25zdCBjb21wcmVzc2VkRmlsZVBhdGggPSBDaGFuZ2VGaWxlRXh0KGZpbGVQYXRoLCAiemlwIik7CiAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpOwogICAgemlwLmZpbGUoZmlsZU5hbWUsIGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCkpOwogICAgY29uc3QgZGF0YSA9IHppcC5nZW5lcmF0ZSh7IGJhc2U2NDogZmFsc2UsIGNvbXByZXNzaW9uOiAnREVGTEFURScgfSk7CiAgICBmcy53cml0ZUZpbGVTeW5jKGNvbXByZXNzZWRGaWxlUGF0aCwgZGF0YSwgJ2JpbmFyeScpOwogICAgcmV0dXJuIGNvbXByZXNzZWRGaWxlUGF0aDsKfTs=","lastEditedDate":"2020-06-25T22:22:47.533Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ef523b732acde00153e624b","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"ChangeFileExt.js","scriptType":1,"code":"bGV0IENoYW5nZUZpbGVFeHQgPSAoZmlsZVBhdGgsIGV4dCkgPT4gewogICAgY29uc3QgaW5kZXggPSBmaWxlUGF0aC5sYXN0SW5kZXhPZigiLiIpOwogICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGlmIChleHQgPT0gJycpCiAgICAgICAgICAgIHJldHVybiBmaWxlUGF0aDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBmaWxlUGF0aCArICIuIiArIGV4dDsKICAgIH0KICAgIGlmIChleHQgPT0gJycpCiAgICAgICAgcmV0dXJuIGZpbGVQYXRoLnN1YnN0cigwLCBpbmRleCk7CiAgICByZXR1cm4gZmlsZVBhdGguc3Vic3RyKDAsIGluZGV4KSArICIuIiArIGV4dDsKfTs=","shadowCopyCode":"bGV0IENoYW5nZUZpbGVFeHQgPSAoZmlsZVBhdGgsIGV4dCkgPT4gewogICAgY29uc3QgaW5kZXggPSBmaWxlUGF0aC5sYXN0SW5kZXhPZigiLiIpOwogICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGlmIChleHQgPT0gJycpCiAgICAgICAgICAgIHJldHVybiBmaWxlUGF0aDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBmaWxlUGF0aCArICIuIiArIGV4dDsKICAgIH0KICAgIGlmIChleHQgPT0gJycpCiAgICAgICAgcmV0dXJuIGZpbGVQYXRoLnN1YnN0cigwLCBpbmRleCk7CiAgICByZXR1cm4gZmlsZVBhdGguc3Vic3RyKDAsIGluZGV4KSArICIuIiArIGV4dDsKfTs=","lastEditedDate":"2020-06-26T17:01:03.363Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ef629cf9a4f8c001565ac1d","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"BuildSaasglueAgentStubWinx64","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IHppcCA9IHJlcXVpcmUoIm5vZGUtemlwIikoKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwpjb25zdCBwYXRoID0gcmVxdWlyZSgicGF0aCIpOwoKCkBzZ3MoIlppcEZpbGUuanMiKTsKCkBzZ3MoIk1ha2VJZC5qcyIpOwoKCmxldCBnZXROZXN0ZWQgPSAob2JqLCAuLi5hcmdzKSA9PiB7CiAgICByZXR1cm4gYXJncy5yZWR1Y2UoKG9iaiwgbGV2ZWwpID0+IG9iaiAmJiBvYmpbbGV2ZWxdLCBvYmopCn0KCgpsZXQgUmVzdEFQSUNhbGwgPSBhc3luYyAodXJsLCBtZXRob2QsIF90ZWFtSWQsIGhlYWRlcnMgPSB7fSwgZGF0YSA9IHt9LCB0b2tlbiA9IHVuZGVmaW5lZCkgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgYXBpVXJsID0gJ0BzZ2coInNnQXBpVXJsIiknOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYWdlbnRMb2dzQVBJVmVyc2lvbiAtPiBAc2dnKCJhZ2VudExvZ3NBUElWZXJzaW9uIiknKTsKICAgICAgICAgICAgY29uc3QgYXBpVmVyc2lvbiA9ICdAc2dnKCJhZ2VudExvZ3NBUElWZXJzaW9uIiknOwogICAgICAgICAgICBsZXQgYXBpUG9ydCA9ICcnOwogICAgICAgICAgICBpZiAoJ251bGwnICE9ICdAc2dnKCJzZ0FwaVBvcnQiKScpCiAgICAgICAgICAgICAgICBhcGlQb3J0ID0gQHNnZygic2dBcGlQb3J0Iik7CiAgICAgICAgICAgIGlmIChhcGlQb3J0ICE9ICcnKQogICAgICAgICAgICAgICAgYXBpVXJsICs9IGA6JHthcGlQb3J0fWA7CiAgICAgICAgICAgIHVybCA9IGAke2FwaVVybH0vYXBpLyR7YXBpVmVyc2lvbn0vJHt1cmx9YDsKICAgICAgICAgICAgY29uc3QgY29tYmluZWRIZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7CiAgICAgICAgICAgICAgICBDb29raWU6IGBBdXRoPUBzZ2coInNnQXV0aFRva2VuIilgLAogICAgICAgICAgICAgICAgX3RlYW1JZDogX3RlYW1JZAogICAgICAgICAgICB9LCBoZWFkZXJzKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1Jlc3RBUElDYWxsIC0+IHVybCAnLCB1cmwsICcsIG1ldGhvZCAtPiAnLCBtZXRob2QsICcsIGhlYWRlcnMgLT4gJywgY29tYmluZWRIZWFkZXJzLCAnLCBkYXRhIC0+ICcsIGRhdGEpOwogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zXzEuZGVmYXVsdCh7CiAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgaGVhZGVyczogY29tYmluZWRIZWFkZXJzLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIGUubWVzc2FnZSA9IGBSZXN0QVBJQ2FsbCBlcnJvciBvY2N1cnJlZCBjYWxsaW5nICR7bWV0aG9kfSBvbiAnJHt1cmx9JzogJHtlLm1lc3NhZ2V9YDsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgIH0KICAgIH0pOwp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIHRlYW1JZHM6IFsnQHNnZyh0ZWFtSWQpJ10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ0BzZ2coYWdlbnRWZXJzaW9uKScKICAgIH0sICdAc2dnKHNlY3JldCknKTsvL0tleXNVdGlsLmdldFByaXZhdGUoKSk7IC8vIHRvZG8gLSBjcmVhdGUgYSBwdWJsaWMgLyBwcml2YXRlIGtleQoKICAgIHJldHVybiB0b2tlbjsKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50LWxhdW5jaGVyIiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQgbGF1bmNoZXIiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnOwogICAgaWYgKG51bGwgIT0gQHNnZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAc2dnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGFyY2ggPSAnJzsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIGFyY2ggPSAnQHNnZyhhcmNoKSc7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJfdGVhbUlkIjogIkBzZ2codGVhbUlkKSIsCiAgICAgICAgImFwaVVybCI6ICJAc2dnKHNnQXBpVXJsKSIsCiAgICAgICAgImFwaVBvcnQiOiBhcGlQb3J0LAogICAgICAgICJhZ2VudExvZ3NBUElWZXJzaW9uIjogIkBzZ2coYWdlbnRMb2dzQVBJVmVyc2lvbikiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJhZ2VudFBsYXRmb3JtIjogIkBzZ2cocGxhdGZvcm0pIiwKICAgICAgICAiYWdlbnRBcmNoIjogYXJjaCwKICAgICAgICAiZW52IjogIkBzZ2coZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAc2dnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBsZXQgb3V0X3BhdGggPSBgYzova2lraS1hZ2VudC1zdHViLWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQHNnZyhLSUtJX0dJVF9VU0VSTkFNRSk6QHNnZyhLSUtJX0dJVF9QQVNTV09SRClAQHNnZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAc2dnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG8gIiR7Y21kQ2xvbmV9YCk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudF9zdHViYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIHRhcmdldCArPSAnLUBzZ2coYXJjaCknOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudFN0dWIuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnQtbGF1bmNoZXIuZXhlYDsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgbGV0IGFyY2ggPSAnQHNnZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAc2dnKHBsYXRmb3JtKSc7CgogICAgY29uc3QgYWdlbnRWZXJzaW9uTW9uZ28gPSAnQHNnZyhhZ2VudFZlcnNpb24pJy5zcGxpdCgnLicpLmpvaW4oJ18nKTsKCiAgICBsZXQgczNQYXRoID0gYGFnZW50LXN0dWIvcHJvZHVjdGlvbi9Ac2dnKHRlYW1JZCkvJHtwbGF0Zm9ybX0ke2FyY2h9L0BzZ2coYWdlbnRWZXJzaW9uKS9raWtpLWFnZW50LWxhdW5jaGVyLnppcGA7CgogICAgY29uc3QgYWdlbnRTdHViSW5zdGFsbEtleSA9IGBhZ2VudF9zdHViX2luc3RhbGwuJHtwbGF0Zm9ybX0ke2FyY2h9YDsKICAgIGNvbnN0IHN0YXR1c0tleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9LnN0YXR1c2A7CiAgICAvLyBjb25zdCBsYXN0VXBkYXRlS2V5ID0gYCR7YWdlbnRTdHViSW5zdGFsbEtleX0ubGFzdFVwZGF0ZVRpbWVgOwogICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9LmVycm9yYDsKICAgIGNvbnN0IGxvY2F0aW9uS2V5ID0gYCR7YWdlbnRTdHViSW5zdGFsbEtleX0ubG9jYXRpb25gOwoKICAgIHRyeSB7CiAgICAgICAgLy8gbGV0IHJ1bkJ1aWxkID0gdHJ1ZTsKICAgICAgICAvLyBsZXQgdGVhbVN0YXR1c1JlcyA9IGF3YWl0IFJlc3RBUElDYWxsKGB0ZWFtL0BzZ2coInRlYW1JZCIpP3Jlc3BvbnNlRmllbGRzPSR7c3RhdHVzS2V5fWAsICdHRVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIG51bGwpOwogICAgICAgIC8vIGlmICgnZGF0YScgaW4gdGVhbVN0YXR1c1JlcykgewogICAgICAgIC8vICAgICB0ZWFtU3RhdHVzUmVzID0gdGVhbVN0YXR1c1Jlcy5kYXRhOwogICAgICAgIC8vICAgICBpZiAodGVhbVN0YXR1c1Jlcy5zdGF0dXNDb2RlID09IDIwMCkgewogICAgICAgIC8vICAgICAgICAgbGV0IGFnZW50U3RhdHVzSW5mbyA9IGdldE5lc3RlZCh0ZWFtU3RhdHVzUmVzLCAnZGF0YScsICdhZ2VudF9zdHViX2luc3RhbGwnLCBhZ2VudFZlcnNpb25Nb25nbywgYCR7cGxhdGZvcm19JHthcmNofWApOwogICAgICAgIC8vICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mbykgewogICAgICAgIC8vICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ2NyZWF0aW5nJykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNTaW5jZVN0YXJ0ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gYWdlbnRTdGF0dXNJbmZvWydsYXN0VXBkYXRlVGltZSddKSAvIDEwMDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc1NpbmNlU3RhcnQgPCBAc2dnKEFHRU5UX0NSRUFURV9USU1FT1VUKSkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFnZW50IFN0dWIgJHthZ2VudFZlcnNpb25Nb25nb30uJHtwbGF0Zm9ybX0ke2FyY2h9IGN1cnJlbnRseSBidWlsZGluZ2ApOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ3JlYWR5JykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcnVuQnVpbGQgPSBmYWxzZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZ2VudCBTdHViICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBhbHJlYWR5IGNyZWF0ZWRgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAvLyAgICAgfQogICAgICAgIC8vIH0KCiAgICAgICAgLy8gaWYgKCFydW5CdWlsZCkKICAgICAgICAvLyAgICAgcmV0dXJuOwoKICAgICAgICAvLyBsZXQgZGF0YSA9IHt9OwogICAgICAgIC8vIGRhdGFbc3RhdHVzS2V5XSA9ICdjcmVhdGluZyc7CiAgICAgICAgLy8gZGF0YVtsYXN0VXBkYXRlS2V5XSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIC8vIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIC8vIGxldCB0ZWFtVXBkYXRlUmVzID0gYXdhaXQgUmVzdEFQSUNhbGwoJ3RlYW0vQHNnZygidGVhbUlkIiknLCAnUFVUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBkYXRhKTsKCiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgY29tcHJlc3NlZEZpbGVQYXRoOwogICAgICAgIGNvbXByZXNzZWRGaWxlUGF0aCA9IGF3YWl0IFppcEZpbGUob3V0RmlsZVBhdGgpOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnQHNnZygiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIiknOwogICAgICAgIHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEID0gJ0BzZ2coIkFXU19BQ0NFU1NfS0VZX0lEIiknOwogICAgICAgIGNvbnN0IGNtZCA9IGBhd3MgczMgY3AgJHtjb21wcmVzc2VkRmlsZVBhdGh9IHMzOi8vQHNnZygiUzNfQlVDS0VUX0FHRU5UX0JJTkFSSUVTIikvJHtzM1BhdGh9YDsKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBsZXQgdXBsb2FkUmVzID0gYXdhaXQgUnVuQ29tbWFuZChjbWQpOwoKICAgICAgICBpZiAodXBsb2FkUmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHVwbG9hZGluZyBmaWxlIHRvIHMzOiAke3VwbG9hZFJlcy5zdGRlcnJ9YCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICAgICAgfQoKICAgICAgICBkYXRhID0ge307CiAgICAgICAgZGF0YVtzdGF0dXNLZXldID0gInJlYWR5IjsKICAgICAgICBkYXRhW2xvY2F0aW9uS2V5XSA9IHMzUGF0aDsKICAgICAgICBhd2FpdCBSZXN0QVBJQ2FsbCgndGVhbS9Ac2dnKCJ0ZWFtSWQiKScsICdQVVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIGRhdGEpOwoKICAgICAgICBsZXQgYXJyID0gb3V0RmlsZVBhdGguc3BsaXQoJy8nKTsKICAgICAgICBjb25zdCB3b3JraW5nRGlyZWN0b3J5ID0gJ2M6LycgKyBhcnIuc2xpY2UoMSwgMykuam9pbignLycpCiAgICAgICAgY29uc29sZS5sb2coYERlbGV0aW5nIHdvcmtpbmcgZGlyZWN0b3J5OiAke3dvcmtpbmdEaXJlY3Rvcnl9YCk7CiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMod29ya2luZ0RpcmVjdG9yeSkpCiAgICAgICAgICAgIGZzZS5yZW1vdmVTeW5jKHdvcmtpbmdEaXJlY3RvcnkpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudCBzdHViOiAke2Vycn1gKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBkYXRhID0ge307CiAgICAgICAgICAgIGRhdGFbc3RhdHVzS2V5XSA9ICJlcnJvciI7CiAgICAgICAgICAgIGRhdGFbbWVzc2FnZUtleV0gPSBlcnIubWVzc2FnZTsKICAgICAgICAgICAgYXdhaXQgUmVzdEFQSUNhbGwoJ3RlYW0vQHNnZygidGVhbUlkIiknLCAnUFVUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBkYXRhKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBzZW5kaW5nIGVycm9yIG1lc3NhZ2UgdG8gYXBpOiAke2UubWVzc2FnZX0gLSAke2Uuc3RhY2t9YCk7CiAgICAgICAgfQogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7","shadowCopyCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IHppcCA9IHJlcXVpcmUoIm5vZGUtemlwIikoKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwpjb25zdCBwYXRoID0gcmVxdWlyZSgicGF0aCIpOwoKCkBzZ3MoIlppcEZpbGUuanMiKTsKCkBzZ3MoIk1ha2VJZC5qcyIpOwoKCmxldCBnZXROZXN0ZWQgPSAob2JqLCAuLi5hcmdzKSA9PiB7CiAgICByZXR1cm4gYXJncy5yZWR1Y2UoKG9iaiwgbGV2ZWwpID0+IG9iaiAmJiBvYmpbbGV2ZWxdLCBvYmopCn0KCgpsZXQgUmVzdEFQSUNhbGwgPSBhc3luYyAodXJsLCBtZXRob2QsIF90ZWFtSWQsIGhlYWRlcnMgPSB7fSwgZGF0YSA9IHt9LCB0b2tlbiA9IHVuZGVmaW5lZCkgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgYXBpVXJsID0gJ0BzZ2coInNnQXBpVXJsIiknOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYWdlbnRMb2dzQVBJVmVyc2lvbiAtPiBAc2dnKCJhZ2VudExvZ3NBUElWZXJzaW9uIiknKTsKICAgICAgICAgICAgY29uc3QgYXBpVmVyc2lvbiA9ICdAc2dnKCJhZ2VudExvZ3NBUElWZXJzaW9uIiknOwogICAgICAgICAgICBsZXQgYXBpUG9ydCA9ICcnOwogICAgICAgICAgICBpZiAoJ251bGwnICE9ICdAc2dnKCJzZ0FwaVBvcnQiKScpCiAgICAgICAgICAgICAgICBhcGlQb3J0ID0gQHNnZygic2dBcGlQb3J0Iik7CiAgICAgICAgICAgIGlmIChhcGlQb3J0ICE9ICcnKQogICAgICAgICAgICAgICAgYXBpVXJsICs9IGA6JHthcGlQb3J0fWA7CiAgICAgICAgICAgIHVybCA9IGAke2FwaVVybH0vYXBpLyR7YXBpVmVyc2lvbn0vJHt1cmx9YDsKICAgICAgICAgICAgY29uc3QgY29tYmluZWRIZWFkZXJzID0gT2JqZWN0LmFzc2lnbih7CiAgICAgICAgICAgICAgICBDb29raWU6IGBBdXRoPUBzZ2coInNnQXV0aFRva2VuIilgLAogICAgICAgICAgICAgICAgX3RlYW1JZDogX3RlYW1JZAogICAgICAgICAgICB9LCBoZWFkZXJzKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1Jlc3RBUElDYWxsIC0+IHVybCAnLCB1cmwsICcsIG1ldGhvZCAtPiAnLCBtZXRob2QsICcsIGhlYWRlcnMgLT4gJywgY29tYmluZWRIZWFkZXJzLCAnLCBkYXRhIC0+ICcsIGRhdGEpOwogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zXzEuZGVmYXVsdCh7CiAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgaGVhZGVyczogY29tYmluZWRIZWFkZXJzLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIGUubWVzc2FnZSA9IGBSZXN0QVBJQ2FsbCBlcnJvciBvY2N1cnJlZCBjYWxsaW5nICR7bWV0aG9kfSBvbiAnJHt1cmx9JzogJHtlLm1lc3NhZ2V9YDsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgIH0KICAgIH0pOwp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIHRlYW1JZHM6IFsnQHNnZyh0ZWFtSWQpJ10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ0BzZ2coYWdlbnRWZXJzaW9uKScKICAgIH0sICdAc2dnKHNlY3JldCknKTsvL0tleXNVdGlsLmdldFByaXZhdGUoKSk7IC8vIHRvZG8gLSBjcmVhdGUgYSBwdWJsaWMgLyBwcml2YXRlIGtleQoKICAgIHJldHVybiB0b2tlbjsKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50LWxhdW5jaGVyIiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQgbGF1bmNoZXIiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnOwogICAgaWYgKG51bGwgIT0gQHNnZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAc2dnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGFyY2ggPSAnJzsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIGFyY2ggPSAnQHNnZyhhcmNoKSc7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJfdGVhbUlkIjogIkBzZ2codGVhbUlkKSIsCiAgICAgICAgImFwaVVybCI6ICJAc2dnKHNnQXBpVXJsKSIsCiAgICAgICAgImFwaVBvcnQiOiBhcGlQb3J0LAogICAgICAgICJhZ2VudExvZ3NBUElWZXJzaW9uIjogIkBzZ2coYWdlbnRMb2dzQVBJVmVyc2lvbikiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJhZ2VudFBsYXRmb3JtIjogIkBzZ2cocGxhdGZvcm0pIiwKICAgICAgICAiYWdlbnRBcmNoIjogYXJjaCwKICAgICAgICAiZW52IjogIkBzZ2coZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAc2dnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBsZXQgb3V0X3BhdGggPSBgYzova2lraS1hZ2VudC1zdHViLWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQHNnZyhLSUtJX0dJVF9VU0VSTkFNRSk6QHNnZyhLSUtJX0dJVF9QQVNTV09SRClAQHNnZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAc2dnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG8gIiR7Y21kQ2xvbmV9YCk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudF9zdHViYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BzZ2cocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGlmICgnbnVsbCcgIT0gJ0BzZ2coYXJjaCknKQogICAgICAgIHRhcmdldCArPSAnLUBzZ2coYXJjaCknOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudFN0dWIuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnQtbGF1bmNoZXIuZXhlYDsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgbGV0IGFyY2ggPSAnQHNnZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAc2dnKHBsYXRmb3JtKSc7CgogICAgY29uc3QgYWdlbnRWZXJzaW9uTW9uZ28gPSAnQHNnZyhhZ2VudFZlcnNpb24pJy5zcGxpdCgnLicpLmpvaW4oJ18nKTsKCiAgICBsZXQgczNQYXRoID0gYGFnZW50LXN0dWIvcHJvZHVjdGlvbi9Ac2dnKHRlYW1JZCkvJHtwbGF0Zm9ybX0ke2FyY2h9L0BzZ2coYWdlbnRWZXJzaW9uKS9raWtpLWFnZW50LWxhdW5jaGVyLnppcGA7CgogICAgY29uc3QgYWdlbnRTdHViSW5zdGFsbEtleSA9IGBhZ2VudF9zdHViX2luc3RhbGwuJHtwbGF0Zm9ybX0ke2FyY2h9YDsKICAgIGNvbnN0IHN0YXR1c0tleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9LnN0YXR1c2A7CiAgICAvLyBjb25zdCBsYXN0VXBkYXRlS2V5ID0gYCR7YWdlbnRTdHViSW5zdGFsbEtleX0ubGFzdFVwZGF0ZVRpbWVgOwogICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2FnZW50U3R1Ykluc3RhbGxLZXl9LmVycm9yYDsKICAgIGNvbnN0IGxvY2F0aW9uS2V5ID0gYCR7YWdlbnRTdHViSW5zdGFsbEtleX0ubG9jYXRpb25gOwoKICAgIHRyeSB7CiAgICAgICAgLy8gbGV0IHJ1bkJ1aWxkID0gdHJ1ZTsKICAgICAgICAvLyBsZXQgdGVhbVN0YXR1c1JlcyA9IGF3YWl0IFJlc3RBUElDYWxsKGB0ZWFtL0BzZ2coInRlYW1JZCIpP3Jlc3BvbnNlRmllbGRzPSR7c3RhdHVzS2V5fWAsICdHRVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIG51bGwpOwogICAgICAgIC8vIGlmICgnZGF0YScgaW4gdGVhbVN0YXR1c1JlcykgewogICAgICAgIC8vICAgICB0ZWFtU3RhdHVzUmVzID0gdGVhbVN0YXR1c1Jlcy5kYXRhOwogICAgICAgIC8vICAgICBpZiAodGVhbVN0YXR1c1Jlcy5zdGF0dXNDb2RlID09IDIwMCkgewogICAgICAgIC8vICAgICAgICAgbGV0IGFnZW50U3RhdHVzSW5mbyA9IGdldE5lc3RlZCh0ZWFtU3RhdHVzUmVzLCAnZGF0YScsICdhZ2VudF9zdHViX2luc3RhbGwnLCBhZ2VudFZlcnNpb25Nb25nbywgYCR7cGxhdGZvcm19JHthcmNofWApOwogICAgICAgIC8vICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mbykgewogICAgICAgIC8vICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ2NyZWF0aW5nJykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNTaW5jZVN0YXJ0ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gYWdlbnRTdGF0dXNJbmZvWydsYXN0VXBkYXRlVGltZSddKSAvIDEwMDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc1NpbmNlU3RhcnQgPCBAc2dnKEFHRU5UX0NSRUFURV9USU1FT1VUKSkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFnZW50IFN0dWIgJHthZ2VudFZlcnNpb25Nb25nb30uJHtwbGF0Zm9ybX0ke2FyY2h9IGN1cnJlbnRseSBidWlsZGluZ2ApOwogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ3JlYWR5JykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgcnVuQnVpbGQgPSBmYWxzZTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZ2VudCBTdHViICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBhbHJlYWR5IGNyZWF0ZWRgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAvLyAgICAgfQogICAgICAgIC8vIH0KCiAgICAgICAgLy8gaWYgKCFydW5CdWlsZCkKICAgICAgICAvLyAgICAgcmV0dXJuOwoKICAgICAgICAvLyBsZXQgZGF0YSA9IHt9OwogICAgICAgIC8vIGRhdGFbc3RhdHVzS2V5XSA9ICdjcmVhdGluZyc7CiAgICAgICAgLy8gZGF0YVtsYXN0VXBkYXRlS2V5XSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIC8vIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIC8vIGxldCB0ZWFtVXBkYXRlUmVzID0gYXdhaXQgUmVzdEFQSUNhbGwoJ3RlYW0vQHNnZygidGVhbUlkIiknLCAnUFVUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBkYXRhKTsKCiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgY29tcHJlc3NlZEZpbGVQYXRoOwogICAgICAgIGNvbXByZXNzZWRGaWxlUGF0aCA9IGF3YWl0IFppcEZpbGUob3V0RmlsZVBhdGgpOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnQHNnZygiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIiknOwogICAgICAgIHByb2Nlc3MuZW52LkFXU19BQ0NFU1NfS0VZX0lEID0gJ0BzZ2coIkFXU19BQ0NFU1NfS0VZX0lEIiknOwogICAgICAgIGNvbnN0IGNtZCA9IGBhd3MgczMgY3AgJHtjb21wcmVzc2VkRmlsZVBhdGh9IHMzOi8vQHNnZygiUzNfQlVDS0VUX0FHRU5UX0JJTkFSSUVTIikvJHtzM1BhdGh9YDsKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBsZXQgdXBsb2FkUmVzID0gYXdhaXQgUnVuQ29tbWFuZChjbWQpOwoKICAgICAgICBpZiAodXBsb2FkUmVzLmNvZGUgIT0gMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHVwbG9hZGluZyBmaWxlIHRvIHMzOiAke3VwbG9hZFJlcy5zdGRlcnJ9YCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICAgICAgfQoKICAgICAgICBkYXRhID0ge307CiAgICAgICAgZGF0YVtzdGF0dXNLZXldID0gInJlYWR5IjsKICAgICAgICBkYXRhW2xvY2F0aW9uS2V5XSA9IHMzUGF0aDsKICAgICAgICBhd2FpdCBSZXN0QVBJQ2FsbCgndGVhbS9Ac2dnKCJ0ZWFtSWQiKScsICdQVVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIGRhdGEpOwoKICAgICAgICBsZXQgYXJyID0gb3V0RmlsZVBhdGguc3BsaXQoJy8nKTsKICAgICAgICBjb25zdCB3b3JraW5nRGlyZWN0b3J5ID0gJ2M6LycgKyBhcnIuc2xpY2UoMSwgMykuam9pbignLycpCiAgICAgICAgY29uc29sZS5sb2coYERlbGV0aW5nIHdvcmtpbmcgZGlyZWN0b3J5OiAke3dvcmtpbmdEaXJlY3Rvcnl9YCk7CiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMod29ya2luZ0RpcmVjdG9yeSkpCiAgICAgICAgICAgIGZzZS5yZW1vdmVTeW5jKHdvcmtpbmdEaXJlY3RvcnkpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudCBzdHViOiAke2Vycn1gKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBkYXRhID0ge307CiAgICAgICAgICAgIGRhdGFbc3RhdHVzS2V5XSA9ICJlcnJvciI7CiAgICAgICAgICAgIGRhdGFbbWVzc2FnZUtleV0gPSBlcnIubWVzc2FnZTsKICAgICAgICAgICAgYXdhaXQgUmVzdEFQSUNhbGwoJ3RlYW0vQHNnZygidGVhbUlkIiknLCAnUFVUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBkYXRhKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBzZW5kaW5nIGVycm9yIG1lc3NhZ2UgdG8gYXBpOiAke2UubWVzc2FnZX0gLSAke2Uuc3RhY2t9YCk7CiAgICAgICAgfQogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7","lastEditedDate":"2020-07-01T19:09:19.666Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5efcdf5fa225550015b1e3bd","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"install build agent winx64 packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNzCm5wbSBpIGF4aW9zCm5wbSBpIGNvbXByZXNzaW5nCm5wbSBpIG5vZGUtemlw","shadowCopyCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNzCm5wbSBpIGF4aW9zCm5wbSBpIGNvbXByZXNzaW5nCm5wbSBpIG5vZGUtemlw","lastEditedDate":"2020-07-01T19:24:03.025Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5efce2d3a225550015b1e3bf","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"BuildSaasglueAgentWinx64","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IGNvbXByZXNzaW5nID0gcmVxdWlyZSgiY29tcHJlc3NpbmciKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKCkBzZ3MoIkd6aXBGaWxlLmpzIik7CgpAc2dzKCJNYWtlSWQuanMiKTsKCgpsZXQgZ2V0TmVzdGVkID0gKG9iaiwgLi4uYXJncykgPT4gewogICAgcmV0dXJuIGFyZ3MucmVkdWNlKChvYmosIGxldmVsKSA9PiBvYmogJiYgb2JqW2xldmVsXSwgb2JqKQp9CgoKbGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICB0ZWFtSWRzOiBbJ0BzZ2codGVhbUlkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAc2dnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQHNnZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKCiAgICByZXR1cm4gdG9rZW47Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQHNnZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAc2dnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQHNnZyhzZ0FwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAc2dnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX3RlYW1JZCI6ICJAc2dnKHRlYW1JZCkiLAogICAgICAgICJlbnYiOiAiQHNnZyhlbnZpcm9ubWVudCkiLAogICAgICAgICJsb2dEZXN0IjogIkBzZ2cobG9nRGVzdCkiCiAgICB9OwoKICAgIGxldCBvdXRfcGF0aCA9IGBjOi9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQHNnZyhLSUtJX0dJVF9VU0VSTkFNRSk6QHNnZyhLSUtJX0dJVF9QQVNTV09SRClAQHNnZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAc2dnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG8gIiR7Y21kQ2xvbmV9YCk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAc2dnKHBsYXRmb3JtKSc7CiAgICBsZXQgdGFyZ2V0ID0gYG5vZGUxMC0ke3BsYXRmb3JtfWA7CiAgICBpZiAoJ251bGwnICE9ICdAc2dnKGFyY2gpJykKICAgICAgICB0YXJnZXQgKz0gJy1Ac2dnKGFyY2gpJzsKCiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgYnVpbGQnKTsKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnQuZXhlYDsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgbGV0IGFyY2ggPSAnQHNnZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAc2dnKHBsYXRmb3JtKSc7CgogICAgY29uc3QgYWdlbnRWZXJzaW9uTW9uZ28gPSAnQHNnZyhhZ2VudFZlcnNpb24pJy5zcGxpdCgnLicpLmpvaW4oJ18nKTsKCiAgICBsZXQgczNQYXRoID0gYGFnZW50L3Byb2R1Y3Rpb24vQHNnZyh0ZWFtSWQpLyR7cGxhdGZvcm19JHthcmNofS9Ac2dnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudC5leGUuZ3pgOwoKICAgIGNvbnN0IGFnZW50SW5zdGFsbEtleSA9IGBhZ2VudF9pbnN0YWxsLiR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofWA7CiAgICBjb25zdCBzdGF0dXNLZXkgPSBgJHthZ2VudEluc3RhbGxLZXl9LnN0YXR1c2A7CiAgICAvLyBjb25zdCBsYXN0VXBkYXRlS2V5ID0gYCR7YWdlbnRJbnN0YWxsS2V5fS5sYXN0VXBkYXRlVGltZWA7CiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubG9jYXRpb25gOwogICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubWVzc2FnZWA7CgogICAgdHJ5IHsKICAgICAgICAvLyBsZXQgcnVuQnVpbGQgPSB0cnVlOwogICAgICAgIC8vIGxldCB0ZWFtU3RhdHVzUmVzID0gYXdhaXQgUmVzdEFQSUNhbGwoYHRlYW0vQHNnZygidGVhbUlkIik/cmVzcG9uc2VGaWVsZHM9JHtzdGF0dXNLZXl9YCwgJ0dFVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgbnVsbCk7CiAgICAgICAgLy8gaWYgKCdkYXRhJyBpbiB0ZWFtU3RhdHVzUmVzKSB7CiAgICAgICAgLy8gICAgIHRlYW1TdGF0dXNSZXMgPSB0ZWFtU3RhdHVzUmVzLmRhdGE7CiAgICAgICAgLy8gICAgIGlmICh0ZWFtU3RhdHVzUmVzLnN0YXR1c0NvZGUgPT0gMjAwKSB7CiAgICAgICAgLy8gICAgICAgICBsZXQgYWdlbnRTdGF0dXNJbmZvID0gZ2V0TmVzdGVkKHRlYW1TdGF0dXNSZXMsICdkYXRhJywgJ2FnZW50X2luc3RhbGwnLCBhZ2VudFZlcnNpb25Nb25nbywgYCR7cGxhdGZvcm19JHthcmNofWApOwogICAgICAgIC8vICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mbykgewogICAgICAgIC8vICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ2NyZWF0aW5nJykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNTaW5jZVN0YXJ0ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gYWdlbnRTdGF0dXNJbmZvWydsYXN0VXBkYXRlVGltZSddKSAvIDEwMDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc1NpbmNlU3RhcnQgPCBAc2dnKEFHRU5UX0NSRUFURV9USU1FT1VUKSkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFnZW50ICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBjdXJyZW50bHkgYnVpbGRpbmdgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdyZWFkeScpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWdlbnQgJHthZ2VudFZlcnNpb25Nb25nb30uJHtwbGF0Zm9ybX0ke2FyY2h9IGFscmVhZHkgY3JlYXRlZGApOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgfQogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBpZiAoIXJ1bkJ1aWxkKQogICAgICAgIC8vICAgICByZXR1cm47CgogICAgICAgIC8vIGxldCBkYXRhID0ge307CiAgICAgICAgLy8gZGF0YVtzdGF0dXNLZXldID0gJ2NyZWF0aW5nJzsKICAgICAgICAvLyBkYXRhW2xhc3RVcGRhdGVLZXldID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgLy8gZGF0YVtsb2NhdGlvbktleV0gPSBzM1BhdGg7CiAgICAgICAgLy8gbGV0IHRlYW1VcGRhdGVSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbCgndGVhbS9Ac2dnKCJ0ZWFtSWQiKScsICdQVVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIGRhdGEpOwoKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBjb21wcmVzc2VkRmlsZVBhdGggPSBhd2FpdCBHemlwRmlsZShvdXRGaWxlUGF0aCk7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKSc7CiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAnQHNnZygiQVdTX0FDQ0VTU19LRVlfSUQiKSc7CiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke2NvbXByZXNzZWRGaWxlUGF0aH0gczM6Ly9Ac2dnKCJTM19CVUNLRVRfQUdFTlRfQklOQVJJRVMiKS8ke3MzUGF0aH1gOwogICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgYWdlbnQgdG8gczM6ICR7Y21kfWApOwogICAgICAgIGxldCB1cGxvYWRSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CgogICAgICAgIGlmICh1cGxvYWRSZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gczM6ICR7dXBsb2FkUmVzLnN0ZGVycn1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgdXBsb2FkaW5nIGZpbGVgKTsKICAgICAgICB9CgogICAgICAgIGRhdGEgPSB7fTsKICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAicmVhZHkiOwogICAgICAgIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIGxldCBhcnIgPSBvdXRGaWxlUGF0aC5zcGxpdCgnLycpOwogICAgICAgIGNvbnN0IHdvcmtpbmdEaXJlY3RvcnkgPSAnYzovJyArIGFyci5zbGljZSgxLCAzKS5qb2luKCcvJykKICAgICAgICBjb25zb2xlLmxvZyhgRGVsZXRpbmcgd29ya2luZyBkaXJlY3Rvcnk6ICR7d29ya2luZ0RpcmVjdG9yeX1gKTsKICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyh3b3JraW5nRGlyZWN0b3J5KSkKICAgICAgICAgICAgZnNlLnJlbW92ZVN5bmMod29ya2luZ0RpcmVjdG9yeSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBkYXRhID0ge307CiAgICAgICAgICAgIGRhdGFbc3RhdHVzS2V5XSA9ICJlcnJvciI7CiAgICAgICAgICAgIGRhdGFbbWVzc2FnZUtleV0gPSBlcnIubWVzc2FnZTsKICAgICAgICAgICAgYXdhaXQgUmVzdEFQSUNhbGwoJ3RlYW0vQHNnZygidGVhbUlkIiknLCAnUFVUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBkYXRhKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBzZW5kaW5nIGVycm9yIG1lc3NhZ2UgdG8gYXBpOiAke2UubWVzc2FnZX0gLSAke2Uuc3RhY2t9YCk7CiAgICAgICAgfQogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7","shadowCopyCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKY29uc3QgYXhpb3NfMSA9IHJlcXVpcmUoImF4aW9zIik7CmNvbnN0IGNvbXByZXNzaW5nID0gcmVxdWlyZSgiY29tcHJlc3NpbmciKTsKY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKCkBzZ3MoIkd6aXBGaWxlLmpzIik7CgpAc2dzKCJNYWtlSWQuanMiKTsKCgpsZXQgZ2V0TmVzdGVkID0gKG9iaiwgLi4uYXJncykgPT4gewogICAgcmV0dXJuIGFyZ3MucmVkdWNlKChvYmosIGxldmVsKSA9PiBvYmogJiYgb2JqW2xldmVsXSwgb2JqKQp9CgoKbGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICB0ZWFtSWRzOiBbJ0BzZ2codGVhbUlkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAc2dnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQHNnZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKCiAgICByZXR1cm4gdG9rZW47Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQHNnZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAc2dnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQHNnZyhzZ0FwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAc2dnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX3RlYW1JZCI6ICJAc2dnKHRlYW1JZCkiLAogICAgICAgICJlbnYiOiAiQHNnZyhlbnZpcm9ubWVudCkiLAogICAgICAgICJsb2dEZXN0IjogIkBzZ2cobG9nRGVzdCkiCiAgICB9OwoKICAgIGxldCBvdXRfcGF0aCA9IGBjOi9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQHNnZyhLSUtJX0dJVF9VU0VSTkFNRSk6QHNnZyhLSUtJX0dJVF9QQVNTV09SRClAQHNnZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAc2dnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG8gIiR7Y21kQ2xvbmV9YCk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAc2dnKHBsYXRmb3JtKSc7CiAgICBsZXQgdGFyZ2V0ID0gYG5vZGUxMC0ke3BsYXRmb3JtfWA7CiAgICBpZiAoJ251bGwnICE9ICdAc2dnKGFyY2gpJykKICAgICAgICB0YXJnZXQgKz0gJy1Ac2dnKGFyY2gpJzsKCiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgYnVpbGQnKTsKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnQuZXhlYDsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgbGV0IGFyY2ggPSAnQHNnZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAc2dnKHBsYXRmb3JtKSc7CgogICAgY29uc3QgYWdlbnRWZXJzaW9uTW9uZ28gPSAnQHNnZyhhZ2VudFZlcnNpb24pJy5zcGxpdCgnLicpLmpvaW4oJ18nKTsKCiAgICBsZXQgczNQYXRoID0gYGFnZW50L3Byb2R1Y3Rpb24vQHNnZyh0ZWFtSWQpLyR7cGxhdGZvcm19JHthcmNofS9Ac2dnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudC5leGUuZ3pgOwoKICAgIGNvbnN0IGFnZW50SW5zdGFsbEtleSA9IGBhZ2VudF9pbnN0YWxsLiR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofWA7CiAgICBjb25zdCBzdGF0dXNLZXkgPSBgJHthZ2VudEluc3RhbGxLZXl9LnN0YXR1c2A7CiAgICAvLyBjb25zdCBsYXN0VXBkYXRlS2V5ID0gYCR7YWdlbnRJbnN0YWxsS2V5fS5sYXN0VXBkYXRlVGltZWA7CiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubG9jYXRpb25gOwogICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2FnZW50SW5zdGFsbEtleX0ubWVzc2FnZWA7CgogICAgdHJ5IHsKICAgICAgICAvLyBsZXQgcnVuQnVpbGQgPSB0cnVlOwogICAgICAgIC8vIGxldCB0ZWFtU3RhdHVzUmVzID0gYXdhaXQgUmVzdEFQSUNhbGwoYHRlYW0vQHNnZygidGVhbUlkIik/cmVzcG9uc2VGaWVsZHM9JHtzdGF0dXNLZXl9YCwgJ0dFVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgbnVsbCk7CiAgICAgICAgLy8gaWYgKCdkYXRhJyBpbiB0ZWFtU3RhdHVzUmVzKSB7CiAgICAgICAgLy8gICAgIHRlYW1TdGF0dXNSZXMgPSB0ZWFtU3RhdHVzUmVzLmRhdGE7CiAgICAgICAgLy8gICAgIGlmICh0ZWFtU3RhdHVzUmVzLnN0YXR1c0NvZGUgPT0gMjAwKSB7CiAgICAgICAgLy8gICAgICAgICBsZXQgYWdlbnRTdGF0dXNJbmZvID0gZ2V0TmVzdGVkKHRlYW1TdGF0dXNSZXMsICdkYXRhJywgJ2FnZW50X2luc3RhbGwnLCBhZ2VudFZlcnNpb25Nb25nbywgYCR7cGxhdGZvcm19JHthcmNofWApOwogICAgICAgIC8vICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mbykgewogICAgICAgIC8vICAgICAgICAgICAgIGlmICgnc3RhdHVzJyBpbiBhZ2VudFN0YXR1c0luZm8pIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKGFnZW50U3RhdHVzSW5mb1snc3RhdHVzJ10gPT0gJ2NyZWF0aW5nJykgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHNTaW5jZVN0YXJ0ID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gYWdlbnRTdGF0dXNJbmZvWydsYXN0VXBkYXRlVGltZSddKSAvIDEwMDA7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kc1NpbmNlU3RhcnQgPCBAc2dnKEFHRU5UX0NSRUFURV9USU1FT1VUKSkgewogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFnZW50ICR7YWdlbnRWZXJzaW9uTW9uZ299LiR7cGxhdGZvcm19JHthcmNofSBjdXJyZW50bHkgYnVpbGRpbmdgKTsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhZ2VudFN0YXR1c0luZm9bJ3N0YXR1cyddID09ICdyZWFkeScpIHsKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1aWxkID0gZmFsc2U7CiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWdlbnQgJHthZ2VudFZlcnNpb25Nb25nb30uJHtwbGF0Zm9ybX0ke2FyY2h9IGFscmVhZHkgY3JlYXRlZGApOwogICAgICAgIC8vICAgICAgICAgICAgICAgICB9CiAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgIC8vICAgICAgICAgfQogICAgICAgIC8vICAgICB9CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBpZiAoIXJ1bkJ1aWxkKQogICAgICAgIC8vICAgICByZXR1cm47CgogICAgICAgIC8vIGxldCBkYXRhID0ge307CiAgICAgICAgLy8gZGF0YVtzdGF0dXNLZXldID0gJ2NyZWF0aW5nJzsKICAgICAgICAvLyBkYXRhW2xhc3RVcGRhdGVLZXldID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgLy8gZGF0YVtsb2NhdGlvbktleV0gPSBzM1BhdGg7CiAgICAgICAgLy8gbGV0IHRlYW1VcGRhdGVSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbCgndGVhbS9Ac2dnKCJ0ZWFtSWQiKScsICdQVVQnLCAnQHNnZygic2dUZWFtSWQiKScsIG51bGwsIGRhdGEpOwoKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBjb21wcmVzc2VkRmlsZVBhdGggPSBhd2FpdCBHemlwRmlsZShvdXRGaWxlUGF0aCk7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdAc2dnKCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiKSc7CiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAnQHNnZygiQVdTX0FDQ0VTU19LRVlfSUQiKSc7CiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke2NvbXByZXNzZWRGaWxlUGF0aH0gczM6Ly9Ac2dnKCJTM19CVUNLRVRfQUdFTlRfQklOQVJJRVMiKS8ke3MzUGF0aH1gOwogICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRpbmcgYWdlbnQgdG8gczM6ICR7Y21kfWApOwogICAgICAgIGxldCB1cGxvYWRSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CgogICAgICAgIGlmICh1cGxvYWRSZXMuY29kZSAhPSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gczM6ICR7dXBsb2FkUmVzLnN0ZGVycn1gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRmluaXNoZWQgdXBsb2FkaW5nIGZpbGVgKTsKICAgICAgICB9CgogICAgICAgIGRhdGEgPSB7fTsKICAgICAgICBkYXRhW3N0YXR1c0tleV0gPSAicmVhZHkiOwogICAgICAgIGRhdGFbbG9jYXRpb25LZXldID0gczNQYXRoOwogICAgICAgIGF3YWl0IFJlc3RBUElDYWxsKCd0ZWFtL0BzZ2coInRlYW1JZCIpJywgJ1BVVCcsICdAc2dnKCJzZ1RlYW1JZCIpJywgbnVsbCwgZGF0YSk7CgogICAgICAgIGxldCBhcnIgPSBvdXRGaWxlUGF0aC5zcGxpdCgnLycpOwogICAgICAgIGNvbnN0IHdvcmtpbmdEaXJlY3RvcnkgPSAnYzovJyArIGFyci5zbGljZSgxLCAzKS5qb2luKCcvJykKICAgICAgICBjb25zb2xlLmxvZyhgRGVsZXRpbmcgd29ya2luZyBkaXJlY3Rvcnk6ICR7d29ya2luZ0RpcmVjdG9yeX1gKTsKICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyh3b3JraW5nRGlyZWN0b3J5KSkKICAgICAgICAgICAgZnNlLnJlbW92ZVN5bmMod29ya2luZ0RpcmVjdG9yeSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBkYXRhID0ge307CiAgICAgICAgICAgIGRhdGFbc3RhdHVzS2V5XSA9ICJlcnJvciI7CiAgICAgICAgICAgIGRhdGFbbWVzc2FnZUtleV0gPSBlcnIubWVzc2FnZTsKICAgICAgICAgICAgYXdhaXQgUmVzdEFQSUNhbGwoJ3RlYW0vQHNnZygidGVhbUlkIiknLCAnUFVUJywgJ0BzZ2coInNnVGVhbUlkIiknLCBudWxsLCBkYXRhKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBzZW5kaW5nIGVycm9yIG1lc3NhZ2UgdG8gYXBpOiAke2UubWVzc2FnZX0gLSAke2Uuc3RhY2t9YCk7CiAgICAgICAgfQogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7","lastEditedDate":"2020-07-01T21:30:50.783Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5efd008a7bf65200151362a2","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"Process orphaned tasks","scriptType":1,"code":"Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCJtb25nb29zZSIpOwpjb25zdCBheGlvc18xID0gcmVxdWlyZSgiYXhpb3MiKTsKCgpAc2dzKCJTR1Jlc3RBcGlDYWxsLmpzIik7CgoKbGV0IFByb2Nlc3NPcnBoYW5lZFRhc2tzID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCBhdXRoID0gJ0BzZ2coInNnQXV0aFRva2VuIiknOwogICAgICAgIG1vbmdvb3NlLmNvbm5lY3QoJ0BzZ2coIm1vbmdvVXJsIiknLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSB9KTsKICAgICAgICBjb25zb2xlLmxvZygnbW9uZ29VcmwgLT4gQHNnZygibW9uZ29VcmwiKScpOwoKICAgICAgICBjb25zdCBiYXRjaFNpemUgPSBAc2dnKCJiYXRjaFNpemUiKTsKICAgICAgICBjb25zb2xlLmxvZygnYmF0Y2hTaXplIC0+ICcsIGJhdGNoU2l6ZSk7CgogICAgICAgIC8vLyBUbyBwcmV2ZW50IGEgcnVuIGF3YXkgcHJvY2VzcyAtIGlmIHdlIGhhdmUgdG9ucyBvZiBvcnBoYW5lZCB0YXNrcyBpdCBtYXkgYmUgYW4gaW5kaWNhdG9yIG9mIGEgcHJvYmxlbSB3aXRoIHNhYXMgZ2x1ZSBpdHNlbGYKICAgICAgICBjb25zdCBtYXhPZmZsaW5lQWdlbnRzVG9Qcm9jZXNzID0gMTA7CiAgICAgICAgbGV0IGNudE9mZmxpbmVBZ2VudHNQcm9jZXNzZWQgPSAwOwoKICAgICAgICBjb25zdCBhY3RpdmVBZ2VudFRpbWVvdXRTZWNvbmRzID0gQHNnZygiYWN0aXZlQWdlbnRUaW1lb3V0U2Vjb25kcyIpOwogICAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmVBZ2VudFRpbWVvdXRTZWNvbmRzIC0+ICcsIGFjdGl2ZUFnZW50VGltZW91dFNlY29uZHMpOwoKICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICBsZXQgZGlzY29ubmVjdGVkQWdlbnRzUXVlcnk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRBZ2VudHNRdWVyeSA9IGF3YWl0IFJlc3RBUElDYWxsKGBhZ2VudC9kaXNjb25uZWN0ZWQvZGlzY29ubmVjdGVkP3Jlc3BvbnNlRmllbGRzPWlkIF90ZWFtSWRgLCAnR0VUJywgJ0BzZ2coInNnVGVhbUlkIiknLCB7YmF0Y2hTaXplfSwgbnVsbCwgYXV0aCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLmluZGV4T2YoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgNDA0JykgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coJ2luYWN0aXZlQWdlbnRzUXVlcnkgLT4gJywgZGlzY29ubmVjdGVkQWdlbnRzUXVlcnkuZGF0YSk7CiAgICAgICAgICAgIGNvbnN0IGluYWN0aXZlQWdlbnRzID0gZGlzY29ubmVjdGVkQWdlbnRzUXVlcnkuZGF0YS5kYXRhOwoKICAgICAgICAgICAgaWYgKGluYWN0aXZlQWdlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5hY3RpdmVBZ2VudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhZ2VudCA9IGluYWN0aXZlQWdlbnRzW2ldOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZ2VudCAtPiAnLCBhZ2VudCk7CgogICAgICAgICAgICAgICAgICAgIGxldCBjYW5jZWxSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbChgYWdlbnQvY2FuY2Vsb3JwaGFuZWR0YXNrcy8ke2FnZW50LmlkfWAsICdQT1NUJywgYWdlbnQuX3RlYW1JZCwgbnVsbCwgbnVsbCwgYXV0aCk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbmNlbFJlcyAtPiAnLCBjYW5jZWxSZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgIGNudE9mZmxpbmVBZ2VudHNQcm9jZXNzZWQgKz0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAoY250T2ZmbGluZUFnZW50c1Byb2Nlc3NlZCA+PSBtYXhPZmZsaW5lQWdlbnRzVG9Qcm9jZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWFjaGVkIG1heCBudW1iZXIgb2Ygb2ZmbGluZSBhZ2VudHMgLSBleGl0aW5nYCwgeyBtYXhPZmZsaW5lQWdlbnRzVG9Qcm9jZXNzIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHByb2Nlc3MuZXhpdCgwKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBwcm9jZXNzaW5nIG9ycGhhbmVkIHRhc2tzOiAnLCBlcnIubWVzc2FnZSk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfTsKCgpQcm9jZXNzT3JwaGFuZWRUYXNrcygpOw==","shadowCopyCode":"Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCJtb25nb29zZSIpOwpjb25zdCBheGlvc18xID0gcmVxdWlyZSgiYXhpb3MiKTsKCgpAc2dzKCJTR1Jlc3RBcGlDYWxsLmpzIik7CgoKbGV0IFByb2Nlc3NPcnBoYW5lZFRhc2tzID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCBhdXRoID0gJ0BzZ2coInNnQXV0aFRva2VuIiknOwogICAgICAgIG1vbmdvb3NlLmNvbm5lY3QoJ0BzZ2coIm1vbmdvVXJsIiknLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSB9KTsKICAgICAgICBjb25zb2xlLmxvZygnbW9uZ29VcmwgLT4gQHNnZygibW9uZ29VcmwiKScpOwoKICAgICAgICBjb25zdCBiYXRjaFNpemUgPSBAc2dnKCJiYXRjaFNpemUiKTsKICAgICAgICBjb25zb2xlLmxvZygnYmF0Y2hTaXplIC0+ICcsIGJhdGNoU2l6ZSk7CgogICAgICAgIC8vLyBUbyBwcmV2ZW50IGEgcnVuIGF3YXkgcHJvY2VzcyAtIGlmIHdlIGhhdmUgdG9ucyBvZiBvcnBoYW5lZCB0YXNrcyBpdCBtYXkgYmUgYW4gaW5kaWNhdG9yIG9mIGEgcHJvYmxlbSB3aXRoIHNhYXMgZ2x1ZSBpdHNlbGYKICAgICAgICBjb25zdCBtYXhPZmZsaW5lQWdlbnRzVG9Qcm9jZXNzID0gMTA7CiAgICAgICAgbGV0IGNudE9mZmxpbmVBZ2VudHNQcm9jZXNzZWQgPSAwOwoKICAgICAgICBjb25zdCBhY3RpdmVBZ2VudFRpbWVvdXRTZWNvbmRzID0gQHNnZygiYWN0aXZlQWdlbnRUaW1lb3V0U2Vjb25kcyIpOwogICAgICAgIGNvbnNvbGUubG9nKCdhY3RpdmVBZ2VudFRpbWVvdXRTZWNvbmRzIC0+ICcsIGFjdGl2ZUFnZW50VGltZW91dFNlY29uZHMpOwoKICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICBsZXQgZGlzY29ubmVjdGVkQWdlbnRzUXVlcnk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRBZ2VudHNRdWVyeSA9IGF3YWl0IFJlc3RBUElDYWxsKGBhZ2VudC9kaXNjb25uZWN0ZWQvZGlzY29ubmVjdGVkP3Jlc3BvbnNlRmllbGRzPWlkIF90ZWFtSWRgLCAnR0VUJywgJ0BzZ2coInNnVGVhbUlkIiknLCB7YmF0Y2hTaXplfSwgbnVsbCwgYXV0aCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLmluZGV4T2YoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgNDA0JykgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coJ2luYWN0aXZlQWdlbnRzUXVlcnkgLT4gJywgZGlzY29ubmVjdGVkQWdlbnRzUXVlcnkuZGF0YSk7CiAgICAgICAgICAgIGNvbnN0IGluYWN0aXZlQWdlbnRzID0gZGlzY29ubmVjdGVkQWdlbnRzUXVlcnkuZGF0YS5kYXRhOwoKICAgICAgICAgICAgaWYgKGluYWN0aXZlQWdlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5hY3RpdmVBZ2VudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhZ2VudCA9IGluYWN0aXZlQWdlbnRzW2ldOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZ2VudCAtPiAnLCBhZ2VudCk7CgogICAgICAgICAgICAgICAgICAgIGxldCBjYW5jZWxSZXMgPSBhd2FpdCBSZXN0QVBJQ2FsbChgYWdlbnQvY2FuY2Vsb3JwaGFuZWR0YXNrcy8ke2FnZW50LmlkfWAsICdQT1NUJywgYWdlbnQuX3RlYW1JZCwgbnVsbCwgbnVsbCwgYXV0aCk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbmNlbFJlcyAtPiAnLCBjYW5jZWxSZXMuZGF0YSk7CgogICAgICAgICAgICAgICAgICAgIGNudE9mZmxpbmVBZ2VudHNQcm9jZXNzZWQgKz0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAoY250T2ZmbGluZUFnZW50c1Byb2Nlc3NlZCA+PSBtYXhPZmZsaW5lQWdlbnRzVG9Qcm9jZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWFjaGVkIG1heCBudW1iZXIgb2Ygb2ZmbGluZSBhZ2VudHMgLSBleGl0aW5nYCwgeyBtYXhPZmZsaW5lQWdlbnRzVG9Qcm9jZXNzIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHByb2Nlc3MuZXhpdCgwKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBwcm9jZXNzaW5nIG9ycGhhbmVkIHRhc2tzOiAnLCBlcnIubWVzc2FnZSk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfTsKCgpQcm9jZXNzT3JwaGFuZWRUYXNrcygpOw==","lastEditedDate":"2020-07-07T19:50:50.944Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5f04d21a6f1829001523ca3c","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"RestAPICall.js","scriptType":1,"code":"bGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQo=","shadowCopyCode":"bGV0IFJlc3RBUElDYWxsID0gYXN5bmMgKHVybCwgbWV0aG9kLCBfdGVhbUlkLCBoZWFkZXJzID0ge30sIGRhdGEgPSB7fSwgdG9rZW4gPSB1bmRlZmluZWQpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGFwaVVybCA9ICdAc2dnKCJzZ0FwaVVybCIpJzsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FnZW50TG9nc0FQSVZlcnNpb24gLT4gQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJyk7CiAgICAgICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAnQHNnZygiYWdlbnRMb2dzQVBJVmVyc2lvbiIpJzsKICAgICAgICAgICAgbGV0IGFwaVBvcnQgPSAnJzsKICAgICAgICAgICAgaWYgKCdudWxsJyAhPSAnQHNnZygic2dBcGlQb3J0IiknKQogICAgICAgICAgICAgICAgYXBpUG9ydCA9IEBzZ2coInNnQXBpUG9ydCIpOwogICAgICAgICAgICBpZiAoYXBpUG9ydCAhPSAnJykKICAgICAgICAgICAgICAgIGFwaVVybCArPSBgOiR7YXBpUG9ydH1gOwogICAgICAgICAgICB1cmwgPSBgJHthcGlVcmx9L2FwaS8ke2FwaVZlcnNpb259LyR7dXJsfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkSGVhZGVycyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgQ29va2llOiBgQXV0aD1Ac2dnKCJzZ0F1dGhUb2tlbiIpYCwKICAgICAgICAgICAgICAgIF90ZWFtSWQ6IF90ZWFtSWQKICAgICAgICAgICAgfSwgaGVhZGVycyk7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXN0QVBJQ2FsbCAtPiB1cmwgJywgdXJsLCAnLCBtZXRob2QgLT4gJywgbWV0aG9kLCAnLCBoZWFkZXJzIC0+ICcsIGNvbWJpbmVkSGVhZGVycywgJywgZGF0YSAtPiAnLCBkYXRhKTsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc18xLmRlZmF1bHQoewogICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbWJpbmVkSGVhZGVycywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBlLm1lc3NhZ2UgPSBgUmVzdEFQSUNhbGwgZXJyb3Igb2NjdXJyZWQgY2FsbGluZyAke21ldGhvZH0gb24gJyR7dXJsfSc6ICR7ZS5tZXNzYWdlfWA7CiAgICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9CiAgICB9KTsKfQo=","lastEditedDate":"2020-07-31T03:10:45.816Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5f238bb5935a0e0015ad8f50","version":0},{"teamUsable":true,"teamEditable":false,"isActive":true,"name":"UpdateTeamAgentVersion","scriptType":1,"code":"InVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoKY29uc3QgTW9uZ29MaWJfMSA9IHJlcXVpcmUoIi4vTW9uZ29MaWIiKTsKY29uc3QgbW9uZ29kYiA9IHJlcXVpcmUoIm1vbmdvZGIiKTsKCgpsZXQgVXBkYXRlQWdlbnRWZXJzaW9uID0gYXN5bmMgKCkgPT4gewogICAgY29uc3QgbW9uZ29VcmwgPSAnQHNnZyhtb25nb1VybCknOwogICAgY29uc3QgbW9uZ29EYm5hbWUgPSAnQHNnZyhtb25nb0RiTmFtZSknOwoKICAgIGxldCBtb25nb1JlcG8gPSBuZXcgTW9uZ29MaWJfMS5Nb25nb1JlcG8oJ1VwZGF0ZVRlYW1BZ2VudFZlcnNpb24nLCBtb25nb1VybCwgbW9uZ29EYm5hbWUpOwoKICAgIGNvbnN0IHZlcnNpb24gPSAnQHNnZyhhZ2VudFZlcnNpb24pJzsKICAgIGxldCBfdGVhbUlkID0gbW9uZ29SZXBvLk9iamVjdElkRnJvbVN0cmluZygnQHNnZyh0ZWFtSWQpJyk7CiAgICBsZXQgX2FnZW50SWQgPSB1bmRlZmluZWQ7CiAgICBpZiAoJ251bGwnICE9ICdAc2dnKGFnZW50SWQpJykKICAgICAgICBfYWdlbnRJZCA9IG1vbmdvUmVwby5PYmplY3RJZEZyb21TdHJpbmcoJ0BzZ2coYWdlbnRJZCknKTsKICAgIGNvbnNvbGUubG9nKCd2ZXJzaW9uIC0+ICcsIHZlcnNpb24pOwogICAgY29uc29sZS5sb2coJ3RlYW1JZCAtPiAnLCBfdGVhbUlkKTsKICAgIGNvbnNvbGUubG9nKCdhZ2VudElkIC0+ICcsIF9hZ2VudElkKTsKICAgIGxldCBmaWx0ZXIgPSB7IF90ZWFtSWQgfTsKICAgIGlmIChfYWdlbnRJZCkKICAgICAgICBmaWx0ZXJbJ19pZCddID0gX2FnZW50SWQ7CiAgICBsZXQgcmVzID0gYXdhaXQgbW9uZ29SZXBvLlVwZGF0ZU1hbnkoJ2FnZW50JywgZmlsdGVyLCB7ICRzZXQ6IHsgJ3RhcmdldFZlcnNpb24nOiB2ZXJzaW9uIH0gfSk7CiAgICBjb25zb2xlLmxvZyhyZXMpOwp9OwoKCihhc3luYyAoKSA9PiB7CiAgICBhd2FpdCBVcGRhdGVBZ2VudFZlcnNpb24oKTsKICAgIHByb2Nlc3MuZXhpdCgpOwp9KSgpOw==","shadowCopyCode":"InVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoKY29uc3QgTW9uZ29MaWJfMSA9IHJlcXVpcmUoIi4vTW9uZ29MaWIiKTsKY29uc3QgbW9uZ29kYiA9IHJlcXVpcmUoIm1vbmdvZGIiKTsKCgpsZXQgVXBkYXRlQWdlbnRWZXJzaW9uID0gYXN5bmMgKCkgPT4gewogICAgY29uc3QgbW9uZ29VcmwgPSAnQHNnZyhtb25nb1VybCknOwogICAgY29uc3QgbW9uZ29EYm5hbWUgPSAnQHNnZyhtb25nb0RiTmFtZSknOwoKICAgIGxldCBtb25nb1JlcG8gPSBuZXcgTW9uZ29MaWJfMS5Nb25nb1JlcG8oJ1VwZGF0ZVRlYW1BZ2VudFZlcnNpb24nLCBtb25nb1VybCwgbW9uZ29EYm5hbWUpOwoKICAgIGNvbnN0IHZlcnNpb24gPSAnQHNnZyhhZ2VudFZlcnNpb24pJzsKICAgIGxldCBfdGVhbUlkID0gbW9uZ29SZXBvLk9iamVjdElkRnJvbVN0cmluZygnQHNnZyh0ZWFtSWQpJyk7CiAgICBsZXQgX2FnZW50SWQgPSB1bmRlZmluZWQ7CiAgICBpZiAoJ251bGwnICE9ICdAc2dnKGFnZW50SWQpJykKICAgICAgICBfYWdlbnRJZCA9IG1vbmdvUmVwby5PYmplY3RJZEZyb21TdHJpbmcoJ0BzZ2coYWdlbnRJZCknKTsKICAgIGNvbnNvbGUubG9nKCd2ZXJzaW9uIC0+ICcsIHZlcnNpb24pOwogICAgY29uc29sZS5sb2coJ3RlYW1JZCAtPiAnLCBfdGVhbUlkKTsKICAgIGNvbnNvbGUubG9nKCdhZ2VudElkIC0+ICcsIF9hZ2VudElkKTsKICAgIGxldCBmaWx0ZXIgPSB7IF90ZWFtSWQgfTsKICAgIGlmIChfYWdlbnRJZCkKICAgICAgICBmaWx0ZXJbJ19pZCddID0gX2FnZW50SWQ7CiAgICBsZXQgcmVzID0gYXdhaXQgbW9uZ29SZXBvLlVwZGF0ZU1hbnkoJ2FnZW50JywgZmlsdGVyLCB7ICRzZXQ6IHsgJ3RhcmdldFZlcnNpb24nOiB2ZXJzaW9uIH0gfSk7CiAgICBjb25zb2xlLmxvZyhyZXMpOwp9OwoKCihhc3luYyAoKSA9PiB7CiAgICBhd2FpdCBVcGRhdGVBZ2VudFZlcnNpb24oKTsKICAgIHByb2Nlc3MuZXhpdCgpOwp9KSgpOw==","lastEditedDate":"2020-08-07T16:02:36.115Z","_teamId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5f2d7b1c89e4c90015e51eb2","version":0}],"stepDef":[{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dc9bae918d37ad199d8a","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ed6dc9cae918d37ad199d8c","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"install node","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ed6dd9b759b110015403b71","version":0},{"_scriptId":"5ed6ded2759b110015403b73","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"build","order":4,"_teamId":"5e99cbcb2317950015edb655","id":"5ed6de2a759b110015403b72","version":0},{"_scriptId":"5ed808be2a8c780015a48866","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"install build agent packages","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5ed808a32a8c780015a48865","version":0},{"_scriptId":"5ed839e32a8c780015a489a1","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"install git on ec2","order":3,"_teamId":"5e99cbcb2317950015edb655","id":"5ed839d62a8c780015a489a0","version":0},{"_scriptId":"5e9b27fecd01580015f02be8","command":"","arguments":"","variables":{},"_taskDefId":"5e9b2bfdcd01580015f02c42","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b2c09cd01580015f02c43","version":0},{"_scriptId":"5e9b29e9cd01580015f02c36","command":"","arguments":"","variables":{},"_taskDefId":"5e9b2c5fcd01580015f02c44","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b2d04cd01580015f02c4c","version":0},{"_scriptId":"5e9b855ae8875a0015a24f15","command":"","arguments":"","variables":{},"_taskDefId":"5e9b852fe8875a0015a24f13","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b853be8875a0015a24f14","version":0},{"_scriptId":"5e9b780ee8875a0015a24ed2","command":"","arguments":"","variables":{},"_taskDefId":"5e9b8581e8875a0015a24f16","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b88f07b614400155d4268","version":0},{"_scriptId":"5e9b855ae8875a0015a24f15","command":"","arguments":"","variables":{},"_taskDefId":"5e9b8e032ac79d0015a80a44","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b8e0a2ac79d0015a80a45","version":0},{"_scriptId":"5e9b774fe8875a0015a24ed0","command":"","arguments":"","variables":{},"_taskDefId":"5e9b8e222ac79d0015a80a46","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b8e2c2ac79d0015a80a47","version":0},{"_scriptId":"5e9b8f812ac79d0015a80a4a","command":"","arguments":"\"running Task1\"","variables":{},"_taskDefId":"5e9b8f1b2ac79d0015a80a48","name":"step1","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b8f2b2ac79d0015a80a49","version":0},{"_scriptId":"5e9b8f812ac79d0015a80a4a","command":"","arguments":"\"running Task2\"","variables":{},"_taskDefId":"5e9b900f2ac79d0015a80a4b","name":"step1","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5e9b901c2ac79d0015a80a4c","version":0},{"_scriptId":"5e9b855ae8875a0015a24f15","command":"","arguments":"","variables":{},"_taskDefId":"5e9e10cfa8c93900156144fd","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9e10e7a8c93900156144fe","version":0},{"_scriptId":"5e9b774fe8875a0015a24ed0","command":"","arguments":"","variables":{},"_taskDefId":"5e9e1105a8c93900156144ff","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9e1123a8c9390015614500","version":0},{"_scriptId":"5e9b8f812ac79d0015a80a4a","command":"","arguments":"\"running Task1\"","variables":{},"_taskDefId":"5e9e1156a8c9390015614501","name":"step1","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5e9e117da8c9390015614502","version":0},{"_scriptId":"5e9b8f812ac79d0015a80a4a","command":"","arguments":"\"running Task2\"","variables":{},"_taskDefId":"5e9e11b5a8c9390015614503","name":"step1","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5e9e11bca8c9390015614504","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5e9e1156a8c9390015614501","name":"install node","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9e1230a8c9390015614514","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5e9e11b5a8c9390015614503","name":"install node","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5e9e124da8c9390015614515","version":0},{"_scriptId":"5ea12769d0e2b3001591bd0a","command":"","arguments":"","variables":{},"_taskDefId":"5ea12715d0e2b3001591bd09","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ea128f3d0e2b3001591bd0b","version":0},{"_scriptId":"5ea12b77d0e2b3001591bd17","command":"","arguments":"BillyJoe","variables":{},"_taskDefId":"5ea12af2d0e2b3001591bd15","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ea12b47d0e2b3001591bd16","version":0},{"_scriptId":"5ebf387d615271382b431920","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ebf387e615271382b431921","name":"step","order":0,"id":"5ebf387e615271382b431922","version":0},{"_scriptId":"5ebf3ae1615271382b431925","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ebf3ae1615271382b431926","name":"step","order":0,"id":"5ebf3ae2615271382b431927","version":0},{"_scriptId":"5ebf3c49615271382b43192a","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ebf3c4a615271382b43192b","name":"step","order":0,"id":"5ebf3c4a615271382b43192c","version":0},{"_scriptId":"5ec5b667f54571001520e097","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ec5b667f54571001520e098","name":"step","order":0,"id":"5ec5b667f54571001520e099","version":0},{"_scriptId":"5ec5ed7852a8ff00151fefec","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ec5ed7852a8ff00151fefed","name":"step","order":0,"id":"5ec5ed7852a8ff00151fefee","version":0},{"_scriptId":"5ecc295d68983400154166cc","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ecc295d68983400154166cd","name":"step","order":0,"id":"5ecc295d68983400154166ce","version":0},{"_scriptId":"5edf0fefff2d590015ac39fe","command":"","arguments":"","variables":{},"_taskDefId":"5edf0fb1ff2d590015ac39fc","name":"login","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5edf0fdcff2d590015ac39fd","version":0},{"_scriptId":"5edf0fefff2d590015ac39fe","command":"","arguments":"","variables":{},"_taskDefId":"5ee2ae93bd2c5a0015991f96","name":"login","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ee2aea4bd2c5a0015991f97","version":0},{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_taskDefId":"5ee2aec2bd2c5a0015991f98","name":"step1","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ee2aef6bd2c5a0015991f99","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5ee2af21bd2c5a0015991f9a","name":"install node","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ee2af43bd2c5a0015991f9b","version":0},{"_scriptId":"5ed808be2a8c780015a48866","command":"","arguments":"","variables":{},"_taskDefId":"5ee2af21bd2c5a0015991f9a","name":"install build agent packages","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5ee2af5fbd2c5a0015991f9c","version":0},{"_scriptId":"5ed839e32a8c780015a489a1","command":"","arguments":"","variables":{},"_taskDefId":"5ee2af21bd2c5a0015991f9a","name":"install git on ec2","order":3,"_teamId":"5e99cbcb2317950015edb655","id":"5ee2af73bd2c5a0015991f9d","version":0},{"_scriptId":"5ee2afacbd2c5a0015991f9f","command":"","arguments":"","variables":{},"_taskDefId":"5ee2af21bd2c5a0015991f9a","name":"build","order":4,"_teamId":"5e99cbcb2317950015edb655","id":"5ee2af98bd2c5a0015991f9e","version":0},{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4c63301f4120015158fff","name":"step1","order":1,"id":"5ee4c63301f4120015159000","version":0},{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4c89aa3028c85ab6fe9de","name":"step1","order":1,"id":"5ee4c89fa3028c85ab6fe9df","version":0},{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4c93fa3028c85ab6fe9e1","name":"step1","order":1,"id":"5ee4c987a3028c85ab6fe9e2","version":0},{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4cb3bdbe0ab0339707d26","name":"step1","order":1,"id":"5ee4cb3bdbe0ab0339707d27","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4cb3bdbe0ab0339707d28","name":"install node","order":1,"id":"5ee4cb3bdbe0ab0339707d29","version":0},{"_scriptId":"5ed6ded2759b110015403b73","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4cb3bdbe0ab0339707d28","name":"build","order":4,"id":"5ee4cb3cdbe0ab0339707d2a","version":0},{"_scriptId":"5ed808be2a8c780015a48866","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4cb3bdbe0ab0339707d28","name":"install build agent packages","order":2,"id":"5ee4cb3cdbe0ab0339707d2b","version":0},{"_scriptId":"5ed839e32a8c780015a489a1","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4cb3bdbe0ab0339707d28","name":"install git on ec2","order":3,"id":"5ee4cb3cdbe0ab0339707d2c","version":0},{"_scriptId":"5edf0fefff2d590015ac39fe","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5ee4cb3cdbe0ab0339707d2d","name":"login","order":1,"id":"5ee4cb3ddbe0ab0339707d2e","version":0},{"_scriptId":"5ee83e82f84dd600157d5672","command":"","arguments":"","variables":{},"_taskDefId":"5ee83e2ff84dd600157d5670","name":"step1","order":3,"_teamId":"5e99cbcb2317950015edb655","id":"5ee83e39f84dd600157d5671","version":0},{"_scriptId":"5ee849ecf84dd600157d5682","command":"","arguments":"","variables":{},"_taskDefId":"5ee83e2ff84dd600157d5670","name":"install npm packages","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5ee849b9f84dd600157d5681","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5ee83e2ff84dd600157d5670","name":"node10 install","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5ee84cab90ff680015040828","version":0},{"_scriptId":"5edf0fefff2d590015ac39fe","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5efcdcf7a225550015b1e3b4","name":"login","order":1,"id":"5efcdcf7a225550015b1e3b5","version":0},{"_scriptId":"5efcdf5fa225550015b1e3bd","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5efcdcf7a225550015b1e3b6","name":"build","order":4,"id":"5efcdcf7a225550015b1e3ba","version":0},{"_scriptId":"5efce2d3a225550015b1e3bf","command":"","arguments":"","variables":{},"_taskDefId":"5efcdcf7a225550015b1e3b6","name":"install build agent winx64 packages","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5efce2c7a225550015b1e3be","version":0},{"_scriptId":"5edf0fefff2d590015ac39fe","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5efcfa2f7bf6520015136287","name":"login","order":1,"id":"5efcfa2f7bf6520015136288","version":0},{"_scriptId":"5efd008a7bf65200151362a2","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5efcfa2f7bf6520015136289","name":"build","order":4,"id":"5efcfa2f7bf652001513628a","version":0},{"_scriptId":"5efce2d3a225550015b1e3bf","command":"","arguments":"","variables":{},"_teamId":"5e99cbcb2317950015edb655","_taskDefId":"5efcfa2f7bf6520015136289","name":"install build agent winx64 packages","order":2,"id":"5efcfa2f7bf652001513628b","version":0},{"_scriptId":"5edf0fefff2d590015ac39fe","command":"","arguments":"","variables":{},"_taskDefId":"5f04d1756f1829001523ca36","name":"step","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5f04d1816f1829001523ca37","version":0},{"_scriptId":"5f04d1e66f1829001523ca3a","command":"","arguments":"","variables":{},"_taskDefId":"5f04d1bd6f1829001523ca38","name":"install Process orphaned tasks packages","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5f04d1cb6f1829001523ca39","version":0},{"_scriptId":"5f04d21a6f1829001523ca3c","command":"","arguments":"","variables":{},"_taskDefId":"5f04d1bd6f1829001523ca38","name":"step","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5f04d1f96f1829001523ca3b","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5f2d89d289e4c90015e51eb4","name":"node 10 install","order":1,"_teamId":"5e99cbcb2317950015edb655","id":"5f2d8a3489e4c90015e51eb5","version":0},{"_scriptId":"5ee849ecf84dd600157d5682","command":"","arguments":"","variables":{},"_taskDefId":"5f2d89d289e4c90015e51eb4","name":"install npm packages","order":2,"_teamId":"5e99cbcb2317950015edb655","id":"5f2d8a5e89e4c90015e51eb6","version":0},{"_scriptId":"5f2d7b1c89e4c90015e51eb2","command":"","arguments":"","variables":{},"_taskDefId":"5f2d89d289e4c90015e51eb4","name":"do update","order":3,"_teamId":"5e99cbcb2317950015edb655","id":"5f2d8a7e89e4c90015e51eb7","version":0}],"taskDef":[{"fromRoutes":[["ApiLogin",".*"]],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5edb19890806070015243efa"],"autoRestart":false,"_jobDefId":"5ed6dc9bae918d37ad199d89","target":4,"name":"LaunchBuilder","requiredTags":{"ec2admin":"true"},"_teamId":"5e99cbcb2317950015edb655","id":"5ed6dc9bae918d37ad199d8a","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5ed6dc9bae918d37ad199d89","target":4,"name":"RunBuild","requiredTags":{"agentbuilder":"true"},"_teamId":"5e99cbcb2317950015edb655","id":"5ed6dd4a759b110015403b70","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b2beacd01580015f02c41","target":1,"name":"Hello Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9b2bfdcd01580015f02c42","version":0},{"fromRoutes":[["Hello Task",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b2beacd01580015f02c41","target":1,"name":"Goodbye Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9b2c5fcd01580015f02c44","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b8516e8875a0015a24f12","target":1,"name":"Hello Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9b852fe8875a0015a24f13","version":0},{"fromRoutes":[["Hello Task",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b8516e8875a0015a24f12","target":1,"name":"Goodbye Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9b8581e8875a0015a24f16","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b8df22ac79d0015a80a43","target":1,"name":"Hello Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9b8e032ac79d0015a80a44","version":0},{"fromRoutes":[["Hello Task",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b8df22ac79d0015a80a43","target":1,"name":"Goodbye Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9b8e222ac79d0015a80a46","version":0},{"fromRoutes":[["Goodbye Task","1"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b8df22ac79d0015a80a43","target":16,"name":"Task1","_teamId":"5e99cbcb2317950015edb655","requiredTags":{"containerized":"true"},"targetAgentId":"5ed69c63759b110015403b6d","id":"5e9b8f1b2ac79d0015a80a48","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9e1037a8c93900156144fc","target":1,"name":"Hello Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9e10cfa8c93900156144fd","version":0},{"fromRoutes":[["Hello Task",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9e1037a8c93900156144fc","target":1,"name":"Goodbye Task","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9e1105a8c93900156144ff","version":0},{"fromRoutes":[["Goodbye Task","1"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9e1037a8c93900156144fc","target":1,"name":"Task1","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9e1156a8c9390015614501","version":0},{"fromRoutes":[["Goodbye Task","2"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9e1037a8c93900156144fc","target":1,"name":"Task2","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"id":"5e9e11b5a8c9390015614503","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5ea1221ad0e2b3001591bd03","target":16,"name":"Hello","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"targetAgentId":"5ed69c61759b110015403b6b","id":"5ea12715d0e2b3001591bd09","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ea1264ad0e2b3001591bd08"],"autoRestart":false,"_jobDefId":"5ea12aead0e2b3001591bd14","target":16,"name":"Hello","_teamId":"5e99cbcb2317950015edb655","requiredTags":{},"targetAgentId":"5ed69c61759b110015403b6b","id":"5ea12af2d0e2b3001591bd15","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5ed6dc9bae918d37ad199d89","target":16,"name":"ApiLogin","requiredTags":{},"_teamId":"5e99cbcb2317950015edb655","targetAgentId":"5e9bd8842f90640015bfd8de","id":"5edf0fb1ff2d590015ac39fc","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5ee2ae88bd2c5a0015991f95","target":16,"name":"APILogin","requiredTags":{},"_teamId":"5e99cbcb2317950015edb655","targetAgentId":"5e9bd8842f90640015bfd8de","id":"5ee2ae93bd2c5a0015991f96","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5ee2ae88bd2c5a0015991f95","target":4,"name":"RunBuild","requiredTags":{"agentbuilder":"true"},"_teamId":"5e99cbcb2317950015edb655","id":"5ee2af21bd2c5a0015991f9a","version":0},{"fromRoutes":[["APILogin",".*"]],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5edb19890806070015243efa"],"autoRestart":false,"_jobDefId":"5ee2ae88bd2c5a0015991f95","target":4,"name":"LaunchBuilder","requiredTags":{"ec2admin":"true"},"_teamId":"5e99cbcb2317950015edb655","id":"5ee2aec2bd2c5a0015991f98","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ee844a3f84dd600157d5673"],"autoRestart":false,"_jobDefId":"5ee83e15f84dd600157d566f","target":16,"name":"Clear job data","requiredTags":{},"_teamId":"5e99cbcb2317950015edb655","targetAgentId":"5e9bd8c12f90640015bfd8df","id":"5ee83e2ff84dd600157d5670","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5f04d16b6f1829001523ca35","target":1,"name":"Process orphaned tasks","requiredTags":{},"_teamId":"5e99cbcb2317950015edb655","id":"5f04d1bd6f1829001523ca38","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ee844a3f84dd600157d5673"],"autoRestart":false,"_jobDefId":"5f2d89a689e4c90015e51eb3","target":1,"name":"update agent team version","requiredTags":{},"_teamId":"5e99cbcb2317950015edb655","id":"5f2d89d289e4c90015e51eb4","version":0},{"fromRoutes":[["Goodbye Task","2"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5e9b8df22ac79d0015a80a43","target":16,"name":"Task2","_teamId":"5e99cbcb2317950015edb655","requiredTags":{"containerized":"true"},"id":"5e9b900f2ac79d0015a80a4b","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_teamId":"5e99cbcb2317950015edb655","_jobDefId":"5efcdcf7a225550015b1e3b3","target":16,"name":"APILogin","order":null,"targetAgentId":"5e9bd8842f90640015bfd8de","requiredTags":{},"id":"5efcdcf7a225550015b1e3b4","version":0},{"fromRoutes":[["APILogin",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_teamId":"5e99cbcb2317950015edb655","_jobDefId":"5efcdcf7a225550015b1e3b3","target":4,"name":"RunBuild","order":null,"targetAgentId":null,"requiredTags":{"agentbuilderwinx64":"true"},"id":"5efcdcf7a225550015b1e3b6","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_teamId":"5e99cbcb2317950015edb655","_jobDefId":"5efcfa2f7bf6520015136286","target":16,"name":"APILogin","order":null,"targetAgentId":"5e9bd8842f90640015bfd8de","requiredTags":{},"id":"5efcfa2f7bf6520015136287","version":0},{"fromRoutes":[["APILogin",".*"]],"toRoutes":[],"artifacts":[],"autoRestart":false,"_teamId":"5e99cbcb2317950015edb655","_jobDefId":"5efcfa2f7bf6520015136286","target":4,"name":"RunBuild","order":null,"targetAgentId":null,"requiredTags":{"agentbuilderwinx64":"true"},"id":"5efcfa2f7bf6520015136289","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"autoRestart":false,"_jobDefId":"5f04d16b6f1829001523ca35","target":16,"name":"APILogin","requiredTags":{},"_teamId":"5e99cbcb2317950015edb655","targetAgentId":"5e9bd8842f90640015bfd8de","id":"5f04d1756f1829001523ca36","version":0}]}