{"user":[{"dateCreated":"2020-02-23T05:56:49.777Z","orgIds":[],"orgIdsInactive":[],"orgIdsInvited":[],"accessRightIds":[],"emailConfirmed":true,"hasAcceptedTerms":true,"email":"admin@saasglue.com","passwordHash":"$2b$10$k0vE.MriptxGbPPaYgJjCOl8AIAGGxZ8YRtmHu.BPtFjx703mntCy","lastLogin":"2019-12-05T04:01:06.808Z","id":"5de8810275ad92e5bb8de78a","version":0},{"dateCreated":"2020-02-23T05:56:49.777Z","orgIds":[],"orgIdsInactive":[],"orgIdsInvited":[],"accessRightIds":[],"emailConfirmed":true,"hasAcceptedTerms":true,"email":"scheduler@saasglue.com","passwordHash":"$2b$10$bULADyD3uugVcvP5fC7uUOMdoKo6XQ/PKp6smjOTbAYtJvb8P8SOy","lastLogin":"2019-11-27T16:52:17.056Z","id":"5ddea9c1f9ba5c1987c51e50","version":0},{"dateCreated":"2020-02-23T05:56:49.777Z","orgIds":["5de95c0453162e8891f5a830"],"orgIdsInactive":[],"orgIdsInvited":[],"accessRightIds":[],"emailConfirmed":true,"hasAcceptedTerms":true,"email":"testuser@saasglue.com","name":"Skippy","passwordHash":"$2b$10$uDZiqzJUKLFL1fLqCsGREuxnSwnELpHh3cSIDazCKKXsQm0CekOXa","lastLogin":"2020-01-16T00:21:30.475Z","id":"5e1fac8a7e501cfd86cee31d","version":0},{"dateCreated":"2020-04-17T14:49:42.177Z","orgIds":["5e99cbcb2317950015edb655"],"orgIdsInactive":[],"orgIdsInvited":[],"accessRightIds":[],"emailConfirmed":true,"hasAcceptedTerms":true,"email":"demo@saasglue.com","companyName":"saas glue","name":"Demo User","passwordHash":"$2b$10$S5A1oihalwc3mjuPtCX6F.5Kogg1/9tTDkiI.yVbcn9Wx/MoN8z0u","id":"5e99cb8e2317950015edb654","version":0}],"org":[{"billing_address1":"","billing_address2":"","billing_city":"","billing_state":"","billing_zip":"","billing_email":"","isActive":true,"paymentStatus":0,"paymentStatusDate":"2020-04-17T14:49:41.837Z","jobStorageSpaceHighWatermark":0,"paidStorageMB":0,"pricingTier":1,"notes":[],"name":"saas glue demo","rmqPassword":"sCNEkbZ3Fs","ownerId":"5e99cb8e2317950015edb654","inviteLink":"http://localhost:8080/?invitedOrgToken_shared=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJJbnZpdGVkT3JnSWQiOiI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLCJJbnZpdGVkT3JnTmFtZSI6InNhYXMgZ2x1ZSBkZW1vIiwiZXhwIjoxNjAyNjg5NDgzLCJpYXQiOjE1ODcxMzc0ODN9.2169RfR_hl--pkN4L9IF5eLqiq9mdaGV-htN2FnK4ow","agent_stub_install":{"macos":{"status":"ready","lastUpdateTime":1591120361173,"location":"agent-stub/production/5e99cbcb2317950015edb655/macos/v0.0.0.217/sg-agent-launcher.gz"},"linux":{"status":"ready","lastUpdateTime":1591120724664,"location":"agent-stub/production/5e99cbcb2317950015edb655/linux/v0.0.0.217/sg-agent-launcher.gz"}},"agent_install":{"v0_0_0_223":{"macos":{"status":"ready","lastUpdateTime":1591120503498,"location":"agent/production/5e99cbcb2317950015edb655/macos/v0.0.0.223/sg-agent.gz"},"linux":{"status":"ready","lastUpdateTime":1591122988971,"location":"agent/production/5e99cbcb2317950015edb655/linux/v0.0.0.223/sg-agent.gz"}}},"id":"5e99cbcb2317950015edb655","version":0}],"agent":[{"numActiveTasks":0,"lastHeartbeatTime":1591298201229,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"agent001","ipAddress":"172.19.0.4","name":"agent001","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":5,"running":1,"blocked":0,"sleeping":4,"unknown":0,"list":[{"pid":1,"parentPid":0,"name":"sg-agent-launcher","pcpu":0.00003551926151246618,"pcpuu":0.000019602611306408224,"pcpus":0.00001591665020605796,"pmem":3,"priority":19,"mem_vsz":1128032,"mem_rss":62832,"nice":0,"started":"2020-06-03 15:19:39","state":"sleeping","tty":"","user":"root","command":"/sg-agent-launcher"},{"pid":15,"parentPid":14,"name":"sg-agent","pcpu":0.0000078745532598392,"pcpuu":0.000006199116396043626,"pcpus":0.0000016754368637955745,"pmem":3.7,"priority":19,"mem_vsz":1083568,"mem_rss":75792,"nice":0,"started":"2020-06-03 15:19:50","state":"sleeping","tty":"","user":"root","command":"//sg-agent /tmp/app.NSZTO12IAv.KikiAgentLauncherProc"},{"pid":14,"parentPid":1,"name":"sh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":2388,"mem_rss":752,"nice":0,"started":"2020-06-03 15:19:50","state":"sleeping","tty":"","user":"root","command":"/bin/sh -c //sg-agent /tmp/app.NSZTO12IAv.KikiAgentLauncherProc"},{"pid":24,"parentPid":15,"name":"sh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":2388,"mem_rss":760,"nice":0,"started":"2020-06-03 15:19:51","state":"sleeping","tty":"","user":"root","command":"/bin/sh -c export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command; unset LC_ALL"},{"pid":25,"parentPid":24,"name":"ps","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0.1,"priority":19,"mem_vsz":7640,"mem_rss":2712,"nice":0,"started":"2020-06-03 15:19:51","state":"running","tty":"","user":"root","command":"ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command"}]},"time":{"current":1591197592877,"uptime":1007816,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Ubuntu","release":"10","codename":"buster","kernel":"4.19.76-linuxkit","arch":"x64","hostname":"agent001","codepage":"UTF-8","logofile":"ubuntu","serial":"a5a85d161208265bec1c6fb020b29456","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.9,"max":2.9,"avg":2.9,"cores":[2.9,2.9,2.9,2.9,2.9,2.9]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.03,"currentload":1.0484108739267886,"currentload_user":0.48714530570137576,"currentload_system":0.5612655682254128,"currentload_nice":0,"currentload_idle":98.95158912607322,"currentload_irq":0,"raw_currentload":625721700,"raw_currentload_user":290742300,"raw_currentload_system":334979400,"raw_currentload_nice":0,"raw_currentload_idle":59057148400,"raw_currentload_irq":0,"cpus":[{"load":1.5197289877035507,"load_user":0.8885963396055007,"load_system":0.63113264809805,"load_nice":0,"load_idle":98.48027101229646,"load_irq":0,"raw_load":151225800,"raw_load_user":88422800,"raw_load_system":62803000,"raw_load_nice":0,"raw_load_idle":9799614200,"raw_load_irq":0},{"load":1.0831869401174699,"load_user":0.5710606615355652,"load_system":0.5121262785819045,"load_nice":0,"load_idle":98.91681305988254,"load_irq":0,"raw_load":108003700,"raw_load_user":56940000,"raw_load_system":51063700,"raw_load_nice":0,"raw_load_idle":9862916000,"raw_load_irq":0},{"load":1.046230389148128,"load_user":0.4162922365181526,"load_system":0.6299381526299754,"load_nice":0,"load_idle":98.95376961085188,"load_irq":0,"raw_load":103980100,"raw_load_user":41373400,"raw_load_system":62606700,"raw_load_nice":0,"raw_load_idle":9834567000,"raw_load_irq":0},{"load":0.9344025931093517,"load_user":0.36327804028559,"load_system":0.5711245528237618,"load_nice":0,"load_idle":99.06559740689065,"load_irq":0,"raw_load":92696900,"raw_load_user":36038800,"raw_load_system":56658100,"raw_load_nice":0,"raw_load_idle":9827748600,"raw_load_irq":0},{"load":0.8513020636153057,"load_user":0.3472728054104141,"load_system":0.5040292582048915,"load_nice":0,"load_idle":99.1486979363847,"load_irq":0,"raw_load":84762300,"raw_load_user":34577200,"raw_load_system":50185100,"raw_load_nice":0,"raw_load_idle":9872020800,"raw_load_irq":0},{"load":0.8552039983128973,"load_user":0.33573631262505427,"load_system":0.5194676856878432,"load_nice":0,"load_idle":99.14479600168711,"load_irq":0,"raw_load":85052900,"raw_load_user":33390100,"raw_load_system":51662800,"raw_load_nice":0,"raw_load_idle":9860281800,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/sda1","type":"ext4","size":62725623808,"used":6158102528,"use":9.82,"mount":"/etc/hosts"}],"networkConnections":[{"protocol":"tcp","localaddress":"127.0.0.11","localport":"40735","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.19.0.4","localport":"37352","peeraddress":"52.216.10.123","peerport":"443","state":"TIME_WAIT"}],"users":[],"mem":{"total":2085785600,"free":78422016,"used":2007363584,"active":892948480,"available":1055969280,"buffcache":1114415104,"swaptotal":1073737728,"swapused":6291456,"swapfree":1067446272},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":20.953,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":17626453,"rx_dropped":0,"rx_errors":0,"tx_bytes":233121,"tx_dropped":0,"tx_errors":0,"rx_sec":-1,"tx_sec":-1,"ms":0}],"fsStats":{"rx":1238629376,"wx":1950945280,"tx":3189574656,"rx_sec":-1,"wx_sec":-1,"tx_sec":-1,"ms":0},"disksIO":{"rIO":60183,"wIO":116890,"tIO":177073,"rIO_sec":-1,"wIO_sec":-1,"tIO_sec":-1,"ms":0}},"createDate":"2020-06-02T18:37:21.971Z","timezone":"Africa/Abidjan","id":"5ed69c61759b110015403b6b","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591298182875,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"sg-1","ipAddress":"10.128.0.2","name":"sg-1","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"numchucks":"true","throwingstar":"true","cloud":"gcp"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":75,"running":1,"blocked":0,"sleeping":74,"unknown":0,"list":[{"pid":1,"parentPid":0,"name":"init","pcpu":0.041194425587546664,"pcpuu":0.03066015542596699,"pcpus":0.010534270161579677,"pmem":0.7,"priority":19,"mem_vsz":56924,"mem_rss":4696,"nice":0,"started":"2020-04-09 16:09:14","state":"sleeping","tty":"","user":"root","command":"/sbin/init"},{"pid":11034,"parentPid":10962,"name":"sg-agent-launcher","pcpu":0.03240689546014485,"pcpuu":0.025417832590757142,"pcpus":0.006989062869387707,"pmem":10.1,"priority":19,"mem_vsz":1219184,"mem_rss":61576,"nice":0,"started":"2020-05-16 05:30:57","state":"sleeping","tty":"pts/2","user":"rich","command":"./sg-agent-launcher"},{"pid":4978,"parentPid":1,"name":"google_osconfig_agent","pcpu":0.017075661244189404,"pcpuu":0.016229101068722922,"pcpus":0.0008465601754664813,"pmem":1.9,"priority":19,"mem_vsz":117664,"mem_rss":11588,"nice":0,"started":"2020-04-30 14:49:18","state":"sleeping","tty":"","user":"root","command":"/usr/bin/google_osconfig_agent"},{"pid":688,"parentPid":1,"name":"python3","pcpu":0.006331538361517938,"pcpuu":0.0038787006946484634,"pcpus":0.0024528376668694744,"pmem":3.1,"priority":19,"mem_vsz":68712,"mem_rss":19192,"nice":0,"started":"2020-04-09 16:09:18","state":"sleeping","tty":"","user":"root","command":"/usr/bin/python3 /usr/bin/google_accounts_daemon"},{"pid":649,"parentPid":1,"name":"ntpd","pcpu":0.004706336276028511,"pcpuu":0.001636977388476542,"pcpus":0.003069358887551969,"pmem":0.3,"priority":19,"mem_vsz":97896,"mem_rss":2288,"nice":0,"started":"2020-04-09 16:09:17","state":"sleeping","tty":"","user":"ntp","command":"/usr/sbin/ntpd -p /var/run/ntpd.pid -g -c /run/ntp.conf.dhcp -u 106:110"},{"pid":684,"parentPid":1,"name":"python3","pcpu":0.004441391958818435,"pcpuu":0.0028496233228817074,"pcpus":0.001591768635936727,"pmem":3.1,"priority":19,"mem_vsz":68768,"mem_rss":18908,"nice":0,"started":"2020-04-09 16:09:18","state":"sleeping","tty":"","user":"root","command":"/usr/bin/python3 /usr/bin/google_network_daemon"},{"pid":691,"parentPid":1,"name":"sshd","pcpu":0.0032972951096596854,"pcpuu":0.0022267939041704017,"pcpus":0.0010705012054892838,"pmem":0.5,"priority":19,"mem_vsz":69956,"mem_rss":3076,"nice":0,"started":"2020-04-09 16:09:18","state":"sleeping","tty":"","user":"root","command":"/usr/sbin/sshd -D"},{"pid":422,"parentPid":1,"name":"systemd-journald","pcpu":0.002403213175709492,"pcpuu":0.0007229194941017792,"pcpus":0.0016802936816077128,"pmem":0.6,"priority":19,"mem_vsz":55816,"mem_rss":4096,"nice":0,"started":"2020-04-09 16:09:15","state":"sleeping","tty":"","user":"root","command":"/lib/systemd/systemd-journald"},{"pid":687,"parentPid":1,"name":"python3","pcpu":0.002378190656861874,"pcpuu":0.002113666886187052,"pcpus":0.000264523770674822,"pmem":2.9,"priority":19,"mem_vsz":68368,"mem_rss":18024,"nice":0,"started":"2020-04-09 16:09:18","state":"sleeping","tty":"","user":"root","command":"/usr/bin/python3 /usr/bin/google_clock_skew_daemon"},{"pid":387,"parentPid":2,"name":"sda1-8","pcpu":0.0008572841121154606,"pcpuu":0,"pcpus":0.0008572841121154606,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-04-09 16:09:15","state":"sleeping","tty":"","user":"root","command":"jbd2/sda1-8"}]},"time":{"current":1591205078842,"uptime":4756524,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Debian GNU/Linux","release":"9","codename":"stretch","kernel":"4.9.0-12-amd64","arch":"x64","hostname":"sg-1","codepage":"UTF-8","logofile":"debian","serial":"b232edd7d8ded9db30589980ee67073a","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.3,"max":2.3,"avg":2.3,"cores":[2.3]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.24,"currentload":0.1470911051531061,"currentload_user":0.1050552494143426,"currentload_system":0.041421464344109864,"currentload_nice":0.0006143913946536582,"currentload_idle":99.85290889484689,"currentload_irq":0,"raw_currentload":69931500,"raw_currentload_user":49946400,"raw_currentload_system":19693000,"raw_currentload_nice":292100,"raw_currentload_idle":47473052100,"raw_currentload_irq":0,"cpus":[{"load":0.1470911051531061,"load_user":0.1050552494143426,"load_system":0.041421464344109864,"load_nice":0.0006143913946536582,"load_idle":99.85290889484689,"load_irq":0,"raw_load":69931500,"raw_load_user":49946400,"raw_load_system":19693000,"raw_load_nice":292100,"raw_load_idle":47473052100,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/sda1","type":"ext4","size":10499674112,"used":2092814336,"use":19.93,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"42406","peeraddress":"172.217.212.95","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"44352","peeraddress":"169.254.169.254","peerport":"80","state":"CLOSE_WAIT"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"34792","peeraddress":"34.224.222.109","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"44368","peeraddress":"169.254.169.254","peerport":"80","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"56314","peeraddress":"34.239.39.39","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"44370","peeraddress":"169.254.169.254","peerport":"80","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"44360","peeraddress":"169.254.169.254","peerport":"80","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"10.128.0.2","localport":"41416","peeraddress":"52.216.95.3","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp6","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[],"mem":{"total":621248512,"free":224845824,"used":396402688,"active":235966464,"available":314826752,"buffcache":160436224,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.913,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":2956490424,"rx_dropped":0,"rx_errors":0,"tx_bytes":807468702,"tx_dropped":0,"tx_errors":0,"rx_sec":-1,"tx_sec":-1,"ms":0}],"fsStats":{"rx":2101457920,"wx":19659984896,"tx":21761442816,"rx_sec":-1,"wx_sec":-1,"tx_sec":-1,"ms":0},"disksIO":{"rIO":68481,"wIO":1495917,"tIO":1564398,"rIO_sec":-1,"wIO_sec":-1,"tIO_sec":-1,"ms":0}},"createDate":"2020-06-02T03:05:11.611Z","timezone":"Africa/Abidjan","id":"5e9bd8c12f90640015bfd8df","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591298208006,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","name":"ip-172-31-93-56.ec2.internal","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"numchucks":"true","ec2admin":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":92,"running":1,"blocked":0,"sleeping":55,"unknown":0,"list":[{"pid":1,"parentPid":0,"name":"systemd","pcpu":0.21534553828838013,"pcpuu":0.17841494780839545,"pcpus":0.03693059047998468,"pmem":0.4,"priority":19,"mem_vsz":117536,"mem_rss":4124,"nice":0,"started":"2019-07-03 22:23:10","state":"sleeping","tty":"","user":"root","command":"/usr/lib/systemd/systemd --switched-root --system --deserialize 22"},{"pid":1864,"parentPid":2,"name":"xvda1","pcpu":0.010553640892771414,"pcpuu":3.800922312458191e-7,"pcpus":0.010553260800540167,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2019-07-03 22:23:12","state":"sleeping","tty":"","user":"root","command":"xfsaild/xvda1"},{"pid":3188,"parentPid":1,"name":"sshd","pcpu":0.00829972851532291,"pcpuu":0.004869050589937351,"pcpus":0.003430677925385559,"pmem":0.1,"priority":19,"mem_vsz":112928,"mem_rss":1972,"nice":0,"started":"2019-07-03 22:23:18","state":"sleeping","tty":"","user":"root","command":"/usr/sbin/sshd -D"},{"pid":3182,"parentPid":1,"name":"rsyslogd","pcpu":0.00472544483420484,"pcpuu":0.0032360015953092915,"pcpus":0.0014894432388955485,"pmem":0.1,"priority":19,"mem_vsz":690816,"mem_rss":1952,"nice":0,"started":"2019-07-03 22:23:18","state":"sleeping","tty":"","user":"root","command":"/usr/sbin/rsyslogd -n"},{"pid":10217,"parentPid":10216,"name":"python","pcpu":0.004256929328435561,"pcpuu":0.0038969474316065665,"pcpus":0.00035998189682899485,"pmem":3.2,"priority":19,"mem_vsz":1022404,"mem_rss":32708,"nice":0,"started":"2020-05-26 03:56:30","state":"sleeping","tty":"","user":"ec2-user","command":"python server/src/workers/JobScheduler.py"},{"pid":3200,"parentPid":1,"name":"crond","pcpu":0.002958223281947006,"pcpuu":0.0018359491384349186,"pcpus":0.0011222741435120871,"pmem":0.1,"priority":19,"mem_vsz":135152,"mem_rss":1448,"nice":0,"started":"2019-07-03 22:23:18","state":"sleeping","tty":"","user":"root","command":"/usr/sbin/crond -n"},{"pid":2889,"parentPid":1,"name":"dhclient","pcpu":0.0024188032981307802,"pcpuu":0.0020105496879335664,"pcpus":0.00040825361019721385,"pmem":0.3,"priority":19,"mem_vsz":105452,"mem_rss":3596,"nice":0,"started":"2019-07-03 22:23:15","state":"sleeping","tty":"","user":"root","command":"/sbin/dhclient -q -lf /var/lib/dhclient/dhclient--eth0.lease -pf /var/run/dhclient-eth0.pid -H ip-172-31-93-56 eth0"},{"pid":8,"parentPid":2,"name":"rcu_sched","pcpu":0.0016377828705990303,"pcpuu":0.00005715205004368953,"pcpus":0.0015806308205553409,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2019-07-03 22:23:10","state":"unknown","tty":"","user":"root","command":"rcu_sched"},{"pid":26211,"parentPid":1,"name":"sg-agent-launcher","pcpu":0.0015863322040240281,"pcpuu":0.0011093510076497293,"pcpus":0.00047698119637429884,"pmem":10.2,"priority":19,"mem_vsz":1260660,"mem_rss":102916,"nice":0,"started":"2020-05-27 23:13:48","state":"sleeping","tty":"","user":"ec2-user","command":"./sg-agent-launcher"},{"pid":2664,"parentPid":1,"name":"rngd","pcpu":0.0012743455898496189,"pcpuu":0.0012274214762103624,"pcpus":0.000046924113639256574,"pmem":0,"priority":19,"mem_vsz":13144,"mem_rss":112,"nice":0,"started":"2019-07-03 22:23:14","state":"sleeping","tty":"","user":"root","command":"/sbin/rngd -f"}]},"time":{"current":1591205712372,"uptime":29013122,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Amazon Linux","release":"2","codename":"","kernel":"4.14.123-111.109.amzn2.x86_64","arch":"x64","hostname":"ip-172-31-93-56.ec2.internal","codepage":"UTF-8","logofile":"amazon linux","serial":"1e6f8fad3bb3493a8b69e361bda29599","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.4,"max":2.4,"avg":2.4,"cores":[2.4]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0,"currentload":0.07441115020389259,"currentload_user":0.04574045383067135,"currentload_system":0.028466715161523524,"currentload_nice":0.00020398121169772348,"currentload_idle":99.92558884979611,"currentload_irq":0,"raw_currentload":215301500,"raw_currentload_user":132345600,"raw_currentload_system":82365700,"raw_currentload_nice":590200,"raw_currentload_idle":289125072100,"raw_currentload_irq":0,"cpus":[{"load":0.07441115020389259,"load_user":0.04574045383067135,"load_system":0.028466715161523524,"load_nice":0.00020398121169772348,"load_idle":99.92558884979611,"load_irq":0,"raw_load":215301500,"raw_load_user":132345600,"raw_load_system":82365700,"raw_load_nice":590200,"raw_load_idle":289125072100,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/xvda1","type":"xfs","size":8577331200,"used":4566740992,"use":53.24,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"111","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"127.0.0.1","localport":"25","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"54470","peeraddress":"34.224.222.109","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"52510","peeraddress":"34.224.222.109","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"53956","peeraddress":"34.224.222.109","peerport":"5671","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"22","peeraddress":"96.60.74.166","peerport":"37930","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"56348","peeraddress":"35.153.105.141","peerport":"33228","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"56344","peeraddress":"35.153.105.141","peerport":"33228","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"52518","peeraddress":"34.224.222.109","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"52248","peeraddress":"34.224.222.109","peerport":"5671","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"172.31.93.56","localport":"46986","peeraddress":"52.216.162.211","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp6","localaddress":"::","localport":"111","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[{"user":"ec2-user","tty":"pts/1","date":"2020-06-03","time":"14:17","ip":"h96-60-74-166.stgrut.broadband.dynamic.tds.net","command":"-bash"}],"mem":{"total":1031507968,"free":376709120,"used":654798848,"active":401657856,"available":497192960,"buffcache":253140992,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.943,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":11736675576,"rx_dropped":0,"rx_errors":0,"tx_bytes":3482831601,"tx_dropped":0,"tx_errors":0,"rx_sec":-1,"tx_sec":-1,"ms":0}],"fsStats":{"rx":78816494080,"wx":136998670848,"tx":215815164928,"rx_sec":-1,"wx_sec":-1,"tx_sec":-1,"ms":0},"disksIO":{"rIO":951166,"wIO":20778835,"tIO":21730001,"rIO_sec":-1,"wIO_sec":-1,"tIO_sec":-1,"ms":0}},"createDate":"2020-06-02T03:05:25.192Z","timezone":"Africa/Abidjan","id":"5e9bd8842f90640015bfd8de","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591298185003,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"richwood-macbook.local","ipAddress":"192.168.10.41,10.211.55.2,10.37.129.2","name":"richwood-macbook.local","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":681,"running":1,"blocked":0,"sleeping":679,"unknown":0,"list":[{"pid":68061,"parentPid":68060,"name":"sg-agent","pcpu":17.7,"pcpuu":0,"pcpus":0,"pmem":0.2,"priority":31,"mem_vsz":6086096,"mem_rss":75824,"nice":0,"started":"2020-06-02 11:58:21","state":"sleeping","tty":"ttys002","user":"richwood","command":"sg-agent"},{"pid":6701,"parentPid":6698,"name":"com.docker.hyperkit","pcpu":13.2,"pcpuu":0,"pcpus":0,"pmem":0.2,"priority":31,"mem_vsz":6822304,"mem_rss":58092,"nice":0,"started":"2020-05-02 21:06:45","state":"sleeping","tty":"","user":"richwood","command":"com.docker.hyperkit"},{"pid":1320,"parentPid":1120,"name":"Postman Helper","pcpu":8.4,"pcpuu":0,"pcpus":0,"pmem":2.7,"priority":31,"mem_vsz":117343140,"mem_rss":89099,"nice":0,"started":"2020-05-01 12:32:23","state":"sleeping","tty":"","user":"richwood","command":"Postman Helper"},{"pid":63326,"parentPid":63325,"name":"node","pcpu":6.1,"pcpuu":0,"pcpus":0,"pmem":0.1,"priority":31,"mem_vsz":6711516,"mem_rss":24260,"nice":0,"started":"2020-05-25 09:51:46","state":"sleeping","tty":"ttys006","user":"richwood","command":"node"},{"pid":68060,"parentPid":67949,"name":"sg-agent-launcher","pcpu":5.2,"pcpuu":0,"pcpus":0,"pmem":0.1,"priority":31,"mem_vsz":5491500,"mem_rss":38236,"nice":0,"started":"2020-06-02 11:58:20","state":"sleeping","tty":"ttys002","user":"richwood","command":"sg-agent-launcher"},{"pid":240,"parentPid":1,"name":"syspolicyd","pcpu":4.9,"pcpuu":0,"pcpus":0,"pmem":0.1,"priority":37,"mem_vsz":6029560,"mem_rss":27180,"nice":0,"started":"2020-05-01 12:27:57","state":"sleeping","tty":"","user":"root","command":"syspolicyd"},{"pid":8140,"parentPid":7613,"name":"prl_vm_app","pcpu":3.2,"pcpuu":0,"pcpus":0,"pmem":5.5,"priority":63,"mem_vsz":8547252,"mem_rss":1837084,"nice":0,"started":"2020-05-20 10:34:23","state":"sleeping","tty":"","user":"richwood","command":"prl_vm_app"},{"pid":1261,"parentPid":1117,"name":"Google Chrome Helper (GPU)","pcpu":2.6,"pcpuu":0,"pcpus":0,"pmem":0.7,"priority":54,"mem_vsz":7513752,"mem_rss":223968,"nice":0,"started":"2020-05-01 12:32:17","state":"sleeping","tty":"","user":"richwood","command":"Google Chrome Helper (GPU)"},{"pid":237,"parentPid":1,"name":"WindowServer","pcpu":2.5,"pcpuu":0,"pcpus":0,"pmem":0.4,"priority":79,"mem_vsz":12160172,"mem_rss":117660,"nice":0,"started":"2020-05-01 12:27:57","state":"sleeping","tty":"","user":"_windowserver","command":"WindowServer"},{"pid":1117,"parentPid":1,"name":"Google Chrome","pcpu":2.1,"pcpuu":0,"pcpus":0,"pmem":1.9,"priority":55,"mem_vsz":8231252,"mem_rss":635964,"nice":0,"started":"2020-05-01 12:32:13","state":"sleeping","tty":"","user":"richwood","command":"Google Chrome"}]},"time":{"current":1591120703285,"uptime":2763063,"timezone":"GMT-0600","timezoneName":"Mountain Daylight Time"},"osInfo":{"platform":"darwin","distro":"Mac OS X","release":"10.15.4","codename":"macOS","kernel":"19.4.0","arch":"x64","hostname":"richwood-macbook.local","codepage":"UTF-8","logofile":"apple","serial":"AB0AA7EE-3D03-3C21-91AD-5719D79D7AF6","build":"19E287","servicepack":""},"cpuCurrentspeed":{"min":2.9,"max":2.9,"avg":2.9,"cores":[2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.15,"currentload":7.725820230674542,"currentload_user":4.06480804766654,"currentload_system":3.6610121830080016,"currentload_nice":0,"currentload_idle":92.27417976932546,"currentload_irq":0,"raw_currentload":911704530,"raw_currentload_user":479677730,"raw_currentload_system":432026800,"raw_currentload_nice":0,"raw_currentload_idle":10889042870,"raw_currentload_irq":0,"cpus":[{"load":22.576333764684062,"load_user":11.903692249524928,"load_system":10.672641515159134,"load_nice":0,"load_idle":77.42366623531593,"load_irq":0,"raw_load":222092270,"raw_load_user":117101300,"raw_load_system":104990970,"raw_load_nice":0,"raw_load_idle":761647040,"raw_load_irq":0},{"load":1.4145524997175762,"load_user":0.3945022190120601,"load_system":1.0200502807055163,"load_nice":0,"load_idle":98.58544750028241,"load_irq":0,"raw_load":13910190,"raw_load_user":3879390,"raw_load_system":10030800,"raw_load_nice":0,"raw_load_idle":969453100,"raw_load_irq":0},{"load":18.62244416743156,"load_user":10.017995939542015,"load_system":8.604448227889547,"load_nice":0,"load_idle":81.37755583256843,"load_irq":0,"raw_load":183127870,"raw_load_user":98514150,"raw_load_system":84613720,"raw_load_nice":0,"raw_load_idle":800243960,"raw_load_irq":0},{"load":1.1157341496454831,"load_user":0.3469900857200772,"load_system":0.768744063925406,"load_nice":0,"load_idle":98.88426585035451,"load_irq":0,"raw_load":10971710,"raw_load_user":3412170,"raw_load_system":7559540,"raw_load_nice":0,"raw_load_idle":972390680,"raw_load_irq":0},{"load":15.180498874625151,"load_user":8.230214479162738,"load_system":6.950284395462412,"load_nice":0,"load_idle":84.81950112537486,"load_irq":0,"raw_load":149280490,"raw_load_user":80933470,"raw_load_system":68347020,"raw_load_nice":0,"raw_load_idle":834089630,"raw_load_irq":0},{"load":0.9329173547359477,"load_user":0.313654747655412,"load_system":0.6192626070805355,"load_nice":0,"load_idle":99.06708264526405,"load_irq":0,"raw_load":9173950,"raw_load_user":3084360,"raw_load_system":6089590,"raw_load_nice":0,"raw_load_idle":974187540,"raw_load_irq":0},{"load":12.367794971491966,"load_user":6.713223513929805,"load_system":5.654571457562161,"load_nice":0,"load_idle":87.63220502850804,"load_irq":0,"raw_load":121620990,"raw_load_user":66015720,"raw_load_system":55605270,"raw_load_nice":0,"raw_load_idle":861747430,"raw_load_irq":0},{"load":0.7970850569508813,"load_user":0.2879838935983348,"load_system":0.5091011633525465,"load_nice":0,"load_idle":99.20291494304911,"load_irq":0,"raw_load":7838220,"raw_load_user":2831920,"raw_load_system":5006300,"raw_load_nice":0,"raw_load_idle":975522330,"raw_load_irq":0},{"load":10.319236754320912,"load_user":5.579418022200304,"load_system":4.739818732120607,"load_nice":0,"load_idle":89.68076324567909,"load_irq":0,"raw_load":101475940,"raw_load_user":54866140,"raw_load_system":46609800,"raw_load_nice":0,"raw_load_idle":881890780,"raw_load_irq":0},{"load":0.6488938466773106,"load_user":0.2595998426252223,"load_system":0.3892940040520883,"load_nice":0,"load_idle":99.35110615332269,"load_irq":0,"raw_load":6380960,"raw_load_user":2552800,"raw_load_system":3828160,"raw_load_nice":0,"raw_load_idle":976978650,"raw_load_irq":0},{"load":8.168504065123326,"load_user":4.4841040712248255,"load_system":3.6843999938985017,"load_nice":0,"load_idle":91.83149593487667,"load_irq":0,"raw_load":80326210,"raw_load_user":44095110,"raw_load_system":36231100,"raw_load_nice":0,"raw_load_idle":903038790,"raw_load_irq":0},{"load":0.5598903195717998,"load_user":0.24316661590017813,"load_system":0.31672370367162167,"load_nice":0,"load_idle":99.44010968042821,"load_irq":0,"raw_load":5505730,"raw_load_user":2391200,"raw_load_system":3114530,"raw_load_nice":0,"raw_load_idle":977852940,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/disk1s4","type":"HFS","size":1000240963584,"used":11189489664,"use":1.12,"mount":"/"},{"fs":"/dev/disk1s1","type":"HFS","size":1000240963584,"used":138493108224,"use":13.85,"mount":"/System/Volumes/Data"},{"fs":"/dev/disk1s5","type":"HFS","size":1000240963584,"used":13958672384,"use":1.4,"mount":"/private/var/vm"},{"fs":"/dev/disk1s3","type":"HFS","size":1000240963584,"used":528072704,"use":0.05,"mount":"/Volumes/Recovery"},{"fs":"/dev/disk2s1","type":"HFS","size":471150592,"used":421986304,"use":89.57,"mount":"15"}],"networkConnections":[{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59946","peeraddress":"3.216.129.32","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59942","peeraddress":"17.248.129.212","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::5817:478d:","localport":"1024","peeraddress":"fe80::df23:c401:","peerport":"1024","state":"SYN_SENT"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59941","peeraddress":"23.210.87.101","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59934","peeraddress":"34.223.218.161","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59933","peeraddress":"172.217.14.74","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59921","peeraddress":"54.149.94.178","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59889","peeraddress":"162.125.36.1","peerport":"443","state":"CLOSE_WAIT"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59883","peeraddress":"162.125.35.134","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59831","peeraddress":"34.224.222.109","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59798","peeraddress":"52.7.188.222","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59742","peeraddress":"69.147.88.7","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59731","peeraddress":"3.220.253.183","peerport":"443","state":"CLOSE_WAIT"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59644","peeraddress":"34.237.73.95","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59633","peeraddress":"18.246.31.131","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59530","peeraddress":"68.67.129.85","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59406","peeraddress":"8.39.36.195","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59298","peeraddress":"162.125.2.13","peerport":"443","state":"CLOSE_WAIT"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59112","peeraddress":"8.39.36.144","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59065","peeraddress":"172.217.4.165","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58775","peeraddress":"8.39.36.195","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58563","peeraddress":"162.125.2.7","peerport":"443","state":"CLOSE_WAIT"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58536","peeraddress":"17.57.144.100","peerport":"5223","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58362","peeraddress":"152.199.5.24","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58361","peeraddress":"104.16.190.66","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58360","peeraddress":"204.237.133.116","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58359","peeraddress":"35.165.171.194","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58358","peeraddress":"23.53.253.152","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58345","peeraddress":"13.226.235.85","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"58133","peeraddress":"35.153.105.141","peerport":"33228","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"57589","peeraddress":"3.93.99.67","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"56328","peeraddress":"fe80::aede:48ff:","peerport":"49164","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"56286","peeraddress":"192.168.10.22","peerport":"49639","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"56286","peeraddress":"192.168.10.25","peerport":"49885","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"56291","peeraddress":"192.168.10.26","peerport":"62968","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"*","localport":"56286","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp4","localaddress":"*","localport":"56286","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"56285","peeraddress":"fe80::aede:48ff:","peerport":"49157","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"55579","peeraddress":"18.235.131.226","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"55056","peeraddress":"34.224.222.109","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"55049","peeraddress":"35.153.105.141","peerport":"33228","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"55038","peeraddress":"34.198.55.217","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"55036","peeraddress":"74.125.137.188","peerport":"5228","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"55032","peeraddress":"fe80::aede:48ff:","peerport":"49177","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"54508","peeraddress":"216.58.217.202","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"54393","peeraddress":"140.82.112.25","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"54377","peeraddress":"3.92.254.88","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49155","peeraddress":"fe80::aede:48ff:","peerport":"49198","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"5672","peeraddress":"::1","peerport":"50536","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"50536","peeraddress":"::1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50534","peeraddress":"127.0.0.1","peerport":"50535","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50535","peeraddress":"127.0.0.1","peerport":"50534","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"27017","peeraddress":"::1","peerport":"60678","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"60678","peeraddress":"::1","peerport":"27017","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"5672","peeraddress":"127.0.0.1","peerport":"60677","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60677","peeraddress":"127.0.0.1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"5672","peeraddress":"127.0.0.1","peerport":"60676","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60676","peeraddress":"127.0.0.1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"5672","peeraddress":"127.0.0.1","peerport":"60675","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60675","peeraddress":"127.0.0.1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"5672","peeraddress":"127.0.0.1","peerport":"60674","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60674","peeraddress":"127.0.0.1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"5672","peeraddress":"127.0.0.1","peerport":"60673","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60673","peeraddress":"127.0.0.1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp46","localaddress":"*","localport":"3000","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"9364","peeraddress":"127.0.0.1","peerport":"60672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60672","peeraddress":"127.0.0.1","peerport":"9364","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"9364","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"53925","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"53475","peeraddress":"127.0.0.1","peerport":"53476","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"53476","peeraddress":"127.0.0.1","peerport":"53475","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"51780","peeraddress":"127.0.0.1","peerport":"51781","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"51781","peeraddress":"127.0.0.1","peerport":"51780","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"51742","peeraddress":"127.0.0.1","peerport":"51743","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"51743","peeraddress":"127.0.0.1","peerport":"51742","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50146","peeraddress":"127.0.0.1","peerport":"50147","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50147","peeraddress":"127.0.0.1","peerport":"50146","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60966","peeraddress":"127.0.0.1","peerport":"60967","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60967","peeraddress":"127.0.0.1","peerport":"60966","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60914","peeraddress":"127.0.0.1","peerport":"60915","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"60915","peeraddress":"127.0.0.1","peerport":"60914","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"59357","peeraddress":"127.0.0.1","peerport":"59358","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"59358","peeraddress":"127.0.0.1","peerport":"59357","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"54480","peeraddress":"127.0.0.1","peerport":"54481","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"54481","peeraddress":"127.0.0.1","peerport":"54480","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50621","peeraddress":"127.0.0.1","peerport":"50622","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50622","peeraddress":"127.0.0.1","peerport":"50621","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50081","peeraddress":"127.0.0.1","peerport":"50082","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"50082","peeraddress":"127.0.0.1","peerport":"50081","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"50062","peeraddress":"162.125.2.13","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"63915","peeraddress":"127.0.0.1","peerport":"63916","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"63916","peeraddress":"127.0.0.1","peerport":"63915","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"27017","peeraddress":"127.0.0.1","peerport":"63914","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"63914","peeraddress":"127.0.0.1","peerport":"27017","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"27017","peeraddress":"127.0.0.1","peerport":"63913","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"63913","peeraddress":"127.0.0.1","peerport":"27017","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"5672","peeraddress":"127.0.0.1","peerport":"63907","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"63907","peeraddress":"127.0.0.1","peerport":"5672","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"61734","peeraddress":"162.125.2.13","peerport":"443","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"17603","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"17600","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"*","localport":"17500","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp4","localaddress":"*","localport":"17500","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59655","peeraddress":"162.125.2.13","peerport":"443","state":"CLOSE_WAIT"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"62274","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"61512","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"27017","peeraddress":"::1","peerport":"60762","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"60762","peeraddress":"::1","peerport":"27017","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"27017","peeraddress":"::1","peerport":"60758","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"::1","localport":"60758","peeraddress":"::1","peerport":"27017","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"54436","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"51500","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49971","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"61991","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"61970","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"55097","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"59576","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"57403","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"54831","peeraddress":"127.0.0.1","peerport":"55899","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"54831","peeraddress":"127.0.0.1","peerport":"55898","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"55899","peeraddress":"127.0.0.1","peerport":"54831","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"55898","peeraddress":"127.0.0.1","peerport":"54831","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"55451","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"54831","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"53290","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"51355","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"64123","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::c5a9:c1:e9","localport":"36205","peeraddress":"fe80::32ee:8bb8:","peerport":"1025","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::c5a9:c1:e9","localport":"1024","peeraddress":"fe80::32ee:8bb8:","peerport":"1024","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"61770","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49919","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"58764","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"57650","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"58227","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"57445","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::9384:eb95:","localport":"1025","peeraddress":"fe80::804f:fe5e:","peerport":"21293","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::9384:eb95:","localport":"1024","peeraddress":"fe80::804f:fe5e:","peerport":"1024","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"51383","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"*","localport":"8080","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"64441","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"54939","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"56595","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp46","localaddress":"*","localport":"27017","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"15670","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"61614","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"61613","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"15674","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"5672","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"5671","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp46","localaddress":"*","localport":"15672","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp4","localaddress":"127.0.0.1","localport":"52500","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"52439","peeraddress":"fe80::aede:48ff:","peerport":"49162","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"52276","peeraddress":"fe80::aede:48ff:","peerport":"49174","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49289","peeraddress":"fe80::aede:48ff:","peerport":"49163","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49174","peeraddress":"fe80::aede:48ff:","peerport":"49175","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49160","peeraddress":"fe80::aede:48ff:","peerport":"49165","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49159","peeraddress":"fe80::aede:48ff:","peerport":"49158","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49158","peeraddress":"fe80::aede:48ff:","peerport":"49152","state":"ESTABLISHED"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49157","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49156","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49155","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49154","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49153","peeraddress":"*","peerport":"*","state":"LISTEN"},{"protocol":"tcp6","localaddress":"fe80::aede:48ff:","localport":"49152","peeraddress":"fe80::aede:48ff:","peerport":"59602","state":"ESTABLISHED"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59939","peeraddress":"35.224.99.156","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp4","localaddress":"192.168.10.41","localport":"59912","peeraddress":"34.224.222.109","peerport":"443","state":"TIME_WAIT"}],"users":[{"user":"richwood","tty":"ttys002","date":"2020-06-02","time":"11:55","ip":"","command":"w -ih"},{"user":"richwood","tty":"ttys013","date":"2020-05-01","time":"12:32","ip":"","command":"-zsh"},{"user":"richwood","tty":"ttys018","date":"2020-05-16","time":"23:38","ip":"","command":"-zsh"},{"user":"richwood","tty":"ttys007","date":"2020-05-01","time":"12:32","ip":"","command":"-zsh"},{"user":"richwood","tty":"ttys012","date":"2020-05-01","time":"12:32","ip":"","command":"-zsh"},{"user":"richwood","tty":"ttys014","date":"2020-05-01","time":"12:32","ip":"","command":"/System/Library/Frameworks/Pyt"},{"user":"richwood","tty":"ttys015","date":"2020-05-01","time":"12:32","ip":"","command":"-zsh"},{"user":"richwood","tty":"ttys010","date":"2020-05-01","time":"12:32","ip":"","command":"/System/Library/Frameworks/Pyt"},{"user":"richwood","tty":"ttys009","date":"2020-05-01","time":"12:32","ip":"","command":"node test/dist/test/src/RunWor"},{"user":"richwood","tty":"ttys006","date":"2020-05-01","time":"12:32","ip":"","command":"node /Users/richwood/dev/Kiki/"},{"user":"richwood","tty":"ttys005","date":"2020-05-01","time":"12:32","ip":"","command":"node /Users/richwood/dev/Kiki/"},{"user":"richwood","tty":"ttys004","date":"2020-05-01","time":"12:32","ip":"","command":"node /Users/richwood/dev/Kiki/"},{"user":"richwood","tty":"ttys008","date":"2020-05-01","time":"12:32","ip":"","command":"/usr/local/Cellar/node@10/10."},{"user":"richwood","tty":"console","date":"2020-05-01","time":"12:28","ip":"","command":"-"}],"mem":{"total":34359738368,"free":60579840,"used":34299158528,"active":11092348928,"available":23267389440,"buffcache":23206809600,"swaptotal":12884901888,"swapused":11634212864,"swapfree":1250689024},"battery":{"hasbattery":true,"cyclecount":110,"ischarging":false,"maxcapacity":6919,"currentcapacity":6822,"percent":100,"timeremaining":0,"acconnected":true,"type":"Li-ion","model":"","manufacturer":"Apple","serial":"D868272A1TLJ65H3F"},"inetLatency":21.41,"networkStats":[{"iface":"en0","operstate":"up","rx_bytes":19554377794,"rx_dropped":267,"rx_errors":0,"tx_bytes":8153791866,"tx_dropped":267,"tx_errors":12171,"rx_sec":-1,"tx_sec":-1,"ms":0}],"fsStats":{"rx":694190154752,"wx":691249786880,"tx":1385439941632,"rx_sec":-1,"wx_sec":-1,"tx_sec":-1,"ms":0},"disksIO":{"rIO":26939518,"wIO":20705485,"tIO":47645003,"rIO_sec":-1,"wIO_sec":-1,"tIO_sec":-1,"ms":0}},"createDate":"2020-06-02T17:55:56.175Z","timezone":"America/Denver","id":"5ed692ac759b110015403b6a","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591298201446,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"agent002","ipAddress":"172.19.0.3","name":"agent002","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"ruby":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":5,"running":1,"blocked":0,"sleeping":4,"unknown":0,"list":[{"pid":15,"parentPid":14,"name":"sg-agent","pcpu":0.02889924616008953,"pcpuu":0.01168267397961066,"pcpus":0.017216572180478867,"pmem":3.5,"priority":19,"mem_vsz":1238544,"mem_rss":72016,"nice":0,"started":"2020-06-03 15:19:19","state":"sleeping","tty":"","user":"root","command":"//sg-agent /tmp/app.SNRzZe2V7H.KikiAgentLauncherProc"},{"pid":1,"parentPid":0,"name":"sg-agent-launcher","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":3.3,"priority":19,"mem_vsz":1200948,"mem_rss":68072,"nice":0,"started":"2020-06-03 15:19:11","state":"sleeping","tty":"","user":"root","command":"/sg-agent-launcher"},{"pid":14,"parentPid":1,"name":"sh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":2388,"mem_rss":72,"nice":0,"started":"2020-06-03 15:19:19","state":"sleeping","tty":"","user":"root","command":"/bin/sh -c //sg-agent /tmp/app.SNRzZe2V7H.KikiAgentLauncherProc"},{"pid":977,"parentPid":15,"name":"sh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":2388,"mem_rss":684,"nice":0,"started":"2020-06-03 22:08:18","state":"sleeping","tty":"","user":"root","command":"/bin/sh -c export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command; unset LC_ALL"},{"pid":978,"parentPid":977,"name":"ps","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0.1,"priority":19,"mem_vsz":7640,"mem_rss":2696,"nice":0,"started":"2020-06-03 22:08:18","state":"running","tty":"","user":"root","command":"ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command"}]},"time":{"current":1591222100344,"uptime":1032351,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Debian GNU/Linux","release":"10","codename":"buster","kernel":"4.19.76-linuxkit","arch":"x64","hostname":"agent002","codepage":"UTF-8","logofile":"debian","serial":"a5a85d161208265bec1c6fb020b29456","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.9,"max":2.9,"avg":2.9,"cores":[2.9,2.9,2.9,2.9,2.9,2.9]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0,"currentload":0.8922641741483212,"currentload_user":0.3437461566842947,"currentload_system":0.5485180174640266,"currentload_nice":0,"currentload_idle":99.10773582585168,"currentload_irq":0,"raw_currentload":145100,"raw_currentload_user":55900,"raw_currentload_system":89200,"raw_currentload_nice":0,"raw_currentload_idle":16116900,"raw_currentload_irq":0,"cpus":[{"load":1.0004430005906675,"load_user":0.4430005906674543,"load_system":0.5574424099232133,"load_nice":0,"load_idle":98.99955699940934,"load_irq":0,"raw_load":27100,"raw_load_user":12000,"raw_load_system":15100,"raw_load_nice":0,"raw_load_idle":2681700,"raw_load_irq":0},{"load":0.7274741506646972,"load_user":0.24002954209748892,"load_system":0.4874446085672082,"load_nice":0,"load_idle":99.2725258493353,"load_irq":0,"raw_load":19700,"raw_load_user":6500,"raw_load_system":13200,"raw_load_nice":0,"raw_load_idle":2688300,"raw_load_irq":0},{"load":0.939988204069596,"load_user":0.3612503686228251,"load_system":0.5787378354467709,"load_nice":0,"load_idle":99.06001179593041,"load_irq":0,"raw_load":25500,"raw_load_user":9800,"raw_load_system":15700,"raw_load_nice":0,"raw_load_idle":2687300,"raw_load_irq":0},{"load":0.9119102119175958,"load_user":0.350734696891383,"load_system":0.5611755150262128,"load_nice":0,"load_idle":99.0880897880824,"load_irq":0,"raw_load":24700,"raw_load_user":9500,"raw_load_system":15200,"raw_load_nice":0,"raw_load_idle":2683900,"raw_load_irq":0},{"load":0.918277032010621,"load_user":0.3355952205340021,"load_system":0.582681811476619,"load_nice":0,"load_idle":99.08172296798938,"load_irq":0,"raw_load":24900,"raw_load_user":9100,"raw_load_system":15800,"raw_load_nice":0,"raw_load_idle":2686700,"raw_load_irq":0},{"load":0.8553941449745593,"load_user":0.33183393555047563,"load_system":0.5235602094240838,"load_nice":0,"load_idle":99.14460585502543,"load_irq":0,"raw_load":23200,"raw_load_user":9000,"raw_load_system":14200,"raw_load_nice":0,"raw_load_idle":2689000,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/sda1","type":"ext4","size":62725623808,"used":6215454720,"use":9.91,"mount":"/etc/hosts"}],"networkConnections":[{"protocol":"tcp","localaddress":"127.0.0.11","localport":"37585","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.19.0.3","localport":"39306","peeraddress":"34.224.222.109","peerport":"443","state":"ESTABLISHED"}],"users":[],"mem":{"total":2085785600,"free":135036928,"used":1950748672,"active":857530368,"available":1072611328,"buffcache":1093218304,"swaptotal":1073737728,"swapused":6828032,"swapfree":1066909696},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":22.607,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":26616354,"rx_dropped":0,"rx_errors":0,"tx_bytes":4842930,"tx_dropped":0,"tx_errors":0,"rx_sec":369.24160275542005,"tx_sec":190.4384883135458,"ms":274078}],"fsStats":{"rx":1309965312,"wx":2209763328,"tx":3519728640,"rx_sec":7053.772228749061,"wx_sec":3975.2190950153604,"tx_sec":11028.991323764421,"ms":274082},"disksIO":{"rIO":62796,"wIO":125179,"tIO":187975,"rIO_sec":0.1970213293831773,"wIO_sec":0.339314511715472,"tIO_sec":0.5363358410986493,"ms":274082}},"createDate":"2020-06-03T22:08:20.588Z","timezone":"Africa/Abidjan","id":"5ed69c63759b110015403b6d","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591298201267,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"agent003","ipAddress":"172.19.0.2","name":"agent003","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"lua":"true","perl":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":5,"running":1,"blocked":0,"sleeping":4,"unknown":0,"list":[{"pid":17,"parentPid":16,"name":"sg-agent","pcpu":0.026458933274262228,"pcpuu":0.01046050850377809,"pcpus":0.015998424770484135,"pmem":3.6,"priority":19,"mem_vsz":1240132,"mem_rss":73604,"nice":0,"started":"2020-06-03 15:19:21","state":"sleeping","tty":"","user":"root","command":"//sg-agent /tmp/app.V3sEW11Mvr.KikiAgentLauncherProc"},{"pid":1,"parentPid":0,"name":"sg-agent-launcher","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":2.7,"priority":19,"mem_vsz":1187976,"mem_rss":55816,"nice":0,"started":"2020-06-03 15:19:11","state":"sleeping","tty":"","user":"root","command":"/sg-agent-launcher"},{"pid":16,"parentPid":1,"name":"sh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":2388,"mem_rss":68,"nice":0,"started":"2020-06-03 15:19:21","state":"sleeping","tty":"","user":"root","command":"/bin/sh -c //sg-agent /tmp/app.V3sEW11Mvr.KikiAgentLauncherProc"},{"pid":979,"parentPid":17,"name":"sh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":2388,"mem_rss":744,"nice":0,"started":"2020-06-03 22:08:18","state":"sleeping","tty":"","user":"root","command":"/bin/sh -c export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command; unset LC_ALL"},{"pid":980,"parentPid":979,"name":"ps","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0.1,"priority":19,"mem_vsz":7640,"mem_rss":2700,"nice":0,"started":"2020-06-03 22:08:18","state":"running","tty":"","user":"root","command":"ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,lstart:30,state:5,tty:15,user:20,command"}]},"time":{"current":1591222100732,"uptime":1032351,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Debian GNU/Linux","release":"10","codename":"buster","kernel":"4.19.76-linuxkit","arch":"x64","hostname":"agent003","codepage":"UTF-8","logofile":"debian","serial":"a5a85d161208265bec1c6fb020b29456","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.9,"max":2.9,"avg":2.9,"cores":[2.9,2.9,2.9,2.9,2.9,2.9]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0,"currentload":0.8922912192390294,"currentload_user":0.343993649348012,"currentload_system":0.5482975698910174,"currentload_nice":0,"currentload_idle":99.10770878076097,"currentload_irq":0,"raw_currentload":145000,"raw_currentload_user":55900,"raw_currentload_system":89100,"raw_currentload_nice":0,"raw_currentload_idle":16105300,"raw_currentload_irq":0,"cpus":[{"load":1.0047652469432233,"load_user":0.443278785416128,"load_system":0.5614864615270954,"load_nice":0,"load_idle":98.99523475305678,"load_irq":0,"raw_load":27200,"raw_load_user":12000,"raw_load_system":15200,"raw_load_nice":0,"raw_load_idle":2679900,"raw_load_irq":0},{"load":0.7316802778906913,"load_user":0.24389342596356378,"load_system":0.48778685192712756,"load_nice":0,"load_idle":99.26831972210931,"load_irq":0,"raw_load":19800,"raw_load_user":6600,"raw_load_system":13200,"raw_load_nice":0,"raw_load_idle":2686300,"raw_load_irq":0},{"load":0.9369927696620924,"load_user":0.35782794746938174,"load_system":0.5791648221927106,"load_nice":0,"load_idle":99.0630072303379,"load_irq":0,"raw_load":25400,"raw_load_user":9700,"raw_load_system":15700,"raw_load_nice":0,"raw_load_idle":2685400,"raw_load_irq":0},{"load":0.9089565474430978,"load_user":0.3510198049068874,"load_system":0.5579367425362105,"load_nice":0,"load_idle":99.0910434525569,"load_irq":0,"raw_load":24600,"raw_load_user":9500,"raw_load_system":15100,"raw_load_nice":0,"raw_load_idle":2681800,"raw_load_irq":0},{"load":0.9116073076213322,"load_user":0.33216460601587006,"load_system":0.5794427016054623,"load_nice":0,"load_idle":99.08839269237866,"load_irq":0,"raw_load":24700,"raw_load_user":9000,"raw_load_system":15700,"raw_load_nice":0,"raw_load_idle":2684800,"raw_load_irq":0},{"load":0.8596517119244392,"load_user":0.3357438016528926,"load_system":0.5239079102715466,"load_nice":0,"load_idle":99.14034828807556,"load_irq":0,"raw_load":23300,"raw_load_user":9100,"raw_load_system":14200,"raw_load_nice":0,"raw_load_idle":2687100,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/sda1","type":"ext4","size":62725623808,"used":6215454720,"use":9.91,"mount":"/etc/hosts"}],"networkConnections":[{"protocol":"tcp","localaddress":"127.0.0.11","localport":"35751","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.19.0.2","localport":"50804","peeraddress":"34.224.222.109","peerport":"443","state":"ESTABLISHED"}],"users":[],"mem":{"total":2085785600,"free":132857856,"used":1952927744,"active":858374144,"available":1071042560,"buffcache":1094553600,"swaptotal":1073737728,"swapused":6828032,"swapfree":1066909696},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":21.826,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":26620169,"rx_dropped":0,"rx_errors":0,"tx_bytes":4834277,"tx_dropped":0,"tx_errors":0,"rx_sec":368.72795519107325,"tx_sec":189.3681035804786,"ms":273874}],"fsStats":{"rx":1309977600,"wx":2209763328,"tx":3519740928,"rx_sec":6969.394685147184,"wx_sec":3978.238167916633,"tx_sec":10947.632853063817,"ms":273874},"disksIO":{"rIO":62796,"wIO":125179,"tIO":187975,"rIO_sec":0.19716808213876252,"wIO_sec":0.33956725257231324,"tIO_sec":0.5367353347110757,"ms":273878}},"createDate":"2020-06-03T22:08:20.979Z","timezone":"Africa/Abidjan","id":"5ed69c63759b110015403b6c","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591229377006,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","name":"ip-172-31-88-250","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"agentbuilder":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":77,"running":1,"blocked":0,"sleeping":52,"unknown":0,"list":[{"pid":1,"parentPid":0,"name":"init","pcpu":10.792233560090704,"pcpuu":9.397144274376418,"pcpus":1.3950892857142858,"pmem":0.4,"priority":19,"mem_vsz":19696,"mem_rss":2400,"nice":0,"started":"2020-06-03 23:49:47","state":"sleeping","tty":"","user":"root","command":"/sbin/init"},{"pid":3581,"parentPid":3580,"name":"-bash","pcpu":0.10894982993197279,"pcpuu":0.07794784580498866,"pcpus":0.031001984126984124,"pmem":0.5,"priority":19,"mem_vsz":115412,"mem_rss":3352,"nice":0,"started":"2020-06-04 00:00:01","state":"sleeping","tty":"pts/0","user":"ec2-user","command":"-bash"},{"pid":4366,"parentPid":4357,"name":"sg-agent","pcpu":0.056689342403628114,"pcpuu":0.04783163265306122,"pcpus":0.008857709750566893,"pmem":12.2,"priority":19,"mem_vsz":1103056,"mem_rss":73116,"nice":0,"started":"2020-06-04 00:08:32","state":"sleeping","tty":"pts/0","user":"ec2-user","command":"/home/ec2-user/sg-agent /tmp/app.mH53czc9EO.KikiAgentLauncherProc"},{"pid":1567,"parentPid":1,"name":"udevd","pcpu":0.03631660997732426,"pcpuu":0.026573129251700682,"pcpus":0.009743480725623583,"pmem":0.4,"priority":19,"mem_vsz":11420,"mem_rss":2600,"nice":0,"started":"2020-06-03 23:49:53","state":"sleeping","tty":"","user":"root","command":"/sbin/udevd -d"},{"pid":4357,"parentPid":3581,"name":"sg-agent-launcher","pcpu":0.023030045351473922,"pcpuu":0.021258503401360544,"pcpus":0.0017715419501133788,"pmem":7,"priority":19,"mem_vsz":1058244,"mem_rss":42080,"nice":0,"started":"2020-06-04 00:08:32","state":"sleeping","tty":"pts/0","user":"ec2-user","command":"./sg-agent-launcher"},{"pid":659,"parentPid":2,"name":"kswapd0","pcpu":0.01594387755102041,"pcpuu":0,"pcpus":0.01594387755102041,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-03 23:49:47","state":"sleeping","tty":"","user":"root","command":"kswapd0"},{"pid":8,"parentPid":2,"name":"rcu_sched","pcpu":0.01417233560090703,"pcpuu":0.01417233560090703,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-03 23:49:47","state":"unknown","tty":"","user":"root","command":"rcu_sched"},{"pid":3952,"parentPid":2,"name":"u30:2","pcpu":0.011515022675736961,"pcpuu":0,"pcpus":0.011515022675736961,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:03:17","state":"unknown","tty":"","user":"root","command":"kworker/u30:2"},{"pid":16,"parentPid":2,"name":"u30:1","pcpu":0.008857709750566893,"pcpuu":0,"pcpus":0.008857709750566893,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-03 23:49:47","state":"unknown","tty":"","user":"root","command":"kworker/u30:1"},{"pid":2769,"parentPid":1,"name":"ntpd","pcpu":0.006200396825396826,"pcpuu":0.004428854875283447,"pcpus":0.0017715419501133788,"pmem":0.7,"priority":19,"mem_vsz":116436,"mem_rss":4556,"nice":0,"started":"2020-06-03 23:50:50","state":"sleeping","tty":"","user":"ntp","command":"ntpd -u ntp:ntp -p /var/run/ntpd.pid -g"}]},"time":{"current":1591229316875,"uptime":1129,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Amazon Linux AMI","release":"2018.03","codename":"","kernel":"4.14.154-99.181.amzn1.x86_64","arch":"x64","hostname":"ip-172-31-88-250","codepage":"UTF-8","logofile":"amazon linux ami","serial":"e938414c9ad827c6ffae5b695df3af92","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.5,"max":2.5,"avg":2.5,"cores":[2.5]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.23,"currentload":11.669317278200614,"currentload_user":10.130069294558673,"currentload_system":1.5392479836419404,"currentload_nice":0,"currentload_idle":88.33068272179939,"currentload_irq":0,"raw_currentload":1232700,"raw_currentload_user":1070100,"raw_currentload_system":162600,"raw_currentload_nice":0,"raw_currentload_idle":9330900,"raw_currentload_irq":0,"cpus":[{"load":11.669317278200614,"load_user":10.130069294558673,"load_system":1.5392479836419404,"load_nice":0,"load_idle":88.33068272179939,"load_irq":0,"raw_load":1232700,"raw_load_user":1070100,"raw_load_system":162600,"raw_load_nice":0,"raw_load_idle":9330900,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/xvda1","type":"ext4","size":105620189184,"used":1943982080,"use":1.84,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"53815","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"127.0.0.1","localport":"25","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"111","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.31.88.250","localport":"22","peeraddress":"96.60.74.166","peerport":"35983","state":"ESTABLISHED"},{"protocol":"tcp","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"57863","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"111","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[{"user":"ec2-user","tty":"pts/0","date":"2020-06-04","time":"00:00","ip":"h96-60-74-166.stgrut.broadband.dynamic.tds.net","command":"./sg-agent-la"}],"mem":{"total":611102720,"free":330407936,"used":280694784,"active":169119744,"available":398602240,"buffcache":111575040,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.9,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":154773005,"rx_dropped":0,"rx_errors":0,"tx_bytes":3866516,"tx_dropped":0,"tx_errors":0,"rx_sec":-1,"tx_sec":-1,"ms":0}],"fsStats":{"rx":335086080,"wx":868241408,"tx":1203327488,"rx_sec":-1,"wx_sec":-1,"tx_sec":-1,"ms":0},"disksIO":{"rIO":16834,"wIO":14088,"tIO":30922,"rIO_sec":-1,"wIO_sec":-1,"tIO_sec":-1,"ms":0}},"createDate":"2020-06-03T23:51:01.939Z","timezone":"Africa/Abidjan","id":"5ed837652a8c780015a48967","version":0},{"numActiveTasks":1,"lastHeartbeatTime":1591231157511,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","name":"ip-172-31-81-138","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"agentbuilder":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":76,"running":1,"blocked":0,"sleeping":48,"unknown":0,"list":[{"pid":2881,"parentPid":2849,"name":"sg-agent","pcpu":13.245033112582782,"pcpuu":9.933774834437086,"pcpus":3.3112582781456954,"pmem":12.3,"priority":19,"mem_vsz":1101776,"mem_rss":73968,"nice":0,"started":"2020-06-04 00:38:12","state":"sleeping","tty":"","user":"ec2-user","command":"/home/ec2-user/sg-agent /tmp/app.ieu0A22WIp.KikiAgentLauncherProc"},{"pid":1454,"parentPid":2,"name":"u30:2","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:58","state":"unknown","tty":"","user":"root","command":"kworker/u30:2"},{"pid":3,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:57","state":"unknown","tty":"","user":"root","command":"kworker/0:0"},{"pid":4,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 00:36:57","state":"unknown","tty":"","user":"root","command":"kworker/0:0H"},{"pid":5,"parentPid":2,"name":"u30:0","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:57","state":"unknown","tty":"","user":"root","command":"kworker/u30:0"},{"pid":6,"parentPid":2,"name":"mm_percpu_wq","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 00:36:57","state":"unknown","tty":"","user":"root","command":"mm_percpu_wq"},{"pid":7,"parentPid":2,"name":"ksoftirqd","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:57","state":"sleeping","tty":"","user":"root","command":"ksoftirqd/0"},{"pid":8,"parentPid":2,"name":"rcu_sched","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:57","state":"unknown","tty":"","user":"root","command":"rcu_sched"},{"pid":9,"parentPid":2,"name":"rcu_bh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:57","state":"unknown","tty":"","user":"root","command":"rcu_bh"},{"pid":10,"parentPid":2,"name":"migration","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":139,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 00:36:57","state":"sleeping","tty":"","user":"root","command":"migration/0"}]},"time":{"current":1591231097418,"uptime":79,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Amazon Linux AMI","release":"2018.03","codename":"","kernel":"4.14.154-99.181.amzn1.x86_64","arch":"x64","hostname":"ip-172-31-81-138","codepage":"UTF-8","logofile":"amazon linux ami","serial":"e938414c9ad827c6ffae5b695df3af92","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.5,"max":2.5,"avg":2.5,"cores":[2.5]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.97,"currentload":13.986013986013987,"currentload_user":6.993006993006993,"currentload_system":6.993006993006993,"currentload_nice":0,"currentload_idle":86.01398601398601,"currentload_irq":0,"raw_currentload":2000,"raw_currentload_user":1000,"raw_currentload_system":1000,"raw_currentload_nice":0,"raw_currentload_idle":12300,"raw_currentload_irq":0,"cpus":[{"load":13.986013986013987,"load_user":6.993006993006993,"load_system":6.993006993006993,"load_nice":0,"load_idle":86.01398601398601,"load_irq":0,"raw_load":2000,"raw_load_user":1000,"raw_load_system":1000,"raw_load_nice":0,"raw_load_idle":12300,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/xvda1","type":"ext4","size":105620189184,"used":1622323200,"use":1.54,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"111","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"127.0.0.1","localport":"25","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"53793","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"60532","peeraddress":"52.216.95.51","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"54368","peeraddress":"52.216.145.51","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"60534","peeraddress":"52.216.95.51","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"52382","peeraddress":"52.216.137.84","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"55716","peeraddress":"52.218.243.83","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"60542","peeraddress":"34.239.39.39","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"54370","peeraddress":"52.216.145.51","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"34592","peeraddress":"52.219.120.34","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.81.138","localport":"49484","peeraddress":"52.217.42.156","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"::","localport":"42537","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"111","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[],"mem":{"total":611102720,"free":45092864,"used":566009856,"active":303665152,"available":301248512,"buffcache":262344704,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.527,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":76329602,"rx_dropped":0,"rx_errors":0,"tx_bytes":604425,"tx_dropped":0,"tx_errors":0,"rx_sec":17131.972789115647,"tx_sec":8555.102040816326,"ms":1470}],"fsStats":{"rx":246137344,"wx":315342848,"tx":561480192,"rx_sec":5876.61406025825,"wx_sec":94025.824964132,"tx_sec":99902.43902439025,"ms":1394},"disksIO":{"rIO":9169,"wIO":4397,"tIO":13566,"rIO_sec":0,"wIO_sec":1.4347202295552368,"tIO_sec":1.4347202295552368,"ms":1394}},"createDate":"2020-06-04T00:38:16.044Z","timezone":"Africa/Abidjan","id":"5ed842782a8c780015a489ff","version":0},{"numActiveTasks":1,"lastHeartbeatTime":1591235432427,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"ip-172-31-83-252","ipAddress":"172.31.83.252","name":"ip-172-31-83-252","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"agentbuilder":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":77,"running":1,"blocked":0,"sleeping":49,"unknown":0,"list":[{"pid":2873,"parentPid":2848,"name":"sg-agent","pcpu":10.48951048951049,"pcpuu":7.6923076923076925,"pcpus":2.797202797202797,"pmem":7.3,"priority":19,"mem_vsz":1104340,"mem_rss":74212,"nice":0,"started":"2020-06-04 01:39:26","state":"sleeping","tty":"","user":"ec2-user","command":"/home/ec2-user/sg-agent /tmp/app.9DvRI1LqkH.KikiAgentLauncherProc"},{"pid":1463,"parentPid":2,"name":"u30:2","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:16","state":"unknown","tty":"","user":"root","command":"kworker/u30:2"},{"pid":3,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:15","state":"unknown","tty":"","user":"root","command":"kworker/0:0"},{"pid":4,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 01:38:15","state":"unknown","tty":"","user":"root","command":"kworker/0:0H"},{"pid":5,"parentPid":2,"name":"u30:0","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:15","state":"unknown","tty":"","user":"root","command":"kworker/u30:0"},{"pid":6,"parentPid":2,"name":"mm_percpu_wq","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 01:38:15","state":"unknown","tty":"","user":"root","command":"mm_percpu_wq"},{"pid":7,"parentPid":2,"name":"ksoftirqd","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:15","state":"sleeping","tty":"","user":"root","command":"ksoftirqd/0"},{"pid":8,"parentPid":2,"name":"rcu_sched","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:15","state":"unknown","tty":"","user":"root","command":"rcu_sched"},{"pid":9,"parentPid":2,"name":"rcu_bh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:15","state":"unknown","tty":"","user":"root","command":"rcu_bh"},{"pid":10,"parentPid":2,"name":"migration","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":139,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 01:38:15","state":"sleeping","tty":"","user":"root","command":"migration/0"}]},"time":{"current":1591234771631,"uptime":76,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Amazon Linux AMI","release":"2018.03","codename":"","kernel":"4.14.154-99.181.amzn1.x86_64","arch":"x64","hostname":"ip-172-31-83-252","codepage":"UTF-8","logofile":"amazon linux ami","serial":"e938414c9ad827c6ffae5b695df3af92","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.4,"max":2.4,"avg":2.4,"cores":[2.4]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.92,"currentload":11.11111111111111,"currentload_user":5.9259259259259265,"currentload_system":5.185185185185185,"currentload_nice":0,"currentload_idle":88.88888888888889,"currentload_irq":0,"raw_currentload":1500,"raw_currentload_user":800,"raw_currentload_system":700,"raw_currentload_nice":0,"raw_currentload_idle":12000,"raw_currentload_irq":0,"cpus":[{"load":11.11111111111111,"load_user":5.9259259259259265,"load_system":5.185185185185185,"load_nice":0,"load_idle":88.88888888888889,"load_irq":0,"raw_load":1500,"raw_load_user":800,"raw_load_system":700,"raw_load_nice":0,"raw_load_idle":12000,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/xvda1","type":"ext4","size":105620189184,"used":1622327296,"use":1.54,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"127.0.0.1","localport":"25","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"58415","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"111","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"47428","peeraddress":"52.217.11.140","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"55130","peeraddress":"52.216.29.140","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"49456","peeraddress":"52.216.18.160","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"47430","peeraddress":"52.217.11.140","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"47696","peeraddress":"52.200.95.123","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"47432","peeraddress":"52.217.11.140","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"50308","peeraddress":"52.216.145.67","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.252","localport":"49454","peeraddress":"52.216.18.160","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"42637","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"111","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[],"mem":{"total":1033674752,"free":397545472,"used":636129280,"active":294203392,"available":679587840,"buffcache":341925888,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.642,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":76276583,"rx_dropped":0,"rx_errors":0,"tx_bytes":118702,"tx_dropped":0,"tx_errors":0,"rx_sec":17622.159090909092,"tx_sec":8517.045454545456,"ms":1408}],"fsStats":{"rx":227717632,"wx":264790016,"tx":492507648,"rx_sec":0,"wx_sec":103158.51851851851,"tx_sec":103158.51851851851,"ms":1350},"disksIO":{"rIO":8471,"wIO":3924,"tIO":12395,"rIO_sec":0,"wIO_sec":2.222222222222222,"tIO_sec":2.222222222222222,"ms":1350}},"createDate":"2020-06-04T01:39:30.298Z","timezone":"Africa/Abidjan","id":"5ed850d22a8c780015a48a46","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591244061414,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"ip-172-31-83-126","ipAddress":"172.31.83.126","name":"ip-172-31-83-126","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"agentbuilder":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":76,"running":1,"blocked":0,"sleeping":49,"unknown":0,"list":[{"pid":2893,"parentPid":2865,"name":"sg-agent","pcpu":11.643835616438356,"pcpuu":9.58904109589041,"pcpus":2.054794520547945,"pmem":7.3,"priority":19,"mem_vsz":1103824,"mem_rss":74564,"nice":0,"started":"2020-06-04 04:13:15","state":"sleeping","tty":"","user":"ec2-user","command":"/home/ec2-user/sg-agent /tmp/app.dDApdRKzU1.KikiAgentLauncherProc"},{"pid":1463,"parentPid":2,"name":"u30:2","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:02","state":"unknown","tty":"","user":"root","command":"kworker/u30:2"},{"pid":3,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:00","state":"unknown","tty":"","user":"root","command":"kworker/0:0"},{"pid":4,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 04:12:00","state":"unknown","tty":"","user":"root","command":"kworker/0:0H"},{"pid":5,"parentPid":2,"name":"u30:0","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:00","state":"unknown","tty":"","user":"root","command":"kworker/u30:0"},{"pid":6,"parentPid":2,"name":"mm_percpu_wq","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 04:12:00","state":"unknown","tty":"","user":"root","command":"mm_percpu_wq"},{"pid":7,"parentPid":2,"name":"ksoftirqd","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:00","state":"sleeping","tty":"","user":"root","command":"ksoftirqd/0"},{"pid":8,"parentPid":2,"name":"rcu_sched","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:00","state":"unknown","tty":"","user":"root","command":"rcu_sched"},{"pid":9,"parentPid":2,"name":"rcu_bh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:00","state":"unknown","tty":"","user":"root","command":"rcu_bh"},{"pid":10,"parentPid":2,"name":"migration","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":139,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:12:00","state":"sleeping","tty":"","user":"root","command":"migration/0"}]},"time":{"current":1591244001342,"uptime":80,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Amazon Linux AMI","release":"2018.03","codename":"","kernel":"4.14.154-99.181.amzn1.x86_64","arch":"x64","hostname":"ip-172-31-83-126","codepage":"UTF-8","logofile":"amazon linux ami","serial":"e938414c9ad827c6ffae5b695df3af92","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.4,"max":2.4,"avg":2.4,"cores":[2.4]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.75,"currentload":12.318840579710146,"currentload_user":6.521739130434782,"currentload_system":5.797101449275362,"currentload_nice":0,"currentload_idle":87.68115942028986,"currentload_irq":0,"raw_currentload":1700,"raw_currentload_user":900,"raw_currentload_system":800,"raw_currentload_nice":0,"raw_currentload_idle":12100,"raw_currentload_irq":0,"cpus":[{"load":12.318840579710146,"load_user":6.521739130434782,"load_system":5.797101449275362,"load_nice":0,"load_idle":87.68115942028986,"load_irq":0,"raw_load":1700,"raw_load_user":900,"raw_load_system":800,"raw_load_nice":0,"raw_load_idle":12100,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/xvda1","type":"ext4","size":105620189184,"used":1622327296,"use":1.54,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"111","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"127.0.0.1","localport":"25","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"36445","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"43934","peeraddress":"52.216.0.8","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"42404","peeraddress":"52.216.244.172","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"35400","peeraddress":"52.216.104.3","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"42406","peeraddress":"52.216.244.172","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"33288","peeraddress":"52.219.120.170","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"35398","peeraddress":"52.216.104.3","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"55178","peeraddress":"52.70.139.21","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"52726","peeraddress":"52.218.225.139","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.83.126","localport":"42402","peeraddress":"52.216.244.172","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"::","localport":"111","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"41763","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[],"mem":{"total":1033674752,"free":398110720,"used":635564032,"active":294006784,"available":680247296,"buffcache":341557248,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.704,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":76275823,"rx_dropped":0,"rx_errors":0,"tx_bytes":123955,"tx_dropped":0,"tx_errors":0,"rx_sec":17494.444444444445,"tx_sec":8314.583333333334,"ms":1440}],"fsStats":{"rx":227717632,"wx":264704000,"tx":492421632,"rx_sec":0,"wx_sec":0,"tx_sec":0,"ms":1370},"disksIO":{"rIO":8474,"wIO":3931,"tIO":12405,"rIO_sec":0,"wIO_sec":0,"tIO_sec":0,"ms":1369}},"createDate":"2020-06-04T04:13:19.989Z","timezone":"Africa/Abidjan","id":"5ed874df2a8c780015a48a5d","version":0},{"numActiveTasks":0,"lastHeartbeatTime":1591246279694,"offline":false,"cron":"","_orgId":"5e99cbcb2317950015edb655","machineId":"ip-172-31-80-128","ipAddress":"172.31.80.128","name":"ip-172-31-80-128","reportedVersion":"v0.0.0.223","targetVersion":"v0.0.0.223","tags":{"agentbuilder":"true"},"propertyOverrides":{"trackSysInfo":false,"maxActiveTasks":10},"sysInfo":{"processes":{"all":76,"running":1,"blocked":0,"sleeping":49,"unknown":0,"list":[{"pid":2863,"parentPid":2838,"name":"sg-agent","pcpu":10.714285714285714,"pcpuu":8.571428571428571,"pcpus":2.142857142857143,"pmem":7.3,"priority":19,"mem_vsz":1104340,"mem_rss":74448,"nice":0,"started":"2020-06-04 04:49:44","state":"sleeping","tty":"","user":"ec2-user","command":"/home/ec2-user/sg-agent /tmp/app.vW26W3qsqY.KikiAgentLauncherProc"},{"pid":1463,"parentPid":2,"name":"u30:2","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:43","state":"unknown","tty":"","user":"root","command":"kworker/u30:2"},{"pid":3,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:42","state":"unknown","tty":"","user":"root","command":"kworker/0:0"},{"pid":4,"parentPid":2,"name":"kworker","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 04:48:42","state":"unknown","tty":"","user":"root","command":"kworker/0:0H"},{"pid":5,"parentPid":2,"name":"u30:0","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:42","state":"unknown","tty":"","user":"root","command":"kworker/u30:0"},{"pid":6,"parentPid":2,"name":"mm_percpu_wq","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":39,"mem_vsz":0,"mem_rss":0,"nice":-20,"started":"2020-06-04 04:48:42","state":"unknown","tty":"","user":"root","command":"mm_percpu_wq"},{"pid":7,"parentPid":2,"name":"ksoftirqd","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:42","state":"sleeping","tty":"","user":"root","command":"ksoftirqd/0"},{"pid":8,"parentPid":2,"name":"rcu_sched","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:42","state":"unknown","tty":"","user":"root","command":"rcu_sched"},{"pid":9,"parentPid":2,"name":"rcu_bh","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":19,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:42","state":"unknown","tty":"","user":"root","command":"rcu_bh"},{"pid":10,"parentPid":2,"name":"migration","pcpu":0,"pcpuu":0,"pcpus":0,"pmem":0,"priority":139,"mem_vsz":0,"mem_rss":0,"nice":0,"started":"2020-06-04 04:48:42","state":"sleeping","tty":"","user":"root","command":"migration/0"}]},"time":{"current":1591246189574,"uptime":66,"timezone":"GMT+0000","timezoneName":"Coordinated Universal Time"},"osInfo":{"platform":"linux","distro":"Amazon Linux AMI","release":"2018.03","codename":"","kernel":"4.14.154-99.181.amzn1.x86_64","arch":"x64","hostname":"ip-172-31-80-128","codepage":"UTF-8","logofile":"amazon linux ami","serial":"e938414c9ad827c6ffae5b695df3af92","build":"","servicepack":""},"cpuCurrentspeed":{"min":2.4,"max":2.4,"avg":2.4,"cores":[2.4]},"cpuTemperature":{"main":-1,"cores":[],"max":-1},"currentLoad":{"avgload":0.7,"currentload":11.851851851851853,"currentload_user":5.9259259259259265,"currentload_system":5.9259259259259265,"currentload_nice":0,"currentload_idle":88.14814814814815,"currentload_irq":0,"raw_currentload":1600,"raw_currentload_user":800,"raw_currentload_system":800,"raw_currentload_nice":0,"raw_currentload_idle":11900,"raw_currentload_irq":0,"cpus":[{"load":11.851851851851853,"load_user":5.9259259259259265,"load_system":5.9259259259259265,"load_nice":0,"load_idle":88.14814814814815,"load_irq":0,"raw_load":1600,"raw_load_user":800,"raw_load_system":800,"raw_load_nice":0,"raw_load_idle":11900,"raw_load_irq":0}]},"fsSize":[{"fs":"/dev/xvda1","type":"ext4","size":105620189184,"used":1622327296,"use":1.54,"mount":"/"}],"networkConnections":[{"protocol":"tcp","localaddress":"0.0.0.0","localport":"58447","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"111","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"0.0.0.0","localport":"22","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"127.0.0.1","localport":"25","peeraddress":"0.0.0.0","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"59764","peeraddress":"169.254.169.254","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"43938","peeraddress":"52.216.249.196","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"43940","peeraddress":"52.216.249.196","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"43942","peeraddress":"52.216.249.196","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"45332","peeraddress":"52.216.142.172","peerport":"443","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"35590","peeraddress":"54.144.58.175","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"58688","peeraddress":"52.218.208.122","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"52088","peeraddress":"52.219.116.226","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"60758","peeraddress":"52.216.131.99","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"172.31.80.128","localport":"60760","peeraddress":"52.216.131.99","peerport":"80","state":"TIME_WAIT"},{"protocol":"tcp","localaddress":"::","localport":"111","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"22","peeraddress":"::","peerport":"*","state":"LISTEN"},{"protocol":"tcp","localaddress":"::","localport":"36793","peeraddress":"::","peerport":"*","state":"LISTEN"}],"users":[],"mem":{"total":1033674752,"free":395808768,"used":637865984,"active":295903232,"available":677838848,"buffcache":341962752,"swaptotal":0,"swapused":0,"swapfree":0},"battery":{"hasbattery":false,"cyclecount":0,"ischarging":false,"maxcapacity":0,"currentcapacity":0,"percent":0,"timeremaining":-1,"acconnected":true,"type":"","model":"","manufacturer":"","serial":""},"inetLatency":0.678,"networkStats":[{"iface":"eth0","operstate":"up","rx_bytes":76277236,"rx_dropped":0,"rx_errors":0,"tx_bytes":122221,"tx_dropped":0,"tx_errors":0,"rx_sec":18428.779069767443,"tx_sec":8915.697674418605,"ms":1376}],"fsStats":{"rx":227717632,"wx":281354240,"tx":509071872,"rx_sec":0,"wx_sec":0,"tx_sec":0,"ms":1328},"disksIO":{"rIO":8473,"wIO":4031,"tIO":12504,"rIO_sec":0,"wIO_sec":0,"tIO_sec":0,"ms":1327}},"createDate":"2020-06-04T04:49:48.262Z","timezone":"Africa/Abidjan","id":"5ed87d6c2a8c780015a48a78","version":0}],"job":[{"dateCreated":"2020-06-04T18:46:43.739Z","runAsService":false,"name":"IC-today 12:46 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:46:43.739Z","status":20,"dateCompleted":"2020-06-04T18:46:44.973Z","id":"5ed941933edbe80015c5e8bd","version":0},{"dateCreated":"2020-06-04T18:50:21.973Z","runAsService":false,"name":"IC-today 12:50 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:50:21.973Z","status":20,"dateCompleted":"2020-06-04T18:50:22.711Z","id":"5ed9426dbdbedb00158b2d41","version":0},{"dateCreated":"2020-05-26T19:58:43.742Z","runAsService":false,"name":"RunPythonScript 1.1","_orgId":"5e99cbcb2317950015edb655","createdBy":"5de8810275ad92e5bb8de78a","dateStarted":"2020-05-26T19:58:43.742Z","status":20,"runtimeVars":{},"dateCompleted":"2020-05-26T19:58:53.748Z","id":"5ecd74f3b677490015f80bde","version":0},{"dateCreated":"2020-06-03T18:05:48.549Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed7e67c7d509600155b605d","dateStarted":"2020-06-03T18:05:48.549Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-03T18:05:54.781Z","id":"5ed7e67c1299560015b652f3","version":0},{"dateCreated":"2020-06-03T18:22:57.680Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed7ea817d509600155b605e","dateStarted":"2020-06-03T18:22:57.680Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-03T18:23:03.715Z","id":"5ed7ea811299560015b65318","version":0},{"dateCreated":"2020-06-03T18:59:00.610Z","runAsService":false,"name":"IC-today 12:59 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-03T18:59:00.610Z","status":22,"dateCompleted":"2020-06-03T18:59:27.383Z","id":"5ed7f2f41299560015b65328","version":0},{"dateCreated":"2020-06-03T19:05:17.661Z","runAsService":false,"name":"IC-today 1:05 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-03T19:05:17.661Z","status":22,"dateCompleted":"2020-06-03T19:05:34.859Z","id":"5ed7f46d1299560015b6532d","version":0},{"dateCreated":"2020-06-03T19:30:05.019Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed7fa3d7d509600155b605f","dateStarted":"2020-06-03T19:30:05.019Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-03T19:30:11.070Z","id":"5ed7fa3d1299560015b65354","version":0},{"dateCreated":"2020-06-03T20:01:47.777Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed801ab2f336c001513d0fc","dateStarted":"2020-06-03T20:01:47.777Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-03T20:01:53.805Z","id":"5ed801ab2a8c780015a4885f","version":0},{"dateCreated":"2020-06-03T20:47:13.026Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed80c512f336c001513d0fd","dateStarted":"2020-06-03T20:47:13.026Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-03T20:47:19.049Z","id":"5ed80c512a8c780015a4887b","version":0},{"dateCreated":"2020-06-03T23:31:13.318Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed832c12f336c001513d0fe","dateStarted":"2020-06-03T23:31:13.318Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-03T23:31:19.355Z","id":"5ed832c12a8c780015a48959","version":0},{"dateCreated":"2020-06-04T00:54:52.155Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed8465c2f336c001513d0ff","dateStarted":"2020-06-04T00:54:52.155Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-04T00:54:54.190Z","id":"5ed8465c2a8c780015a48a23","version":0},{"dateCreated":"2020-06-04T01:20:55.364Z","runAsService":false,"name":"IC-today 7:20 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T01:20:55.364Z","status":20,"dateCompleted":"2020-06-04T01:20:56.331Z","id":"5ed84c772a8c780015a48a28","version":0},{"dateCreated":"2020-06-04T01:21:13.173Z","runAsService":false,"name":"IC-today 7:21 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T01:21:13.173Z","status":20,"dateCompleted":"2020-06-04T01:21:13.761Z","id":"5ed84c892a8c780015a48a2d","version":0},{"dateCreated":"2020-06-04T01:21:23.840Z","runAsService":false,"name":"IC-today 7:21 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T01:21:23.840Z","status":20,"dateCompleted":"2020-06-04T01:21:24.579Z","id":"5ed84c932a8c780015a48a32","version":0},{"dateCreated":"2020-06-04T01:21:31.606Z","runAsService":false,"name":"IC-today 7:21 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T01:21:31.606Z","status":20,"dateCompleted":"2020-06-04T01:21:31.844Z","id":"5ed84c9b2a8c780015a48a37","version":0},{"dateCreated":"2020-06-04T01:50:31.930Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed853672f336c001513d100","dateStarted":"2020-06-04T01:50:31.930Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-04T01:50:33.949Z","id":"5ed853672a8c780015a48a4c","version":0},{"dateCreated":"2020-06-04T04:14:21.996Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed8751d2f336c001513d101","dateStarted":"2020-06-04T04:14:21.996Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-04T04:14:28.030Z","id":"5ed8751d2a8c780015a48a5e","version":0},{"dateCreated":"2020-06-04T04:51:42.412Z","runAsService":false,"name":"Inactive agent timeout job","_orgId":"5e99cbcb2317950015edb655","createdBy":"5ed87dde2f336c001513d102","dateStarted":"2020-06-04T04:51:42.412Z","status":20,"runtimeVars":{},"dateCompleted":"2020-06-04T04:51:44.536Z","id":"5ed87dde2a8c780015a48a7e","version":0},{"dateCreated":"2020-06-04T18:35:19.402Z","runAsService":false,"name":"IC-today 12:35 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:35:19.402Z","status":22,"dateCompleted":"2020-06-04T18:35:21.692Z","id":"5ed93ee73edbe80015c5e8a0","version":0},{"dateCreated":"2020-06-04T18:36:49.796Z","runAsService":false,"name":"IC-today 12:36 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:36:49.796Z","status":20,"dateCompleted":"2020-06-04T18:36:50.798Z","id":"5ed93f413edbe80015c5e8a5","version":0},{"dateCreated":"2020-06-04T18:44:57.342Z","runAsService":false,"name":"IC-today 12:44 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:44:57.342Z","status":20,"dateCompleted":"2020-06-04T18:44:58.133Z","id":"5ed941293edbe80015c5e8aa","version":0},{"dateCreated":"2020-06-04T18:45:15.530Z","runAsService":false,"name":"IC-today 12:45 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:45:15.530Z","status":20,"dateCompleted":"2020-06-04T18:45:17.383Z","id":"5ed9413b3edbe80015c5e8af","version":0},{"dateCreated":"2020-06-04T18:45:45.349Z","runAsService":false,"name":"IC-today 12:45 pm","runtimeVars":{},"_orgId":"5e99cbcb2317950015edb655","createdBy":"5e99cb8e2317950015edb654","dateStarted":"2020-06-04T18:45:45.349Z","status":20,"dateCompleted":"2020-06-04T18:45:46.662Z","id":"5ed941593edbe80015c5e8b6","version":0},{"dateCreated":"2020-06-03T03:50:54.763Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":19,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T03:50:54.833Z","dateCompleted":"2020-06-03T03:50:54.892Z","id":"5ed71e1e22d50c0015abf945","version":0},{"dateCreated":"2020-06-03T04:27:21.218Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":20,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T04:27:21.294Z","dateCompleted":"2020-06-03T04:27:21.330Z","id":"5ed726a922d50c0015abf94b","version":0},{"dateCreated":"2020-06-03T04:27:28.569Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":19,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T04:27:28.623Z","dateCompleted":"2020-06-03T04:27:28.656Z","id":"5ed726b022d50c0015abf951","version":0},{"dateCreated":"2020-06-03T14:12:02.715Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":20,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T14:12:04.219Z","dateCompleted":"2020-06-03T14:12:52.485Z","id":"5ed7afb295a4f15084758772","version":0},{"dateCreated":"2020-06-03T15:41:23.060Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":21,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T15:41:23.292Z","dateCompleted":"2020-06-03T15:41:24.294Z","id":"5ed7c4a31981b9001524c333","version":0},{"dateCreated":"2020-06-03T15:45:23.923Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":22,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T15:45:24.275Z","dateCompleted":"2020-06-03T15:45:24.342Z","id":"5ed7c5931981b9001524c33a","version":0},{"dateCreated":"2020-06-03T15:54:08.828Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":23,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T15:54:09.531Z","dateCompleted":"2020-06-03T15:54:09.619Z","id":"5ed7c7a0a744670015896462","version":0},{"dateCreated":"2020-06-03T16:13:43.516Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":24,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T16:13:43.612Z","dateCompleted":"2020-06-03T16:13:43.644Z","id":"5ed7cc37a74467001589646a","version":0},{"dateCreated":"2020-06-03T16:18:41.675Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":25,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T16:18:41.846Z","dateCompleted":"2020-06-03T16:18:41.892Z","id":"5ed7cd61dd983000158d2f33","version":0},{"dateCreated":"2020-06-03T16:20:33.292Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":26,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T16:20:33.370Z","dateCompleted":"2020-06-03T16:20:33.404Z","id":"5ed7cdd1dd983000158d2f3a","version":0},{"dateCreated":"2020-06-03T17:14:40.399Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":27,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T17:14:40.493Z","dateCompleted":"2020-06-03T17:14:40.543Z","id":"5ed7da80dd983000158d2f42","version":0},{"dateCreated":"2020-06-03T17:35:10.022Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":28,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T17:35:10.260Z","dateCompleted":"2020-06-03T17:35:14.664Z","id":"5ed7df4e63747e0015807a02","version":0},{"dateCreated":"2020-06-03T17:35:50.639Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":29,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"2","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","maxInstances":"1","IAMRole":"None","InactiveAgentScriptId":"5ed5d475759b110015403a49","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T17:35:51.541Z","dateCompleted":"2020-06-03T17:40:38.568Z","id":"5ed7df7663747e0015807a0a","version":0},{"dateCreated":"2020-06-03T18:00:21.866Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":30,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T18:00:22.080Z","dateCompleted":"2020-06-03T18:00:24.166Z","id":"5ed7e5351299560015b652df","version":0},{"dateCreated":"2020-06-03T18:02:37.476Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":31,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"90000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T18:02:37.540Z","dateCompleted":"2020-06-03T18:06:01.791Z","id":"5ed7e5bd1299560015b652ea","version":0},{"dateCreated":"2020-06-03T18:09:56.264Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":32,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T18:09:56.337Z","dateCompleted":"2020-06-03T18:09:58.186Z","id":"5ed7e7741299560015b652fa","version":0},{"dateCreated":"2020-06-03T18:10:27.593Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":33,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T18:10:27.658Z","dateCompleted":"2020-06-03T18:10:29.417Z","id":"5ed7e7931299560015b65303","version":0},{"dateCreated":"2020-06-03T18:11:19.061Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":34,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T18:11:19.117Z","dateCompleted":"2020-06-03T18:14:43.827Z","id":"5ed7e7c71299560015b6530c","version":0},{"dateCreated":"2020-06-03T18:33:12.577Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":35,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T18:33:12.632Z","dateCompleted":"2020-06-03T18:36:16.840Z","id":"5ed7ece81299560015b6531d","version":0},{"dateCreated":"2020-06-03T19:09:45.674Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":36,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T19:09:45.732Z","dateCompleted":"2020-06-03T19:09:47.694Z","id":"5ed7f5791299560015b65332","version":0},{"dateCreated":"2020-06-03T19:10:18.440Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":37,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T19:10:18.543Z","dateCompleted":"2020-06-03T19:10:19.957Z","id":"5ed7f59a1299560015b6533b","version":0},{"dateCreated":"2020-06-03T19:12:18.881Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":38,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T19:12:18.944Z","dateCompleted":"2020-06-03T19:16:25.428Z","id":"5ed7f6121299560015b65344","version":0},{"dateCreated":"2020-06-03T19:48:33.650Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":39,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T19:48:33.786Z","dateCompleted":"2020-06-03T19:51:38.764Z","id":"5ed7fe912a8c780015a48853","version":0},{"dateCreated":"2020-06-03T20:34:53.574Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":40,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T20:34:53.627Z","dateCompleted":"2020-06-03T20:34:55.051Z","id":"5ed8096d2a8c780015a48867","version":0},{"dateCreated":"2020-06-03T20:35:23.911Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":41,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T20:35:23.978Z","dateCompleted":"2020-06-03T20:35:47.303Z","id":"5ed8098b2a8c780015a48870","version":0},{"dateCreated":"2020-06-03T21:35:12.260Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":42,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:35:12.339Z","dateCompleted":"2020-06-03T21:35:13.304Z","id":"5ed817902a8c780015a48881","version":0},{"dateCreated":"2020-06-03T21:35:46.999Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":43,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:35:47.074Z","dateCompleted":"2020-06-03T21:35:48.501Z","id":"5ed817b22a8c780015a4888a","version":0},{"dateCreated":"2020-06-03T21:36:31.385Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":44,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:36:31.448Z","dateCompleted":"2020-06-03T21:36:54.944Z","id":"5ed817df2a8c780015a48895","version":0},{"dateCreated":"2020-06-03T21:42:15.168Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":45,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:42:15.265Z","dateCompleted":"2020-06-03T21:42:38.466Z","id":"5ed819372a8c780015a488a1","version":0},{"dateCreated":"2020-06-03T21:43:22.857Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":46,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:43:22.923Z","dateCompleted":"2020-06-03T21:43:24.654Z","id":"5ed8197a2a8c780015a488aa","version":0},{"dateCreated":"2020-06-03T21:44:14.679Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":47,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:44:14.738Z","dateCompleted":"2020-06-03T21:44:15.958Z","id":"5ed819ae2a8c780015a488b5","version":0},{"dateCreated":"2020-06-03T21:49:01.371Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":48,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:49:01.436Z","dateCompleted":"2020-06-03T21:49:25.362Z","id":"5ed81acd2a8c780015a488c1","version":0},{"dateCreated":"2020-06-03T21:59:10.431Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":49,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T21:59:10.494Z","dateCompleted":"2020-06-03T21:59:34.129Z","id":"5ed81d2e2a8c780015a488cb","version":0},{"dateCreated":"2020-06-03T22:00:57.977Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":50,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:00:58.078Z","dateCompleted":"2020-06-03T22:00:59.354Z","id":"5ed81d992a8c780015a488d5","version":0},{"dateCreated":"2020-06-03T22:01:35.916Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":51,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:01:35.968Z","dateCompleted":"2020-06-03T22:01:59.630Z","id":"5ed81dbf2a8c780015a488df","version":0},{"dateCreated":"2020-06-03T22:04:00.948Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":52,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:04:00.999Z","dateCompleted":"2020-06-03T22:04:24.891Z","id":"5ed81e502a8c780015a488ea","version":0},{"dateCreated":"2020-06-03T22:08:29.826Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":53,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:08:30.155Z","dateCompleted":"2020-06-03T22:09:50.423Z","id":"5ed81f5d2a8c780015a488f5","version":0},{"dateCreated":"2020-06-03T22:13:26.437Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":54,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:13:26.493Z","dateCompleted":"2020-06-03T22:14:46.737Z","id":"5ed820862a8c780015a48900","version":0},{"dateCreated":"2020-06-03T22:17:47.348Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":55,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:17:47.425Z","dateCompleted":"2020-06-03T22:17:48.999Z","id":"5ed8218b2a8c780015a4890b","version":0},{"dateCreated":"2020-06-03T22:18:17.410Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":56,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:18:17.473Z","dateCompleted":"2020-06-03T22:19:57.263Z","id":"5ed821a92a8c780015a48914","version":0},{"dateCreated":"2020-06-03T22:44:03.658Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":57,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:44:03.726Z","dateCompleted":"2020-06-03T22:44:05.234Z","id":"5ed827b32a8c780015a48922","version":0},{"dateCreated":"2020-06-03T22:44:44.206Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":58,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:44:44.265Z","dateCompleted":"2020-06-03T22:44:46.444Z","id":"5ed827dc2a8c780015a4892b","version":0},{"dateCreated":"2020-06-03T22:58:40.219Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":59,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T22:58:40.330Z","dateCompleted":"2020-06-03T22:58:42.938Z","id":"5ed82b202a8c780015a48934","version":0},{"dateCreated":"2020-06-03T23:09:25.689Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":60,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:09:25.766Z","dateCompleted":"2020-06-03T23:09:28.436Z","id":"5ed82da52a8c780015a4893d","version":0},{"dateCreated":"2020-06-03T23:18:52.011Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":61,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:18:52.078Z","dateCompleted":"2020-06-03T23:18:53.809Z","id":"5ed82fdc2a8c780015a48946","version":0},{"dateCreated":"2020-06-03T23:19:32.822Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":62,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:19:32.908Z","dateCompleted":"2020-06-03T23:21:13.103Z","id":"5ed830042a8c780015a4894f","version":0},{"dateCreated":"2020-06-03T23:49:28.648Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":63,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:49:28.721Z","dateCompleted":"2020-06-03T23:51:03.402Z","id":"5ed837082a8c780015a4895e","version":0},{"dateCreated":"2020-06-03T23:53:59.645Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":64,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:53:59.701Z","dateCompleted":"2020-06-03T23:54:01.765Z","id":"5ed838172a8c780015a4896c","version":0},{"dateCreated":"2020-06-03T23:56:44.578Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":65,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:56:44.634Z","dateCompleted":"2020-06-03T23:56:46.160Z","id":"5ed838bc2a8c780015a48979","version":0},{"dateCreated":"2020-06-03T23:57:46.325Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":66,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:57:46.383Z","dateCompleted":"2020-06-03T23:57:48.429Z","id":"5ed838fa2a8c780015a48986","version":0},{"dateCreated":"2020-06-03T23:59:10.450Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":67,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-03T23:59:10.532Z","dateCompleted":"2020-06-03T23:59:11.714Z","id":"5ed8394e2a8c780015a48993","version":0},{"dateCreated":"2020-06-04T00:02:10.863Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":68,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:02:11.001Z","dateCompleted":"2020-06-04T00:02:13.136Z","id":"5ed83a022a8c780015a489a2","version":0},{"dateCreated":"2020-06-04T00:02:38.675Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":69,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:02:38.736Z","dateCompleted":"2020-06-04T00:02:40.378Z","id":"5ed83a1e2a8c780015a489ad","version":0},{"dateCreated":"2020-06-04T00:04:12.962Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":70,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:04:13.071Z","dateCompleted":"2020-06-04T00:04:14.727Z","id":"5ed83a7c2a8c780015a489bc","version":0},{"dateCreated":"2020-06-04T00:04:34.268Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":71,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:04:34.358Z","dateCompleted":"2020-06-04T00:04:36.098Z","id":"5ed83a922a8c780015a489c7","version":0},{"dateCreated":"2020-06-04T00:06:40.225Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":72,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:06:40.389Z","dateCompleted":"2020-06-04T00:06:42.455Z","id":"5ed83b102a8c780015a489d6","version":0},{"dateCreated":"2020-06-04T00:08:35.778Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":73,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:08:35.900Z","dateCompleted":"2020-06-04T00:08:37.774Z","id":"5ed83b832a8c780015a489e5","version":0},{"dateCreated":"2020-06-04T00:36:35.586Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":74,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:36:35.662Z","dateCompleted":"2020-06-04T00:38:15.634Z","id":"5ed842132a8c780015a489f4","version":0},{"dateCreated":"2020-06-04T00:43:14.796Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":75,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:43:14.865Z","dateCompleted":"2020-06-04T00:43:16.961Z","id":"5ed843a22a8c780015a48a05","version":0},{"dateCreated":"2020-06-04T00:43:54.475Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":76,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t1.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T00:43:54.618Z","dateCompleted":"2020-06-04T00:43:56.532Z","id":"5ed843ca2a8c780015a48a14","version":0},{"dateCreated":"2020-06-04T01:37:13.726Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":77,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"600000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T01:37:13.814Z","dateCompleted":"2020-06-04T01:39:33.975Z","id":"5ed850492a8c780015a48a3c","version":0},{"dateCreated":"2020-06-04T04:11:27.158Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":78,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"60000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh","activeAgentTimeoutMinutes":"5"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T04:11:27.246Z","dateCompleted":"2020-06-04T04:13:16.955Z","id":"5ed8746f2a8c780015a48a52","version":0},{"dateCreated":"2020-06-04T04:17:20.463Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":79,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":22,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"60000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh","activeAgentTimeoutMinutes":"5"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T04:17:20.613Z","dateCompleted":"2020-06-04T04:17:22.364Z","id":"5ed875d02a8c780015a48a63","version":0},{"dateCreated":"2020-06-04T04:48:14.559Z","runAsService":false,"_orgId":"5e99cbcb2317950015edb655","_jobDefId":"5ed6dc9bae918d37ad199d89","runId":80,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","dateScheduled":null,"status":20,"runtimeVars":{"environment":"production","logDest":"file","agentVersion":"v0.0.0.223","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"60000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"onJobTaskFailAlertEmail":null,"onJobCompleteAlertEmail":null,"onJobTaskInterruptedAlertEmail":null,"onJobTaskFailAlertSlackURL":null,"onJobCompleteAlertSlackURL":null,"onJobTaskInterruptedAlertSlackURL":null,"dateStarted":"2020-06-04T04:48:14.655Z","dateCompleted":"2020-06-04T04:49:50.046Z","id":"5ed87d0e2a8c780015a48a6e","version":0}],"jobDef":[{"status":10,"lastRunId":81,"maxInstances":1,"dateCreated":"2020-04-18T14:28:30.732Z","pauseOnFailedJob":false,"name":"Hello and Goodbye","createdBy":"5e99cb8e2317950015edb654","_orgId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9b2beacd01580015f02c41","version":0},{"status":10,"lastRunId":35,"maxInstances":1,"dateCreated":"2020-04-20T20:45:36.319Z","pauseOnFailedJob":false,"name":"Hello and Goodbye with Conditional Path Routing Fixed","createdBy":"5e99cb8e2317950015edb654","_orgId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9e1037a8c93900156144fc","version":0},{"status":10,"lastRunId":81,"maxInstances":1,"dateCreated":"2020-06-01T23:25:59.201Z","pauseOnFailedJob":false,"name":"BuildAgent","createdBy":"5e1fac8a7e501cfd86cee31d","_orgId":"5e99cbcb2317950015edb655","runtimeVars":{"orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","platform":"linux","tags":"{\"agentbuilder\":\"true\"}","ImageId":"'ami-099e882b0876c8124'","MinCount":"1","MaxCount":"1","KeyName":"'kiki-2019Q1'","SecurityGroupIds":"['sg-036de2537c059a4af']","InstanceType":"'t2.micro'","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","inactivePeriodWaitTime":"60000","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","secret":"shhh"},"id":"5ed6dc9bae918d37ad199d89","version":0},{"status":15,"lastRunId":13,"maxInstances":1,"dateCreated":"2020-04-18T21:31:48.690Z","pauseOnFailedJob":false,"name":"Hello and Goodbye with Dynamic Runtime Variables","createdBy":"5e99cb8e2317950015edb654","_orgId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9b8516e8875a0015a24f12","version":0},{"status":10,"lastRunId":25,"maxInstances":1,"dateCreated":"2020-04-18T23:14:36.373Z","pauseOnFailedJob":false,"name":"Hello and Goodbye with Conditional Path Routing","createdBy":"5e99cb8e2317950015edb654","_orgId":"5e99cbcb2317950015edb655","runtimeVars":{"name":"BillyBob"},"id":"5e9b8df22ac79d0015a80a43","version":0}],"script":[{"orgUsable":true,"orgEditable":false,"isActive":true,"_orgId":"5de95c0453162e8891f5a830","name":"echo hello","scriptType":2,"code":"ZWNobyAiSGVsbG8gV29ybGQi","_originalAuthorUserId":"5de8810275ad92e5bb8de78a","_lastEditedUserId":"5de8810275ad92e5bb8de78a","lastEditedDate":"2019-11-27T21:41:51.980Z","shadowCopyCode":"ZWNobyAiSGVsbG8gV29ybGQi","id":"5eb08f2b94dadd7ec1898304","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"ScratchPadPY","scriptType":0,"code":"cHJpbnQgQGtwZygicGhyYXNlIik=","shadowCopyCode":"cHJpbnQgQGtwZygicGhyYXNlIik=","lastEditedDate":"2020-06-02T03:18:30.765Z","_orgId":"5de95c0453162e8891f5a830","_originalAuthorUserId":"5e1fac8a7e501cfd86cee31d","_lastEditedUserId":"5e1fac8a7e501cfd86cee31d","id":"5ed5c506759b110015403a10","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg==","shadowCopyCode":"ZWNobyAiaGVsbG8gd29ybGQhIg==","lastEditedDate":"2020-04-18T16:17:02.302Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b27fecd01580015f02be8","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo=","shadowCopyCode":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo=","lastEditedDate":"2020-04-18T16:25:13.837Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b29e9cd01580015f02c36","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"jscript","scriptType":1,"code":"Y29uc29sZS5sb2coJ0hlbGxvIGZyb20gJywgcHJvY2Vzcy5hcmd2WzJdKQ==","shadowCopyCode":"Y29uc29sZS5sb2coJ0hlbGxvIGZyb20gJywgcHJvY2Vzcy5hcmd2WzJdKQ==","lastEditedDate":"2020-04-18T16:46:06.049Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b2ececd01580015f02c61","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Hello_Bug","scriptType":2,"code":"ZWNobyAnaGVsbG8gd29ybGQh","shadowCopyCode":"ZWNobyAnaGVsbG8gd29ybGQh","lastEditedDate":"2020-04-18T21:53:33.170Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b76dde8875a0015a24ecd","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Hello_Arg","scriptType":2,"code":"ZWNobyAiaGVsbG8gJDEhIg==","shadowCopyCode":"ZWNobyAiaGVsbG8gJDEhIg==","lastEditedDate":"2020-04-18T21:54:18.742Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b770ae8875a0015a24ece","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Hello_EnvVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","shadowCopyCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","lastEditedDate":"2020-04-18T21:54:39.818Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b771fe8875a0015a24ecf","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Goodbye_RuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpISc=","shadowCopyCode":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpISc=","lastEditedDate":"2020-04-18T21:56:01.566Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b7771e8875a0015a24ed1","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Hello_RuntimeVar","scriptType":2,"code":"ZWNobyAnaGVsbG8gQGtwZygibmFtZSIpISc=","shadowCopyCode":"ZWNobyAnaGVsbG8gQGtwZygibmFtZSIpISc=","lastEditedDate":"2020-04-18T22:32:28.075Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b7ffde8875a0015a24f08","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"PrintMessage","scriptType":1,"code":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs=","shadowCopyCode":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs=","lastEditedDate":"2020-04-18T23:38:41.622Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b8f812ac79d0015a80a4a","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"HelloJava_agent001","scriptType":2,"code":"amF2YSAtY3AgLyBIZWxsb1dvcmxk","shadowCopyCode":"amF2YSAtY3AgLyBIZWxsb1dvcmxk","lastEditedDate":"2020-04-23T05:28:09.095Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ea12769d0e2b3001591bd0a","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"HelloJavaArtifact_agent001","scriptType":2,"code":"amF2YSBIZWxsb0FyZ3VtZW50ICQx","shadowCopyCode":"amF2YSBIZWxsb0FyZ3VtZW50ICQx","lastEditedDate":"2020-04-23T05:45:27.926Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ea12b77d0e2b3001591bd17","version":0},{"orgUsable":true,"orgEditable":true,"isActive":true,"_orgId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","shadowCopyCode":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-16T00:49:01.866Z","id":"5ebf387d615271382b431920","version":0},{"orgUsable":true,"orgEditable":true,"isActive":true,"_orgId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ZWNobyAiaGVsbG8gdGhlcmUiID4gb3V0LnR4dA==","shadowCopyCode":"ZWNobyAiaGVsbG8gdGhlcmUiID4gb3V0LnR4dA==","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-16T00:59:13.758Z","id":"5ebf3ae1615271382b431925","version":0},{"orgUsable":true,"orgEditable":true,"isActive":true,"_orgId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","shadowCopyCode":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-16T01:05:13.846Z","id":"5ebf3c49615271382b43192a","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"bart1","scriptType":1,"code":"Y29uc29sZS5sb2coJ0hlbGxvIEJhcnQnKTs=","shadowCopyCode":"Y29uc29sZS5sb2coJ0hlbGxvIEJhcnQnKTs=","lastEditedDate":"2020-05-17T14:20:36.506Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ec14834615271382b43192e","version":0},{"orgUsable":true,"orgEditable":true,"isActive":true,"_orgId":"5e99cbcb2317950015edb655","name":"cron-richwood-macbook.local-yUZqY","scriptType":2,"code":"Y2Qgfi9kZXYgJiYgLi9jcm9udGVzdC5zaCA+IGNyb25vdXQudHh0","shadowCopyCode":"Y2Qgfi9kZXYgJiYgLi9jcm9udGVzdC5zaCA+IGNyb25vdXQudHh0","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-20T22:59:51.101Z","id":"5ec5b667f54571001520e097","version":0},{"orgUsable":true,"orgEditable":true,"isActive":true,"_orgId":"5e99cbcb2317950015edb655","name":"cron-ip-172-31-93-56.ec2.internal-9sz1w","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","shadowCopyCode":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ=","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-21T02:54:48.787Z","id":"5ec5ed7852a8ff00151fefec","version":0},{"orgUsable":true,"orgEditable":true,"isActive":true,"_orgId":"5e99cbcb2317950015edb655","name":"cron-richwood-macbook.local-zcI0X","scriptType":2,"code":"J2hlbGxvIHdvcmxkJw==","shadowCopyCode":"J2hlbGxvIHdvcmxkJw==","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","lastEditedDate":"2020-05-25T20:23:57.869Z","id":"5ecc295d68983400154166cc","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"hello","scriptType":1,"code":" ","shadowCopyCode":"Y29uc29sZS5sb2coJ2hpJyk=","lastEditedDate":"2020-05-25T21:48:02.830Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ecc3d1268983400154168ce","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","shadowCopyCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","lastEditedDate":"2020-06-03T20:31:58.476Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed808be2a8c780015a48866","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","shadowCopyCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","lastEditedDate":"2020-06-04T00:01:39.198Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed839e32a8c780015a489a1","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","shadowCopyCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","lastEditedDate":"2020-06-02T03:23:02.982Z","_orgId":"5de95c0453162e8891f5a830","_originalAuthorUserId":"5e1fac8a7e501cfd86cee31d","_lastEditedUserId":"5e1fac8a7e501cfd86cee31d","id":"5ed5c616759b110015403a21","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"TerminateHostEC2","scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","shadowCopyCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","lastEditedDate":"2020-06-02T04:24:21.618Z","_orgId":"5de95c0453162e8891f5a830","_originalAuthorUserId":"5e1fac8a7e501cfd86cee31d","_lastEditedUserId":"5e1fac8a7e501cfd86cee31d","id":"5ed5d475759b110015403a49","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Goodbye_Route","scriptType":0,"code":"ZnJvbSByYW5kb20gaW1wb3J0IHNlZWQKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKCnByaW50ICdnb29kYnllIEBrcGcoIm5hbWUiKSEnCnByaW50ICdtZXNzYWdlIGZyb20gIkhlbGxvIFRhc2siID0gIkBrcGcoIm1zZyIpIicKCnJvdXRlID0gcmFuZGludCgxLDIpCnByaW50ICdAa3Bve3sicm91dGUiOiJ7fSJ9fScuZm9ybWF0KHJvdXRlKQ==","shadowCopyCode":"ZnJvbSByYW5kb20gaW1wb3J0IHNlZWQKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKCnByaW50ICdnb29kYnllIEBrcGcoIm5hbWUiKSEnCnByaW50ICdtZXNzYWdlIGZyb20gIkhlbGxvIFRhc2siID0gIkBrcGcoIm1zZyIpIicKCnJvdXRlID0gcmFuZGludCgxLDIpCnByaW50ICdAa3Bve3sicm91dGUiOiJ7fSJ9fScuZm9ybWF0KHJvdXRlKQ==","lastEditedDate":"2020-04-18T21:55:27.164Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b774fe8875a0015a24ed0","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw==","shadowCopyCode":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw==","lastEditedDate":"2020-04-18T21:58:37.932Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b780ee8875a0015a24ed2","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw==","shadowCopyCode":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw==","lastEditedDate":"2020-04-18T22:55:22.486Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b855ae8875a0015a24f15","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"ShellWkspc","scriptType":2,"code":"ZWNobyAkT1NUWVBFCmlmIFtbICIkT1NUWVBFIiA9PSAibGludXgtZ251IiBdXTsgdGhlbgogIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgUEtHX09LPSQoZHBrZy1xdWVyeSAtVyAtZj0nJHtTdGF0dXN9JyBub2RlanMgMj4vZGV2L251bGwgfCBncmVwIC1jICJvayBpbnN0YWxsZWQiKQogIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICBjdXJsIC1zTCBodHRwczovL2RlYi5ub2Rlc291cmNlLmNvbS9zZXR1cF8xMC54IC1vIG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIC4vbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgYXB0IGluc3RhbGwgbm9kZWpzCiAgICBub2RlIC0tdmVyc2lvbgogIGVsc2UKICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICBmaQpmaQ==","shadowCopyCode":"ZWNobyAkT1NUWVBFCmlmIFtbICIkT1NUWVBFIiA9PSAibGludXgtZ251IiBdXTsgdGhlbgogIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgUEtHX09LPSQoZHBrZy1xdWVyeSAtVyAtZj0nJHtTdGF0dXN9JyBub2RlanMgMj4vZGV2L251bGwgfCBncmVwIC1jICJvayBpbnN0YWxsZWQiKQogIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICBjdXJsIC1zTCBodHRwczovL2RlYi5ub2Rlc291cmNlLmNvbS9zZXR1cF8xMC54IC1vIG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgIC4vbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgYXB0IGluc3RhbGwgbm9kZWpzCiAgICBub2RlIC0tdmVyc2lvbgogIGVsc2UKICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICBmaQpmaQ==","lastEditedDate":"2020-04-18T23:49:53.663Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9b92212ac79d0015a80a8f","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","shadowCopyCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","lastEditedDate":"2020-04-19T01:01:38.106Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5e9ba2f22ac79d0015a80b12","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BrcGcocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","shadowCopyCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BrcGcocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","lastEditedDate":"2020-06-02T23:20:50.951Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed6ded2759b110015403b73","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"TerminateEC2Instance","scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","shadowCopyCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","lastEditedDate":"2020-06-03T17:59:09.338Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed7e4ed1299560015b652de","version":0},{"orgUsable":true,"orgEditable":false,"isActive":true,"name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMjQKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ3JlcyAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0YmVhdFRpbWUgPSByZXNbJ2RhdGEnXVswXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXQogICAgICAgICAgICAgICAgICAgIHByaW50ICdsYXN0SGVhcnRiZWF0VGltZSAtPiAnLCBsYXN0SGVhcnRiZWF0VGltZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGhiRHRlID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChsYXN0SGVhcnRiZWF0VGltZS8xMDAwKQogICAgICAgICAgICAgICAgICAgIHByaW50ICdoYkR0ZSAtPiAnLCBoYkR0ZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICBwcmludCAnZGlmZlNlY29uZHMgLT4gJywgZGlmZlNlY29uZHMsICcsIGluYWN0aXZlUGVyaW9kV2FpdFRpbWUgLT4gQGtwZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKSwgZGlmZlNlY29uZHMgLT4gJywgQGtwZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGlmIGRpZmZTZWNvbmRzIC0gIEBrcGcoaW5hY3RpdmVQZXJpb2RXYWl0VGltZSkgPCAtNToKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIHByaW50ICcuLi5hZ2VudCB7fSBpcyBpbml0aWFsaXppbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","shadowCopyCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMjQKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ3JlcyAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0YmVhdFRpbWUgPSByZXNbJ2RhdGEnXVswXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXQogICAgICAgICAgICAgICAgICAgIHByaW50ICdsYXN0SGVhcnRiZWF0VGltZSAtPiAnLCBsYXN0SGVhcnRiZWF0VGltZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGhiRHRlID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChsYXN0SGVhcnRiZWF0VGltZS8xMDAwKQogICAgICAgICAgICAgICAgICAgIHByaW50ICdoYkR0ZSAtPiAnLCBoYkR0ZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICBwcmludCAnZGlmZlNlY29uZHMgLT4gJywgZGlmZlNlY29uZHMsICcsIGluYWN0aXZlUGVyaW9kV2FpdFRpbWUgLT4gQGtwZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKSwgZGlmZlNlY29uZHMgLT4gJywgQGtwZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGlmIGRpZmZTZWNvbmRzIC0gIEBrcGcoaW5hY3RpdmVQZXJpb2RXYWl0VGltZSkgPCAtNToKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIHByaW50ICcuLi5hZ2VudCB7fSBpcyBpbml0aWFsaXppbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","lastEditedDate":"2020-06-02T03:23:02.982Z","_orgId":"5e99cbcb2317950015edb655","_originalAuthorUserId":"5e99cb8e2317950015edb654","_lastEditedUserId":"5e99cb8e2317950015edb654","id":"5ed6dc9cae918d37ad199d8b","version":0}],"step":[{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab85c859c5f800155bd57c","_taskId":"5eab85c859c5f800155bd57d","id":"5eab85c859c5f800155bd57e","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab85ea59c5f800155bd581","_taskId":"5eab85ea59c5f800155bd582","id":"5eab85ea59c5f800155bd583","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab85f059c5f800155bd586","_taskId":"5eab85f059c5f800155bd587","id":"5eab85f059c5f800155bd588","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab85f659c5f800155bd58b","_taskId":"5eab85f659c5f800155bd58c","id":"5eab85f659c5f800155bd58d","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAnaGVsbG8gd29ybGQh"},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab867a59c5f800155bd590","_taskId":"5eab867a59c5f800155bd591","id":"5eab867a59c5f800155bd592","version":0},{"command":"","arguments":"Josh","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJDEhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab872259c5f800155bd595","_taskId":"5eab872259c5f800155bd596","id":"5eab872259c5f800155bd597","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c772a8c780015a48a28","_taskId":"5ed84c772a8c780015a48a29","id":"5ed84c772a8c780015a48a2a","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c892a8c780015a48a2d","_taskId":"5ed84c892a8c780015a48a2e","id":"5ed84c892a8c780015a48a2f","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c932a8c780015a48a32","_taskId":"5ed84c932a8c780015a48a33","id":"5ed84c932a8c780015a48a34","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c9b2a8c780015a48a37","_taskId":"5ed84c9b2a8c780015a48a38","id":"5ed84c9b2a8c780015a48a39","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAnaGVsbG8gd29ybGQh"},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed93ee73edbe80015c5e8a0","_taskId":"5ed93ee73edbe80015c5e8a1","id":"5ed93ee73edbe80015c5e8a2","version":0},{"command":"","arguments":"Josiah","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJDEhIg=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed93f413edbe80015c5e8a5","_taskId":"5ed93f413edbe80015c5e8a6","id":"5ed93f413edbe80015c5e8a7","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9426dbdbedb00158b2d41","_taskId":"5ed9426dbdbedb00158b2d42","id":"5ed9426ebdbedb00158b2d43","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Jack"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab878059c5f800155bd59a","_taskId":"5eab878059c5f800155bd59b","id":"5eab878059c5f800155bd59c","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Jack"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab87b159c5f800155bd59f","_taskId":"5eab87b159c5f800155bd5a0","id":"5eab87b159c5f800155bd5a1","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Rich"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab880559c5f800155bd5a6","_taskId":"5eab880559c5f800155bd5a7","id":"5eab880559c5f800155bd5a8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab89b359c5f800155bd5b5","_taskId":"5eab89b359c5f800155bd5b6","name":"step1","order":1,"script":{"id":"5e9b27fecd01580015f02be8","name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"id":"5eab89b359c5f800155bd5b7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab89b359c5f800155bd5b5","_taskId":"5eab89b359c5f800155bd5b8","name":"step1","order":1,"script":{"id":"5e9b29e9cd01580015f02c36","name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo="},"id":"5eab89b359c5f800155bd5b9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8b7359c5f800155bd5be","_taskId":"5eab8b7359c5f800155bd5bf","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8b7359c5f800155bd5c0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8b7359c5f800155bd5be","_taskId":"5eab8b7359c5f800155bd5c1","name":"step1","order":1,"script":{"id":"5e9b780ee8875a0015a24ed2","name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw=="},"id":"5eab8b7359c5f800155bd5c2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8c7859c5f800155bd5c7","_taskId":"5eab8c7859c5f800155bd5c8","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8c7859c5f800155bd5c9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8c7859c5f800155bd5c7","_taskId":"5eab8c7859c5f800155bd5ca","name":"step1","order":1,"script":{"id":"5e9b780ee8875a0015a24ed2","name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw=="},"id":"5eab8c7859c5f800155bd5cb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8c9159c5f800155bd5d0","_taskId":"5eab8c9159c5f800155bd5d1","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8c9159c5f800155bd5d2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8c9159c5f800155bd5d0","_taskId":"5eab8c9159c5f800155bd5d3","name":"step1","order":1,"script":{"id":"5e9b780ee8875a0015a24ed2","name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw=="},"id":"5eab8c9159c5f800155bd5d4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8c9f59c5f800155bd5d9","_taskId":"5eab8c9f59c5f800155bd5da","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8c9f59c5f800155bd5db","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8c9f59c5f800155bd5d9","_taskId":"5eab8c9f59c5f800155bd5dc","name":"step1","order":1,"script":{"id":"5e9b780ee8875a0015a24ed2","name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw=="},"id":"5eab8c9f59c5f800155bd5dd","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8ca559c5f800155bd5e2","_taskId":"5eab8ca559c5f800155bd5e3","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8ca559c5f800155bd5e4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8ca559c5f800155bd5e2","_taskId":"5eab8ca559c5f800155bd5e5","name":"step1","order":1,"script":{"id":"5e9b780ee8875a0015a24ed2","name":"Goodbye_DynamicRuntimeVar","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgQGtwZygibmFtZSIpIScKcHJpbnQgJ21lc3NhZ2UgZnJvbSAiSGVsbG8gVGFzayIgPSAiQGtwZygibXNnIikiJw=="},"id":"5eab8ca559c5f800155bd5e6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8cc659c5f800155bd5eb","_taskId":"5eab8cc659c5f800155bd5ec","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8cc659c5f800155bd5ed","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8cc659c5f800155bd5eb","_taskId":"5eab8cc659c5f800155bd5ee","name":"step1","order":1,"script":{"id":"5e9b774fe8875a0015a24ed0","name":"Goodbye_Route","scriptType":0,"code":"ZnJvbSByYW5kb20gaW1wb3J0IHNlZWQKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKCnByaW50ICdnb29kYnllIEBrcGcoIm5hbWUiKSEnCnByaW50ICdtZXNzYWdlIGZyb20gIkhlbGxvIFRhc2siID0gIkBrcGcoIm1zZyIpIicKCnJvdXRlID0gcmFuZGludCgxLDIpCnByaW50ICdAa3Bve3sicm91dGUiOiJ7fSJ9fScuZm9ybWF0KHJvdXRlKQ=="},"id":"5eab8cc659c5f800155bd5ef","version":0},{"command":"","arguments":"\"running Task1\"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8cc659c5f800155bd5eb","_taskId":"5eab8cc659c5f800155bd5f0","name":"step1","order":2,"script":{"id":"5e9b8f812ac79d0015a80a4a","name":"PrintMessage","scriptType":1,"code":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs="},"id":"5eab8cc659c5f800155bd5f1","version":0},{"command":"","arguments":"\"running Task2\"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8cc659c5f800155bd5eb","_taskId":"5eab8cc659c5f800155bd5f2","name":"step1","order":2,"script":{"id":"5e9b8f812ac79d0015a80a4a","name":"PrintMessage","scriptType":1,"code":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs="},"id":"5eab8cc659c5f800155bd5f3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8de859c5f800155bd5fa","_taskId":"5eab8de859c5f800155bd5fb","name":"step1","order":1,"script":{"id":"5e9b855ae8875a0015a24f15","name":"Hello_DynamicRTVar","scriptType":2,"code":"ZWNobyAiaGVsbG8gQGtwZygibmFtZSIpISIKZWNobyAnQGtwb3sibmFtZSI6IkJpbGx5Sm9lIn0nCmVjaG8gJ0BrcG97Im1zZyI6IkkgY2hhbmdlZCB0aGUgbmFtZSBmcm9tIEBrcGcoIm5hbWUiKSB0byBCaWxseUpvZSJ9Jw=="},"id":"5eab8de859c5f800155bd5fc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8de859c5f800155bd5fa","_taskId":"5eab8de859c5f800155bd5fd","name":"step1","order":1,"script":{"id":"5e9b774fe8875a0015a24ed0","name":"Goodbye_Route","scriptType":0,"code":"ZnJvbSByYW5kb20gaW1wb3J0IHNlZWQKZnJvbSByYW5kb20gaW1wb3J0IHJhbmRpbnQKCnByaW50ICdnb29kYnllIEBrcGcoIm5hbWUiKSEnCnByaW50ICdtZXNzYWdlIGZyb20gIkhlbGxvIFRhc2siID0gIkBrcGcoIm1zZyIpIicKCnJvdXRlID0gcmFuZGludCgxLDIpCnByaW50ICdAa3Bve3sicm91dGUiOiJ7fSJ9fScuZm9ybWF0KHJvdXRlKQ=="},"id":"5eab8de859c5f800155bd5fe","version":0},{"command":"","arguments":"\"running Task1\"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8de859c5f800155bd5fa","_taskId":"5eab8de859c5f800155bd5ff","name":"step1","order":2,"script":{"id":"5e9b8f812ac79d0015a80a4a","name":"PrintMessage","scriptType":1,"code":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs="},"id":"5eab8de859c5f800155bd600","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8de859c5f800155bd5fa","_taskId":"5eab8de859c5f800155bd5ff","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5eab8de859c5f800155bd601","version":0},{"command":"","arguments":"\"running Task2\"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8de859c5f800155bd5fa","_taskId":"5eab8de859c5f800155bd602","name":"step1","order":2,"script":{"id":"5e9b8f812ac79d0015a80a4a","name":"PrintMessage","scriptType":1,"code":"Y29uc29sZS5sb2cocHJvY2Vzcy5hcmd2WzJdKTs="},"id":"5eab8de859c5f800155bd603","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8de859c5f800155bd5fa","_taskId":"5eab8de859c5f800155bd602","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5eab8de859c5f800155bd604","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8eb459c5f800155bd60c","_taskId":"5eab8eb459c5f800155bd60d","name":"step1","order":1,"script":{"id":"5ea12769d0e2b3001591bd0a","name":"HelloJava_agent001","scriptType":2,"code":"amF2YSAtY3AgLyBIZWxsb1dvcmxk"},"id":"5eab8eb459c5f800155bd60e","version":0},{"command":"","arguments":"BillyJoe","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eab8f1a59c5f800155bd611","_taskId":"5eab8f1a59c5f800155bd612","name":"step1","order":1,"script":{"id":"5ea12b77d0e2b3001591bd17","name":"HelloJavaArtifact_agent001","scriptType":2,"code":"amF2YSBIZWxsb0FyZ3VtZW50ICQx"},"id":"5eab8f1a59c5f800155bd613","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb0ef1be53b950015356e99","_taskId":"5eb0ef1be53b950015356e9a","name":"step1","order":1,"script":{"id":"5e9b27fecd01580015f02be8","name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"id":"5eb0ef1ce53b950015356e9b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb0ef1be53b950015356e99","_taskId":"5eb0ef1ce53b950015356e9c","name":"step1","order":1,"script":{"id":"5e9b29e9cd01580015f02c36","name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo="},"id":"5eb0ef1ce53b950015356e9d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb0ef34e53b950015356ea2","_taskId":"5eb0ef34e53b950015356ea3","name":"step1","order":1,"script":{"id":"5e9b27fecd01580015f02be8","name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"id":"5eb0ef34e53b950015356ea4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb0ef34e53b950015356ea2","_taskId":"5eb0ef34e53b950015356ea5","name":"step1","order":1,"script":{"id":"5e9b29e9cd01580015f02c36","name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo="},"id":"5eb0ef34e53b950015356ea6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb735b46b7e34001513bca4","_taskId":"5eb735b46b7e34001513bca5","name":"step1","order":1,"script":{"id":"5e9b27fecd01580015f02be8","name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"id":"5eb735b46b7e34001513bca6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb735b46b7e34001513bca4","_taskId":"5eb735b46b7e34001513bca7","name":"step1","order":1,"script":{"id":"5e9b29e9cd01580015f02c36","name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo="},"id":"5eb735b46b7e34001513bca8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb9bb58754d7500151b625d","_taskId":"5eb9bb58754d7500151b625e","name":"step1","order":1,"script":{"id":"5e9b27fecd01580015f02be8","name":"Hello","scriptType":2,"code":"ZWNobyAiaGVsbG8gd29ybGQhIg=="},"id":"5eb9bb58754d7500151b625f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5eb9bb58754d7500151b625d","_taskId":"5eb9bb58754d7500151b6260","name":"step1","order":1,"script":{"id":"5e9b29e9cd01580015f02c36","name":"Goodbye","scriptType":0,"code":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo="},"id":"5eb9bb58754d7500151b6261","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf38b8933e6d00154944c5","_taskId":"5ebf38b8933e6d00154944c6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf38b8933e6d00154944c7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf38f4933e6d00154944ca","_taskId":"5ebf38f4933e6d00154944cb","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf38f4933e6d00154944cc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3930933e6d00154944cf","_taskId":"5ebf3930933e6d00154944d0","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3930933e6d00154944d1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf396c933e6d00154944d4","_taskId":"5ebf396c933e6d00154944d5","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf396c933e6d00154944d6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf39a8933e6d00154944d9","_taskId":"5ebf39a8933e6d00154944da","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf39a8933e6d00154944db","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf39e4933e6d00154944de","_taskId":"5ebf39e4933e6d00154944df","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf39e4933e6d00154944e0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3a20933e6d00154944e3","_taskId":"5ebf3a20933e6d00154944e4","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3a20933e6d00154944e5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3a5c933e6d00154944e8","_taskId":"5ebf3a5c933e6d00154944e9","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3a5c933e6d00154944ea","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3a98933e6d00154944ed","_taskId":"5ebf3a98933e6d00154944ee","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3a98933e6d00154944ef","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ad4933e6d00154944f2","_taskId":"5ebf3ad4933e6d00154944f3","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ad4933e6d00154944f4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3b10933e6d00154944f7","_taskId":"5ebf3b10933e6d00154944f9","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3b10933e6d00154944fb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3b10933e6d00154944f8","_taskId":"5ebf3b10933e6d00154944fa","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3b10933e6d00154944fc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3b4c933e6d0015494501","_taskId":"5ebf3b4c933e6d0015494503","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3b4c933e6d0015494505","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3b4c933e6d0015494502","_taskId":"5ebf3b4c933e6d0015494504","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3b4c933e6d0015494506","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3b88933e6d001549450b","_taskId":"5ebf3b88933e6d001549450d","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3b88933e6d001549450f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3b88933e6d001549450c","_taskId":"5ebf3b88933e6d001549450e","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3b88933e6d0015494510","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3bc4933e6d0015494515","_taskId":"5ebf3bc4933e6d0015494517","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3bc4933e6d0015494519","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3bc4933e6d0015494516","_taskId":"5ebf3bc4933e6d0015494518","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3bc4933e6d001549451a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c00933e6d001549451f","_taskId":"5ebf3c00933e6d0015494521","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c00933e6d0015494523","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c00933e6d0015494520","_taskId":"5ebf3c00933e6d0015494522","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c00933e6d0015494524","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c3c933e6d0015494529","_taskId":"5ebf3c3c933e6d001549452b","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c3c933e6d001549452d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c3c933e6d001549452a","_taskId":"5ebf3c3c933e6d001549452c","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c3c933e6d001549452e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c78933e6d0015494535","_taskId":"5ebf3c78933e6d0015494538","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c78933e6d0015494539","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c78933e6d0015494533","_taskId":"5ebf3c78933e6d0015494536","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c78933e6d001549453a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3c78933e6d0015494534","_taskId":"5ebf3c78933e6d0015494537","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3c78933e6d001549453b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3cb4933e6d0015494542","_taskId":"5ebf3cb4933e6d0015494544","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3cb4933e6d0015494548","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3cb4933e6d0015494543","_taskId":"5ebf3cb4933e6d0015494546","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3cb4933e6d0015494549","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3cb4933e6d0015494545","_taskId":"5ebf3cb4933e6d0015494547","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3cb4933e6d001549454a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3cf0933e6d0015494551","_taskId":"5ebf3cf0933e6d0015494554","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3cf0933e6d0015494557","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3cf0933e6d0015494552","_taskId":"5ebf3cf0933e6d0015494555","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3cf0933e6d0015494558","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3cf0933e6d0015494553","_taskId":"5ebf3cf0933e6d0015494556","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3cf0933e6d0015494559","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3d2c933e6d0015494560","_taskId":"5ebf3d2c933e6d0015494563","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3d2c933e6d0015494566","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3d2c933e6d0015494561","_taskId":"5ebf3d2c933e6d0015494564","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3d2c933e6d0015494567","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3d2c933e6d0015494562","_taskId":"5ebf3d2c933e6d0015494565","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3d2c933e6d0015494568","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3d68933e6d001549456f","_taskId":"5ebf3d68933e6d0015494572","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3d68933e6d0015494575","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3d68933e6d0015494570","_taskId":"5ebf3d68933e6d0015494573","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3d68933e6d0015494576","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3d68933e6d0015494571","_taskId":"5ebf3d68933e6d0015494574","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3d68933e6d0015494577","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3da4933e6d001549457f","_taskId":"5ebf3da4933e6d0015494582","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3da4933e6d0015494584","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3da4933e6d0015494580","_taskId":"5ebf3da4933e6d0015494583","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3da4933e6d0015494585","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3da4933e6d001549457e","_taskId":"5ebf3da4933e6d0015494581","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3da4933e6d0015494586","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3de0933e6d001549458d","_taskId":"5ebf3de0933e6d0015494590","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3de0933e6d0015494593","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3de0933e6d001549458f","_taskId":"5ebf3de0933e6d0015494592","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3de0933e6d0015494594","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3de0933e6d001549458e","_taskId":"5ebf3de0933e6d0015494591","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3de0933e6d0015494595","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e1c933e6d001549459c","_taskId":"5ebf3e1c933e6d001549459f","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e1c933e6d00154945a2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e1c933e6d001549459d","_taskId":"5ebf3e1c933e6d00154945a0","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e1c933e6d00154945a3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e1c933e6d001549459e","_taskId":"5ebf3e1c933e6d00154945a1","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e1c933e6d00154945a4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e58933e6d00154945ab","_taskId":"5ebf3e58933e6d00154945ae","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e58933e6d00154945b1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e58933e6d00154945ac","_taskId":"5ebf3e58933e6d00154945af","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e58933e6d00154945b2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e58933e6d00154945ad","_taskId":"5ebf3e58933e6d00154945b0","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e58933e6d00154945b3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e94933e6d00154945bb","_taskId":"5ebf3e94933e6d00154945be","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e94933e6d00154945c0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e94933e6d00154945ba","_taskId":"5ebf3e94933e6d00154945bd","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e94933e6d00154945c1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3e94933e6d00154945bc","_taskId":"5ebf3e94933e6d00154945bf","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3e94933e6d00154945c2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ed0933e6d00154945ca","_taskId":"5ebf3ed0933e6d00154945cc","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ed0933e6d00154945cf","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ed0933e6d00154945cb","_taskId":"5ebf3ed0933e6d00154945cd","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ed0933e6d00154945d0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ed0933e6d00154945c9","_taskId":"5ebf3ed0933e6d00154945ce","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ed0933e6d00154945d1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f0c933e6d00154945d8","_taskId":"5ebf3f0c933e6d00154945db","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f0c933e6d00154945de","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f0c933e6d00154945da","_taskId":"5ebf3f0c933e6d00154945dc","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f0c933e6d00154945df","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f0c933e6d00154945d9","_taskId":"5ebf3f0c933e6d00154945dd","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f0c933e6d00154945e0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f56cde2cf0015164865","_taskId":"5ebf3f56cde2cf0015164867","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f56cde2cf001516486a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f56cde2cf0015164864","_taskId":"5ebf3f56cde2cf0015164868","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f56cde2cf001516486b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f56cde2cf0015164866","_taskId":"5ebf3f56cde2cf0015164869","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f56cde2cf001516486c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f84cde2cf0015164873","_taskId":"5ebf3f84cde2cf0015164876","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f84cde2cf0015164879","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f84cde2cf0015164875","_taskId":"5ebf3f84cde2cf0015164877","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f84cde2cf001516487a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3f84cde2cf0015164874","_taskId":"5ebf3f84cde2cf0015164878","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3f84cde2cf001516487b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3fc0cde2cf0015164882","_taskId":"5ebf3fc0cde2cf0015164884","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3fc0cde2cf0015164888","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3fc0cde2cf0015164883","_taskId":"5ebf3fc0cde2cf0015164886","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3fc0cde2cf0015164889","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3fc0cde2cf0015164885","_taskId":"5ebf3fc0cde2cf0015164887","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3fc0cde2cf001516488a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ffccde2cf0015164891","_taskId":"5ebf3ffccde2cf0015164894","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ffccde2cf0015164897","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ffccde2cf0015164892","_taskId":"5ebf3ffccde2cf0015164895","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ffccde2cf0015164898","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf3ffccde2cf0015164893","_taskId":"5ebf3ffccde2cf0015164896","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf3ffccde2cf0015164899","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4038cde2cf00151648a0","_taskId":"5ebf4038cde2cf00151648a2","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4038cde2cf00151648a4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4038cde2cf00151648a1","_taskId":"5ebf4038cde2cf00151648a5","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4038cde2cf00151648a7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4038cde2cf00151648a3","_taskId":"5ebf4038cde2cf00151648a6","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4038cde2cf00151648a8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4074cde2cf00151648af","_taskId":"5ebf4074cde2cf00151648b2","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4074cde2cf00151648b5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4074cde2cf00151648b0","_taskId":"5ebf4074cde2cf00151648b3","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4074cde2cf00151648b6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4074cde2cf00151648b1","_taskId":"5ebf4074cde2cf00151648b4","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4074cde2cf00151648b7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf40b0cde2cf00151648be","_taskId":"5ebf40b0cde2cf00151648c1","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf40b0cde2cf00151648c4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf40b0cde2cf00151648bf","_taskId":"5ebf40b0cde2cf00151648c2","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf40b0cde2cf00151648c5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf40b0cde2cf00151648c0","_taskId":"5ebf40b0cde2cf00151648c3","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf40b0cde2cf00151648c6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf40eccde2cf00151648cd","_taskId":"5ebf40eccde2cf00151648d0","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf40eccde2cf00151648d3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf40eccde2cf00151648cf","_taskId":"5ebf40eccde2cf00151648d2","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf40eccde2cf00151648d4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf40eccde2cf00151648ce","_taskId":"5ebf40eccde2cf00151648d1","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf40eccde2cf00151648d5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4128cde2cf00151648dc","_taskId":"5ebf4128cde2cf00151648df","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4128cde2cf00151648e2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4128cde2cf00151648dd","_taskId":"5ebf4128cde2cf00151648e0","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4128cde2cf00151648e3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4128cde2cf00151648de","_taskId":"5ebf4128cde2cf00151648e1","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4128cde2cf00151648e4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4164cde2cf00151648ec","_taskId":"5ebf4164cde2cf00151648ef","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4164cde2cf00151648f1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4164cde2cf00151648eb","_taskId":"5ebf4164cde2cf00151648ee","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4164cde2cf00151648f2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4164cde2cf00151648ed","_taskId":"5ebf4164cde2cf00151648f0","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4164cde2cf00151648f3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf41a0cde2cf00151648fa","_taskId":"5ebf41a0cde2cf00151648fc","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf41a0cde2cf0015164900","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf41a0cde2cf00151648fb","_taskId":"5ebf41a0cde2cf00151648fe","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf41a0cde2cf0015164901","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf41a0cde2cf00151648fd","_taskId":"5ebf41a0cde2cf00151648ff","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf41a0cde2cf0015164902","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf41dccde2cf0015164909","_taskId":"5ebf41dccde2cf001516490c","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf41dccde2cf001516490f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf41dccde2cf001516490a","_taskId":"5ebf41dccde2cf001516490d","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf41dccde2cf0015164910","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf41dccde2cf001516490b","_taskId":"5ebf41dccde2cf001516490e","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf41dccde2cf0015164911","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4218cde2cf0015164918","_taskId":"5ebf4218cde2cf001516491a","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4218cde2cf001516491d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4218cde2cf0015164919","_taskId":"5ebf4218cde2cf001516491c","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4218cde2cf001516491f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4218cde2cf001516491b","_taskId":"5ebf4218cde2cf001516491e","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4218cde2cf0015164920","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4254cde2cf0015164927","_taskId":"5ebf4254cde2cf0015164929","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4254cde2cf001516492d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4254cde2cf0015164928","_taskId":"5ebf4254cde2cf001516492b","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4254cde2cf001516492e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4254cde2cf001516492a","_taskId":"5ebf4254cde2cf001516492c","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4254cde2cf001516492f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4290cde2cf0015164936","_taskId":"5ebf4290cde2cf0015164939","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4290cde2cf001516493c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4290cde2cf0015164937","_taskId":"5ebf4290cde2cf001516493a","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4290cde2cf001516493d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4290cde2cf0015164938","_taskId":"5ebf4290cde2cf001516493b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4290cde2cf001516493e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf42cccde2cf0015164945","_taskId":"5ebf42cccde2cf0015164947","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf42cccde2cf001516494a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf42cccde2cf0015164946","_taskId":"5ebf42cccde2cf0015164949","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf42cccde2cf001516494c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf42cccde2cf0015164948","_taskId":"5ebf42cccde2cf001516494b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf42cccde2cf001516494d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4308cde2cf0015164954","_taskId":"5ebf4308cde2cf0015164957","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4308cde2cf001516495a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4308cde2cf0015164955","_taskId":"5ebf4308cde2cf0015164958","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4308cde2cf001516495b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4308cde2cf0015164956","_taskId":"5ebf4308cde2cf0015164959","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4308cde2cf001516495c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4344cde2cf0015164963","_taskId":"5ebf4344cde2cf0015164966","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4344cde2cf0015164969","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4344cde2cf0015164964","_taskId":"5ebf4344cde2cf0015164967","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4344cde2cf001516496a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4344cde2cf0015164965","_taskId":"5ebf4344cde2cf0015164968","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4344cde2cf001516496b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4380cde2cf0015164972","_taskId":"5ebf4380cde2cf0015164975","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4380cde2cf0015164978","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4380cde2cf0015164973","_taskId":"5ebf4380cde2cf0015164976","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4380cde2cf0015164979","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4380cde2cf0015164974","_taskId":"5ebf4380cde2cf0015164977","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4380cde2cf001516497a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf43bccde2cf0015164982","_taskId":"5ebf43bccde2cf0015164985","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf43bccde2cf0015164987","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf43bccde2cf0015164983","_taskId":"5ebf43bccde2cf0015164986","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf43bccde2cf0015164988","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf43bccde2cf0015164981","_taskId":"5ebf43bccde2cf0015164984","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf43bccde2cf0015164989","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf43f8cde2cf0015164990","_taskId":"5ebf43f8cde2cf0015164993","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf43f8cde2cf0015164996","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf43f8cde2cf0015164992","_taskId":"5ebf43f8cde2cf0015164994","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf43f8cde2cf0015164997","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf43f8cde2cf0015164991","_taskId":"5ebf43f8cde2cf0015164995","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf43f8cde2cf0015164998","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4434cde2cf00151649a0","_taskId":"5ebf4434cde2cf00151649a3","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4434cde2cf00151649a5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4434cde2cf001516499f","_taskId":"5ebf4434cde2cf00151649a2","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4434cde2cf00151649a6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4434cde2cf00151649a1","_taskId":"5ebf4434cde2cf00151649a4","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4434cde2cf00151649a7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4470cde2cf00151649ae","_taskId":"5ebf4470cde2cf00151649b1","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4470cde2cf00151649b4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4470cde2cf00151649af","_taskId":"5ebf4470cde2cf00151649b2","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4470cde2cf00151649b5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4470cde2cf00151649b0","_taskId":"5ebf4470cde2cf00151649b3","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4470cde2cf00151649b6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf44accde2cf00151649bd","_taskId":"5ebf44accde2cf00151649c0","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf44accde2cf00151649c3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf44accde2cf00151649be","_taskId":"5ebf44accde2cf00151649c1","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf44accde2cf00151649c4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf44accde2cf00151649bf","_taskId":"5ebf44accde2cf00151649c2","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf44accde2cf00151649c5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf44e8cde2cf00151649cc","_taskId":"5ebf44e8cde2cf00151649cf","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf44e8cde2cf00151649d2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf44e8cde2cf00151649cd","_taskId":"5ebf44e8cde2cf00151649d0","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf44e8cde2cf00151649d3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf44e8cde2cf00151649ce","_taskId":"5ebf44e8cde2cf00151649d1","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf44e8cde2cf00151649d4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4524cde2cf00151649dc","_taskId":"5ebf4524cde2cf00151649df","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4524cde2cf00151649e1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4524cde2cf00151649dd","_taskId":"5ebf4524cde2cf00151649e0","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4524cde2cf00151649e2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4524cde2cf00151649db","_taskId":"5ebf4524cde2cf00151649de","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4524cde2cf00151649e3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4560cde2cf00151649ea","_taskId":"5ebf4560cde2cf00151649ed","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4560cde2cf00151649f0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4560cde2cf00151649eb","_taskId":"5ebf4560cde2cf00151649ee","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4560cde2cf00151649f1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4560cde2cf00151649ec","_taskId":"5ebf4560cde2cf00151649ef","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4560cde2cf00151649f2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf459ccde2cf00151649f9","_taskId":"5ebf459ccde2cf00151649fc","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf459ccde2cf00151649ff","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf459ccde2cf00151649fa","_taskId":"5ebf459ccde2cf00151649fd","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf459ccde2cf0015164a00","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf459ccde2cf00151649fb","_taskId":"5ebf459ccde2cf00151649fe","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf459ccde2cf0015164a01","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf45d8cde2cf0015164a08","_taskId":"5ebf45d8cde2cf0015164a0b","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf45d8cde2cf0015164a0e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf45d8cde2cf0015164a09","_taskId":"5ebf45d8cde2cf0015164a0c","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf45d8cde2cf0015164a0f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf45d8cde2cf0015164a0a","_taskId":"5ebf45d8cde2cf0015164a0d","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf45d8cde2cf0015164a10","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4614cde2cf0015164a18","_taskId":"5ebf4614cde2cf0015164a1b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4614cde2cf0015164a1d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4614cde2cf0015164a17","_taskId":"5ebf4614cde2cf0015164a1a","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4614cde2cf0015164a1e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4614cde2cf0015164a19","_taskId":"5ebf4614cde2cf0015164a1c","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4614cde2cf0015164a1f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4650cde2cf0015164a26","_taskId":"5ebf4650cde2cf0015164a29","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4650cde2cf0015164a2c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4650cde2cf0015164a28","_taskId":"5ebf4650cde2cf0015164a2a","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4650cde2cf0015164a2d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4650cde2cf0015164a27","_taskId":"5ebf4650cde2cf0015164a2b","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4650cde2cf0015164a2e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf468ccde2cf0015164a36","_taskId":"5ebf468ccde2cf0015164a38","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf468ccde2cf0015164a3b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf468ccde2cf0015164a37","_taskId":"5ebf468ccde2cf0015164a39","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf468ccde2cf0015164a3c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf468ccde2cf0015164a35","_taskId":"5ebf468ccde2cf0015164a3a","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf468ccde2cf0015164a3d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf46c8cde2cf0015164a45","_taskId":"5ebf46c8cde2cf0015164a48","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf46c8cde2cf0015164a4a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf46c8cde2cf0015164a44","_taskId":"5ebf46c8cde2cf0015164a47","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf46c8cde2cf0015164a4b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf46c8cde2cf0015164a46","_taskId":"5ebf46c8cde2cf0015164a49","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf46c8cde2cf0015164a4c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4704cde2cf0015164a53","_taskId":"5ebf4704cde2cf0015164a55","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4704cde2cf0015164a59","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4704cde2cf0015164a54","_taskId":"5ebf4704cde2cf0015164a57","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4704cde2cf0015164a5a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4704cde2cf0015164a56","_taskId":"5ebf4704cde2cf0015164a58","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4704cde2cf0015164a5b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4740cde2cf0015164a62","_taskId":"5ebf4740cde2cf0015164a65","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4740cde2cf0015164a68","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4740cde2cf0015164a63","_taskId":"5ebf4740cde2cf0015164a66","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4740cde2cf0015164a69","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4740cde2cf0015164a64","_taskId":"5ebf4740cde2cf0015164a67","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4740cde2cf0015164a6a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf477ccde2cf0015164a71","_taskId":"5ebf477ccde2cf0015164a74","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf477ccde2cf0015164a77","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf477ccde2cf0015164a73","_taskId":"5ebf477ccde2cf0015164a76","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf477ccde2cf0015164a78","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf477ccde2cf0015164a72","_taskId":"5ebf477ccde2cf0015164a75","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf477ccde2cf0015164a79","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf47b8cde2cf0015164a80","_taskId":"5ebf47b8cde2cf0015164a82","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf47b8cde2cf0015164a85","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf47b8cde2cf0015164a81","_taskId":"5ebf47b8cde2cf0015164a84","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf47b8cde2cf0015164a87","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf47b8cde2cf0015164a83","_taskId":"5ebf47b8cde2cf0015164a86","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf47b8cde2cf0015164a88","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf47f4cde2cf0015164a8f","_taskId":"5ebf47f4cde2cf0015164a91","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf47f4cde2cf0015164a94","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf47f4cde2cf0015164a90","_taskId":"5ebf47f4cde2cf0015164a93","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf47f4cde2cf0015164a95","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf47f4cde2cf0015164a92","_taskId":"5ebf47f4cde2cf0015164a96","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf47f4cde2cf0015164a97","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4830cde2cf0015164a9e","_taskId":"5ebf4830cde2cf0015164a9f","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4830cde2cf0015164aa3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4830cde2cf0015164aa0","_taskId":"5ebf4830cde2cf0015164aa2","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4830cde2cf0015164aa5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4830cde2cf0015164aa1","_taskId":"5ebf4830cde2cf0015164aa4","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4830cde2cf0015164aa6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf486ccde2cf0015164aae","_taskId":"5ebf486ccde2cf0015164ab0","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf486ccde2cf0015164ab3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf486ccde2cf0015164aaf","_taskId":"5ebf486ccde2cf0015164ab2","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf486ccde2cf0015164ab4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf486ccde2cf0015164aad","_taskId":"5ebf486ccde2cf0015164ab1","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf486ccde2cf0015164ab5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf48a8cde2cf0015164abd","_taskId":"5ebf48a8cde2cf0015164ac0","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf48a8cde2cf0015164ac2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf48a8cde2cf0015164abc","_taskId":"5ebf48a8cde2cf0015164abf","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf48a8cde2cf0015164ac3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf48a8cde2cf0015164abe","_taskId":"5ebf48a8cde2cf0015164ac1","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf48a8cde2cf0015164ac4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf48e4cde2cf0015164acb","_taskId":"5ebf48e4cde2cf0015164acf","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf48e4cde2cf0015164ad1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf48e4cde2cf0015164acd","_taskId":"5ebf48e4cde2cf0015164ad0","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf48e4cde2cf0015164ad2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf48e4cde2cf0015164acc","_taskId":"5ebf48e4cde2cf0015164ace","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf48e4cde2cf0015164ad3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf492c28a7440015ec95e4","_taskId":"5ebf492c28a7440015ec95e6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf492c28a7440015ec95e9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf492c28a7440015ec95e5","_taskId":"5ebf492c28a7440015ec95e7","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf492c28a7440015ec95ea","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf492c28a7440015ec95e3","_taskId":"5ebf492c28a7440015ec95e8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf492c28a7440015ec95eb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf495c28a7440015ec95f2","_taskId":"5ebf495c28a7440015ec95f5","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf495c28a7440015ec95f7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf495c28a7440015ec95f3","_taskId":"5ebf495c28a7440015ec95f6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf495c28a7440015ec95f9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf495c28a7440015ec95f4","_taskId":"5ebf495c28a7440015ec95f8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf495c28a7440015ec95fa","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf499828a7440015ec9601","_taskId":"5ebf499828a7440015ec9604","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf499828a7440015ec9606","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf499828a7440015ec9602","_taskId":"5ebf499828a7440015ec9605","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf499828a7440015ec9608","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf499828a7440015ec9603","_taskId":"5ebf499828a7440015ec9607","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf499828a7440015ec9609","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf49d428a7440015ec9611","_taskId":"5ebf49d428a7440015ec9613","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf49d428a7440015ec9616","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf49d428a7440015ec9612","_taskId":"5ebf49d428a7440015ec9615","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf49d428a7440015ec9617","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf49d428a7440015ec9610","_taskId":"5ebf49d428a7440015ec9614","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf49d428a7440015ec9618","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a1028a7440015ec961f","_taskId":"5ebf4a1028a7440015ec9622","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a1028a7440015ec9625","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a1028a7440015ec9620","_taskId":"5ebf4a1028a7440015ec9623","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a1028a7440015ec9626","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a1028a7440015ec9621","_taskId":"5ebf4a1028a7440015ec9624","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a1028a7440015ec9627","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a4c28a7440015ec962f","_taskId":"5ebf4a4c28a7440015ec9632","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a4c28a7440015ec9634","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a4c28a7440015ec962e","_taskId":"5ebf4a4c28a7440015ec9631","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a4c28a7440015ec9635","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a4c28a7440015ec9630","_taskId":"5ebf4a4c28a7440015ec9633","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a4c28a7440015ec9636","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a8828a7440015ec963e","_taskId":"5ebf4a8828a7440015ec9641","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a8828a7440015ec9643","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a8828a7440015ec963d","_taskId":"5ebf4a8828a7440015ec9640","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a8828a7440015ec9644","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4a8828a7440015ec963f","_taskId":"5ebf4a8828a7440015ec9642","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4a8828a7440015ec9645","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ac428a7440015ec964c","_taskId":"5ebf4ac428a7440015ec964f","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ac428a7440015ec9652","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ac428a7440015ec964d","_taskId":"5ebf4ac428a7440015ec9650","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ac428a7440015ec9653","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ac428a7440015ec964e","_taskId":"5ebf4ac428a7440015ec9651","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ac428a7440015ec9654","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b0028a7440015ec965c","_taskId":"5ebf4b0028a7440015ec965e","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b0028a7440015ec9661","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b0028a7440015ec965d","_taskId":"5ebf4b0028a7440015ec9660","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b0028a7440015ec9662","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b0028a7440015ec965b","_taskId":"5ebf4b0028a7440015ec965f","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b0028a7440015ec9663","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b3c28a7440015ec966b","_taskId":"5ebf4b3c28a7440015ec966d","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b3c28a7440015ec9670","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b3c28a7440015ec966c","_taskId":"5ebf4b3c28a7440015ec966f","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b3c28a7440015ec9671","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b3c28a7440015ec966a","_taskId":"5ebf4b3c28a7440015ec966e","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b3c28a7440015ec9672","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b7828a7440015ec9679","_taskId":"5ebf4b7828a7440015ec967b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b7828a7440015ec967e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b7828a7440015ec967a","_taskId":"5ebf4b7828a7440015ec967c","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b7828a7440015ec967f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4b7828a7440015ec967d","_taskId":"5ebf4b7828a7440015ec9680","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4b7828a7440015ec9681","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4bb428a7440015ec9688","_taskId":"5ebf4bb428a7440015ec968b","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4bb428a7440015ec968e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4bb428a7440015ec9689","_taskId":"5ebf4bb428a7440015ec968c","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4bb428a7440015ec968f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4bb428a7440015ec968a","_taskId":"5ebf4bb428a7440015ec968d","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4bb428a7440015ec9690","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4bf028a7440015ec9698","_taskId":"5ebf4bf028a7440015ec969b","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4bf028a7440015ec969d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4bf028a7440015ec9697","_taskId":"5ebf4bf028a7440015ec969a","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4bf028a7440015ec969e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4bf028a7440015ec9699","_taskId":"5ebf4bf028a7440015ec969c","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4bf028a7440015ec969f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4c2c28a7440015ec96a7","_taskId":"5ebf4c2c28a7440015ec96a9","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4c2c28a7440015ec96ac","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4c2c28a7440015ec96a6","_taskId":"5ebf4c2c28a7440015ec96aa","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4c2c28a7440015ec96ad","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4c2c28a7440015ec96a8","_taskId":"5ebf4c2c28a7440015ec96ab","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4c2c28a7440015ec96ae","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4c6828a7440015ec96b6","_taskId":"5ebf4c6828a7440015ec96b8","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4c6828a7440015ec96bb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4c6828a7440015ec96b7","_taskId":"5ebf4c6828a7440015ec96ba","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4c6828a7440015ec96bc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4c6828a7440015ec96b5","_taskId":"5ebf4c6828a7440015ec96b9","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4c6828a7440015ec96bd","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ca428a7440015ec96c4","_taskId":"5ebf4ca428a7440015ec96c7","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ca428a7440015ec96ca","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ca428a7440015ec96c6","_taskId":"5ebf4ca428a7440015ec96c8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ca428a7440015ec96cb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ca428a7440015ec96c5","_taskId":"5ebf4ca428a7440015ec96c9","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ca428a7440015ec96cc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ce028a7440015ec96d3","_taskId":"5ebf4ce028a7440015ec96d6","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ce028a7440015ec96d9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ce028a7440015ec96d4","_taskId":"5ebf4ce028a7440015ec96d7","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ce028a7440015ec96da","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ce028a7440015ec96d5","_taskId":"5ebf4ce028a7440015ec96d8","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ce028a7440015ec96db","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d1c28a7440015ec96e2","_taskId":"5ebf4d1c28a7440015ec96e5","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d1c28a7440015ec96e8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d1c28a7440015ec96e3","_taskId":"5ebf4d1c28a7440015ec96e6","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d1c28a7440015ec96e9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d1c28a7440015ec96e4","_taskId":"5ebf4d1c28a7440015ec96e7","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d1c28a7440015ec96ea","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d5828a7440015ec96f1","_taskId":"5ebf4d5828a7440015ec96f3","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d5828a7440015ec96f7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d5828a7440015ec96f2","_taskId":"5ebf4d5828a7440015ec96f5","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d5828a7440015ec96f8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d5828a7440015ec96f4","_taskId":"5ebf4d5828a7440015ec96f6","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d5828a7440015ec96f9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d9428a7440015ec9700","_taskId":"5ebf4d9428a7440015ec9702","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d9428a7440015ec9706","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d9428a7440015ec9701","_taskId":"5ebf4d9428a7440015ec9704","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d9428a7440015ec9707","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4d9428a7440015ec9703","_taskId":"5ebf4d9428a7440015ec9705","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4d9428a7440015ec9708","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4dd028a7440015ec9710","_taskId":"5ebf4dd028a7440015ec9712","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4dd028a7440015ec9715","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4dd028a7440015ec9711","_taskId":"5ebf4dd028a7440015ec9714","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4dd028a7440015ec9716","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4dd028a7440015ec970f","_taskId":"5ebf4dd028a7440015ec9713","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4dd028a7440015ec9717","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e0c28a7440015ec971e","_taskId":"5ebf4e0c28a7440015ec9721","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e0c28a7440015ec9724","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e0c28a7440015ec9720","_taskId":"5ebf4e0c28a7440015ec9723","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e0c28a7440015ec9725","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e0c28a7440015ec971f","_taskId":"5ebf4e0c28a7440015ec9722","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e0c28a7440015ec9726","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e4828a7440015ec972e","_taskId":"5ebf4e4828a7440015ec9731","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e4828a7440015ec9733","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e4828a7440015ec972f","_taskId":"5ebf4e4828a7440015ec9732","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e4828a7440015ec9734","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e4828a7440015ec972d","_taskId":"5ebf4e4828a7440015ec9730","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e4828a7440015ec9735","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e8428a7440015ec973d","_taskId":"5ebf4e8428a7440015ec973f","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e8428a7440015ec9742","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e8428a7440015ec973e","_taskId":"5ebf4e8428a7440015ec9741","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e8428a7440015ec9743","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4e8428a7440015ec973c","_taskId":"5ebf4e8428a7440015ec9740","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4e8428a7440015ec9744","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ec028a7440015ec974c","_taskId":"5ebf4ec028a7440015ec974f","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ec028a7440015ec9751","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ec028a7440015ec974b","_taskId":"5ebf4ec028a7440015ec974e","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ec028a7440015ec9752","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4ec028a7440015ec974d","_taskId":"5ebf4ec028a7440015ec9750","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4ec028a7440015ec9753","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4efc28a7440015ec975b","_taskId":"5ebf4efc28a7440015ec975d","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4efc28a7440015ec9760","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4efc28a7440015ec975a","_taskId":"5ebf4efc28a7440015ec975c","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4efc28a7440015ec9761","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4efc28a7440015ec975e","_taskId":"5ebf4efc28a7440015ec975f","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4efc28a7440015ec9762","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4f3828a7440015ec976a","_taskId":"5ebf4f3828a7440015ec976d","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4f3828a7440015ec976f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4f3828a7440015ec9769","_taskId":"5ebf4f3828a7440015ec976c","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4f3828a7440015ec9770","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4f3828a7440015ec976b","_taskId":"5ebf4f3828a7440015ec976e","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4f3828a7440015ec9771","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4f7428a7440015ec9778","_taskId":"5ebf4f7428a7440015ec977b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4f7428a7440015ec977e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4f7428a7440015ec9779","_taskId":"5ebf4f7428a7440015ec977c","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4f7428a7440015ec977f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4f7428a7440015ec977a","_taskId":"5ebf4f7428a7440015ec977d","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4f7428a7440015ec9780","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4fb028a7440015ec9787","_taskId":"5ebf4fb028a7440015ec978a","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4fb028a7440015ec978d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4fb028a7440015ec9788","_taskId":"5ebf4fb028a7440015ec978b","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4fb028a7440015ec978e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4fb028a7440015ec9789","_taskId":"5ebf4fb028a7440015ec978c","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4fb028a7440015ec978f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4fec28a7440015ec9797","_taskId":"5ebf4fec28a7440015ec9799","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4fec28a7440015ec979c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4fec28a7440015ec9798","_taskId":"5ebf4fec28a7440015ec979b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4fec28a7440015ec979d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf4fec28a7440015ec9796","_taskId":"5ebf4fec28a7440015ec979a","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf4fec28a7440015ec979e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf502828a7440015ec97a6","_taskId":"5ebf502828a7440015ec97a9","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf502828a7440015ec97ab","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf502828a7440015ec97a5","_taskId":"5ebf502828a7440015ec97a8","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf502828a7440015ec97ac","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf502828a7440015ec97a7","_taskId":"5ebf502828a7440015ec97aa","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf502828a7440015ec97ad","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf506428a7440015ec97b5","_taskId":"5ebf506428a7440015ec97b8","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf506428a7440015ec97ba","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf506428a7440015ec97b4","_taskId":"5ebf506428a7440015ec97b7","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf506428a7440015ec97bb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf506428a7440015ec97b6","_taskId":"5ebf506428a7440015ec97b9","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf506428a7440015ec97bc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf50a028a7440015ec97c3","_taskId":"5ebf50a028a7440015ec97c6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf50a028a7440015ec97c9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf50a028a7440015ec97c4","_taskId":"5ebf50a028a7440015ec97c7","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf50a028a7440015ec97ca","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf50a028a7440015ec97c5","_taskId":"5ebf50a028a7440015ec97c8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf50a028a7440015ec97cb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf50dc28a7440015ec97d3","_taskId":"5ebf50dc28a7440015ec97d7","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf50dc28a7440015ec97d8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf50dc28a7440015ec97d4","_taskId":"5ebf50dc28a7440015ec97d6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf50dc28a7440015ec97d9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf50dc28a7440015ec97d2","_taskId":"5ebf50dc28a7440015ec97d5","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf50dc28a7440015ec97da","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf511828a7440015ec97e2","_taskId":"5ebf511828a7440015ec97e5","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf511828a7440015ec97e7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf511828a7440015ec97e3","_taskId":"5ebf511828a7440015ec97e6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf511828a7440015ec97e8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf511828a7440015ec97e1","_taskId":"5ebf511828a7440015ec97e4","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf511828a7440015ec97e9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf515428a7440015ec97f1","_taskId":"5ebf515428a7440015ec97f3","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf515428a7440015ec97f6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf515428a7440015ec97f2","_taskId":"5ebf515428a7440015ec97f5","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf515428a7440015ec97f7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf515428a7440015ec97f0","_taskId":"5ebf515428a7440015ec97f4","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf515428a7440015ec97f8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf519028a7440015ec97ff","_taskId":"5ebf519028a7440015ec9802","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf519028a7440015ec9805","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf519028a7440015ec9800","_taskId":"5ebf519028a7440015ec9803","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf519028a7440015ec9806","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf519028a7440015ec9801","_taskId":"5ebf519028a7440015ec9804","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf519028a7440015ec9807","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf51cc28a7440015ec980f","_taskId":"5ebf51cc28a7440015ec9812","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf51cc28a7440015ec9814","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf51cc28a7440015ec9810","_taskId":"5ebf51cc28a7440015ec9813","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf51cc28a7440015ec9815","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf51cc28a7440015ec980e","_taskId":"5ebf51cc28a7440015ec9811","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf51cc28a7440015ec9816","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf520828a7440015ec981d","_taskId":"5ebf520828a7440015ec981e","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf520828a7440015ec9823","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf520828a7440015ec9820","_taskId":"5ebf520828a7440015ec9821","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf520828a7440015ec9824","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf520828a7440015ec981f","_taskId":"5ebf520828a7440015ec9822","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf520828a7440015ec9825","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf524428a7440015ec982d","_taskId":"5ebf524428a7440015ec9830","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf524428a7440015ec9832","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf524428a7440015ec982e","_taskId":"5ebf524428a7440015ec9831","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf524428a7440015ec9833","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf524428a7440015ec982c","_taskId":"5ebf524428a7440015ec982f","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf524428a7440015ec9834","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf528028a7440015ec983c","_taskId":"5ebf528028a7440015ec983f","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf528028a7440015ec9841","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf528028a7440015ec983b","_taskId":"5ebf528028a7440015ec983e","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf528028a7440015ec9842","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf528028a7440015ec983d","_taskId":"5ebf528028a7440015ec9840","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf528028a7440015ec9843","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf52bc28a7440015ec984a","_taskId":"5ebf52bc28a7440015ec984f","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf52bc28a7440015ec9850","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf52bc28a7440015ec984c","_taskId":"5ebf52bc28a7440015ec984d","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf52bc28a7440015ec9851","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf52bc28a7440015ec984b","_taskId":"5ebf52bc28a7440015ec984e","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf52bc28a7440015ec9852","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf52f828a7440015ec9859","_taskId":"5ebf52f828a7440015ec985b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf52f828a7440015ec985f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf52f828a7440015ec985c","_taskId":"5ebf52f828a7440015ec985e","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf52f828a7440015ec9860","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf52f828a7440015ec985a","_taskId":"5ebf52f828a7440015ec985d","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf52f828a7440015ec9861","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf533428a7440015ec9868","_taskId":"5ebf533428a7440015ec986b","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf533428a7440015ec986e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf533428a7440015ec9869","_taskId":"5ebf533428a7440015ec986d","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf533428a7440015ec986f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf533428a7440015ec986a","_taskId":"5ebf533428a7440015ec986c","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf533428a7440015ec9870","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf537028a7440015ec9877","_taskId":"5ebf537028a7440015ec9879","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf537028a7440015ec987c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf537028a7440015ec9878","_taskId":"5ebf537028a7440015ec987b","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf537028a7440015ec987e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf537028a7440015ec987a","_taskId":"5ebf537028a7440015ec987d","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf537028a7440015ec987f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf53ac28a7440015ec9887","_taskId":"5ebf53ac28a7440015ec988a","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf53ac28a7440015ec988c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf53ac28a7440015ec9886","_taskId":"5ebf53ac28a7440015ec9888","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf53ac28a7440015ec988d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf53ac28a7440015ec9889","_taskId":"5ebf53ac28a7440015ec988b","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf53ac28a7440015ec988e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf53e828a7440015ec9895","_taskId":"5ebf53e828a7440015ec9896","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf53e828a7440015ec9899","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf53e828a7440015ec9897","_taskId":"5ebf53e828a7440015ec9898","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf53e828a7440015ec989c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf53e828a7440015ec989a","_taskId":"5ebf53e828a7440015ec989b","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf53e828a7440015ec989d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf542428a7440015ec98a5","_taskId":"5ebf542428a7440015ec98a8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf542428a7440015ec98aa","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf542428a7440015ec98a4","_taskId":"5ebf542428a7440015ec98a7","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf542428a7440015ec98ab","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf542428a7440015ec98a6","_taskId":"5ebf542428a7440015ec98a9","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf542428a7440015ec98ac","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf546028a7440015ec98b4","_taskId":"5ebf546028a7440015ec98b6","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf546028a7440015ec98b9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf546028a7440015ec98b5","_taskId":"5ebf546028a7440015ec98b8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf546028a7440015ec98ba","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf546028a7440015ec98b3","_taskId":"5ebf546028a7440015ec98b7","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf546028a7440015ec98bb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf549c28a7440015ec98c2","_taskId":"5ebf549c28a7440015ec98c4","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf549c28a7440015ec98c7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf549c28a7440015ec98c3","_taskId":"5ebf549c28a7440015ec98c6","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf549c28a7440015ec98c9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf549c28a7440015ec98c5","_taskId":"5ebf549c28a7440015ec98c8","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf549c28a7440015ec98ca","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf54d828a7440015ec98d1","_taskId":"5ebf54d828a7440015ec98d4","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf54d828a7440015ec98d7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf54d828a7440015ec98d2","_taskId":"5ebf54d828a7440015ec98d5","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf54d828a7440015ec98d8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf54d828a7440015ec98d3","_taskId":"5ebf54d828a7440015ec98d6","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf54d828a7440015ec98d9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf551428a7440015ec98e0","_taskId":"5ebf551428a7440015ec98e2","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf551428a7440015ec98e6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf551428a7440015ec98e1","_taskId":"5ebf551428a7440015ec98e4","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf551428a7440015ec98e7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf551428a7440015ec98e3","_taskId":"5ebf551428a7440015ec98e5","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf551428a7440015ec98e8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf555028a7440015ec98ef","_taskId":"5ebf555028a7440015ec98f2","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf555028a7440015ec98f5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf555028a7440015ec98f1","_taskId":"5ebf555028a7440015ec98f3","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf555028a7440015ec98f6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf555028a7440015ec98f0","_taskId":"5ebf555028a7440015ec98f4","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf555028a7440015ec98f7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf558c28a7440015ec98fe","_taskId":"5ebf558c28a7440015ec9901","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf558c28a7440015ec9904","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf558c28a7440015ec98ff","_taskId":"5ebf558c28a7440015ec9902","name":"step","order":0,"script":{"id":"5ebf3ae1615271382b431925","name":"cron-ip-172-31-93-56.ec2.internal-0oJRG","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf558c28a7440015ec9905","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf558c28a7440015ec9900","_taskId":"5ebf558c28a7440015ec9903","name":"step","order":0,"script":{"id":"5ebf3c49615271382b43192a","name":"cron-ip-172-31-93-56.ec2.internal-3OSTR","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf558c28a7440015ec9906","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ebf55c828a7440015ec990d","_taskId":"5ebf55c828a7440015ec990f","name":"step","order":0,"script":{"id":"5ebf387d615271382b431920","name":"cron-ip-172-31-93-56.ec2.internal-du5BJ","scriptType":2,"code":"ImhlbGxvIHRoZXJlIiA+IG91dC50eHQ="},"id":"5ebf55c828a7440015ec9912","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed71e1e22d50c0015abf945","_taskId":"5ed71e1e22d50c0015abf946","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed71e1e22d50c0015abf947","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed71e1e22d50c0015abf945","_taskId":"5ed71e1e22d50c0015abf948","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed71e1e22d50c0015abf949","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed71e1e22d50c0015abf945","_taskId":"5ed71e1e22d50c0015abf948","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed71e1e22d50c0015abf94a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726a922d50c0015abf94b","_taskId":"5ed726a922d50c0015abf94c","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed726a922d50c0015abf94d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726a922d50c0015abf94b","_taskId":"5ed726a922d50c0015abf94e","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed726a922d50c0015abf94f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726a922d50c0015abf94b","_taskId":"5ed726a922d50c0015abf94e","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed726a922d50c0015abf950","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726b022d50c0015abf951","_taskId":"5ed726b022d50c0015abf952","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed726b022d50c0015abf953","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726b022d50c0015abf951","_taskId":"5ed726b022d50c0015abf954","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed726b022d50c0015abf955","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726b022d50c0015abf951","_taskId":"5ed726b022d50c0015abf954","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed726b022d50c0015abf956","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7afb295a4f15084758772","_taskId":"5ed7afb295a4f15084758773","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7afb395a4f15084758774","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7afb295a4f15084758772","_taskId":"5ed7afb395a4f15084758775","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7afb395a4f15084758776","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7afb295a4f15084758772","_taskId":"5ed7afb395a4f15084758775","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7afb395a4f15084758777","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c4a31981b9001524c333","_taskId":"5ed7c4a31981b9001524c334","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7c4a31981b9001524c335","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c4a31981b9001524c333","_taskId":"5ed7c4a31981b9001524c336","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7c4a31981b9001524c337","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c4a31981b9001524c333","_taskId":"5ed7c4a31981b9001524c336","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7c4a31981b9001524c338","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c5931981b9001524c33a","_taskId":"5ed7c5931981b9001524c33b","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7c5931981b9001524c33c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c5931981b9001524c33a","_taskId":"5ed7c5941981b9001524c33d","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7c5941981b9001524c33e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c5931981b9001524c33a","_taskId":"5ed7c5941981b9001524c33d","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7c5941981b9001524c33f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","_taskId":"5ed7c7a0a744670015896463","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7c7a0a744670015896464","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","_taskId":"5ed7c7a1a744670015896465","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7c7a1a744670015896466","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","_taskId":"5ed7c7a1a744670015896465","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7c7a1a744670015896467","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","_taskId":"5ed7cc37a74467001589646b","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7cc37a74467001589646c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","_taskId":"5ed7cc37a74467001589646d","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7cc37a74467001589646e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","_taskId":"5ed7cc37a74467001589646d","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7cc37a74467001589646f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cd61dd983000158d2f33","_taskId":"5ed7cd61dd983000158d2f34","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7cd61dd983000158d2f35","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cd61dd983000158d2f33","_taskId":"5ed7cd61dd983000158d2f36","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7cd61dd983000158d2f37","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cd61dd983000158d2f33","_taskId":"5ed7cd61dd983000158d2f36","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7cd61dd983000158d2f38","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","_taskId":"5ed7cdd1dd983000158d2f3b","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7cdd1dd983000158d2f3c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","_taskId":"5ed7cdd1dd983000158d2f3d","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7cdd1dd983000158d2f3e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","_taskId":"5ed7cdd1dd983000158d2f3d","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7cdd1dd983000158d2f3f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","_taskId":"5ed7da80dd983000158d2f43","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7da80dd983000158d2f44","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","_taskId":"5ed7da80dd983000158d2f45","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7da80dd983000158d2f46","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","_taskId":"5ed7da80dd983000158d2f45","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7da80dd983000158d2f47","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","_taskId":"5ed7df4e63747e0015807a03","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7df4e63747e0015807a04","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","_taskId":"5ed7df4e63747e0015807a05","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7df4e63747e0015807a06","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","_taskId":"5ed7df4e63747e0015807a05","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7df4e63747e0015807a07","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0b","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7df7663747e0015807a0c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7df7663747e0015807a0e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7df7663747e0015807a0f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_taskId":"5ed7e5351299560015b652e0","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7e5351299560015b652e1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_taskId":"5ed7e5351299560015b652e2","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7e5351299560015b652e3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_taskId":"5ed7e5351299560015b652e2","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7e5361299560015b652e4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","_taskId":"5ed7e5bd1299560015b652eb","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7e5bd1299560015b652ec","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","_taskId":"5ed7e5bd1299560015b652ed","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7e5bd1299560015b652ee","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","_taskId":"5ed7e5bd1299560015b652ed","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7e5bd1299560015b652ef","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e67c1299560015b652f3","_taskId":"5ed7e67c1299560015b652f4","id":"5ed7e67c1299560015b652f5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","_taskId":"5ed7e7741299560015b652fb","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7e7741299560015b652fc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","_taskId":"5ed7e7741299560015b652fd","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXSB8fCAgWyAiYW16biIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7e7741299560015b652fe","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","_taskId":"5ed7e7741299560015b652fd","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7e7741299560015b652ff","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","_taskId":"5ed7e7931299560015b65304","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7e7931299560015b65305","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","_taskId":"5ed7e7931299560015b65306","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXSB8fCAgWyAiYW16biIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7e7931299560015b65307","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","_taskId":"5ed7e7931299560015b65306","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7e7931299560015b65308","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_taskId":"5ed7e7c71299560015b6530d","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7e7c71299560015b6530e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_taskId":"5ed7e7c71299560015b6530f","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXSB8fCAgWyAiYW16biIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7e7c71299560015b65310","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_taskId":"5ed7e7c71299560015b6530f","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7e7c71299560015b65311","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ea811299560015b65318","_taskId":"5ed7ea811299560015b65319","id":"5ed7ea811299560015b6531a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_taskId":"5ed7ece81299560015b6531e","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7ece81299560015b6531f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_taskId":"5ed7ece81299560015b65320","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGN1cmwgLXNMIGh0dHBzOi8vZGViLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggLW8gbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAoKCBFVUlEICkpICYmIHsgc3VkbyBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoOyB9IHx8IGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGFwdCBpbnN0YWxsIG5vZGVqczsgfSB8fCBhcHQgaW5zdGFsbCBub2RlanMKICAgICAgbm9kZSAtLXZlcnNpb24KICAgIGVsc2UKICAgICAgZWNobyAibm9kZWpzIGFscmVhZHkgaW5zdGFsbGVkIgogICAgZmkKICBmaQpmaQ=="},"id":"5ed7ece81299560015b65321","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_taskId":"5ed7ece81299560015b65320","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7ece81299560015b65322","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICBlY2hvICJjaGVja2luZyBpZiBub2RlanMgaW5zdGFsbGVkIgogICAgUEtHX09LPSQoZHBrZy1xdWVyeSAtVyAtZj0nJHtTdGF0dXN9JyBub2RlanMgMj4vZGV2L251bGwgfCBncmVwIC1jICJvayBpbnN0YWxsZWQiKQogICAgaWYgWyAiMCIgPT0gIiRQS0dfT0siIF07IHRoZW4KICAgICAgZWNobyAibm9kZWpzIG5vdCBpbnN0YWxsZWQgLSBpbnN0YWxsaW5nIgogICAgICBjdXJsIC1zTCBodHRwczovL2RlYi5ub2Rlc291cmNlLmNvbS9zZXR1cF8xMC54IC1vIG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgIC4vbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAoKCBFVUlEICkpICYmIHsgc3VkbyBhcHQgaW5zdGFsbCBub2RlanM7IH0gfHwgYXB0IGluc3RhbGwgbm9kZWpzCiAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICBpZiBbWyAiJE9TX0lEIiA9PSAiXCJhbXpuXCIiIF1dOyB0aGVuCiAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICBzdWRvIHl1bSAteSBpbnN0YWxsIG5vZGVqcyBucG0gLS1lbmFibGVyZXBvPWVwZWwKICAgIGVsc2UKICAgICAgZWNobyAibm9kZWpzIGFscmVhZHkgaW5zdGFsbGVkIgogICAgZmkKICBmaQpmaQ=="},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f2f41299560015b65328","_taskId":"5ed7f2f41299560015b65329","id":"5ed7f2f41299560015b6532a","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzIG5wbSAtLWVuYWJsZXJlcG89ZXBlbAogICAgICBmaQogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"order":0,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f46d1299560015b6532d","_taskId":"5ed7f46d1299560015b6532e","id":"5ed7f46d1299560015b6532f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","_taskId":"5ed7f5791299560015b65333","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7f5791299560015b65334","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","_taskId":"5ed7f5791299560015b65335","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzIG5wbSAtLWVuYWJsZXJlcG89ZXBlbAogICAgICBmaQogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7f5791299560015b65336","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","_taskId":"5ed7f5791299560015b65335","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7f5791299560015b65337","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","_taskId":"5ed7f59a1299560015b6533c","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7f59a1299560015b6533d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","_taskId":"5ed7f59a1299560015b6533e","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzIG5wbSAtLWVuYWJsZXJlcG89ZXBlbAogICAgICBmaQogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7f59a1299560015b6533f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","_taskId":"5ed7f59a1299560015b6533e","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7f59a1299560015b65340","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65345","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7f6121299560015b65346","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzIG5wbSAtLWVuYWJsZXJlcG89ZXBlbAogICAgICBmaQogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp"},"id":"5ed7f6121299560015b65348","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7f6121299560015b65349","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fa3d1299560015b65354","_taskId":"5ed7fa3d1299560015b65355","id":"5ed7fa3d1299560015b65356","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_taskId":"5ed7fe912a8c780015a48854","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed7fe912a8c780015a48855","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_taskId":"5ed7fe912a8c780015a48856","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed7fe912a8c780015a48857","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_taskId":"5ed7fe912a8c780015a48856","name":"build","order":2,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed7fe912a8c780015a48858","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed801ab2a8c780015a4885f","_taskId":"5ed801ab2a8c780015a48860","id":"5ed801ab2a8c780015a48861","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","_taskId":"5ed8096d2a8c780015a48868","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed8096d2a8c780015a48869","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","_taskId":"5ed8096d2a8c780015a4886a","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed8096d2a8c780015a4886b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","_taskId":"5ed8096d2a8c780015a4886a","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed8096d2a8c780015a4886c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","_taskId":"5ed8096d2a8c780015a4886a","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed8096d2a8c780015a4886d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_taskId":"5ed8098b2a8c780015a48871","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed8098b2a8c780015a48872","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_taskId":"5ed8098b2a8c780015a48873","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed8098b2a8c780015a48874","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_taskId":"5ed8098b2a8c780015a48873","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed8098b2a8c780015a48875","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_taskId":"5ed8098b2a8c780015a48873","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed8098b2a8c780015a48876","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed80c512a8c780015a4887b","_taskId":"5ed80c512a8c780015a4887c","id":"5ed80c512a8c780015a4887d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","_taskId":"5ed817902a8c780015a48882","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJzoKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbMF0uUHJpdmF0ZURuc05hbWUKICAgICAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed817902a8c780015a48883","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","_taskId":"5ed817902a8c780015a48884","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed817902a8c780015a48885","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","_taskId":"5ed817902a8c780015a48884","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed817902a8c780015a48886","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","_taskId":"5ed817902a8c780015a48884","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed817902a8c780015a48887","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_taskId":"5ed817b32a8c780015a4888b","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWzBdLlByaXZhdGVEbnNOYW1lCiAgICAgICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fXJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoYWdlbnRRdWVyeVsnZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed817b32a8c780015a4888c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_taskId":"5ed817b32a8c780015a4888d","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed817b32a8c780015a4888e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_taskId":"5ed817b32a8c780015a4888d","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed817b32a8c780015a4888f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_taskId":"5ed817b32a8c780015a4888d","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed817b32a8c780015a48890","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","_taskId":"5ed817df2a8c780015a48896","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWzBdLlByaXZhdGVEbnNOYW1lCiAgICAgICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fXJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed817df2a8c780015a48897","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","_taskId":"5ed817df2a8c780015a48898","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed817df2a8c780015a48899","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","_taskId":"5ed817df2a8c780015a48898","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed817df2a8c780015a4889a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","_taskId":"5ed817df2a8c780015a48898","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed817df2a8c780015a4889b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","_taskId":"5ed819372a8c780015a488a2","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWzBdLlByaXZhdGVEbnNOYW1lCiAgICAgICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fXJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed819372a8c780015a488a3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","_taskId":"5ed819372a8c780015a488a4","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed819372a8c780015a488a5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","_taskId":"5ed819372a8c780015a488a4","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed819372a8c780015a488a6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","_taskId":"5ed819372a8c780015a488a4","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed819372a8c780015a488a7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_taskId":"5ed8197a2a8c780015a488ab","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlCiAgICAgICAgICAgICAgICBpZiBpbnN0YW5jZSBhbmQgbGVuKGluc3RhbmNlKSA+IDAgYW5kIGhhc2F0dHIoaW5zdGFuY2VbMF0sICdQcml2YXRlRG5zTmFtZScpOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVswXS5Qcml2YXRlRG5zTmFtZQogICAgICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoYWdlbnRRdWVyeVsnZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed8197a2a8c780015a488ac","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_taskId":"5ed8197a2a8c780015a488ad","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed8197a2a8c780015a488ae","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_taskId":"5ed8197a2a8c780015a488ad","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed8197a2a8c780015a488af","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_taskId":"5ed8197a2a8c780015a488ad","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed8197a2a8c780015a488b0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_taskId":"5ed819ae2a8c780015a488b6","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlCiAgICAgICAgICAgICAgICBpZiBpbnN0YW5jZSBhbmQgbGVuKGluc3RhbmNlKSA+IDAgYW5kIGhhc2F0dHIoaW5zdGFuY2VbMF0sICdQcml2YXRlRG5zTmFtZScpOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVswXS5Qcml2YXRlRG5zTmFtZQogICAgICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoYWdlbnRRdWVyeVsnZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed819ae2a8c780015a488b7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_taskId":"5ed819ae2a8c780015a488b8","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed819ae2a8c780015a488b9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_taskId":"5ed819ae2a8c780015a488b8","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed819ae2a8c780015a488ba","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_taskId":"5ed819ae2a8c780015a488b8","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed819ae2a8c780015a488bb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","_taskId":"5ed81acd2a8c780015a488c2","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlCiAgICAgICAgICAgICAgICBpZiBpbnN0YW5jZSBhbmQgbGVuKGluc3RhbmNlKSA+IDAgYW5kIGhhc2F0dHIoaW5zdGFuY2VbMF0sICdQcml2YXRlRG5zTmFtZScpOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVswXS5Qcml2YXRlRG5zTmFtZQogICAgICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoYWdlbnRRdWVyeVsnZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed81acd2a8c780015a488c3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","_taskId":"5ed81acd2a8c780015a488c4","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed81acd2a8c780015a488c5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","_taskId":"5ed81acd2a8c780015a488c4","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed81acd2a8c780015a488c6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","_taskId":"5ed81acd2a8c780015a488c4","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed81acd2a8c780015a488c7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","_taskId":"5ed81d2e2a8c780015a488cc","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed81d2e2a8c780015a488cd","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","_taskId":"5ed81d2e2a8c780015a488ce","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed81d2e2a8c780015a488cf","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","_taskId":"5ed81d2e2a8c780015a488ce","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed81d2e2a8c780015a488d0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","_taskId":"5ed81d2e2a8c780015a488ce","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed81d2e2a8c780015a488d1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_taskId":"5ed81d992a8c780015a488d6","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcHJpbnQgYWdlbnRRdWVyeQogICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed81d9a2a8c780015a488d7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_taskId":"5ed81d9a2a8c780015a488d8","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed81d9a2a8c780015a488d9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_taskId":"5ed81d9a2a8c780015a488d8","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed81d9a2a8c780015a488da","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_taskId":"5ed81d9a2a8c780015a488d8","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed81d9a2a8c780015a488db","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","_taskId":"5ed81dbf2a8c780015a488e0","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcHJpbnQgYWdlbnRRdWVyeQogICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed81dbf2a8c780015a488e1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","_taskId":"5ed81dbf2a8c780015a488e2","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed81dbf2a8c780015a488e3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","_taskId":"5ed81dbf2a8c780015a488e2","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed81dbf2a8c780015a488e4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","_taskId":"5ed81dbf2a8c780015a488e2","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed81dbf2a8c780015a488e5","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","_taskId":"5ed81e502a8c780015a488eb","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIGFnZW50UXVlcnkKICAgICAgICAgICAgICAgIGlmIGFnZW50UXVlcnlbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIGFnZW50UXVlcnlbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAoYWdlbnRRdWVyeVsnZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed81e502a8c780015a488ec","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","_taskId":"5ed81e502a8c780015a488ed","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed81e502a8c780015a488ee","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","_taskId":"5ed81e502a8c780015a488ed","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed81e502a8c780015a488ef","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","_taskId":"5ed81e502a8c780015a488ed","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed81e502a8c780015a488f0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_taskId":"5ed81f5d2a8c780015a488f6","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed81f5d2a8c780015a488f7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_taskId":"5ed81f5d2a8c780015a488f8","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed81f5e2a8c780015a488f9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_taskId":"5ed81f5d2a8c780015a488f8","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed81f5e2a8c780015a488fa","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_taskId":"5ed81f5d2a8c780015a488f8","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed81f5e2a8c780015a488fb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_taskId":"5ed820862a8c780015a48901","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTIKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIHJlcwogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed820862a8c780015a48902","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_taskId":"5ed820862a8c780015a48903","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed820862a8c780015a48904","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_taskId":"5ed820862a8c780015a48903","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed820862a8c780015a48905","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_taskId":"5ed820862a8c780015a48903","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed820862a8c780015a48906","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","_taskId":"5ed8218b2a8c780015a4890c","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIHJlcwogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChyZXNbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpYAogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed8218b2a8c780015a4890d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","_taskId":"5ed8218b2a8c780015a4890e","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed8218b2a8c780015a4890f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","_taskId":"5ed8218b2a8c780015a4890e","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed8218b2a8c780015a48910","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","_taskId":"5ed8218b2a8c780015a4890e","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed8218b2a8c780015a48911","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_taskId":"5ed821a92a8c780015a48915","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIHJlcwogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChyZXNbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed821a92a8c780015a48916","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_taskId":"5ed821a92a8c780015a48917","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed821a92a8c780015a48918","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_taskId":"5ed821a92a8c780015a48917","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSknKX06JHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKScpfUAke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfVVJMKScpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggQGtwZyhhZ2VudFZlcnNpb24pIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCR7bm9kZVJhbmdlfS0ke3BsYXRmb3JtfWA7CiAgICBpZiAoYXJjaCAhPSAnJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQ=="},"id":"5ed821a92a8c780015a48919","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_taskId":"5ed821a92a8c780015a48917","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed821a92a8c780015a4891a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","_taskId":"5ed827b32a8c780015a48923","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed827b32a8c780015a48924","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","_taskId":"5ed827b32a8c780015a48925","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed827b32a8c780015a48926","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","_taskId":"5ed827b32a8c780015a48925","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7Cn0pKCk7"},"id":"5ed827b32a8c780015a48927","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","_taskId":"5ed827b32a8c780015a48925","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed827b32a8c780015a48928","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","_taskId":"5ed827dc2a8c780015a4892c","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgJ0BrcGcoSUFNUm9sZSknLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed827dc2a8c780015a4892d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","_taskId":"5ed827dc2a8c780015a4892e","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed827dc2a8c780015a4892f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","_taskId":"5ed827dc2a8c780015a4892e","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7Cn0pKCk7"},"id":"5ed827dc2a8c780015a48930","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","_taskId":"5ed827dc2a8c780015a4892e","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed827dc2a8c780015a48931","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","_taskId":"5ed82b202a8c780015a48935","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgJ0BrcGcoSUFNUm9sZSknLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed82b202a8c780015a48936","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","_taskId":"5ed82b202a8c780015a48937","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed82b202a8c780015a48938","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","_taskId":"5ed82b202a8c780015a48937","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7Cn0pKCk7"},"id":"5ed82b202a8c780015a48939","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","_taskId":"5ed82b202a8c780015a48937","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed82b202a8c780015a4893a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","_taskId":"5ed82da52a8c780015a4893e","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgJ0BrcGcoSUFNUm9sZSknLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed82da52a8c780015a4893f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","_taskId":"5ed82da52a8c780015a48940","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed82da52a8c780015a48941","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","_taskId":"5ed82da52a8c780015a48940","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7Cn0pKCk7"},"id":"5ed82da52a8c780015a48942","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","_taskId":"5ed82da52a8c780015a48940","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed82da52a8c780015a48943","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","_taskId":"5ed82fdc2a8c780015a48947","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgJ0BrcGcoSUFNUm9sZSknLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed82fdc2a8c780015a48948","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","_taskId":"5ed82fdc2a8c780015a48949","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed82fdc2a8c780015a4894a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","_taskId":"5ed82fdc2a8c780015a48949","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7Cn0pKCk7"},"id":"5ed82fdc2a8c780015a4894b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","_taskId":"5ed82fdc2a8c780015a48949","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed82fdc2a8c780015a4894c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","_taskId":"5ed830042a8c780015a48950","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed830042a8c780015a48951","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","_taskId":"5ed830042a8c780015a48952","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed830042a8c780015a48953","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","_taskId":"5ed830042a8c780015a48952","name":"build","order":3,"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7Cn0pKCk7"},"id":"5ed830042a8c780015a48954","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","_taskId":"5ed830042a8c780015a48952","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed830042a8c780015a48955","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed832c12a8c780015a48959","_taskId":"5ed832c12a8c780015a4895a","id":"5ed832c12a8c780015a4895b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_taskId":"5ed837082a8c780015a4895f","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed837082a8c780015a48960","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_taskId":"5ed837082a8c780015a48961","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed837082a8c780015a48962","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_taskId":"5ed837082a8c780015a48961","name":"build","order":3,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBLaWtpVXRpbHNfMS5LaWtpVXRpbHMubWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKfSkoKTs="},"id":"5ed837082a8c780015a48963","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_taskId":"5ed837082a8c780015a48961","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed837082a8c780015a48964","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_taskId":"5ed838172a8c780015a4896d","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed838172a8c780015a4896e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_taskId":"5ed838172a8c780015a4896f","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed838172a8c780015a48970","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_taskId":"5ed838172a8c780015a4896f","name":"build","order":3,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChudW1iZXIgPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgYXJjaCA9ICcnOwoKICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKfSkoKTs="},"id":"5ed838172a8c780015a48971","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_taskId":"5ed838172a8c780015a4896f","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed838172a8c780015a48972","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_taskId":"5ed838bc2a8c780015a4897a","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed838bc2a8c780015a4897b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_taskId":"5ed838bc2a8c780015a4897c","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed838bc2a8c780015a4897d","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_taskId":"5ed838bc2a8c780015a4897c","name":"build","order":3,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vJHtjb25maWcuZ2V0KCdAa3BnKEtJS0lfR0lUX1VTRVJOQU1FKScpfToke2NvbmZpZy5nZXQoJ0BrcGcoS0lLSV9HSVRfUEFTU1dPUkQpJyl9QCR7Y29uZmlnLmdldCgnQGtwZyhLSUtJX0dJVF9VUkwpJyl9YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed838bc2a8c780015a4897e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_taskId":"5ed838bc2a8c780015a4897c","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed838bc2a8c780015a4897f","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_taskId":"5ed838fa2a8c780015a48987","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed838fa2a8c780015a48988","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_taskId":"5ed838fa2a8c780015a48989","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed838fa2a8c780015a4898a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_taskId":"5ed838fa2a8c780015a48989","name":"build","order":3,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSk6QGtwZyhLSUtJX0dJVF9QQVNTV09SRClAQGtwZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed838fa2a8c780015a4898b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_taskId":"5ed838fa2a8c780015a48989","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed838fa2a8c780015a4898c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_taskId":"5ed8394e2a8c780015a48994","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed8394e2a8c780015a48995","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_taskId":"5ed8394e2a8c780015a48996","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed8394e2a8c780015a48997","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_taskId":"5ed8394e2a8c780015a48996","name":"build","order":3,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSk6QGtwZyhLSUtJX0dJVF9QQVNTV09SRClAQGtwZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed8394e2a8c780015a48998","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_taskId":"5ed8394e2a8c780015a48996","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed8394e2a8c780015a48999","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a3","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed83a022a8c780015a489a4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a5","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed83a022a8c780015a489a6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a5","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSk6QGtwZyhLSUtJX0dJVF9QQVNTV09SRClAQGtwZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed83a022a8c780015a489a7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a5","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed83a022a8c780015a489a8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a5","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed83a022a8c780015a489a9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489ae","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed83a1e2a8c780015a489af","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489b0","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed83a1e2a8c780015a489b1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489b0","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSk6QGtwZyhLSUtJX0dJVF9QQVNTV09SRClAQGtwZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed83a1e2a8c780015a489b2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489b0","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed83a1e2a8c780015a489b3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489b0","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed83a1e2a8c780015a489b4","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7c2a8c780015a489bd","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed83a7c2a8c780015a489be","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7d2a8c780015a489bf","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed83a7d2a8c780015a489c0","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7d2a8c780015a489bf","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSk6QGtwZyhLSUtJX0dJVF9QQVNTV09SRClAQGtwZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgUnVuQ29tbWFuZChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCRub2RlMTAtQGtwZyhwbGF0Zm9ybSlgOwogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCAhPSAnbnVsbCcpCiAgICAgICAgdGFyZ2V0ICs9IGAtJHthcmNofWA7CgogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIG91dEZpbGVOYW1lICs9ICcuZXhlJzsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICAgICAgYXJjaCA9ICcnOwoKICAgICAgICBsZXQgczNQYXRoID0gYHMzOi8vYWdlbnQtYmluYXJpZXMvYWdlbnQvQGtwZyhlbnZpcm9ubWVudCkvQGtwZyhvcmdJZCkvQGtwZyhwbGF0Zm9ybSkke2FyY2h9L0BrcGcoYWdlbnRWZXJzaW9uKS9raWtpLWFnZW50YDsKICAgICAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PJwogICAgICAgIGNvbnN0IGNtZCA9IGBhd3MgczMgY3AgJHtvdXRGaWxlUGF0aH0gJHtzM1BhdGh9YAogICAgICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBvY2N1cnJlZCBidWlsZGluZyBzYWFzIGdsdWUgYWdlbnQ6ICR7ZXJyfWApOwogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7"},"id":"5ed83a7d2a8c780015a489c1","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7d2a8c780015a489bf","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed83a7d2a8c780015a489c2","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7d2a8c780015a489bf","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed83a7d2a8c780015a489c3","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489c8","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed83a922a8c780015a489c9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489ca","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed83a922a8c780015a489cb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489ca","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnQGtwZyhvcmdJZCknXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnQGtwZyhhZ2VudFZlcnNpb24pJwogICAgfSwgJ0BrcGcoc2VjcmV0KScpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gQGtwZyhhcGlQb3J0KSkKICAgIGFwaVBvcnQgPSBAa3BnKGFwaVBvcnQpOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiQGtwZyhhcGlVcmwpIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAiQGtwZyhhZ2VudExvZ3NBUElWZXJzaW9uKSIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICJAa3BnKG9yZ0lkKSIsCiAgICAgICAgImVudiI6ICJAa3BnKGVudmlyb25tZW50KSIsCiAgICAgICAgImxvZ0Rlc3QiOiAiQGtwZyhsb2dEZXN0KSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vQGtwZyhLSUtJX0dJVF9VU0VSTkFNRSk6QGtwZyhLSUtJX0dJVF9QQVNTV09SRClAQGtwZyhLSUtJX0dJVF9VUkwpYDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBAa3BnKGFnZW50VmVyc2lvbikgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgUnVuQ29tbWFuZChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgdGFyZ2V0ID0gYCRub2RlMTAtQGtwZyhwbGF0Zm9ybSlgOwogICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICBpZiAoYXJjaCAhPSAnbnVsbCcpCiAgICAgICAgdGFyZ2V0ICs9IGAtJHthcmNofWA7CgogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIG91dEZpbGVOYW1lICs9ICcuZXhlJzsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICAgICAgYXJjaCA9ICcnOwoKICAgICAgICBsZXQgczNQYXRoID0gYHMzOi8vYWdlbnQtYmluYXJpZXMvYWdlbnQvQGtwZyhlbnZpcm9ubWVudCkvQGtwZyhvcmdJZCkvQGtwZyhwbGF0Zm9ybSkke2FyY2h9L0BrcGcoYWdlbnRWZXJzaW9uKS9raWtpLWFnZW50YDsKICAgICAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PJwogICAgICAgIGNvbnN0IGNtZCA9IGBhd3MgczMgY3AgJHtvdXRGaWxlUGF0aH0gJHtzM1BhdGh9YAogICAgICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBvY2N1cnJlZCBidWlsZGluZyBzYWFzIGdsdWUgYWdlbnQ6ICR7ZXJyfWApOwogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7"},"id":"5ed83a922a8c780015a489cc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489ca","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw=="},"id":"5ed83a922a8c780015a489cd","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489ca","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed83a922a8c780015a489ce","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d7","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed83b102a8c780015a489d8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d9","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed83b102a8c780015a489da","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d9","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1Aa3BnKHBsYXRmb3JtKWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed83b102a8c780015a489db","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d9","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed83b102a8c780015a489dc","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d9","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed83b102a8c780015a489dd","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e6","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed83b832a8c780015a489e7","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e8","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed83b832a8c780015a489e9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e8","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLUBrcGcocGxhdGZvcm0pYDsKICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw=="},"id":"5ed83b832a8c780015a489ea","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e8","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed83b832a8c780015a489eb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e8","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed83b832a8c780015a489ec","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f5","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJ0BrcGcoIm9yZ0lkIiknCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ0BrcGcoImVtYWlsIiknLAogICAgICAgICdwYXNzd29yZCc6ICdAa3BnKCJwYXNzd29yZCIpJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ0BrcGcoInRhZ3MiKScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgQGtwZyhNYXhDb3VudCkpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgQGtwZyhNYXhDb3VudCk6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IEBrcGcoTWF4Q291bnQpIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gQGtwZyhNYXhDb3VudCkgYWdlbnRzIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnQGtwZyhNYXhDb3VudCkgYWdlbnQocykgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo"},"id":"5ed842132a8c780015a489f6","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f7","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed842132a8c780015a489f8","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f7","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICBsZXQgdGFyZ2V0ID0gYG5vZGUxMC0ke3BsYXRmb3JtfWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed842132a8c780015a489f9","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f7","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed842132a8c780015a489fa","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f7","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed842132a8c780015a489fb","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a06","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJy4uLmFnZW50IHt9IGlzIGluaXRpYWxpemluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed843a22a8c780015a48a07","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a08","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed843a22a8c780015a48a09","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a08","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICBsZXQgdGFyZ2V0ID0gYG5vZGUxMC0ke3BsYXRmb3JtfWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw=="},"id":"5ed843a22a8c780015a48a0a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a08","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed843a22a8c780015a48a0b","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a08","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed843a22a8c780015a48a0c","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a15","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJy4uLmFnZW50IHt9IGlzIGluaXRpYWxpemluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed843ca2a8c780015a48a16","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a17","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed843ca2a8c780015a48a18","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a17","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICBsZXQgdGFyZ2V0ID0gYG5vZGUxMC0ke3BsYXRmb3JtfWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw=="},"id":"5ed843ca2a8c780015a48a19","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a17","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed843ca2a8c780015a48a1a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a17","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed843ca2a8c780015a48a1b","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8465c2a8c780015a48a23","_taskId":"5ed8465c2a8c780015a48a24","id":"5ed8465c2a8c780015a48a25","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3d","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJy4uLmFnZW50IHt9IGlzIGluaXRpYWxpemluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICdAa3BnKCJvcmdJZCIpJwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdAa3BnKCJlbWFpbCIpJywKICAgICAgICAncGFzc3dvcmQnOiAnQGtwZygicGFzc3dvcmQiKScKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCdAa3BnKCJ0YWdzIiknKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIEBrcGcoTWF4Q291bnQpKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IEBrcGcoTWF4Q291bnQpOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSBAa3BnKE1heENvdW50KSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIEBrcGcoTWF4Q291bnQpIGFnZW50cyB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCBAa3BnKE1pbkNvdW50KSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJ0BrcGcoTWF4Q291bnQpIGFnZW50KHMpIHdpdGggdGFncyAiQGtwZygidGFncyIpIiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA=="},"id":"5ed850492a8c780015a48a3e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3f","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed850492a8c780015a48a40","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3f","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICBsZXQgdGFyZ2V0ID0gYG5vZGUxMC0ke3BsYXRmb3JtfWA7CiAgICBsZXQgYXJjaCA9ICdAa3BnKGFyY2gpJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgYnVpbGQnKTsKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwogICAgY29uc29sZS5sb2coJ0J1aWxkIGNvbXBsZXRlJyk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIG91dEZpbGVOYW1lICs9ICcuZXhlJzsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICAgICAgYXJjaCA9ICcnOwoKICAgICAgICBsZXQgcGxhdGZvcm0gPSAnQGtwZyhwbGF0Zm9ybSknOwogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9Aa3BnKGVudmlyb25tZW50KS9Aa3BnKG9yZ0lkKS9Aa3BnKHBsYXRmb3JtKSR7YXJjaH0vQGtwZyhhZ2VudFZlcnNpb24pL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgY29uc29sZS5sb2coYFVwbG9hZGluZyBhZ2VudCB0byBzMzogJHtjbWR9YCk7CiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgICAgIGNvbnNvbGUubG9nKGBGaW5pc2hlZCB1cGxvYWRpbmcgZmlsZWApOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs="},"id":"5ed850492a8c780015a48a41","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3f","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed850492a8c780015a48a42","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3f","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed850492a8c780015a48a43","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed853672a8c780015a48a4c","_taskId":"5ed853672a8c780015a48a4d","id":"5ed853672a8c780015a48a4e","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a53","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRiZWF0VGltZSA9IHJlc1snZGF0YSddWzBdWydsYXN0SGVhcnRiZWF0VGltZSddCiAgICAgICAgICAgICAgICAgICAgaGJEdGUgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGxhc3RIZWFydGJlYXRUaW1lLzEwMDApCiAgICAgICAgICAgICAgICAgICAgZGlmZlNlY29uZHMgPSAoZGF0ZXRpbWUudXRjbm93KCkgLSBoYkR0ZSkudG90YWxfc2Vjb25kcygpOwogICAgICAgICAgICAgICAgICAgIGlmIGRpZmZTZWNvbmRzIDwgQGtwZyhhY3RpdmVBZ2VudFRpbWVvdXRNaW51dGVzKSAqIDYwICogMTAwMDoKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIHByaW50ICcuLi5hZ2VudCB7fSBpcyBpbml0aWFsaXppbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed8746f2a8c780015a48a54","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a55","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed8746f2a8c780015a48a56","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a55","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BrcGcocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw=="},"id":"5ed8746f2a8c780015a48a57","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a55","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed8746f2a8c780015a48a58","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a55","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed8746f2a8c780015a48a59","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8751d2a8c780015a48a5e","_taskId":"5ed8751e2a8c780015a48a5f","id":"5ed8751e2a8c780015a48a60","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a64","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ3JlcyAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0YmVhdFRpbWUgPSByZXNbJ2RhdGEnXVswXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXQogICAgICAgICAgICAgICAgICAgIHByaW50ICdsYXN0SGVhcnRiZWF0VGltZSAtPiAnLCBsYXN0SGVhcnRiZWF0VGltZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGhiRHRlID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChsYXN0SGVhcnRiZWF0VGltZS8xMDAwKQogICAgICAgICAgICAgICAgICAgIHByaW50ICdoYkR0ZSAtPiAnLCBoYkR0ZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICBwcmludCAnZGlmZlNlY29uZHMgLT4gJywgZGlmZlNlY29uZHMsICcsIGFjdGl2ZUFnZW50VGltZW91dE1pbnV0ZXMgLT4gQGtwZyhhY3RpdmVBZ2VudFRpbWVvdXRNaW51dGVzKSwgZGlmZlNlY29uZHMgLT4gJywgQGtwZyhhY3RpdmVBZ2VudFRpbWVvdXRNaW51dGVzKSAqIDYwICogMTAwMAogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGlmIGRpZmZTZWNvbmRzIDwgQGtwZyhhY3RpdmVBZ2VudFRpbWVvdXRNaW51dGVzKSAqIDYwICogMTAwMDoKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIHByaW50ICcuLi5hZ2VudCB7fSBpcyBpbml0aWFsaXppbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed875d02a8c780015a48a65","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a66","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed875d02a8c780015a48a67","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a66","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BrcGcocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw=="},"id":"5ed875d02a8c780015a48a68","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a66","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed875d02a8c780015a48a69","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a66","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed875d02a8c780015a48a6a","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a6f","name":"step1","order":1,"script":{"id":"5ed6dc9cae918d37ad199d8b","name":"LaunchEC2IfNotExists","scriptType":0,"code":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IEBrcGcoIk1pbkNvdW50Iik6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyJAa3BnKCJvcmdJZCIpIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2VtYWlsXScsICciQGtwZygiZW1haWwiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIkBrcGcoInBhc3N3b3JkIikiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIkBrcGcoIndvcmtpbmdkaXIiKSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twbGF0Zm9ybV0nLCAnImxpbnV4IicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2FyY2hdJywgJ05vbmUnKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1tjb25maWddJywgJ3sidGFncyI6IEBrcGcoInRhZ3MiKSwgInByb3BlcnR5T3ZlcnJpZGVzIjogeyJpbmFjdGl2ZUFnZW50VGFzayI6IHsibmFtZSI6ICJJbmFjdGl2ZUFnZW50VGFzayIsICJzY3JpcHQiOiB7ICJfaWQiOiAiQGtwZyhJbmFjdGl2ZUFnZW50U2NyaXB0SWQpIn0sICJhcmd1bWVudHMiOiAiIiwgInZhcmlhYmxlcyI6IHsiQVdTX0FDQ0VTU19LRVlfSUQiOiAiQGtwZyhBV1NfQUNDRVNTX0tFWV9JRCkiLCAiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIjogIkBrcGcoQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZKSJ9fSwgImluYWN0aXZlUGVyaW9kV2FpdFRpbWUiOiBAa3BnKGluYWN0aXZlUGVyaW9kV2FpdFRpbWUpfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKEBrcGcoSW1hZ2VJZCksIEBrcGcoS2V5TmFtZSksIEBrcGcoSW5zdGFuY2VUeXBlKSwgQGtwZyhTZWN1cml0eUdyb3VwSWRzKSwgQGtwZyhTdWJuZXRJZCksIEBrcGcoVnBjSWQpLCBtaW5Db3VudCwgbWF4Q291bnQsIGJhc2U2NF9ieXRlcywgQGtwZyhJQU1Sb2xlKSwgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMjQKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ3JlcyAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0YmVhdFRpbWUgPSByZXNbJ2RhdGEnXVswXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXQogICAgICAgICAgICAgICAgICAgIHByaW50ICdsYXN0SGVhcnRiZWF0VGltZSAtPiAnLCBsYXN0SGVhcnRiZWF0VGltZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGhiRHRlID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChsYXN0SGVhcnRiZWF0VGltZS8xMDAwKQogICAgICAgICAgICAgICAgICAgIHByaW50ICdoYkR0ZSAtPiAnLCBoYkR0ZQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICBwcmludCAnZGlmZlNlY29uZHMgLT4gJywgZGlmZlNlY29uZHMsICcsIGluYWN0aXZlUGVyaW9kV2FpdFRpbWUgLT4gQGtwZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKSwgZGlmZlNlY29uZHMgLT4gJywgQGtwZyhpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGlmIGRpZmZTZWNvbmRzIC0gIEBrcGcoaW5hY3RpdmVQZXJpb2RXYWl0VGltZSkgPCAtNToKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIHByaW50ICcuLi5hZ2VudCB7fSBpcyBpbml0aWFsaXppbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnQGtwZygib3JnSWQiKScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnQGtwZygiZW1haWwiKScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ0BrcGcoInBhc3N3b3JkIiknCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygnQGtwZygidGFncyIpJykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIEBrcGcoTWluQ291bnQpLCBAa3BnKE1heENvdW50KSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCBAa3BnKE1heENvdW50KToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gQGtwZyhNYXhDb3VudCkgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiBAa3BnKE1heENvdW50KSBhZ2VudHMgd2l0aCB0YWdzICJAa3BnKCJ0YWdzIikiIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgQGtwZyhNaW5Db3VudCksIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICdAa3BnKE1heENvdW50KSBhZ2VudChzKSB3aXRoIHRhZ3MgIkBrcGcoInRhZ3MiKSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g="},"id":"5ed87d0e2a8c780015a48a70","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a71","name":"install node","order":1,"script":{"id":"5e9ba2f22ac79d0015a80b12","name":"Node10Install","scriptType":2,"code":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk="},"id":"5ed87d0e2a8c780015a48a72","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a71","name":"build","order":4,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN"},"script":{"id":"5ed6ded2759b110015403b73","name":"BuildSaasglueAgent","scriptType":1,"code":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWydAa3BnKG9yZ0lkKSddLAogICAgICAgIGFnZW50U3R1YlZlcnNpb246ICdAa3BnKGFnZW50VmVyc2lvbiknCiAgICB9LCAnQGtwZyhzZWNyZXQpJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBAa3BnKGFwaVBvcnQpKQogICAgYXBpUG9ydCA9IEBrcGcoYXBpUG9ydCk7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJAa3BnKGFwaVVybCkiLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJAa3BnKGFnZW50TG9nc0FQSVZlcnNpb24pIiwKICAgICAgICAidG9rZW4iOiB0b2tlbiwKICAgICAgICAiX29yZ0lkIjogIkBrcGcob3JnSWQpIiwKICAgICAgICAiZW52IjogIkBrcGcoZW52aXJvbm1lbnQpIiwKICAgICAgICAibG9nRGVzdCI6ICJAa3BnKGxvZ0Rlc3QpIgogICAgfTsKCiAgICBjb25zdCBmc2UgPSByZXF1aXJlKCJmcy1leHRyYSIpOwogICAgY29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOwoKICAgIGxldCBvdXRfcGF0aCA9IGAvdG1wL2tpa2ktYWdlbnQtaW5zdGFsbC9gOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihvdXRfcGF0aCk7CiAgICBvdXRfcGF0aCArPSBtYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9Aa3BnKEtJS0lfR0lUX1VTRVJOQU1FKTpAa3BnKEtJS0lfR0lUX1BBU1NXT1JEKUBAa3BnKEtJS0lfR0lUX1VSTClgOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIEBrcGcoYWdlbnRWZXJzaW9uKSAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwbyAiJHtjbWRDbG9uZX1gKTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ0BrcGcocGxhdGZvcm0pJzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ0BrcGcoYXJjaCknOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnQGtwZyhhcmNoKSc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdAa3BnKHBsYXRmb3JtKSc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L0BrcGcoZW52aXJvbm1lbnQpL0BrcGcob3JnSWQpL0BrcGcocGxhdGZvcm0pJHthcmNofS9Aa3BnKGFnZW50VmVyc2lvbikva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw=="},"id":"5ed87d0e2a8c780015a48a73","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a71","name":"install build agent packages","order":2,"script":{"id":"5ed808be2a8c780015a48866","name":"install build agent packages","scriptType":2,"code":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz"},"id":"5ed87d0e2a8c780015a48a74","version":0},{"command":"","arguments":"","_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a71","name":"install git on ec2","order":3,"script":{"id":"5ed839e32a8c780015a489a1","name":"install git on ec2","scriptType":2,"code":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ="},"id":"5ed87d0e2a8c780015a48a75","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg=="},"order":0,"variables":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87dde2a8c780015a48a7e","_taskId":"5ed87dde2a8c780015a48a7f","id":"5ed87dde2a8c780015a48a80","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Josiah"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941293edbe80015c5e8aa","_taskId":"5ed941293edbe80015c5e8ab","id":"5ed941293edbe80015c5e8ac","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Josiah"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9413b3edbe80015c5e8af","_taskId":"5ed9413b3edbe80015c5e8b0","id":"5ed9413b3edbe80015c5e8b1","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Josiah"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941593edbe80015c5e8b6","_taskId":"5ed941593edbe80015c5e8b7","id":"5ed941593edbe80015c5e8b8","version":0},{"command":"","arguments":"","name":"Step1","script":{"scriptType":2,"code":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg=="},"order":0,"variables":{"MY_ENV_VAR":"Josiah"},"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941933edbe80015c5e8bd","_taskId":"5ed941933edbe80015c5e8be","id":"5ed941933edbe80015c5e8bf","version":0}],"stepDef":[{"_scriptId":"5ed6dc9cae918d37ad199d8b","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dc9bae918d37ad199d8a","name":"step1","order":1,"_orgId":"5e99cbcb2317950015edb655","id":"5ed6dc9cae918d37ad199d8c","version":0},{"_scriptId":"5e9ba2f22ac79d0015a80b12","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"install node","order":1,"_orgId":"5e99cbcb2317950015edb655","id":"5ed6dd9b759b110015403b71","version":0},{"_scriptId":"5ed6ded2759b110015403b73","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"build","order":4,"_orgId":"5e99cbcb2317950015edb655","id":"5ed6de2a759b110015403b72","version":0},{"_scriptId":"5ed808be2a8c780015a48866","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"install build agent packages","order":2,"_orgId":"5e99cbcb2317950015edb655","id":"5ed808a32a8c780015a48865","version":0},{"_scriptId":"5ed839e32a8c780015a489a1","command":"","arguments":"","variables":{},"_taskDefId":"5ed6dd4a759b110015403b70","name":"install git on ec2","order":3,"_orgId":"5e99cbcb2317950015edb655","id":"5ed839d62a8c780015a489a0","version":0}],"stepOutcome":[{"tail":["hello world!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c772a8c780015a48a28","_stepId":"5ed84c772a8c780015a48a2a","_taskOutcomeId":"5ed84c772a8c780015a48a2b","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAiaGVsbG8gd29ybGQhIg==","status":20,"dateStarted":"2020-06-04T01:20:55.572Z","dateCompleted":"2020-06-04T01:20:55.695Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello world!\n","id":"5ed84c772a8c780015a48a2c","version":0},{"tail":["hello world!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c892a8c780015a48a2d","_stepId":"5ed84c892a8c780015a48a2f","_taskOutcomeId":"5ed84c892a8c780015a48a30","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"ZWNobyAiaGVsbG8gd29ybGQhIg==","status":20,"dateStarted":"2020-06-04T01:21:13.298Z","dateCompleted":"2020-06-04T01:21:13.332Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello world!\n","id":"5ed84c892a8c780015a48a31","version":0},{"tail":["hello world!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c932a8c780015a48a32","_stepId":"5ed84c932a8c780015a48a34","_taskOutcomeId":"5ed84c942a8c780015a48a35","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAiaGVsbG8gd29ybGQhIg==","status":20,"dateStarted":"2020-06-04T01:21:24.034Z","dateCompleted":"2020-06-04T01:21:24.139Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello world!\n","id":"5ed84c942a8c780015a48a36","version":0},{"tail":["hello world!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c9b2a8c780015a48a37","_stepId":"5ed84c9b2a8c780015a48a39","_taskOutcomeId":"5ed84c9b2a8c780015a48a3a","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"ZWNobyAiaGVsbG8gd29ybGQhIg==","status":20,"dateStarted":"2020-06-04T01:21:31.685Z","dateCompleted":"2020-06-04T01:21:31.708Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello world!\n","id":"5ed84c9b2a8c780015a48a3b","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed93f413edbe80015c5e8a5","_stepId":"5ed93f413edbe80015c5e8a7","_taskOutcomeId":"5ed93f413edbe80015c5e8a8","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"ZWNobyAiaGVsbG8gJDEhIg==","status":20,"dateStarted":"2020-06-04T18:36:49.887Z","dateCompleted":"2020-06-04T18:36:49.917Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed93f413edbe80015c5e8a9","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941293edbe80015c5e8aa","_stepId":"5ed941293edbe80015c5e8ac","_taskOutcomeId":"5ed941293edbe80015c5e8ad","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:44:57.587Z","dateCompleted":"2020-06-04T18:44:57.711Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed941293edbe80015c5e8ae","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9413b3edbe80015c5e8af","_stepId":"5ed9413b3edbe80015c5e8b1","_taskOutcomeId":"5ed9413b3edbe80015c5e8b2","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:45:15.599Z","dateCompleted":"2020-06-04T18:45:15.623Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed9413b3edbe80015c5e8b3","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9413b3edbe80015c5e8af","_stepId":"5ed9413b3edbe80015c5e8b1","_taskOutcomeId":"5ed9413b3edbe80015c5e8b4","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:45:16.236Z","dateCompleted":"2020-06-04T18:45:16.348Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed9413c3edbe80015c5e8b5","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941593edbe80015c5e8b6","_stepId":"5ed941593edbe80015c5e8b8","_taskOutcomeId":"5ed941593edbe80015c5e8b9","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:45:45.492Z","dateCompleted":"2020-06-04T18:45:45.523Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed941593edbe80015c5e8ba","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941593edbe80015c5e8b6","_stepId":"5ed941593edbe80015c5e8b8","_taskOutcomeId":"5ed941593edbe80015c5e8bb","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:45:45.585Z","dateCompleted":"2020-06-04T18:45:45.703Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed941593edbe80015c5e8bc","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941933edbe80015c5e8bd","_stepId":"5ed941933edbe80015c5e8bf","_taskOutcomeId":"5ed941933edbe80015c5e8c0","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:46:43.847Z","dateCompleted":"2020-06-04T18:46:43.874Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed941933edbe80015c5e8c1","version":0},{"tail":["hello Josiah!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941933edbe80015c5e8bd","_stepId":"5ed941933edbe80015c5e8bf","_taskOutcomeId":"5ed941933edbe80015c5e8c2","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAiaGVsbG8gJE1ZX0VOVl9WQVIhIg==","status":20,"dateStarted":"2020-06-04T18:46:43.928Z","dateCompleted":"2020-06-04T18:46:44.035Z","exitCode":0,"signal":null,"stderr":"","stdout":"hello Josiah!\n","id":"5ed941943edbe80015c5e8c3","version":0},{"tail":["goodbye world!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9426dbdbedb00158b2d41","_stepId":"5ed9426ebdbedb00158b2d43","_taskOutcomeId":"5ed9426ebdbedb00158b2d44","name":"Step1","source":0,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"cHJpbnQgJ2dvb2RieWUgd29ybGQhJwo=","status":20,"dateStarted":"2020-06-04T18:50:22.129Z","dateCompleted":"2020-06-04T18:50:22.240Z","exitCode":0,"signal":null,"stderr":"","stdout":"goodbye world!\n","id":"5ed9426ebdbedb00158b2d45","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","_stepId":"5ed7df4e63747e0015807a04","_taskOutcomeId":"5ed7df5163747e0015807a08","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDVkNDc1NzU5YjExMDAxNTQwM2E0OSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDkwMDAwfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDEubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAyKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDI6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDIgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAyIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcyIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T17:35:13.072Z","dateCompleted":"2020-06-03T17:35:13.499Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/NwpDRTwOJb/eKVC0qiqm5.py\", line 7, in <module>\n    from ec2_access import *\nImportError: No module named ec2_access\n","stdout":"","id":"5ed7df5163747e0015807a09","version":0},{"tail":["...instance i-0b4ad407f01a27c4b is initializing","...instance i-0b4ad407f01a27c4b is initializing","...instance i-0b4ad407f01a27c4b is initializing","...instance i-0b4ad407f01a27c4b is ok","Launched 1 ec2 t1.micro instance(s) [i-0b4ad407f01a27c4b]"],"lastUpdateId":30,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_stepId":"5ed7df7663747e0015807a0c","_taskOutcomeId":"5ed7df7863747e0015807a10","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDVkNDc1NzU5YjExMDAxNTQwM2E0OSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDkwMDAwfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDEubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAyKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDI6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDIgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAyIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcyIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T17:35:52.132Z","stdout":"Less than 2 agents with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine(s)\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed5d475759b110015403a49\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 90000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0b4ad407f01a27c4b\" status\n...waiting for \"i-0b4ad407f01a27c4b\" status\n...instance i-0b4ad407f01a27c4b is running\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is initializing\n...instance i-0b4ad407f01a27c4b is ok\nLaunched 1 ec2 t1.micro instance(s) [i-0b4ad407f01a27c4b]\n","dateCompleted":"2020-06-03T17:40:37.357Z","exitCode":0,"signal":null,"stderr":"","id":"5ed7df7863747e0015807a11","version":0},{"tail":["OSTYPE === linux-gnu","OS_ID === \"amzn\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_stepId":"5ed7df7663747e0015807a0e","_taskOutcomeId":"5ed7e09663747e0015807a13","name":"install node","source":1,"machineId":"ip-172-31-91-249","ipAddress":"172.31.91.249","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp","status":20,"dateStarted":"2020-06-03T17:40:38.618Z","dateCompleted":"2020-06-03T17:40:38.657Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\n","id":"5ed7e09663747e0015807a14","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_stepId":"5ed7df7663747e0015807a0f","_taskOutcomeId":"5ed7e09663747e0015807a13","name":"build","source":1,"machineId":"ip-172-31-91-249","ipAddress":"172.31.91.249","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IEtpa2lVdGlsc18xLktpa2lVdGlscy5tYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2NvbmZpZy5nZXQoJ3JpY2h3aWZ1bmRzJyl9OiR7Y29uZmlnLmdldCgnN2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMScpfUAke2NvbmZpZy5nZXQoJ2dpdGh1Yi5jb20vdGhlaXJvbmNvb2svS2lraS5naXQnKX1gOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIHYwLjAuMC4yMjMgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJHtub2RlUmFuZ2V9LSR7cGxhdGZvcm19YDsKICAgIGlmIChhcmNoICE9ICcnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9","status":22,"dateStarted":"2020-06-03T17:40:38.658Z","dateCompleted":"2020-06-03T17:40:38.694Z","exitCode":127,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"/bin/sh: node: command not found\n","stdout":"","id":"5ed7e09663747e0015807a15","version":0},{"tail":["OSTYPE === linux-gnu","OS_ID === \"amzn\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_stepId":"5ed7df7663747e0015807a0e","_taskOutcomeId":"5ed7e0d71299560015b652d4","name":"install node","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp","status":20,"dateStarted":"2020-06-03T17:41:43.891Z","dateCompleted":"2020-06-03T17:41:43.931Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\n","id":"5ed7e0d71299560015b652d5","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_stepId":"5ed7df7663747e0015807a0f","_taskOutcomeId":"5ed7e0d71299560015b652d4","name":"build","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IEtpa2lVdGlsc18xLktpa2lVdGlscy5tYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2NvbmZpZy5nZXQoJ3JpY2h3aWZ1bmRzJyl9OiR7Y29uZmlnLmdldCgnN2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMScpfUAke2NvbmZpZy5nZXQoJ2dpdGh1Yi5jb20vdGhlaXJvbmNvb2svS2lraS5naXQnKX1gOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIHYwLjAuMC4yMjMgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJHtub2RlUmFuZ2V9LSR7cGxhdGZvcm19YDsKICAgIGlmIChhcmNoICE9ICcnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9","status":22,"dateStarted":"2020-06-03T17:41:43.931Z","dateCompleted":"2020-06-03T17:41:44.028Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"internal/modules/cjs/loader.js:638\n    throw err;\n    ^\nError: Cannot find module 'jsonwebtoken'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n    at Module.require (internal/modules/cjs/loader.js:690:17)\n    at require (internal/modules/cjs/helpers.js:25:18)\n    at Object.<anonymous> (/home/ec2-user/demo/XPiNcIkLtf/1gFuaQkMSR.js:1:13)\n    at Module._compile (internal/modules/cjs/loader.js:776:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10)\n    at Module.load (internal/modules/cjs/loader.js:653:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n","stdout":"","id":"5ed7e0d71299560015b652d6","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_stepId":"5ed7e5351299560015b652e1","_taskOutcomeId":"5ed7e5361299560015b652e5","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDkwMDAwfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDEubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T18:00:22.398Z","dateCompleted":"2020-06-03T18:00:23.184Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed7e5361299560015b652e6","version":0},{"tail":["OSTYPE === linux-gnu","OS_ID === \"amzn\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_stepId":"5ed7e5351299560015b652e3","_taskOutcomeId":"5ed7e5381299560015b652e7","name":"install node","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp","status":20,"dateStarted":"2020-06-03T18:00:24.181Z","dateCompleted":"2020-06-03T18:00:24.211Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\n","id":"5ed7e5381299560015b652e8","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_stepId":"5ed7e5361299560015b652e4","_taskOutcomeId":"5ed7e5381299560015b652e7","name":"build","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IEtpa2lVdGlsc18xLktpa2lVdGlscy5tYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2NvbmZpZy5nZXQoJ3JpY2h3aWZ1bmRzJyl9OiR7Y29uZmlnLmdldCgnN2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMScpfUAke2NvbmZpZy5nZXQoJ2dpdGh1Yi5jb20vdGhlaXJvbmNvb2svS2lraS5naXQnKX1gOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIHYwLjAuMC4yMjMgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJHtub2RlUmFuZ2V9LSR7cGxhdGZvcm19YDsKICAgIGlmIChhcmNoICE9ICcnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9","status":22,"dateStarted":"2020-06-03T18:00:24.211Z","dateCompleted":"2020-06-03T18:00:24.301Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"internal/modules/cjs/loader.js:638\n    throw err;\n    ^\nError: Cannot find module 'jsonwebtoken'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n    at Module.require (internal/modules/cjs/loader.js:690:17)\n    at require (internal/modules/cjs/helpers.js:25:18)\n    at Object.<anonymous> (/home/ec2-user/demo/274EuCVhxC/e3UTktkmWf.js:1:13)\n    at Module._compile (internal/modules/cjs/loader.js:776:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10)\n    at Module.load (internal/modules/cjs/loader.js:653:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n","stdout":"","id":"5ed7e5381299560015b652e9","version":0},{"tail":["...instance i-0b5f3fa0469582f4e is initializing","...instance i-0b5f3fa0469582f4e is initializing","...instance i-0b5f3fa0469582f4e is initializing","...instance i-0b5f3fa0469582f4e is initializing","...instance i-0b5f3fa0469582f4e is initializing"],"lastUpdateId":22,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","_stepId":"5ed7e5bd1299560015b652ec","_taskOutcomeId":"5ed7e5bd1299560015b652f0","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDkwMDAwfX0nKQogICAgICAgIAogICAgICAgIHByaW50KGRhdGEpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDEubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T18:02:37.820Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 90000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0b5f3fa0469582f4e\" status\n...waiting for \"i-0b5f3fa0469582f4e\" status\n...instance i-0b5f3fa0469582f4e is running\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n...instance i-0b5f3fa0469582f4e is initializing\n","dateCompleted":"2020-06-03T18:06:01.541Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/6Zm32RxCpK/0TUDN34JOF.py\", line 114, in <module>\n  File \"/home/ec2-user/demo/6Zm32RxCpK/0TUDN34JOF.py\", line 41, in LaunchNewAgentBuilder\n  File \"/home/ec2-user/demo/6Zm32RxCpK/ec2_access.py\", line 62, in launch_ec2_instance\n    current_state = ec2_client.describe_instances(InstanceIds=[instance[0].id])['Reservations'][0]['Instances'][0]['State']['Name']\nTypeError: 'ec2.Instance' object does not support indexing\n","id":"5ed7e5bd1299560015b652f1","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e67c1299560015b652f3","_stepId":"5ed7e67c1299560015b652f5","_taskOutcomeId":"5ed7e67c1299560015b652f6","name":"Step1","source":1,"machineId":"ip-172-31-83-20","ipAddress":"172.31.83.20","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-03T18:05:48.641Z","dateCompleted":"2020-06-03T18:05:53.956Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0b5f3fa0469582f4e\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed7e67c1299560015b652f7","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","_stepId":"5ed7e7741299560015b652fc","_taskOutcomeId":"5ed7e7741299560015b65300","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T18:09:56.536Z","dateCompleted":"2020-06-03T18:09:57.262Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed7e7741299560015b65301","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","_stepId":"5ed7e7931299560015b65305","_taskOutcomeId":"5ed7e7931299560015b65309","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T18:10:27.822Z","dateCompleted":"2020-06-03T18:10:28.506Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed7e7931299560015b6530a","version":0},{"tail":["...instance i-0a2d4c02cca2ec9c4 is initializing","...instance i-0a2d4c02cca2ec9c4 is initializing","...instance i-0a2d4c02cca2ec9c4 is initializing","...instance i-0a2d4c02cca2ec9c4 is ok","Launched 1 ec2 t1.micro instance(s) [i-0a2d4c02cca2ec9c4]"],"lastUpdateId":22,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_stepId":"5ed7e7c71299560015b6530e","_taskOutcomeId":"5ed7e7c71299560015b65312","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T18:11:19.304Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0a2d4c02cca2ec9c4\" status\n...waiting for \"i-0a2d4c02cca2ec9c4\" status\n...instance i-0a2d4c02cca2ec9c4 is running\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is initializing\n...instance i-0a2d4c02cca2ec9c4 is ok\nLaunched 1 ec2 t1.micro instance(s) [i-0a2d4c02cca2ec9c4]\n","dateCompleted":"2020-06-03T18:14:43.052Z","exitCode":0,"signal":null,"stderr":"","id":"5ed7e7c71299560015b65313","version":0},{"tail":["OSTYPE === linux-gnu","OS_ID === \"amzn\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_stepId":"5ed7e7c71299560015b65310","_taskOutcomeId":"5ed7e8931299560015b65315","name":"install node","source":1,"machineId":"ip-172-31-94-102","ipAddress":"172.31.94.102","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFsgImRlYmlhbiIgPT0gIiRPU19JRCIgXSB8fCAgWyAiYW16biIgPT0gIiRPU19JRCIgXTsgdGhlbgogICAgZWNobyAiY2hlY2tpbmcgaWYgbm9kZWpzIGluc3RhbGxlZCIKICAgIFBLR19PSz0kKGRwa2ctcXVlcnkgLVcgLWY9JyR7U3RhdHVzfScgbm9kZWpzIDI+L2Rldi9udWxsIHwgZ3JlcCAtYyAib2sgaW5zdGFsbGVkIikKICAgIGlmIFsgIjAiID09ICIkUEtHX09LIiBdOyB0aGVuCiAgICAgIGVjaG8gIm5vZGVqcyBub3QgaW5zdGFsbGVkIC0gaW5zdGFsbGluZyIKICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2g7IH0gfHwgY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAuL25vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICBub2RlIC0tdmVyc2lvbgogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp","status":20,"dateStarted":"2020-06-03T18:14:43.869Z","dateCompleted":"2020-06-03T18:14:43.900Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\n","id":"5ed7e8931299560015b65316","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_stepId":"5ed7e7c71299560015b65311","_taskOutcomeId":"5ed7e8931299560015b65315","name":"build","source":1,"machineId":"ip-172-31-94-102","ipAddress":"172.31.94.102","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IEtpa2lVdGlsc18xLktpa2lVdGlscy5tYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2NvbmZpZy5nZXQoJ3JpY2h3aWZ1bmRzJyl9OiR7Y29uZmlnLmdldCgnN2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMScpfUAke2NvbmZpZy5nZXQoJ2dpdGh1Yi5jb20vdGhlaXJvbmNvb2svS2lraS5naXQnKX1gOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIHYwLjAuMC4yMjMgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJHtub2RlUmFuZ2V9LSR7cGxhdGZvcm19YDsKICAgIGlmIChhcmNoICE9ICcnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9","status":22,"dateStarted":"2020-06-03T18:14:43.901Z","dateCompleted":"2020-06-03T18:14:43.926Z","exitCode":127,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"/bin/sh: node: command not found\n","stdout":"","id":"5ed7e8931299560015b65317","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ea811299560015b65318","_stepId":"5ed7ea811299560015b6531a","_taskOutcomeId":"5ed7ea811299560015b6531b","name":"Step1","source":1,"machineId":"ip-172-31-94-102","ipAddress":"172.31.94.102","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-03T18:22:57.897Z","dateCompleted":"2020-06-03T18:23:02.718Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0a2d4c02cca2ec9c4\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed7ea811299560015b6531c","version":0},{"tail":["...instance i-09573b6c21704722b is initializing","...instance i-09573b6c21704722b is initializing","...instance i-09573b6c21704722b is initializing","...instance i-09573b6c21704722b is ok","Launched 1 ec2 t1.micro instance(s) [i-09573b6c21704722b]"],"lastUpdateId":20,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_stepId":"5ed7ece81299560015b6531f","_taskOutcomeId":"5ed7ece81299560015b65323","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T18:33:12.858Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-09573b6c21704722b\" status\n...waiting for \"i-09573b6c21704722b\" status\n...instance i-09573b6c21704722b is running\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is initializing\n...instance i-09573b6c21704722b is ok\nLaunched 1 ec2 t1.micro instance(s) [i-09573b6c21704722b]\n","dateCompleted":"2020-06-03T18:36:16.498Z","exitCode":0,"signal":null,"stderr":"","id":"5ed7ece81299560015b65324","version":0},{"tail":["nodejs not installed - installing","## Installing the NodeSource Node.js 10.x repo...","## Populating apt-get cache...","+ apt-get update","Error executing command, exiting"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_stepId":"5ed7ece81299560015b65321","_taskOutcomeId":"5ed7eda01299560015b65326","name":"install node","source":1,"machineId":"ip-172-31-94-212","ipAddress":"172.31.94.212","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGN1cmwgLXNMIGh0dHBzOi8vZGViLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggLW8gbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAoKCBFVUlEICkpICYmIHsgc3VkbyBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoOyB9IHx8IGNobW9kICt4IG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICgoIEVVSUQgKSkgJiYgeyBzdWRvIGFwdCBpbnN0YWxsIG5vZGVqczsgfSB8fCBhcHQgaW5zdGFsbCBub2RlanMKICAgICAgbm9kZSAtLXZlcnNpb24KICAgIGVsc2UKICAgICAgZWNobyAibm9kZWpzIGFscmVhZHkgaW5zdGFsbGVkIgogICAgZmkKICBmaQpmaQ==","status":22,"dateStarted":"2020-06-03T18:36:16.884Z","dateCompleted":"2020-06-03T18:36:17.135Z","exitCode":127,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"bash: apt-get: command not found\nsudo: apt: command not found\n/home/ec2-user/OMl7TOSb0M/iN2CR71VDV.sh: line 14: apt: command not found\n/home/ec2-user/OMl7TOSb0M/iN2CR71VDV.sh: line 15: node: command not found\n","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Populating apt-get cache...\n+ apt-get update\nError executing command, exiting\n","id":"5ed7eda01299560015b65327","version":0},{"tail":["OSTYPE === linux-gnu"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f2f41299560015b65328","_stepId":"5ed7f2f41299560015b6532a","_taskOutcomeId":"5ed7f30e1299560015b6532b","name":"Step1","source":0,"machineId":"ip-172-31-94-212","ipAddress":"172.31.94.212","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICBlY2hvICJjaGVja2luZyBpZiBub2RlanMgaW5zdGFsbGVkIgogICAgUEtHX09LPSQoZHBrZy1xdWVyeSAtVyAtZj0nJHtTdGF0dXN9JyBub2RlanMgMj4vZGV2L251bGwgfCBncmVwIC1jICJvayBpbnN0YWxsZWQiKQogICAgaWYgWyAiMCIgPT0gIiRQS0dfT0siIF07IHRoZW4KICAgICAgZWNobyAibm9kZWpzIG5vdCBpbnN0YWxsZWQgLSBpbnN0YWxsaW5nIgogICAgICBjdXJsIC1zTCBodHRwczovL2RlYi5ub2Rlc291cmNlLmNvbS9zZXR1cF8xMC54IC1vIG5vZGVzb3VyY2Vfc2V0dXAuc2gKICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgIC4vbm9kZXNvdXJjZV9zZXR1cC5zaAogICAgICAoKCBFVUlEICkpICYmIHsgc3VkbyBhcHQgaW5zdGFsbCBub2RlanM7IH0gfHwgYXB0IGluc3RhbGwgbm9kZWpzCiAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICBpZiBbWyAiJE9TX0lEIiA9PSAiXCJhbXpuXCIiIF1dOyB0aGVuCiAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICBzdWRvIHl1bSAteSBpbnN0YWxsIG5vZGVqcyBucG0gLS1lbmFibGVyZXBvPWVwZWwKICAgIGVsc2UKICAgICAgZWNobyAibm9kZWpzIGFscmVhZHkgaW5zdGFsbGVkIgogICAgZmkKICBmaQpmaQ==","status":22,"dateStarted":"2020-06-03T18:59:26.335Z","dateCompleted":"2020-06-03T18:59:26.377Z","exitCode":2,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"/home/ec2-user/sgTndQBPa9/j3aZvw1mlb.sh: line 24: syntax error: unexpected end of file\n","stdout":"OSTYPE === linux-gnu\n","id":"5ed7f30e1299560015b6532c","version":0},{"tail":["Total size: 105 M","Total download size: 20 M","Downloading packages:","Running transaction check","Running transaction test"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f46d1299560015b6532d","_stepId":"5ed7f46d1299560015b6532f","_taskOutcomeId":"5ed7f4791299560015b65330","name":"Step1","source":0,"machineId":"ip-172-31-94-212","ipAddress":"172.31.94.212","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzIG5wbSAtLWVuYWJsZXJlcG89ZXBlbAogICAgICBmaQogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp","status":22,"dateStarted":"2020-06-03T19:05:29.785Z","dateCompleted":"2020-06-03T19:05:34.732Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Transaction check error:\n  file /usr/lib/node_modules/semver/bin/semver conflicts between attempted installs of nodejs-semver-2.1.0-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/semver/package.json conflicts between attempted installs of nodejs-semver-2.1.0-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/semver/semver.js conflicts between attempted installs of nodejs-semver-2.1.0-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/mkdirp/index.js conflicts between attempted installs of nodejs-mkdirp-0.3.5-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/mkdirp/package.json conflicts between attempted installs of nodejs-mkdirp-0.3.5-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/graceful-fs/graceful-fs.js conflicts between attempted installs of nodejs-graceful-fs-2.0.0-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/graceful-fs/package.json conflicts between attempted installs of nodejs-graceful-fs-2.0.0-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/graceful-fs/polyfills.js conflicts between attempted installs of nodejs-graceful-fs-2.0.0-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/rimraf/package.json conflicts between attempted installs of nodejs-rimraf-2.2.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/rimraf/rimraf.js conflicts between attempted installs of nodejs-rimraf-2.2.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/osenv/osenv.js conflicts between attempted installs of nodejs-osenv-0.0.3-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/osenv/package.json conflicts between attempted installs of nodejs-osenv-0.0.3-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/async-map-ordered.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/async-map.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/bind-actor.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/chain.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/slide.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/package.json conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/ini/ini.js conflicts between attempted installs of nodejs-ini-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/ini/package.json conflicts between attempted installs of nodejs-ini-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/lru-cache/package.json conflicts between attempted installs of nodejs-lru-cache-2.3.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/extract.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/header.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/pack.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/parse.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/package.json conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/chownr/chownr.js conflicts between attempted installs of nodejs-chownr-0.0.1-9.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/chownr/package.json conflicts between attempted installs of nodejs-chownr-0.0.1-9.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/abbrev/package.json conflicts between attempted installs of nodejs-abbrev-1.0.4-6.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/nopt/bin/nopt.js conflicts between attempted installs of nodejs-nopt-2.1.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/nopt/lib/nopt.js conflicts between attempted installs of nodejs-nopt-2.1.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/nopt/package.json conflicts between attempted installs of nodejs-nopt-2.1.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/which/bin/which conflicts between attempted installs of nodejs-which-1.0.5-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/which/package.json conflicts between attempted installs of nodejs-which-1.0.5-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/which/which.js conflicts between attempted installs of nodejs-which-1.0.5-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/index.js conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/lib/retry.js conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/lib/retry_operation.js conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/package.json conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/once/once.js conflicts between attempted installs of nodejs-once-1.1.1-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/once/package.json conflicts between attempted installs of nodejs-once-1.1.1-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npmlog/log.js conflicts between attempted installs of nodejs-npmlog-0.0.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npmlog/package.json conflicts between attempted installs of nodejs-npmlog-0.0.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/sha/index.js conflicts between attempted installs of nodejs-sha-1.2.1-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/sha/package.json conflicts between attempted installs of nodejs-sha-1.2.1-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/cmd-shim/index.js conflicts between attempted installs of nodejs-cmd-shim-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/cmd-shim/package.json conflicts between attempted installs of nodejs-cmd-shim-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/archy/index.js conflicts between attempted installs of nodejs-archy-0.0.2-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/archy/package.json conflicts between attempted installs of nodejs-archy-0.0.2-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/uid-number/get-uid-gid.js conflicts between attempted installs of nodejs-uid-number-0.0.3-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/uid-number/package.json conflicts between attempted installs of nodejs-uid-number-0.0.3-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/uid-number/uid-number.js conflicts between attempted installs of nodejs-uid-number-0.0.3-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/minimatch/minimatch.js conflicts between attempted installs of nodejs-minimatch-0.2.12-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/minimatch/package.json conflicts between attempted installs of nodejs-minimatch-0.2.12-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/glob/glob.js conflicts between attempted installs of nodejs-glob-3.2.6-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/glob/package.json conflicts between attempted installs of nodejs-glob-3.2.6-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-package-json/package.json conflicts between attempted installs of nodejs-read-package-json-1.1.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-package-json/read-json.js conflicts between attempted installs of nodejs-read-package-json-1.1.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-installed/package.json conflicts between attempted installs of nodejs-read-installed-0.2.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-installed/read-installed.js conflicts between attempted installs of nodejs-read-installed-0.2.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/lockfile/lockfile.js conflicts between attempted installs of nodejs-lockfile-0.4.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/lockfile/package.json conflicts between attempted installs of nodejs-lockfile-0.4.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm-user-validate/npm-user-validate.js conflicts between attempted installs of nodejs-npm-user-validate-0.0.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm-user-validate/package.json conflicts between attempted installs of nodejs-npm-user-validate-0.0.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/editor/index.js conflicts between attempted installs of nodejs-editor-0.0.4-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/editor/package.json conflicts between attempted installs of nodejs-editor-0.0.4-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/opener/package.json conflicts between attempted installs of nodejs-opener-1.3.0-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/request/index.js conflicts between attempted installs of nodejs-request-2.25.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/request/package.json conflicts between attempted installs of nodejs-request-2.25.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read/lib/read.js conflicts between attempted installs of nodejs-read-1.0.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read/package.json conflicts between attempted installs of nodejs-read-1.0.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/init-package-json/default-input.js conflicts between attempted installs of nodejs-init-package-json-0.0.10-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/init-package-json/init-package-json.js conflicts between attempted installs of nodejs-init-package-json-0.0.10-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/init-package-json/package.json conflicts between attempted installs of nodejs-init-package-json-0.0.10-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/addon.gypi conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/bin/node-gyp.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/build.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/clean.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/configure.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/install.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/list.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/node-gyp.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/rebuild.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/remove.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/package.json conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/bin/node-gyp-bin/node-gyp conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/bin/npm conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/bin/npm-cli.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/adduser.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/bin.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/bugs.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/build.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/cache.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/completion.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/config.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/dedupe.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/deprecate.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/docs.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/edit.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/explore.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/get.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/help-search.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/help.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/init.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/install.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/link.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/ls.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/npm.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/outdated.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/owner.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/pack.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/prefix.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/prune.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/publish.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/rebuild.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/restart.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/root.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/run-script.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/search.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/set.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/shrinkwrap.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/star.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/stars.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/start.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/stop.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/substack.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/test.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/unbuild.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/uninstall.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/unpublish.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/update.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion.sh conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion/file-completion.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion/installed-deep.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion/installed-shallow.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/error-handler.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/gently-rm.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/lifecycle.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/link.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/version.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/view.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/visnup.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/whoami.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/xmas.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/abbrev conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/archy conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/chownr conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/cmd-shim conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/editor conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/glob conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/graceful-fs conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/ini conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/init-package-json conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/lockfile conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/lru-cache conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/minimatch conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/mkdirp conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/node-gyp conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/nopt conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/npm-user-validate conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/npmlog conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/once conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/opener conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/osenv conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/read conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/read-installed conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/read-package-json conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/request conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/retry conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/rimraf conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/semver conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/sha conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/slide conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/tar conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/uid-number conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/which conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/package.json conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\nError Summary\n-------------\n","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.q2cJTcUmz2' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.q2cJTcUmz2'\n## Cleaning up...\n+ rm -f '/tmp/tmp.q2cJTcUmz2'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\n1073 packages excluded due to repository priority protections\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n---> Package npm.noarch 0:1.3.6-5.el6 will be installed\n--> Processing Dependency: npm(npm-user-validate) = 0.0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(block-stream) = 0.0.7 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(editor) = 0.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(init-package-json) = 0.0.10 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npmlog) = 0.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(semver) < 2.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(tar) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npm-registry-client) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(graceful-fs) < 2.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(cmd-shim) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(uid-number) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ini) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(slide) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(minimatch) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(retry) < 0.7 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(nopt) < 2.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(opener) < 1.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(which) < 2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream-npm) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read) < 1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(glob) < 3.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(mkdirp) < 0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(child-process-close) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npmconf) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(chownr) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(rimraf) < 2.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lockfile) < 0.5 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(node-gyp) < 0.11 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(osenv) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-package-json) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(request) < 3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(sha) < 1.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(abbrev) < 1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(archy) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-installed) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(chmodr) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(once) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ansi) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lru-cache) < 2.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(request) > 2.16 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(semver) >= 2.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(tar) >= 0.1.18 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npm-registry-client) >= 0.2.27 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(graceful-fs) >= 2.0.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(cmd-shim) >= 1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ini) >= 1.1.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(slide) >= 1.1.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(minimatch) >= 0.2.12 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(retry) >= 0.6.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream) >= 0.1.23 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(nopt) >= 2.1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(opener) >= 1.3.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(which) >= 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream-npm) >= 0.1.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read) >= 1.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(glob) >= 3.2.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(mkdirp) >= 0.3.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(child-process-close) >= 0.1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npmconf) >= 0.1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(rimraf) >= 2.2.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lockfile) >= 0.4.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(node-gyp) >= 0.10.6 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-package-json) >= 1.1.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(sha) >= 1.2.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(abbrev) >= 1.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-installed) >= 0.2.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(chmodr) >= 0.1.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(once) >= 1.1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ansi) >= 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lru-cache) >= 2.3.0 for package: npm-1.3.6-5.el6.noarch\n--> Running transaction check\n---> Package node-gyp.noarch 0:0.10.6-2.el6 will be installed\n--> Processing Dependency: gyp for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: nodejs-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: v8-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: libuv-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: http-parser-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: gcc-c++ for package: node-gyp-0.10.6-2.el6.noarch\n---> Package nodejs-abbrev.noarch 0:1.0.4-6.el6 will be installed\n---> Package nodejs-ansi.noarch 0:0.2.1-1.el6 will be installed\n---> Package nodejs-archy.noarch 0:0.0.2-8.el6 will be installed\n---> Package nodejs-block-stream.noarch 0:0.0.7-1.el6 will be installed\n--> Processing Dependency: npm(inherits) < 2.1 for package: nodejs-block-stream-0.0.7-1.el6.noarch\n--> Processing Dependency: npm(inherits) >= 2.0.0 for package: nodejs-block-stream-0.0.7-1.el6.noarch\n---> Package nodejs-child-process-close.noarch 0:0.1.1-2.el6 will be installed\n---> Package nodejs-chmodr.noarch 0:0.1.0-4.el6 will be installed\n---> Package nodejs-chownr.noarch 0:0.0.1-9.el6 will be installed\n---> Package nodejs-cmd-shim.noarch 0:1.1.0-3.el6 will be installed\n---> Package nodejs-editor.noarch 0:0.0.4-2.el6 will be installed\n---> Package nodejs-fstream.noarch 0:0.1.24-1.el6 will be installed\n---> Package nodejs-fstream-npm.noarch 0:0.1.5-1.el6 will be installed\n--> Processing Dependency: npm(fstream-ignore) < 0.1 for package: nodejs-fstream-npm-0.1.5-1.el6.noarch\n--> Processing Dependency: npm(fstream-ignore) >= 0.0.5 for package: nodejs-fstream-npm-0.1.5-1.el6.noarch\n---> Package nodejs-glob.noarch 0:3.2.6-1.el6 will be installed\n---> Package nodejs-graceful-fs.noarch 0:2.0.0-2.el6 will be installed\n---> Package nodejs-ini.noarch 0:1.1.0-3.el6 will be installed\n---> Package nodejs-init-package-json.noarch 0:0.0.10-1.el6 will be installed\n--> Processing Dependency: npm(promzard) < 0.3 for package: nodejs-init-package-json-0.0.10-1.el6.noarch\n--> Processing Dependency: npm(promzard) >= 0.2.0 for package: nodejs-init-package-json-0.0.10-1.el6.noarch\n---> Package nodejs-lockfile.noarch 0:0.4.2-1.el6 will be installed\n---> Package nodejs-lru-cache.noarch 0:2.3.0-3.el6 will be installed\n---> Package nodejs-minimatch.noarch 0:0.2.12-2.el6 will be installed\n--> Processing Dependency: npm(sigmund) < 1.1 for package: nodejs-minimatch-0.2.12-2.el6.noarch\n--> Processing Dependency: npm(sigmund) >= 1.0.0 for package: nodejs-minimatch-0.2.12-2.el6.noarch\n---> Package nodejs-mkdirp.noarch 0:0.3.5-3.el6 will be installed\n---> Package nodejs-nopt.noarch 0:2.1.2-1.el6 will be installed\n---> Package nodejs-npm-registry-client.noarch 0:0.2.28-3.el6 will be installed\n---> Package nodejs-npm-user-validate.noarch 0:0.0.3-1.el6 will be installed\n---> Package nodejs-npmconf.noarch 0:0.1.2-1.el6 will be installed\n--> Processing Dependency: npm(config-chain) < 1.2 for package: nodejs-npmconf-0.1.2-1.el6.noarch\n--> Processing Dependency: npm(config-chain) >= 1.1.1 for package: nodejs-npmconf-0.1.2-1.el6.noarch\n---> Package nodejs-npmlog.noarch 0:0.0.4-1.el6 will be installed\n---> Package nodejs-once.noarch 0:1.1.1-5.el6 will be installed\n---> Package nodejs-opener.noarch 0:1.3.0-7.el6 will be installed\n---> Package nodejs-osenv.noarch 0:0.0.3-5.el6 will be installed\n---> Package nodejs-read.noarch 0:1.0.5-1.el6 will be installed\n--> Processing Dependency: npm(mute-stream) < 0.1 for package: nodejs-read-1.0.5-1.el6.noarch\n--> Processing Dependency: npm(mute-stream) >= 0.0.4 for package: nodejs-read-1.0.5-1.el6.noarch\n---> Package nodejs-read-installed.noarch 0:0.2.4-1.el6 will be installed\n---> Package nodejs-read-package-json.noarch 0:1.1.3-1.el6 will be installed\n--> Processing Dependency: npm(normalize-package-data) < 1 for package: nodejs-read-package-json-1.1.3-1.el6.noarch\n--> Processing Dependency: npm(normalize-package-data) >= 0.2 for package: nodejs-read-package-json-1.1.3-1.el6.noarch\n---> Package nodejs-request.noarch 0:2.25.0-3.el6 will be installed\n--> Processing Dependency: npm(qs) < 0.7 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(aws-sign) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(http-signature) < 0.11 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(cookie-jar) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(node-uuid) < 1.5 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(json-stringify-safe) < 6 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(tunnel-agent) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(form-data) < 1 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(oauth-sign) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(mime) < 1.3 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(hawk) < 2 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(forever-agent) < 0.6 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(qs) >= 0.6.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(aws-sign) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(http-signature) >= 0.10 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(cookie-jar) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(node-uuid) >= 1.4.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(json-stringify-safe) >= 5 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(tunnel-agent) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(form-data) >= 0.1 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(oauth-sign) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(mime) >= 1.2.9 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(hawk) >= 1.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(forever-agent) >= 0.5.0 for package: nodejs-request-2.25.0-3.el6.noarch\n---> Package nodejs-retry.noarch 0:0.6.0-5.el6 will be installed\n---> Package nodejs-rimraf.noarch 0:2.2.2-1.el6 will be installed\n---> Package nodejs-semver.noarch 0:2.1.0-1.el6 will be installed\n---> Package nodejs-sha.noarch 0:1.2.1-1.el6 will be installed\n---> Package nodejs-slide.noarch 0:1.1.5-1.el6 will be installed\n---> Package nodejs-tar.noarch 0:0.1.18-1.el6 will be installed\n---> Package nodejs-uid-number.noarch 0:0.0.3-7.el6 will be installed\n---> Package nodejs-which.noarch 0:1.0.5-8.el6 will be installed\n--> Running transaction check\n---> Package gcc-c++.noarch 0:4.8.5-1.22.amzn1 will be installed\n--> Processing Dependency: gcc = 4.8.5-1.22.amzn1 for package: gcc-c++-4.8.5-1.22.amzn1.noarch\n--> Processing Dependency: gcc48-c++ >= 4.8.5 for package: gcc-c++-4.8.5-1.22.amzn1.noarch\n--> Processing Dependency: libstdc++48 >= 4.8.5 for package: gcc-c++-4.8.5-1.22.amzn1.noarch\n---> Package gyp.noarch 0:0.1-0.6.1010svn.5.amzn1 will be installed\n---> Package http-parser-devel.x86_64 0:2.9.3-1.2.amzn1 will be installed\n--> Processing Dependency: http-parser(x86-64) = 2.9.3-1.2.amzn1 for package: http-parser-devel-2.9.3-1.2.amzn1.x86_64\n--> Processing Dependency: libhttp_parser_strict.so.2()(64bit) for package: http-parser-devel-2.9.3-1.2.amzn1.x86_64\n--> Processing Dependency: libhttp_parser.so.2()(64bit) for package: http-parser-devel-2.9.3-1.2.amzn1.x86_64\n---> Package libuv-devel.x86_64 1:0.10.34-1.el6 will be installed\n--> Processing Dependency: libuv(x86-64) = 1:0.10.34-1.el6 for package: 1:libuv-devel-0.10.34-1.el6.x86_64\n--> Processing Dependency: libuv.so.0.10()(64bit) for package: 1:libuv-devel-0.10.34-1.el6.x86_64\n---> Package nodejs-aws-sign.noarch 0:0.3.0-1.el6 will be installed\n---> Package nodejs-config-chain.noarch 0:1.1.7-1.el6 will be installed\n--> Processing Dependency: npm(proto-list) < 1.3 for package: nodejs-config-chain-1.1.7-1.el6.noarch\n--> Processing Dependency: npm(proto-list) >= 1.2.1 for package: nodejs-config-chain-1.1.7-1.el6.noarch\n---> Package nodejs-cookie-jar.noarch 1:0.3.0-1.el6 will be installed\n---> Package nodejs-devel.x86_64 2:10.21.0-1nodesource will be installed\n---> Package nodejs-forever-agent.noarch 0:0.5.0-1.el6 will be installed\n---> Package nodejs-form-data.noarch 0:0.1.1-1.el6 will be installed\n--> Processing Dependency: npm(async) < 0.3 for package: nodejs-form-data-0.1.1-1.el6.noarch\n--> Processing Dependency: npm(combined-stream) < 0.1 for package: nodejs-form-data-0.1.1-1.el6.noarch\n--> Processing Dependency: npm(async) >= 0.2.9 for package: nodejs-form-data-0.1.1-1.el6.noarch\n--> Processing Dependency: npm(combined-stream) >= 0.0.4 for package: nodejs-form-data-0.1.1-1.el6.noarch\n---> Package nodejs-fstream-ignore.noarch 0:0.0.7-1.el6 will be installed\n---> Package nodejs-hawk.noarch 0:1.0.0-1.el6 will be installed\n--> Processing Dependency: npm(sntp) < 0.3 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(boom) < 0.5 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(cryptiles) < 0.3 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(hoek) < 0.10 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(sntp) >= 0.2 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(boom) >= 0.4 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(cryptiles) >= 0.2 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(hoek) >= 0.9 for package: nodejs-hawk-1.0.0-1.el6.noarch\n---> Package nodejs-http-signature.noarch 0:0.10.0-3.el6 will be installed\n--> Processing Dependency: npm(assert-plus) < 0.2 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(ctype) < 0.6 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(asn1) < 0.2 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(assert-plus) >= 0.1.2 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(ctype) >= 0.5.3 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(asn1) >= 0.1.11 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n---> Package nodejs-inherits.noarch 0:2.0.0-4.el6 will be installed\n---> Package nodejs-json-stringify-safe.noarch 0:5.0.0-1.el6 will be installed\n---> Package nodejs-mime.noarch 0:1.2.11-1.el6 will be installed\n---> Package nodejs-mute-stream.noarch 0:0.0.4-1.el6 will be installed\n---> Package nodejs-node-uuid.noarch 0:1.4.1-1.el6 will be installed\n---> Package nodejs-normalize-package-data.noarch 0:0.2.1-1.el6 will be installed\n--> Processing Dependency: npm(github-url-from-git) < 1.2 for package: nodejs-normalize-package-data-0.2.1-1.el6.noarch\n--> Processing Dependency: npm(github-url-from-git) >= 1.1.1 for package: nodejs-normalize-package-data-0.2.1-1.el6.noarch\n---> Package nodejs-oauth-sign.noarch 0:0.3.0-1.el6 will be installed\n---> Package nodejs-promzard.noarch 0:0.2.0-6.el6 will be installed\n---> Package nodejs-qs.noarch 0:0.6.6-3.el6 will be installed\n---> Package nodejs-sigmund.noarch 0:1.0.0-5.el6 will be installed\n---> Package nodejs-tunnel-agent.noarch 0:0.3.0-1.el6 will be installed\n---> Package v8-devel.x86_64 1:3.14.5.10-25.el6 will be installed\n--> Processing Dependency: v8 = 1:3.14.5.10-25.el6 for package: 1:v8-devel-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libv8.so.3()(64bit) for package: 1:v8-devel-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libv8preparser.so.3()(64bit) for package: 1:v8-devel-3.14.5.10-25.el6.x86_64\n--> Running transaction check\n---> Package gcc.noarch 0:4.8.5-1.22.amzn1 will be installed\n--> Processing Dependency: gcc48 >= 4.8.5 for package: gcc-4.8.5-1.22.amzn1.noarch\n---> Package gcc48-c++.x86_64 0:4.8.5-28.142.amzn1 will be installed\n--> Processing Dependency: libmpfr.so.4()(64bit) for package: gcc48-c++-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: libmpc.so.3()(64bit) for package: gcc48-c++-4.8.5-28.142.amzn1.x86_64\n---> Package http-parser.x86_64 0:2.9.3-1.2.amzn1 will be installed\n---> Package libstdc++48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n---> Package libuv.x86_64 1:0.10.34-1.el6 will be installed\n---> Package nodejs-asn1.noarch 0:0.1.11-3.el6 will be installed\n---> Package nodejs-assert-plus.noarch 0:0.1.4-1.el6 will be installed\n---> Package nodejs-async.noarch 0:0.2.10-1.el6 will be installed\n---> Package nodejs-boom.noarch 0:0.4.2-2.el6 will be installed\n---> Package nodejs-combined-stream.noarch 0:0.0.4-3.el6 will be installed\n--> Processing Dependency: npm(delayed-stream) = 0.0.5 for package: nodejs-combined-stream-0.0.4-3.el6.noarch\n---> Package nodejs-cryptiles.noarch 0:0.2.2-1.el6 will be installed\n---> Package nodejs-ctype.noarch 0:0.5.3-3.el6 will be installed\n---> Package nodejs-github-url-from-git.noarch 0:1.1.1-2.el6 will be installed\n---> Package nodejs-hoek.noarch 0:0.9.1-1.el6 will be installed\n---> Package nodejs-proto-list.noarch 0:1.2.2-5.el6 will be installed\n---> Package nodejs-sntp.noarch 0:0.2.4-1.el6 will be installed\n---> Package v8.x86_64 1:3.14.5.10-25.el6 will be installed\n--> Processing Dependency: libicudata.so.42()(64bit) for package: 1:v8-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libicui18n.so.42()(64bit) for package: 1:v8-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libicuuc.so.42()(64bit) for package: 1:v8-3.14.5.10-25.el6.x86_64\n--> Running transaction check\n---> Package compat-libicu4.x86_64 0:4.2.1-9.14.amzn1 will be installed\n---> Package gcc48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n--> Processing Dependency: libgcc48(x86-64) = 4.8.5 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: cpp48(x86-64) = 4.8.5-28.142.amzn1 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: libgomp(x86-64) >= 4.8.5-28.142.amzn1 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: glibc-devel(x86-64) >= 2.2.90-12 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: libgomp.so.1()(64bit) for package: gcc48-4.8.5-28.142.amzn1.x86_64\n---> Package libmpc.x86_64 0:1.0.1-3.3.amzn1 will be installed\n---> Package mpfr.x86_64 0:3.1.1-4.14.amzn1 will be installed\n---> Package nodejs-delayed-stream.noarch 0:0.0.5-5.el6 will be installed\n--> Running transaction check\n---> Package cpp48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n---> Package glibc-devel.x86_64 0:2.17-292.180.amzn1 will be installed\n--> Processing Dependency: glibc-headers = 2.17-292.180.amzn1 for package: glibc-devel-2.17-292.180.amzn1.x86_64\n--> Processing Dependency: glibc(x86-64) = 2.17-292.180.amzn1 for package: glibc-devel-2.17-292.180.amzn1.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-292.180.amzn1.x86_64\n---> Package libgcc48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n---> Package libgomp.x86_64 0:6.4.1-1.45.amzn1 will be installed\n--> Running transaction check\n---> Package glibc.x86_64 0:2.17-292.178.amzn1 will be updated\n--> Processing Dependency: glibc(x86-64) = 2.17-292.178.amzn1 for package: glibc-common-2.17-292.178.amzn1.x86_64\n---> Package glibc.x86_64 0:2.17-292.180.amzn1 will be an update\n---> Package glibc-headers.x86_64 0:2.17-292.180.amzn1 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-292.180.amzn1.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-292.180.amzn1.x86_64\n--> Running transaction check\n---> Package glibc-common.x86_64 0:2.17-292.178.amzn1 will be updated\n---> Package glibc-common.x86_64 0:2.17-292.180.amzn1 will be an update\n---> Package kernel-headers.x86_64 0:4.14.181-108.257.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package                      Arch   Version                 Repository    Size\n================================================================================\nInstalling:\n nodejs                       x86_64 2:10.21.0-1nodesource   nodesource    20 M\n npm                          noarch 1.3.6-5.el6             epel         329 k\nInstalling for dependencies:\n compat-libicu4               x86_64 4.2.1-9.14.amzn1        amzn-main    7.2 M\n cpp48                        x86_64 4.8.5-28.142.amzn1      amzn-updates 6.7 M\n gcc                          noarch 4.8.5-1.22.amzn1        amzn-main    4.1 k\n gcc-c++                      noarch 4.8.5-1.22.amzn1        amzn-main    4.0 k\n gcc48                        x86_64 4.8.5-28.142.amzn1      amzn-updates  18 M\n gcc48-c++                    x86_64 4.8.5-28.142.amzn1      amzn-updates 9.8 M\n glibc-devel                  x86_64 2.17-292.180.amzn1      amzn-updates 1.2 M\n glibc-headers                x86_64 2.17-292.180.amzn1      amzn-updates 763 k\n gyp                          noarch 0.1-0.6.1010svn.5.amzn1 amzn-main    486 k\n http-parser                  x86_64 2.9.3-1.2.amzn1         amzn-updates  43 k\n http-parser-devel            x86_64 2.9.3-1.2.amzn1         amzn-updates  15 k\n kernel-headers               x86_64 4.14.181-108.257.amzn1  amzn-updates 1.2 M\n libgcc48                     x86_64 4.8.5-28.142.amzn1      amzn-updates 155 k\n libgomp                      x86_64 6.4.1-1.45.amzn1        amzn-main    204 k\n libmpc                       x86_64 1.0.1-3.3.amzn1         amzn-main     53 k\n libstdc++48                  x86_64 4.8.5-28.142.amzn1      amzn-updates 408 k\n libuv                        x86_64 1:0.10.34-1.el6         epel          57 k\n libuv-devel                  x86_64 1:0.10.34-1.el6         epel          41 k\n mpfr                         x86_64 3.1.1-4.14.amzn1        amzn-main    237 k\n node-gyp                     noarch 0.10.6-2.el6            epel          25 k\n nodejs-abbrev                noarch 1.0.4-6.el6             epel         7.1 k\n nodejs-ansi                  noarch 0.2.1-1.el6             epel          13 k\n nodejs-archy                 noarch 0.0.2-8.el6             epel         6.3 k\n nodejs-asn1                  noarch 0.1.11-3.el6            epel          10 k\n nodejs-assert-plus           noarch 0.1.4-1.el6             epel         7.0 k\n nodejs-async                 noarch 0.2.10-1.el6            epel          21 k\n nodejs-aws-sign              noarch 0.3.0-1.el6             epel         5.4 k\n nodejs-block-stream          noarch 0.0.7-1.el6             epel         8.4 k\n nodejs-boom                  noarch 0.4.2-2.el6             epel          36 k\n nodejs-child-process-close   noarch 0.1.1-2.el6             epel         5.7 k\n nodejs-chmodr                noarch 0.1.0-4.el6             epel         5.6 k\n nodejs-chownr                noarch 0.0.1-9.el6             epel         6.1 k\n nodejs-cmd-shim              noarch 1.1.0-3.el6             epel         7.3 k\n nodejs-combined-stream       noarch 0.0.4-3.el6             epel         7.6 k\n nodejs-config-chain          noarch 1.1.7-1.el6             epel         9.9 k\n nodejs-cookie-jar            noarch 1:0.3.0-1.el6           epel         5.8 k\n nodejs-cryptiles             noarch 0.2.2-1.el6             epel         6.5 k\n nodejs-ctype                 noarch 0.5.3-3.el6             epel          31 k\n nodejs-delayed-stream        noarch 0.0.5-5.el6             epel         7.5 k\n nodejs-devel                 x86_64 2:10.21.0-1nodesource   nodesource   578 k\n nodejs-editor                noarch 0.0.4-2.el6             epel         6.0 k\n nodejs-forever-agent         noarch 0.5.0-1.el6             epel         5.3 k\n nodejs-form-data             noarch 0.1.1-1.el6             epel          10 k\n nodejs-fstream               noarch 0.1.24-1.el6            epel          24 k\n nodejs-fstream-ignore        noarch 0.0.7-1.el6             epel         8.5 k\n nodejs-fstream-npm           noarch 0.1.5-1.el6             epel          11 k\n nodejs-github-url-from-git   noarch 1.1.1-2.el6             epel         5.7 k\n nodejs-glob                  noarch 3.2.6-1.el6             epel          16 k\n nodejs-graceful-fs           noarch 2.0.0-2.el6             epel          10 k\n nodejs-hawk                  noarch 1.0.0-1.el6             epel         104 k\n nodejs-hoek                  noarch 0.9.1-1.el6             epel          51 k\n nodejs-http-signature        noarch 0.10.0-3.el6            epel          16 k\n nodejs-inherits              noarch 2.0.0-4.el6             epel         8.3 k\n nodejs-ini                   noarch 1.1.0-3.el6             epel         7.9 k\n nodejs-init-package-json     noarch 0.0.10-1.el6            epel         9.1 k\n nodejs-json-stringify-safe   noarch 5.0.0-1.el6             epel         6.2 k\n nodejs-lockfile              noarch 0.4.2-1.el6             epel          11 k\n nodejs-lru-cache             noarch 2.3.0-3.el6             epel         9.2 k\n nodejs-mime                  noarch 1.2.11-1.el6            epel          22 k\n nodejs-minimatch             noarch 0.2.12-2.el6            epel          18 k\n nodejs-mkdirp                noarch 0.3.5-3.el6             epel         7.2 k\n nodejs-mute-stream           noarch 0.0.4-1.el6             epel         7.1 k\n nodejs-node-uuid             noarch 1.4.1-1.el6             epel         9.8 k\n nodejs-nopt                  noarch 2.1.2-1.el6             epel          15 k\n nodejs-normalize-package-data\n                              noarch 0.2.1-1.el6             epel          12 k\n nodejs-npm-registry-client   noarch 0.2.28-3.el6            epel          20 k\n nodejs-npm-user-validate     noarch 0.0.3-1.el6             epel         5.7 k\n nodejs-npmconf               noarch 0.1.2-1.el6             epel          16 k\n nodejs-npmlog                noarch 0.0.4-1.el6             epel         9.0 k\n nodejs-oauth-sign            noarch 0.3.0-1.el6             epel         4.6 k\n nodejs-once                  noarch 1.1.1-5.el6             epel         5.7 k\n nodejs-opener                noarch 1.3.0-7.el6             epel         6.5 k\n nodejs-osenv                 noarch 0.0.3-5.el6             epel         6.7 k\n nodejs-promzard              noarch 0.2.0-6.el6             epel          12 k\n nodejs-proto-list            noarch 1.2.2-5.el6             epel         6.4 k\n nodejs-qs                    noarch 0.6.6-3.el6             epel         8.4 k\n nodejs-read                  noarch 1.0.5-1.el6             epel         8.3 k\n nodejs-read-installed        noarch 0.2.4-1.el6             epel         9.1 k\n nodejs-read-package-json     noarch 1.1.3-1.el6             epel          11 k\n nodejs-request               noarch 2.25.0-3.el6            epel          26 k\n nodejs-retry                 noarch 0.6.0-5.el6             epel          10 k\n nodejs-rimraf                noarch 2.2.2-1.el6             epel         7.7 k\n nodejs-semver                noarch 2.1.0-1.el6             epel          16 k\n nodejs-sha                   noarch 1.2.1-1.el6             epel         7.2 k\n nodejs-sigmund               noarch 1.0.0-5.el6             epel         7.9 k\n nodejs-slide                 noarch 1.1.5-1.el6             epel         9.5 k\n nodejs-sntp                  noarch 0.2.4-1.el6             epel         9.7 k\n nodejs-tar                   noarch 0.1.18-1.el6            epel          22 k\n nodejs-tunnel-agent          noarch 0.3.0-1.el6             epel         6.0 k\n nodejs-uid-number            noarch 0.0.3-7.el6             epel         6.8 k\n nodejs-which                 noarch 1.0.5-8.el6             epel         7.6 k\n v8                           x86_64 1:3.14.5.10-25.el6      epel         3.0 M\n v8-devel                     x86_64 1:3.14.5.10-25.el6      epel          61 k\nUpdating for dependencies:\n glibc                        x86_64 2.17-292.180.amzn1      amzn-updates 5.8 M\n glibc-common                 x86_64 2.17-292.180.amzn1      amzn-updates  28 M\nTransaction Summary\n================================================================================\nInstall  2 Packages (+93 Dependent packages)\nUpgrade             (  2 Dependent packages)\nTotal size: 105 M\nTotal download size: 20 M\nDownloading packages:\nRunning transaction check\nRunning transaction test\n","id":"5ed7f4791299560015b65331","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","_stepId":"5ed7f5791299560015b65334","_taskOutcomeId":"5ed7f5791299560015b65338","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T19:09:45.918Z","dateCompleted":"2020-06-03T19:09:46.620Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed7f5791299560015b65339","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","_stepId":"5ed7f59a1299560015b6533d","_taskOutcomeId":"5ed7f59a1299560015b65341","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T19:10:18.850Z","dateCompleted":"2020-06-03T19:10:19.569Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed7f59a1299560015b65342","version":0},{"tail":["...instance i-000807f7582d836fd is initializing","...instance i-000807f7582d836fd is initializing","...instance i-000807f7582d836fd is initializing","...instance i-000807f7582d836fd is ok","Launched 1 ec2 t1.micro instance(s) [i-000807f7582d836fd]"],"lastUpdateId":26,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_stepId":"5ed7f6121299560015b65346","_taskOutcomeId":"5ed7f6131299560015b6534a","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T19:12:19.146Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-000807f7582d836fd\" status\n...waiting for \"i-000807f7582d836fd\" status\n...instance i-000807f7582d836fd is running\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is initializing\n...instance i-000807f7582d836fd is ok\nLaunched 1 ec2 t1.micro instance(s) [i-000807f7582d836fd]\n","dateCompleted":"2020-06-03T19:16:24.402Z","exitCode":0,"signal":null,"stderr":"","id":"5ed7f6131299560015b6534b","version":0},{"tail":["Total                                               17 MB/s | 112 MB  00:06     ","Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6","Retrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL","Running transaction check","Running transaction test"],"lastUpdateId":5,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_stepId":"5ed7f6121299560015b65348","_taskOutcomeId":"5ed7f7091299560015b6534d","name":"install node","source":1,"machineId":"ip-172-31-94-44","ipAddress":"172.31.94.44","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzIG5wbSAtLWVuYWJsZXJlcG89ZXBlbAogICAgICBmaQogICAgZWxzZQogICAgICBlY2hvICJub2RlanMgYWxyZWFkeSBpbnN0YWxsZWQiCiAgICBmaQogIGZpCmZp","status":22,"dateStarted":"2020-06-03T19:16:25.484Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.FyiKIjIVTw' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.FyiKIjIVTw'\n## Cleaning up...\n+ rm -f '/tmp/tmp.FyiKIjIVTw'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\n1073 packages excluded due to repository priority protections\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n---> Package npm.noarch 0:1.3.6-5.el6 will be installed\n--> Processing Dependency: npm(npm-user-validate) = 0.0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(block-stream) = 0.0.7 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(editor) = 0.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(init-package-json) = 0.0.10 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npmlog) = 0.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(semver) < 2.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(tar) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npm-registry-client) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(graceful-fs) < 2.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(cmd-shim) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(uid-number) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ini) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(slide) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(minimatch) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(retry) < 0.7 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(nopt) < 2.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(opener) < 1.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(which) < 2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream-npm) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read) < 1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(glob) < 3.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(mkdirp) < 0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(child-process-close) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npmconf) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(chownr) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(rimraf) < 2.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lockfile) < 0.5 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(node-gyp) < 0.11 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(osenv) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-package-json) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(request) < 3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(sha) < 1.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(abbrev) < 1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(archy) < 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-installed) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(chmodr) < 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(once) < 1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ansi) < 0.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lru-cache) < 2.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(request) > 2.16 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(semver) >= 2.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(tar) >= 0.1.18 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npm-registry-client) >= 0.2.27 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(graceful-fs) >= 2.0.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(cmd-shim) >= 1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ini) >= 1.1.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(slide) >= 1.1.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(minimatch) >= 0.2.12 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(retry) >= 0.6.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream) >= 0.1.23 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(nopt) >= 2.1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(opener) >= 1.3.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(which) >= 1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(fstream-npm) >= 0.1.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read) >= 1.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(glob) >= 3.2.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(mkdirp) >= 0.3.3 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(child-process-close) >= 0.1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(npmconf) >= 0.1.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(rimraf) >= 2.2.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lockfile) >= 0.4.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(node-gyp) >= 0.10.6 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-package-json) >= 1.1.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(sha) >= 1.2.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(abbrev) >= 1.0.4 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(read-installed) >= 0.2.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(chmodr) >= 0.1.0 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(once) >= 1.1.1 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(ansi) >= 0.2 for package: npm-1.3.6-5.el6.noarch\n--> Processing Dependency: npm(lru-cache) >= 2.3.0 for package: npm-1.3.6-5.el6.noarch\n--> Running transaction check\n---> Package node-gyp.noarch 0:0.10.6-2.el6 will be installed\n--> Processing Dependency: gyp for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: nodejs-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: v8-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: libuv-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: http-parser-devel for package: node-gyp-0.10.6-2.el6.noarch\n--> Processing Dependency: gcc-c++ for package: node-gyp-0.10.6-2.el6.noarch\n---> Package nodejs-abbrev.noarch 0:1.0.4-6.el6 will be installed\n---> Package nodejs-ansi.noarch 0:0.2.1-1.el6 will be installed\n---> Package nodejs-archy.noarch 0:0.0.2-8.el6 will be installed\n---> Package nodejs-block-stream.noarch 0:0.0.7-1.el6 will be installed\n--> Processing Dependency: npm(inherits) < 2.1 for package: nodejs-block-stream-0.0.7-1.el6.noarch\n--> Processing Dependency: npm(inherits) >= 2.0.0 for package: nodejs-block-stream-0.0.7-1.el6.noarch\n---> Package nodejs-child-process-close.noarch 0:0.1.1-2.el6 will be installed\n---> Package nodejs-chmodr.noarch 0:0.1.0-4.el6 will be installed\n---> Package nodejs-chownr.noarch 0:0.0.1-9.el6 will be installed\n---> Package nodejs-cmd-shim.noarch 0:1.1.0-3.el6 will be installed\n---> Package nodejs-editor.noarch 0:0.0.4-2.el6 will be installed\n---> Package nodejs-fstream.noarch 0:0.1.24-1.el6 will be installed\n---> Package nodejs-fstream-npm.noarch 0:0.1.5-1.el6 will be installed\n--> Processing Dependency: npm(fstream-ignore) < 0.1 for package: nodejs-fstream-npm-0.1.5-1.el6.noarch\n--> Processing Dependency: npm(fstream-ignore) >= 0.0.5 for package: nodejs-fstream-npm-0.1.5-1.el6.noarch\n---> Package nodejs-glob.noarch 0:3.2.6-1.el6 will be installed\n---> Package nodejs-graceful-fs.noarch 0:2.0.0-2.el6 will be installed\n---> Package nodejs-ini.noarch 0:1.1.0-3.el6 will be installed\n---> Package nodejs-init-package-json.noarch 0:0.0.10-1.el6 will be installed\n--> Processing Dependency: npm(promzard) < 0.3 for package: nodejs-init-package-json-0.0.10-1.el6.noarch\n--> Processing Dependency: npm(promzard) >= 0.2.0 for package: nodejs-init-package-json-0.0.10-1.el6.noarch\n---> Package nodejs-lockfile.noarch 0:0.4.2-1.el6 will be installed\n---> Package nodejs-lru-cache.noarch 0:2.3.0-3.el6 will be installed\n---> Package nodejs-minimatch.noarch 0:0.2.12-2.el6 will be installed\n--> Processing Dependency: npm(sigmund) < 1.1 for package: nodejs-minimatch-0.2.12-2.el6.noarch\n--> Processing Dependency: npm(sigmund) >= 1.0.0 for package: nodejs-minimatch-0.2.12-2.el6.noarch\n---> Package nodejs-mkdirp.noarch 0:0.3.5-3.el6 will be installed\n---> Package nodejs-nopt.noarch 0:2.1.2-1.el6 will be installed\n---> Package nodejs-npm-registry-client.noarch 0:0.2.28-3.el6 will be installed\n---> Package nodejs-npm-user-validate.noarch 0:0.0.3-1.el6 will be installed\n---> Package nodejs-npmconf.noarch 0:0.1.2-1.el6 will be installed\n--> Processing Dependency: npm(config-chain) < 1.2 for package: nodejs-npmconf-0.1.2-1.el6.noarch\n--> Processing Dependency: npm(config-chain) >= 1.1.1 for package: nodejs-npmconf-0.1.2-1.el6.noarch\n---> Package nodejs-npmlog.noarch 0:0.0.4-1.el6 will be installed\n---> Package nodejs-once.noarch 0:1.1.1-5.el6 will be installed\n---> Package nodejs-opener.noarch 0:1.3.0-7.el6 will be installed\n---> Package nodejs-osenv.noarch 0:0.0.3-5.el6 will be installed\n---> Package nodejs-read.noarch 0:1.0.5-1.el6 will be installed\n--> Processing Dependency: npm(mute-stream) < 0.1 for package: nodejs-read-1.0.5-1.el6.noarch\n--> Processing Dependency: npm(mute-stream) >= 0.0.4 for package: nodejs-read-1.0.5-1.el6.noarch\n---> Package nodejs-read-installed.noarch 0:0.2.4-1.el6 will be installed\n---> Package nodejs-read-package-json.noarch 0:1.1.3-1.el6 will be installed\n--> Processing Dependency: npm(normalize-package-data) < 1 for package: nodejs-read-package-json-1.1.3-1.el6.noarch\n--> Processing Dependency: npm(normalize-package-data) >= 0.2 for package: nodejs-read-package-json-1.1.3-1.el6.noarch\n---> Package nodejs-request.noarch 0:2.25.0-3.el6 will be installed\n--> Processing Dependency: npm(qs) < 0.7 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(aws-sign) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(http-signature) < 0.11 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(cookie-jar) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(node-uuid) < 1.5 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(json-stringify-safe) < 6 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(tunnel-agent) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(form-data) < 1 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(oauth-sign) < 0.4 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(mime) < 1.3 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(hawk) < 2 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(forever-agent) < 0.6 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(qs) >= 0.6.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(aws-sign) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(http-signature) >= 0.10 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(cookie-jar) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(node-uuid) >= 1.4.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(json-stringify-safe) >= 5 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(tunnel-agent) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(form-data) >= 0.1 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(oauth-sign) >= 0.3.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(mime) >= 1.2.9 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(hawk) >= 1.0 for package: nodejs-request-2.25.0-3.el6.noarch\n--> Processing Dependency: npm(forever-agent) >= 0.5.0 for package: nodejs-request-2.25.0-3.el6.noarch\n---> Package nodejs-retry.noarch 0:0.6.0-5.el6 will be installed\n---> Package nodejs-rimraf.noarch 0:2.2.2-1.el6 will be installed\n---> Package nodejs-semver.noarch 0:2.1.0-1.el6 will be installed\n---> Package nodejs-sha.noarch 0:1.2.1-1.el6 will be installed\n---> Package nodejs-slide.noarch 0:1.1.5-1.el6 will be installed\n---> Package nodejs-tar.noarch 0:0.1.18-1.el6 will be installed\n---> Package nodejs-uid-number.noarch 0:0.0.3-7.el6 will be installed\n---> Package nodejs-which.noarch 0:1.0.5-8.el6 will be installed\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package gcc-c++.noarch 0:4.8.5-1.22.amzn1 will be installed\n--> Processing Dependency: gcc = 4.8.5-1.22.amzn1 for package: gcc-c++-4.8.5-1.22.amzn1.noarch\n--> Processing Dependency: gcc48-c++ >= 4.8.5 for package: gcc-c++-4.8.5-1.22.amzn1.noarch\n--> Processing Dependency: libstdc++48 >= 4.8.5 for package: gcc-c++-4.8.5-1.22.amzn1.noarch\n---> Package gyp.noarch 0:0.1-0.6.1010svn.5.amzn1 will be installed\n---> Package http-parser-devel.x86_64 0:2.9.3-1.2.amzn1 will be installed\n--> Processing Dependency: http-parser(x86-64) = 2.9.3-1.2.amzn1 for package: http-parser-devel-2.9.3-1.2.amzn1.x86_64\n--> Processing Dependency: libhttp_parser_strict.so.2()(64bit) for package: http-parser-devel-2.9.3-1.2.amzn1.x86_64\n--> Processing Dependency: libhttp_parser.so.2()(64bit) for package: http-parser-devel-2.9.3-1.2.amzn1.x86_64\n---> Package libuv-devel.x86_64 1:0.10.34-1.el6 will be installed\n--> Processing Dependency: libuv(x86-64) = 1:0.10.34-1.el6 for package: 1:libuv-devel-0.10.34-1.el6.x86_64\n--> Processing Dependency: libuv.so.0.10()(64bit) for package: 1:libuv-devel-0.10.34-1.el6.x86_64\n---> Package nodejs-aws-sign.noarch 0:0.3.0-1.el6 will be installed\n---> Package nodejs-config-chain.noarch 0:1.1.7-1.el6 will be installed\n--> Processing Dependency: npm(proto-list) < 1.3 for package: nodejs-config-chain-1.1.7-1.el6.noarch\n--> Processing Dependency: npm(proto-list) >= 1.2.1 for package: nodejs-config-chain-1.1.7-1.el6.noarch\n---> Package nodejs-cookie-jar.noarch 1:0.3.0-1.el6 will be installed\n---> Package nodejs-devel.x86_64 2:10.21.0-1nodesource will be installed\n---> Package nodejs-forever-agent.noarch 0:0.5.0-1.el6 will be installed\n---> Package nodejs-form-data.noarch 0:0.1.1-1.el6 will be installed\n--> Processing Dependency: npm(async) < 0.3 for package: nodejs-form-data-0.1.1-1.el6.noarch\n--> Processing Dependency: npm(combined-stream) < 0.1 for package: nodejs-form-data-0.1.1-1.el6.noarch\n--> Processing Dependency: npm(async) >= 0.2.9 for package: nodejs-form-data-0.1.1-1.el6.noarch\n--> Processing Dependency: npm(combined-stream) >= 0.0.4 for package: nodejs-form-data-0.1.1-1.el6.noarch\n---> Package nodejs-fstream-ignore.noarch 0:0.0.7-1.el6 will be installed\n---> Package nodejs-hawk.noarch 0:1.0.0-1.el6 will be installed\n--> Processing Dependency: npm(sntp) < 0.3 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(boom) < 0.5 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(cryptiles) < 0.3 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(hoek) < 0.10 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(sntp) >= 0.2 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(boom) >= 0.4 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(cryptiles) >= 0.2 for package: nodejs-hawk-1.0.0-1.el6.noarch\n--> Processing Dependency: npm(hoek) >= 0.9 for package: nodejs-hawk-1.0.0-1.el6.noarch\n---> Package nodejs-http-signature.noarch 0:0.10.0-3.el6 will be installed\n--> Processing Dependency: npm(assert-plus) < 0.2 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(ctype) < 0.6 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(asn1) < 0.2 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(assert-plus) >= 0.1.2 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(ctype) >= 0.5.3 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n--> Processing Dependency: npm(asn1) >= 0.1.11 for package: nodejs-http-signature-0.10.0-3.el6.noarch\n---> Package nodejs-inherits.noarch 0:2.0.0-4.el6 will be installed\n---> Package nodejs-json-stringify-safe.noarch 0:5.0.0-1.el6 will be installed\n---> Package nodejs-mime.noarch 0:1.2.11-1.el6 will be installed\n---> Package nodejs-mute-stream.noarch 0:0.0.4-1.el6 will be installed\n---> Package nodejs-node-uuid.noarch 0:1.4.1-1.el6 will be installed\n---> Package nodejs-normalize-package-data.noarch 0:0.2.1-1.el6 will be installed\n--> Processing Dependency: npm(github-url-from-git) < 1.2 for package: nodejs-normalize-package-data-0.2.1-1.el6.noarch\n--> Processing Dependency: npm(github-url-from-git) >= 1.1.1 for package: nodejs-normalize-package-data-0.2.1-1.el6.noarch\n---> Package nodejs-oauth-sign.noarch 0:0.3.0-1.el6 will be installed\n---> Package nodejs-promzard.noarch 0:0.2.0-6.el6 will be installed\n---> Package nodejs-qs.noarch 0:0.6.6-3.el6 will be installed\n---> Package nodejs-sigmund.noarch 0:1.0.0-5.el6 will be installed\n---> Package nodejs-tunnel-agent.noarch 0:0.3.0-1.el6 will be installed\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n---> Package v8-devel.x86_64 1:3.14.5.10-25.el6 will be installed\n--> Processing Dependency: v8 = 1:3.14.5.10-25.el6 for package: 1:v8-devel-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libv8.so.3()(64bit) for package: 1:v8-devel-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libv8preparser.so.3()(64bit) for package: 1:v8-devel-3.14.5.10-25.el6.x86_64\n--> Running transaction check\n---> Package gcc.noarch 0:4.8.5-1.22.amzn1 will be installed\n--> Processing Dependency: gcc48 >= 4.8.5 for package: gcc-4.8.5-1.22.amzn1.noarch\n---> Package gcc48-c++.x86_64 0:4.8.5-28.142.amzn1 will be installed\n--> Processing Dependency: libmpfr.so.4()(64bit) for package: gcc48-c++-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: libmpc.so.3()(64bit) for package: gcc48-c++-4.8.5-28.142.amzn1.x86_64\n---> Package http-parser.x86_64 0:2.9.3-1.2.amzn1 will be installed\n---> Package libstdc++48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n---> Package libuv.x86_64 1:0.10.34-1.el6 will be installed\n---> Package nodejs-asn1.noarch 0:0.1.11-3.el6 will be installed\n---> Package nodejs-assert-plus.noarch 0:0.1.4-1.el6 will be installed\n---> Package nodejs-async.noarch 0:0.2.10-1.el6 will be installed\n---> Package nodejs-boom.noarch 0:0.4.2-2.el6 will be installed\n---> Package nodejs-combined-stream.noarch 0:0.0.4-3.el6 will be installed\n--> Processing Dependency: npm(delayed-stream) = 0.0.5 for package: nodejs-combined-stream-0.0.4-3.el6.noarch\n---> Package nodejs-cryptiles.noarch 0:0.2.2-1.el6 will be installed\n---> Package nodejs-ctype.noarch 0:0.5.3-3.el6 will be installed\n---> Package nodejs-github-url-from-git.noarch 0:1.1.1-2.el6 will be installed\n---> Package nodejs-hoek.noarch 0:0.9.1-1.el6 will be installed\n---> Package nodejs-proto-list.noarch 0:1.2.2-5.el6 will be installed\n---> Package nodejs-sntp.noarch 0:0.2.4-1.el6 will be installed\n---> Package v8.x86_64 1:3.14.5.10-25.el6 will be installed\n--> Processing Dependency: libicudata.so.42()(64bit) for package: 1:v8-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libicui18n.so.42()(64bit) for package: 1:v8-3.14.5.10-25.el6.x86_64\n--> Processing Dependency: libicuuc.so.42()(64bit) for package: 1:v8-3.14.5.10-25.el6.x86_64\n--> Running transaction check\n---> Package compat-libicu4.x86_64 0:4.2.1-9.14.amzn1 will be installed\n---> Package gcc48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n--> Processing Dependency: libgcc48(x86-64) = 4.8.5 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: cpp48(x86-64) = 4.8.5-28.142.amzn1 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: libgomp(x86-64) >= 4.8.5-28.142.amzn1 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: glibc-devel(x86-64) >= 2.2.90-12 for package: gcc48-4.8.5-28.142.amzn1.x86_64\n--> Processing Dependency: libgomp.so.1()(64bit) for package: gcc48-4.8.5-28.142.amzn1.x86_64\n---> Package libmpc.x86_64 0:1.0.1-3.3.amzn1 will be installed\n---> Package mpfr.x86_64 0:3.1.1-4.14.amzn1 will be installed\n---> Package nodejs-delayed-stream.noarch 0:0.0.5-5.el6 will be installed\n--> Running transaction check\n---> Package cpp48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n---> Package glibc-devel.x86_64 0:2.17-292.180.amzn1 will be installed\n--> Processing Dependency: glibc-headers = 2.17-292.180.amzn1 for package: glibc-devel-2.17-292.180.amzn1.x86_64\n--> Processing Dependency: glibc(x86-64) = 2.17-292.180.amzn1 for package: glibc-devel-2.17-292.180.amzn1.x86_64\n--> Processing Dependency: glibc-headers for package: glibc-devel-2.17-292.180.amzn1.x86_64\n---> Package libgcc48.x86_64 0:4.8.5-28.142.amzn1 will be installed\n---> Package libgomp.x86_64 0:6.4.1-1.45.amzn1 will be installed\n--> Running transaction check\n---> Package glibc.x86_64 0:2.17-292.178.amzn1 will be updated\n--> Processing Dependency: glibc(x86-64) = 2.17-292.178.amzn1 for package: glibc-common-2.17-292.178.amzn1.x86_64\n---> Package glibc.x86_64 0:2.17-292.180.amzn1 will be an update\n---> Package glibc-headers.x86_64 0:2.17-292.180.amzn1 will be installed\n--> Processing Dependency: kernel-headers >= 2.2.1 for package: glibc-headers-2.17-292.180.amzn1.x86_64\n--> Processing Dependency: kernel-headers for package: glibc-headers-2.17-292.180.amzn1.x86_64\n--> Running transaction check\n---> Package glibc-common.x86_64 0:2.17-292.178.amzn1 will be updated\n---> Package glibc-common.x86_64 0:2.17-292.180.amzn1 will be an update\n---> Package kernel-headers.x86_64 0:4.14.181-108.257.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package                      Arch   Version                 Repository    Size\n================================================================================\nInstalling:\n nodejs                       x86_64 2:10.21.0-1nodesource   nodesource    20 M\n npm                          noarch 1.3.6-5.el6             epel         329 k\nInstalling for dependencies:\n compat-libicu4               x86_64 4.2.1-9.14.amzn1        amzn-main    7.2 M\n cpp48                        x86_64 4.8.5-28.142.amzn1      amzn-updates 6.7 M\n gcc                          noarch 4.8.5-1.22.amzn1        amzn-main    4.1 k\n gcc-c++                      noarch 4.8.5-1.22.amzn1        amzn-main    4.0 k\n gcc48                        x86_64 4.8.5-28.142.amzn1      amzn-updates  18 M\n gcc48-c++                    x86_64 4.8.5-28.142.amzn1      amzn-updates 9.8 M\n glibc-devel                  x86_64 2.17-292.180.amzn1      amzn-updates 1.2 M\n glibc-headers                x86_64 2.17-292.180.amzn1      amzn-updates 763 k\n gyp                          noarch 0.1-0.6.1010svn.5.amzn1 amzn-main    486 k\n http-parser                  x86_64 2.9.3-1.2.amzn1         amzn-updates  43 k\n http-parser-devel            x86_64 2.9.3-1.2.amzn1         amzn-updates  15 k\n kernel-headers               x86_64 4.14.181-108.257.amzn1  amzn-updates 1.2 M\n libgcc48                     x86_64 4.8.5-28.142.amzn1      amzn-updates 155 k\n libgomp                      x86_64 6.4.1-1.45.amzn1        amzn-main    204 k\n libmpc                       x86_64 1.0.1-3.3.amzn1         amzn-main     53 k\n libstdc++48                  x86_64 4.8.5-28.142.amzn1      amzn-updates 408 k\n libuv                        x86_64 1:0.10.34-1.el6         epel          57 k\n libuv-devel                  x86_64 1:0.10.34-1.el6         epel          41 k\n mpfr                         x86_64 3.1.1-4.14.amzn1        amzn-main    237 k\n node-gyp                     noarch 0.10.6-2.el6            epel          25 k\n nodejs-abbrev                noarch 1.0.4-6.el6             epel         7.1 k\n nodejs-ansi                  noarch 0.2.1-1.el6             epel          13 k\n nodejs-archy                 noarch 0.0.2-8.el6             epel         6.3 k\n nodejs-asn1                  noarch 0.1.11-3.el6            epel          10 k\n nodejs-assert-plus           noarch 0.1.4-1.el6             epel         7.0 k\n nodejs-async                 noarch 0.2.10-1.el6            epel          21 k\n nodejs-aws-sign              noarch 0.3.0-1.el6             epel         5.4 k\n nodejs-block-stream          noarch 0.0.7-1.el6             epel         8.4 k\n nodejs-boom                  noarch 0.4.2-2.el6             epel          36 k\n nodejs-child-process-close   noarch 0.1.1-2.el6             epel         5.7 k\n nodejs-chmodr                noarch 0.1.0-4.el6             epel         5.6 k\n nodejs-chownr                noarch 0.0.1-9.el6             epel         6.1 k\n nodejs-cmd-shim              noarch 1.1.0-3.el6             epel         7.3 k\n nodejs-combined-stream       noarch 0.0.4-3.el6             epel         7.6 k\n nodejs-config-chain          noarch 1.1.7-1.el6             epel         9.9 k\n nodejs-cookie-jar            noarch 1:0.3.0-1.el6           epel         5.8 k\n nodejs-cryptiles             noarch 0.2.2-1.el6             epel         6.5 k\n nodejs-ctype                 noarch 0.5.3-3.el6             epel          31 k\n nodejs-delayed-stream        noarch 0.0.5-5.el6             epel         7.5 k\n nodejs-devel                 x86_64 2:10.21.0-1nodesource   nodesource   578 k\n nodejs-editor                noarch 0.0.4-2.el6             epel         6.0 k\n nodejs-forever-agent         noarch 0.5.0-1.el6             epel         5.3 k\n nodejs-form-data             noarch 0.1.1-1.el6             epel          10 k\n nodejs-fstream               noarch 0.1.24-1.el6            epel          24 k\n nodejs-fstream-ignore        noarch 0.0.7-1.el6             epel         8.5 k\n nodejs-fstream-npm           noarch 0.1.5-1.el6             epel          11 k\n nodejs-github-url-from-git   noarch 1.1.1-2.el6             epel         5.7 k\n nodejs-glob                  noarch 3.2.6-1.el6             epel          16 k\n nodejs-graceful-fs           noarch 2.0.0-2.el6             epel          10 k\n nodejs-hawk                  noarch 1.0.0-1.el6             epel         104 k\n nodejs-hoek                  noarch 0.9.1-1.el6             epel          51 k\n nodejs-http-signature        noarch 0.10.0-3.el6            epel          16 k\n nodejs-inherits              noarch 2.0.0-4.el6             epel         8.3 k\n nodejs-ini                   noarch 1.1.0-3.el6             epel         7.9 k\n nodejs-init-package-json     noarch 0.0.10-1.el6            epel         9.1 k\n nodejs-json-stringify-safe   noarch 5.0.0-1.el6             epel         6.2 k\n nodejs-lockfile              noarch 0.4.2-1.el6             epel          11 k\n nodejs-lru-cache             noarch 2.3.0-3.el6             epel         9.2 k\n nodejs-mime                  noarch 1.2.11-1.el6            epel          22 k\n nodejs-minimatch             noarch 0.2.12-2.el6            epel          18 k\n nodejs-mkdirp                noarch 0.3.5-3.el6             epel         7.2 k\n nodejs-mute-stream           noarch 0.0.4-1.el6             epel         7.1 k\n nodejs-node-uuid             noarch 1.4.1-1.el6             epel         9.8 k\n nodejs-nopt                  noarch 2.1.2-1.el6             epel          15 k\n nodejs-normalize-package-data\n                              noarch 0.2.1-1.el6             epel          12 k\n nodejs-npm-registry-client   noarch 0.2.28-3.el6            epel          20 k\n nodejs-npm-user-validate     noarch 0.0.3-1.el6             epel         5.7 k\n nodejs-npmconf               noarch 0.1.2-1.el6             epel          16 k\n nodejs-npmlog                noarch 0.0.4-1.el6             epel         9.0 k\n nodejs-oauth-sign            noarch 0.3.0-1.el6             epel         4.6 k\n nodejs-once                  noarch 1.1.1-5.el6             epel         5.7 k\n nodejs-opener                noarch 1.3.0-7.el6             epel         6.5 k\n nodejs-osenv                 noarch 0.0.3-5.el6             epel         6.7 k\n nodejs-promzard              noarch 0.2.0-6.el6             epel          12 k\n nodejs-proto-list            noarch 1.2.2-5.el6             epel         6.4 k\n nodejs-qs                    noarch 0.6.6-3.el6             epel         8.4 k\n nodejs-read                  noarch 1.0.5-1.el6             epel         8.3 k\n nodejs-read-installed        noarch 0.2.4-1.el6             epel         9.1 k\n nodejs-read-package-json     noarch 1.1.3-1.el6             epel          11 k\n nodejs-request               noarch 2.25.0-3.el6            epel          26 k\n nodejs-retry                 noarch 0.6.0-5.el6             epel          10 k\n nodejs-rimraf                noarch 2.2.2-1.el6             epel         7.7 k\n nodejs-semver                noarch 2.1.0-1.el6             epel          16 k\n nodejs-sha                   noarch 1.2.1-1.el6             epel         7.2 k\n nodejs-sigmund               noarch 1.0.0-5.el6             epel         7.9 k\n nodejs-slide                 noarch 1.1.5-1.el6             epel         9.5 k\n nodejs-sntp                  noarch 0.2.4-1.el6             epel         9.7 k\n nodejs-tar                   noarch 0.1.18-1.el6            epel          22 k\n nodejs-tunnel-agent          noarch 0.3.0-1.el6             epel         6.0 k\n nodejs-uid-number            noarch 0.0.3-7.el6             epel         6.8 k\n nodejs-which                 noarch 1.0.5-8.el6             epel         7.6 k\n python26                     x86_64 2.6.9-2.89.amzn1        amzn-main    5.8 M\n python26-libs                x86_64 2.6.9-2.89.amzn1        amzn-main    697 k\n v8                           x86_64 1:3.14.5.10-25.el6      epel         3.0 M\n v8-devel                     x86_64 1:3.14.5.10-25.el6      epel          61 k\nUpdating for dependencies:\n glibc                        x86_64 2.17-292.180.amzn1      amzn-updates 5.8 M\n glibc-common                 x86_64 2.17-292.180.amzn1      amzn-updates  28 M\nTransaction Summary\n================================================================================\nInstall  2 Packages (+95 Dependent packages)\nUpgrade             (  2 Dependent packages)\nTotal download size: 112 M\nDownloading packages:\nPublic key for libuv-0.10.34-1.el6.x86_64.rpm is not installed\nPublic key for nodejs-devel-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               17 MB/s | 112 MB  00:06     \nRetrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\n","dateCompleted":"2020-06-03T19:16:45.462Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"http://mirrors.nebo.edu/public/epel/6/x86_64/repodata/f773b1bda69b7b3736d8b2f0148cf9d46f892060a1f56890aa7db14b68b0cae3-updateinfo.xml.bz2: [Errno 12] Timeout on http://mirrors.nebo.edu/public/epel/6/x86_64/repodata/f773b1bda69b7b3736d8b2f0148cf9d46f892060a1f56890aa7db14b68b0cae3-updateinfo.xml.bz2: (28, 'Connection timed out after 5001 milliseconds')\nTrying other mirror.\nhttp://csc.mcs.sdsmt.edu/epel/6/x86_64/repodata/80ce4de6bb39b1774169652936269d04e78c69efa72278a09a1eb3a9a76a48dc-primary.sqlite.bz2: [Errno 12] Timeout on http://csc.mcs.sdsmt.edu/epel/6/x86_64/repodata/80ce4de6bb39b1774169652936269d04e78c69efa72278a09a1eb3a9a76a48dc-primary.sqlite.bz2: (28, 'Operation too slow. Less than 1000 bytes/sec transferred the last 5 seconds')\nTrying other mirror.\nwarning: /var/cache/yum/x86_64/latest/epel/packages/libuv-0.10.34-1.el6.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID 0608b895: NOKEY\nwarning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-devel-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x0608B895:\n Userid     : \"EPEL (6) <epel@fedoraproject.org>\"\n Fingerprint: 8c3b e96a f230 9184 da5c 0dae 3b49 df2a 0608 b895\n Package    : epel-release-6-8.9.amzn1.noarch (installed)\n From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nTransaction check error:\n  file /usr/lib/node_modules/semver/bin/semver conflicts between attempted installs of nodejs-semver-2.1.0-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/semver/package.json conflicts between attempted installs of nodejs-semver-2.1.0-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/semver/semver.js conflicts between attempted installs of nodejs-semver-2.1.0-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/mkdirp/index.js conflicts between attempted installs of nodejs-mkdirp-0.3.5-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/mkdirp/package.json conflicts between attempted installs of nodejs-mkdirp-0.3.5-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/graceful-fs/graceful-fs.js conflicts between attempted installs of nodejs-graceful-fs-2.0.0-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/graceful-fs/package.json conflicts between attempted installs of nodejs-graceful-fs-2.0.0-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/graceful-fs/polyfills.js conflicts between attempted installs of nodejs-graceful-fs-2.0.0-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/rimraf/package.json conflicts between attempted installs of nodejs-rimraf-2.2.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/rimraf/rimraf.js conflicts between attempted installs of nodejs-rimraf-2.2.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/osenv/osenv.js conflicts between attempted installs of nodejs-osenv-0.0.3-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/osenv/package.json conflicts between attempted installs of nodejs-osenv-0.0.3-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/async-map-ordered.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/async-map.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/bind-actor.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/chain.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/lib/slide.js conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/slide/package.json conflicts between attempted installs of nodejs-slide-1.1.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/ini/ini.js conflicts between attempted installs of nodejs-ini-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/ini/package.json conflicts between attempted installs of nodejs-ini-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/lru-cache/package.json conflicts between attempted installs of nodejs-lru-cache-2.3.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/extract.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/header.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/pack.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/lib/parse.js conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/tar/package.json conflicts between attempted installs of nodejs-tar-0.1.18-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/chownr/chownr.js conflicts between attempted installs of nodejs-chownr-0.0.1-9.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/chownr/package.json conflicts between attempted installs of nodejs-chownr-0.0.1-9.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/abbrev/package.json conflicts between attempted installs of nodejs-abbrev-1.0.4-6.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/nopt/bin/nopt.js conflicts between attempted installs of nodejs-nopt-2.1.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/nopt/lib/nopt.js conflicts between attempted installs of nodejs-nopt-2.1.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/nopt/package.json conflicts between attempted installs of nodejs-nopt-2.1.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/which/bin/which conflicts between attempted installs of nodejs-which-1.0.5-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/which/package.json conflicts between attempted installs of nodejs-which-1.0.5-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/which/which.js conflicts between attempted installs of nodejs-which-1.0.5-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/index.js conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/lib/retry.js conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/lib/retry_operation.js conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/retry/package.json conflicts between attempted installs of nodejs-retry-0.6.0-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/once/once.js conflicts between attempted installs of nodejs-once-1.1.1-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/once/package.json conflicts between attempted installs of nodejs-once-1.1.1-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npmlog/log.js conflicts between attempted installs of nodejs-npmlog-0.0.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npmlog/package.json conflicts between attempted installs of nodejs-npmlog-0.0.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/sha/index.js conflicts between attempted installs of nodejs-sha-1.2.1-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/sha/package.json conflicts between attempted installs of nodejs-sha-1.2.1-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/cmd-shim/index.js conflicts between attempted installs of nodejs-cmd-shim-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/cmd-shim/package.json conflicts between attempted installs of nodejs-cmd-shim-1.1.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/archy/index.js conflicts between attempted installs of nodejs-archy-0.0.2-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/archy/package.json conflicts between attempted installs of nodejs-archy-0.0.2-8.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/uid-number/get-uid-gid.js conflicts between attempted installs of nodejs-uid-number-0.0.3-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/uid-number/package.json conflicts between attempted installs of nodejs-uid-number-0.0.3-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/uid-number/uid-number.js conflicts between attempted installs of nodejs-uid-number-0.0.3-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/minimatch/minimatch.js conflicts between attempted installs of nodejs-minimatch-0.2.12-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/minimatch/package.json conflicts between attempted installs of nodejs-minimatch-0.2.12-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/glob/glob.js conflicts between attempted installs of nodejs-glob-3.2.6-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/glob/package.json conflicts between attempted installs of nodejs-glob-3.2.6-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-package-json/package.json conflicts between attempted installs of nodejs-read-package-json-1.1.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-package-json/read-json.js conflicts between attempted installs of nodejs-read-package-json-1.1.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-installed/package.json conflicts between attempted installs of nodejs-read-installed-0.2.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read-installed/read-installed.js conflicts between attempted installs of nodejs-read-installed-0.2.4-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/lockfile/lockfile.js conflicts between attempted installs of nodejs-lockfile-0.4.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/lockfile/package.json conflicts between attempted installs of nodejs-lockfile-0.4.2-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm-user-validate/npm-user-validate.js conflicts between attempted installs of nodejs-npm-user-validate-0.0.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm-user-validate/package.json conflicts between attempted installs of nodejs-npm-user-validate-0.0.3-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/editor/index.js conflicts between attempted installs of nodejs-editor-0.0.4-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/editor/package.json conflicts between attempted installs of nodejs-editor-0.0.4-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/opener/package.json conflicts between attempted installs of nodejs-opener-1.3.0-7.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/request/index.js conflicts between attempted installs of nodejs-request-2.25.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/request/package.json conflicts between attempted installs of nodejs-request-2.25.0-3.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read/lib/read.js conflicts between attempted installs of nodejs-read-1.0.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/read/package.json conflicts between attempted installs of nodejs-read-1.0.5-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/init-package-json/default-input.js conflicts between attempted installs of nodejs-init-package-json-0.0.10-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/init-package-json/init-package-json.js conflicts between attempted installs of nodejs-init-package-json-0.0.10-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/init-package-json/package.json conflicts between attempted installs of nodejs-init-package-json-0.0.10-1.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/addon.gypi conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/bin/node-gyp.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/build.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/clean.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/configure.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/install.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/list.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/node-gyp.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/rebuild.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/lib/remove.js conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/node-gyp/package.json conflicts between attempted installs of node-gyp-0.10.6-2.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/bin/node-gyp-bin/node-gyp conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/bin/npm conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/bin/npm-cli.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/adduser.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/bin.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/bugs.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/build.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/cache.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/completion.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/config.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/dedupe.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/deprecate.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/docs.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/edit.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/explore.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/get.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/help-search.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/help.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/init.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/install.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/link.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/ls.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/npm.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/outdated.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/owner.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/pack.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/prefix.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/prune.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/publish.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/rebuild.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/restart.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/root.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/run-script.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/search.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/set.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/shrinkwrap.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/star.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/stars.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/start.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/stop.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/substack.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/test.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/unbuild.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/uninstall.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/unpublish.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/update.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion.sh conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion/file-completion.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion/installed-deep.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/completion/installed-shallow.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/error-handler.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/gently-rm.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/lifecycle.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/utils/link.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/version.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/view.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/visnup.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/whoami.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/lib/xmas.js conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/abbrev conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/archy conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/chownr conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/cmd-shim conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/editor conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/glob conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/graceful-fs conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/ini conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/init-package-json conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/lockfile conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/lru-cache conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/minimatch conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/mkdirp conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/node-gyp conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/nopt conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/npm-user-validate conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/npmlog conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/once conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/opener conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/osenv conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/read conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/read-installed conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/read-package-json conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/request conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/retry conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/rimraf conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/semver conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/sha conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/slide conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/tar conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/uid-number conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/node_modules/which conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\n  file /usr/lib/node_modules/npm/package.json conflicts between attempted installs of npm-1.3.6-5.el6.noarch and nodejs-2:10.21.0-1nodesource.x86_64\nError Summary\n-------------\n","id":"5ed7f7091299560015b6534e","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fa3d1299560015b65354","_stepId":"5ed7fa3d1299560015b65356","_taskOutcomeId":"5ed7fa3d1299560015b65357","name":"Step1","source":1,"machineId":"ip-172-31-94-44","ipAddress":"172.31.94.44","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-03T19:30:05.235Z","dateCompleted":"2020-06-03T19:30:10.700Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-000807f7582d836fd\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed7fa3d1299560015b65358","version":0},{"tail":["...instance i-0ca09d39b2f42ff6a is initializing","...instance i-0ca09d39b2f42ff6a is initializing","...instance i-0ca09d39b2f42ff6a is initializing","...instance i-0ca09d39b2f42ff6a is ok","Launched 1 ec2 t1.micro instance(s) [i-0ca09d39b2f42ff6a]"],"lastUpdateId":20,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_stepId":"5ed7fe912a8c780015a48855","_taskOutcomeId":"5ed7fe922a8c780015a48859","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T19:48:34.048Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0ca09d39b2f42ff6a\" status\n...waiting for \"i-0ca09d39b2f42ff6a\" status\n...instance i-0ca09d39b2f42ff6a is running\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is initializing\n...instance i-0ca09d39b2f42ff6a is ok\nLaunched 1 ec2 t1.micro instance(s) [i-0ca09d39b2f42ff6a]\n","dateCompleted":"2020-06-03T19:51:38.042Z","exitCode":0,"signal":null,"stderr":"","id":"5ed7fe922a8c780015a4885a","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_stepId":"5ed7fe912a8c780015a48858","_taskOutcomeId":"5ed7ff4a2a8c780015a4885c","name":"build","source":1,"machineId":"ip-172-31-95-68","ipAddress":"172.31.95.68","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IEtpa2lVdGlsc18xLktpa2lVdGlscy5tYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2NvbmZpZy5nZXQoJ3JpY2h3aWZ1bmRzJyl9OiR7Y29uZmlnLmdldCgnN2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMScpfUAke2NvbmZpZy5nZXQoJ2dpdGh1Yi5jb20vdGhlaXJvbmNvb2svS2lraS5naXQnKX1gOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIHYwLjAuMC4yMjMgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJHtub2RlUmFuZ2V9LSR7cGxhdGZvcm19YDsKICAgIGlmIChhcmNoICE9ICcnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9","status":22,"dateStarted":"2020-06-03T19:51:47.740Z","dateCompleted":"2020-06-03T19:51:47.950Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"internal/modules/cjs/loader.js:638\n    throw err;\n    ^\nError: Cannot find module 'jsonwebtoken'\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n    at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n    at Module.require (internal/modules/cjs/loader.js:692:17)\n    at require (internal/modules/cjs/helpers.js:25:18)\n    at Object.<anonymous> (/home/ec2-user/wcQwj225ne/R3pfCeT1Gf.js:1:13)\n    at Module._compile (internal/modules/cjs/loader.js:778:30)\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)\n    at Module.load (internal/modules/cjs/loader.js:653:32)\n    at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n    at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n","stdout":"","id":"5ed7ff532a8c780015a4885e","version":0},{"tail":["Installed:","  nodejs.x86_64 2:10.21.0-1nodesource                                           ","Dependency Installed:","  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  ","Complete!"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_stepId":"5ed7fe912a8c780015a48857","_taskOutcomeId":"5ed7ff4a2a8c780015a4885c","name":"install node","source":1,"machineId":"ip-172-31-95-68","ipAddress":"172.31.95.68","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T19:51:38.814Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.ESZx31NfNp' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.ESZx31NfNp'\n## Cleaning up...\n+ rm -f '/tmp/tmp.ESZx31NfNp'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n--> Running transaction check\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package           Arch       Version                      Repository      Size\n================================================================================\nInstalling:\n nodejs            x86_64     2:10.21.0-1nodesource        nodesource      20 M\nInstalling for dependencies:\n python26          x86_64     2.6.9-2.89.amzn1             amzn-main      5.8 M\n python26-libs     x86_64     2.6.9-2.89.amzn1             amzn-main      697 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+2 Dependent packages)\nTotal download size: 26 M\nInstalled size: 81 M\nDownloading packages:\nPublic key for nodejs-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               23 MB/s |  26 MB  00:01     \nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : python26-libs-2.6.9-2.89.amzn1.x86_64                        1/3 \n  Installing : python26-2.6.9-2.89.amzn1.x86_64                             2/3 \n  Installing : 2:nodejs-10.21.0-1nodesource.x86_64                          3/3 \n  Verifying  : python26-2.6.9-2.89.amzn1.x86_64                             1/3 \n  Verifying  : 2:nodejs-10.21.0-1nodesource.x86_64                          2/3 \n  Verifying  : python26-libs-2.6.9-2.89.amzn1.x86_64                        3/3 \nInstalled:\n  nodejs.x86_64 2:10.21.0-1nodesource                                           \nDependency Installed:\n  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  \nComplete!\n","dateCompleted":"2020-06-03T19:51:47.739Z","exitCode":0,"signal":null,"stderr":"warning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nWarning: RPMDB altered outside of yum.\n","id":"5ed7ff4a2a8c780015a4885d","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed801ab2a8c780015a4885f","_stepId":"5ed801ab2a8c780015a48861","_taskOutcomeId":"5ed801ac2a8c780015a48862","name":"Step1","source":1,"machineId":"ip-172-31-95-68","ipAddress":"172.31.95.68","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-03T20:01:48.073Z","dateCompleted":"2020-06-03T20:01:53.079Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0ca09d39b2f42ff6a\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed801ac2a8c780015a48863","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","_stepId":"5ed8096d2a8c780015a48869","_taskOutcomeId":"5ed8096d2a8c780015a4886e","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T20:34:53.807Z","dateCompleted":"2020-06-03T20:34:53.923Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/LeemcbQZdG/hbzBKbPzAF.py\", line 7, in <module>\n    from ec2_access import *\nImportError: No module named ec2_access\n","stdout":"","id":"5ed8096d2a8c780015a4886f","version":0},{"tail":["...waiting for \"i-0fce753172eafdbbe\" status","...waiting for \"i-0fce753172eafdbbe\" status","...instance i-0fce753172eafdbbe is running","...instance i-0fce753172eafdbbe is initializing","Failed to launch any ec2 instances"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_stepId":"5ed8098b2a8c780015a48872","_taskOutcomeId":"5ed8098c2a8c780015a48877","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBwcmludCAnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdCh0YWdzKQogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgcmVzID0gZ2V0X3J1bm5pbmdfaW5zdGFuY2VzX3dpdGhfdGFncyh0YWdzKQogICAgbnVtRXhpc3RpbmdJbnN0YW5jZXMgPSBsZW4ocmVzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T20:35:24.230Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0fce753172eafdbbe\" status\n...waiting for \"i-0fce753172eafdbbe\" status\n...instance i-0fce753172eafdbbe is running\n...instance i-0fce753172eafdbbe is initializing\nFailed to launch any ec2 instances\n","dateCompleted":"2020-06-03T20:35:46.696Z","exitCode":0,"signal":null,"stderr":"","id":"5ed8098c2a8c780015a48878","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed80c512a8c780015a4887b","_stepId":"5ed80c512a8c780015a4887d","_taskOutcomeId":"5ed80c512a8c780015a4887e","name":"Step1","source":1,"machineId":"ip-172-31-89-14","ipAddress":"172.31.89.14","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-03T20:47:13.130Z","dateCompleted":"2020-06-03T20:47:18.382Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0fce753172eafdbbe\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed80c512a8c780015a4887f","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","_stepId":"5ed817902a8c780015a48883","_taskOutcomeId":"5ed817902a8c780015a48888","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgaWYgaW5zdGFuY2UgYW5kIGxlbihpbnN0YW5jZSkgPiAwIGFuZCBoYXNhdHRyKGluc3RhbmNlWzBdLCAnUHJpdmF0ZURuc05hbWUnOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVswXS5Qcml2YXRlRG5zTmFtZQogICAgICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgICAgIGlmIGFnZW50UXVlcnlbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIGFnZW50UXVlcnlbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGFnZW50UXVlcnlbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T21:35:12.540Z","dateCompleted":"2020-06-03T21:35:12.580Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"  File \"/home/ec2-user/demo/DmIoJA990F/viqu7swt1b.py\", line 57\n    if instance and len(instance) > 0 and hasattr(instance[0], 'PrivateDnsName':\n                                                                               ^\nSyntaxError: invalid syntax\n","stdout":"","id":"5ed817902a8c780015a48889","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_stepId":"5ed817b32a8c780015a4888c","_taskOutcomeId":"5ed817b32a8c780015a48891","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgaWYgaW5zdGFuY2UgYW5kIGxlbihpbnN0YW5jZSkgPiAwIGFuZCBoYXNhdHRyKGluc3RhbmNlWzBdLCAnUHJpdmF0ZURuc05hbWUnKToKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbMF0uUHJpdmF0ZURuc05hbWUKICAgICAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ2RlbW9Ac2Fhc2dsdWUuY29tJywKICAgICAgICAncGFzc3dvcmQnOiAnbXlwYXNzd29yZCcKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCd7ImFnZW50YnVpbGRlciI6InRydWUifScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIDEpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgMToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gMSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIDEgYWdlbnRzIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJzEgYWdlbnQocykgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","status":22,"dateStarted":"2020-06-03T21:35:47.465Z","dateCompleted":"2020-06-03T21:35:47.499Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"  File \"/home/ec2-user/demo/kYpdAG9WnM/DQRP7XYXaZ.py\", line 59\n    agentQuery = RestAPICall('https://kiki-go-server.herokuapp.com/api/v0/agent/?filter=machineId=={}responseFields=id lastHeartbeatTime'.format(instance_name)), 'GET', {})\n                                                                                                                                                                           ^\nSyntaxError: invalid syntax\n","stdout":"","id":"5ed817b32a8c780015a48892","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_stepId":"5ed817b32a8c780015a4888c","_taskOutcomeId":"5ed817d42a8c780015a48893","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgaWYgaW5zdGFuY2UgYW5kIGxlbihpbnN0YW5jZSkgPiAwIGFuZCBoYXNhdHRyKGluc3RhbmNlWzBdLCAnUHJpdmF0ZURuc05hbWUnKToKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbMF0uUHJpdmF0ZURuc05hbWUKICAgICAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ2RlbW9Ac2Fhc2dsdWUuY29tJywKICAgICAgICAncGFzc3dvcmQnOiAnbXlwYXNzd29yZCcKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCd7ImFnZW50YnVpbGRlciI6InRydWUifScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIDEpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgMToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gMSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIDEgYWdlbnRzIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJzEgYWdlbnQocykgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","status":22,"dateStarted":"2020-06-03T21:36:20.622Z","dateCompleted":"2020-06-03T21:36:20.670Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"  File \"/home/ec2-user/demo/HN5N0hsFlQ/dugCXWdpd8.py\", line 59\n    agentQuery = RestAPICall('https://kiki-go-server.herokuapp.com/api/v0/agent/?filter=machineId=={}responseFields=id lastHeartbeatTime'.format(instance_name)), 'GET', {})\n                                                                                                                                                                           ^\nSyntaxError: invalid syntax\n","stdout":"","id":"5ed817d42a8c780015a48894","version":0},{"tail":["...waiting for \"i-019493bd126a4e41d\" status","...waiting for \"i-019493bd126a4e41d\" status","...instance i-019493bd126a4e41d is running","...instance i-019493bd126a4e41d is initializing","Launched 1 ec2 t1.micro instance(s) [i-019493bd126a4e41d]"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","_stepId":"5ed817df2a8c780015a48897","_taskOutcomeId":"5ed817df2a8c780015a4889c","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgaWYgaW5zdGFuY2UgYW5kIGxlbihpbnN0YW5jZSkgPiAwIGFuZCBoYXNhdHRyKGluc3RhbmNlWzBdLCAnUHJpdmF0ZURuc05hbWUnKToKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbMF0uUHJpdmF0ZURuc05hbWUKICAgICAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgICAgIGlmIGFnZW50UXVlcnlbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIGFnZW50UXVlcnlbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGFnZW50UXVlcnlbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T21:36:31.696Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-019493bd126a4e41d\" status\n...waiting for \"i-019493bd126a4e41d\" status\n...instance i-019493bd126a4e41d is running\n...instance i-019493bd126a4e41d is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-019493bd126a4e41d]\n","dateCompleted":"2020-06-03T21:36:54.222Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/ZInKVdoa32/ZqlvysFFSF.py\", line 145, in <module>\n  File \"/home/ec2-user/demo/ZInKVdoa32/ZqlvysFFSF.py\", line 56, in LaunchNewAgentBuilder\n  File \"/home/ec2-user/demo/ZInKVdoa32/ec2_access.py\", line 188, in get_instance\n    return ec2_client.describe_instance(InstanceIds=[instance_id])\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 575, in __getattr__\n    self.__class__.__name__, item)\nAttributeError: 'EC2' object has no attribute 'describe_instance'\n","id":"5ed817df2a8c780015a4889d","version":0},{"tail":["...waiting for \"i-0183408bcb1595d13\" status","...waiting for \"i-0183408bcb1595d13\" status","...instance i-0183408bcb1595d13 is running","...instance i-0183408bcb1595d13 is initializing","Launched 1 ec2 t1.micro instance(s) [i-0183408bcb1595d13]"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","_stepId":"5ed819372a8c780015a488a3","_taskOutcomeId":"5ed819372a8c780015a488a8","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgaWYgaW5zdGFuY2UgYW5kIGxlbihpbnN0YW5jZSkgPiAwIGFuZCBoYXNhdHRyKGluc3RhbmNlWzBdLCAnUHJpdmF0ZURuc05hbWUnKToKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbMF0uUHJpdmF0ZURuc05hbWUKICAgICAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9cmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgICAgIGlmIGFnZW50UXVlcnlbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIGFnZW50UXVlcnlbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGFnZW50UXVlcnlbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T21:42:15.466Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0183408bcb1595d13\" status\n...waiting for \"i-0183408bcb1595d13\" status\n...instance i-0183408bcb1595d13 is running\n...instance i-0183408bcb1595d13 is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-0183408bcb1595d13]\n","dateCompleted":"2020-06-03T21:42:38.270Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/xSF8Py6V1s/mNDbzfxFYs.py\", line 145, in <module>\n  File \"/home/ec2-user/demo/xSF8Py6V1s/mNDbzfxFYs.py\", line 57, in LaunchNewAgentBuilder\nKeyError: 0\n","id":"5ed819372a8c780015a488a9","version":0},{"tail":["No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine","Checking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Found 1 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_stepId":"5ed8197a2a8c780015a488ac","_taskOutcomeId":"5ed8197b2a8c780015a488b1","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2UKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWzBdLlByaXZhdGVEbnNOYW1lCiAgICAgICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fXJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ2RlbW9Ac2Fhc2dsdWUuY29tJywKICAgICAgICAncGFzc3dvcmQnOiAnbXlwYXNzd29yZCcKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCd7ImFnZW50YnVpbGRlciI6InRydWUifScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIDEpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgMToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gMSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIDEgYWdlbnRzIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJzEgYWdlbnQocykgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","status":20,"dateStarted":"2020-06-03T21:43:23.413Z","dateCompleted":"2020-06-03T21:43:24.369Z","exitCode":0,"signal":null,"stderr":"","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 1 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n","id":"5ed8197b2a8c780015a488b2","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_stepId":"5ed819ae2a8c780015a488b7","_taskOutcomeId":"5ed819ae2a8c780015a488bc","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2UKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWzBdLlByaXZhdGVEbnNOYW1lCiAgICAgICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fXJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ2RlbW9Ac2Fhc2dsdWUuY29tJywKICAgICAgICAncGFzc3dvcmQnOiAnbXlwYXNzd29yZCcKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCd7ImFnZW50YnVpbGRlciI6InRydWUifScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIDEpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgMToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gMSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIDEgYWdlbnRzIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJzEgYWdlbnQocykgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","status":20,"dateStarted":"2020-06-03T21:44:14.982Z","dateCompleted":"2020-06-03T21:44:15.680Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed819ae2a8c780015a488bd","version":0},{"tail":["...waiting for \"i-076ec9e81f5861b98\" status","...instance i-076ec9e81f5861b98 is running","...instance i-076ec9e81f5861b98 is initializing","Launched 1 ec2 t1.micro instance(s) [i-076ec9e81f5861b98]","{u'Reservations': [{u'Instances': [{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-18-234-191-129.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 21, 49, 3, tzinfo=tzlocal()), u'PublicIpAddress': '18.234.191.129', u'PrivateIpAddress': '172.31.85.35', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-076ec9e81f5861b98', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-85-35.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '9e66f818-997e-4d34-8a3e-de916677bdb6', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:8d:18:73:86:cb',  (truncated)"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","_stepId":"5ed81acd2a8c780015a488c3","_taskOutcomeId":"5ed81acd2a8c780015a488c8","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2UKICAgICAgICAgICAgICAgIGlmIGluc3RhbmNlIGFuZCBsZW4oaW5zdGFuY2UpID4gMCBhbmQgaGFzYXR0cihpbnN0YW5jZVswXSwgJ1ByaXZhdGVEbnNOYW1lJyk6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWzBdLlByaXZhdGVEbnNOYW1lCiAgICAgICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fXJlc3BvbnNlRmllbGRzPWlkIGxhc3RIZWFydGJlYXRUaW1lJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ2RlbW9Ac2Fhc2dsdWUuY29tJywKICAgICAgICAncGFzc3dvcmQnOiAnbXlwYXNzd29yZCcKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCd7ImFnZW50YnVpbGRlciI6InRydWUifScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIDEpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgMToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gMSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIDEgYWdlbnRzIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJzEgYWdlbnQocykgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","status":22,"dateStarted":"2020-06-03T21:49:01.613Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-076ec9e81f5861b98\" status\n...waiting for \"i-076ec9e81f5861b98\" status\n...instance i-076ec9e81f5861b98 is running\n...instance i-076ec9e81f5861b98 is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-076ec9e81f5861b98]\n{u'Reservations': [{u'Instances': [{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-18-234-191-129.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 21, 49, 3, tzinfo=tzlocal()), u'PublicIpAddress': '18.234.191.129', u'PrivateIpAddress': '172.31.85.35', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-076ec9e81f5861b98', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-85-35.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '9e66f818-997e-4d34-8a3e-de916677bdb6', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:8d:18:73:86:cb', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-09535d9e480c9ba9f', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-85-35.ec2.internal', u'PrivateIpAddress': '172.31.85.35', u'Primary': True, u'Association': {u'PublicIp': '18.234.191.129', u'PublicDnsName': 'ec2-18-234-191-129.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-85-35.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-09a7ac630f42e28d2', u'AttachTime': datetime.datetime(2020, 6, 3, 21, 49, 3, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.85.35', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '18.234.191.129', u'PublicDnsName': 'ec2-18-234-191-129.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-0560e333269e99ab2', u'AttachTime': datetime.datetime(2020, 6, 3, 21, 49, 4, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}], u'ReservationId': 'r-017ab3c5f803998c1', u'Groups': [], u'OwnerId': '253049624075'}], 'ResponseMetadata': {'RetryAttempts': 0, 'HTTPStatusCode': 200, 'RequestId': '1e26669b-9a3e-4f08-9b30-7e7b9e4ac1a6', 'HTTPHeaders': {'x-amzn-requestid': '1e26669b-9a3e-4f08-9b30-7e7b9e4ac1a6', 'content-length': '7167', 'vary': 'accept-encoding', 'server': 'AmazonEC2', 'date': 'Wed, 03 Jun 2020 21:49:24 GMT', 'content-type': 'text/xml;charset=UTF-8'}}}\n","dateCompleted":"2020-06-03T21:49:24.690Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/A1lA9bK7hj/50q3GVfQqb.py\", line 146, in <module>\n  File \"/home/ec2-user/demo/A1lA9bK7hj/50q3GVfQqb.py\", line 58, in LaunchNewAgentBuilder\nKeyError: 0\n","id":"5ed81acd2a8c780015a488c9","version":0},{"tail":["...waiting for \"i-038bbd6da9285af70\" status","...instance i-038bbd6da9285af70 is running","...instance i-038bbd6da9285af70 is initializing","Launched 1 ec2 t1.micro instance(s) [i-038bbd6da9285af70]","{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-82-153-202.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 21, 59, 12, tzinfo=tzlocal()), u'PublicIpAddress': '3.82.153.202', u'PrivateIpAddress': '172.31.81.121', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-038bbd6da9285af70', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-81-121.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': 'd778b36d-b363-4a40-83ad-04038e1f91f8', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:0f:06:2e:fb:61', u'SourceDestCheck': True, u'VpcId':  (truncated)"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","_stepId":"5ed81d2e2a8c780015a488cd","_taskOutcomeId":"5ed81d2e2a8c780015a488d2","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGFnZW50UXVlcnlbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T21:59:10.692Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-038bbd6da9285af70\" status\n...waiting for \"i-038bbd6da9285af70\" status\n...instance i-038bbd6da9285af70 is running\n...instance i-038bbd6da9285af70 is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-038bbd6da9285af70]\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-82-153-202.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 21, 59, 12, tzinfo=tzlocal()), u'PublicIpAddress': '3.82.153.202', u'PrivateIpAddress': '172.31.81.121', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-038bbd6da9285af70', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-81-121.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': 'd778b36d-b363-4a40-83ad-04038e1f91f8', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:0f:06:2e:fb:61', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-0d04705c0187ebf06', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-81-121.ec2.internal', u'PrivateIpAddress': '172.31.81.121', u'Primary': True, u'Association': {u'PublicIp': '3.82.153.202', u'PublicDnsName': 'ec2-3-82-153-202.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-81-121.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-04f5ecb9160a56059', u'AttachTime': datetime.datetime(2020, 6, 3, 21, 59, 12, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.81.121', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.82.153.202', u'PublicDnsName': 'ec2-3-82-153-202.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-0cd3f6bbcf47c594f', u'AttachTime': datetime.datetime(2020, 6, 3, 21, 59, 13, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\n","dateCompleted":"2020-06-03T21:59:33.476Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/kdHMjXh5aD/Tp4GAaDmuD.py\", line 145, in <module>\n  File \"/home/ec2-user/demo/kdHMjXh5aD/Tp4GAaDmuD.py\", line 60, in LaunchNewAgentBuilder\nTypeError: 'Response' object has no attribute '__getitem__'\n","id":"5ed81d2e2a8c780015a488d3","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_stepId":"5ed81d9a2a8c780015a488d7","_taskOutcomeId":"5ed81d9a2a8c780015a488dc","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICBwcmludCBhZ2VudFF1ZXJ5CiAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGFnZW50UXVlcnlbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T22:00:58.408Z","dateCompleted":"2020-06-03T22:00:59.078Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed81d9a2a8c780015a488dd","version":0},{"tail":["...instance i-068694ba2270f2521 is running","...instance i-068694ba2270f2521 is initializing","Launched 1 ec2 t1.micro instance(s) [i-068694ba2270f2521]","{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-95-13-102.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 1, 38, tzinfo=tzlocal()), u'PublicIpAddress': '3.95.13.102', u'PrivateIpAddress': '172.31.93.67', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-068694ba2270f2521', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-93-67.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '999ec95b-de96-4000-92a7-3a4622d1526f', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:d6:87:c7:ba:57', u'SourceDestCheck': True, u'VpcId': 'vpc- (truncated)","<Response [200]>"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","_stepId":"5ed81dbf2a8c780015a488e1","_taskOutcomeId":"5ed81dc02a8c780015a488e6","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e31yZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICBwcmludCBhZ2VudFF1ZXJ5CiAgICAgICAgICAgICAgICBpZiBhZ2VudFF1ZXJ5WydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCBhZ2VudFF1ZXJ5WydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKGFnZW50UXVlcnlbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T22:01:36.312Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-068694ba2270f2521\" status\n...waiting for \"i-068694ba2270f2521\" status\n...instance i-068694ba2270f2521 is running\n...instance i-068694ba2270f2521 is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-068694ba2270f2521]\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-95-13-102.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 1, 38, tzinfo=tzlocal()), u'PublicIpAddress': '3.95.13.102', u'PrivateIpAddress': '172.31.93.67', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-068694ba2270f2521', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-93-67.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '999ec95b-de96-4000-92a7-3a4622d1526f', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:d6:87:c7:ba:57', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-0c2a8f03c697abc70', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-93-67.ec2.internal', u'PrivateIpAddress': '172.31.93.67', u'Primary': True, u'Association': {u'PublicIp': '3.95.13.102', u'PublicDnsName': 'ec2-3-95-13-102.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-93-67.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-032f77fcea2570747', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 1, 38, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.93.67', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.95.13.102', u'PublicDnsName': 'ec2-3-95-13-102.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034e52d73e1187a4e', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 1, 38, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\n<Response [200]>\n","dateCompleted":"2020-06-03T22:01:58.801Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/AOpuLTaBgM/crbdZZQ4Qd.py\", line 146, in <module>\n  File \"/home/ec2-user/demo/AOpuLTaBgM/crbdZZQ4Qd.py\", line 61, in LaunchNewAgentBuilder\nTypeError: 'Response' object has no attribute '__getitem__'\n","id":"5ed81dc02a8c780015a488e7","version":0},{"tail":["...instance i-07a65c9222ea19869 is running","...instance i-07a65c9222ea19869 is initializing","Launched 1 ec2 t1.micro instance(s) [i-07a65c9222ea19869]","{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-18-204-221-82.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 4, 3, tzinfo=tzlocal()), u'PublicIpAddress': '18.204.221.82', u'PrivateIpAddress': '172.31.94.53', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-07a65c9222ea19869', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-94-53.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '433f55bd-75e9-4172-b7de-55c4c39239f8', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:66:24:39:c1:a9', u'SourceDestCheck': True, u'VpcId': 'v (truncated)","agentQuery ->  <Response [200]>"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","_stepId":"5ed81e502a8c780015a488ec","_taskOutcomeId":"5ed81e512a8c780015a488f1","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgYWdlbnRRdWVyeQogICAgICAgICAgICAgICAgaWYgYWdlbnRRdWVyeVsnc3RhdHVzQ29kZSddID09IDIwMCBhbmQgYWdlbnRRdWVyeVsnbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChhZ2VudFF1ZXJ5WydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T22:04:01.205Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-07a65c9222ea19869\" status\n...waiting for \"i-07a65c9222ea19869\" status\n...instance i-07a65c9222ea19869 is running\n...instance i-07a65c9222ea19869 is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-07a65c9222ea19869]\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-18-204-221-82.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 4, 3, tzinfo=tzlocal()), u'PublicIpAddress': '18.204.221.82', u'PrivateIpAddress': '172.31.94.53', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-07a65c9222ea19869', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-94-53.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '433f55bd-75e9-4172-b7de-55c4c39239f8', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:66:24:39:c1:a9', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-0b8252b778c5aaba4', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-94-53.ec2.internal', u'PrivateIpAddress': '172.31.94.53', u'Primary': True, u'Association': {u'PublicIp': '18.204.221.82', u'PublicDnsName': 'ec2-18-204-221-82.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-94-53.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-02daff58283aaa6cb', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 4, 3, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.94.53', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '18.204.221.82', u'PublicDnsName': 'ec2-18-204-221-82.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-0986449a8fdf48a59', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 4, 4, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  <Response [200]>\n","dateCompleted":"2020-06-03T22:04:23.774Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/HjqjvygD3G/HQzn9Y8yci.py\", line 146, in <module>\n  File \"/home/ec2-user/demo/HjqjvygD3G/HQzn9Y8yci.py\", line 61, in LaunchNewAgentBuilder\nTypeError: 'Response' object has no attribute '__getitem__'\n","id":"5ed81e512a8c780015a488f2","version":0},{"tail":["agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vp (truncated)","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vp (truncated)","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}"],"lastUpdateId":12,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_stepId":"5ed81f5d2a8c780015a488f7","_taskOutcomeId":"5ed81f5e2a8c780015a488fc","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIHJlcwogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-03T22:08:30.476Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0e86e34b95bbc90f3\" status\n...waiting for \"i-0e86e34b95bbc90f3\" status\n...instance i-0e86e34b95bbc90f3 is running\n...instance i-0e86e34b95bbc90f3 is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-0e86e34b95bbc90f3]\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n{u'Monitoring': {u'State': 'disabled'}, u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'State': {u'Code': 16, u'Name': 'running'}, u'EbsOptimized': False, u'LaunchTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal()), u'PublicIpAddress': '3.83.220.244', u'PrivateIpAddress': '172.31.84.45', u'ProductCodes': [], u'VpcId': 'vpc-d2d3b4a8', u'CpuOptions': {u'CoreCount': 1, u'ThreadsPerCore': 1}, u'StateTransitionReason': '', u'InstanceId': 'i-0e86e34b95bbc90f3', u'EnaSupport': True, u'ImageId': 'ami-099e882b0876c8124', u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'KeyName': 'kiki-2019Q1', u'SecurityGroups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'ClientToken': '48a7f457-4a92-4c69-857e-d5fddf59b720', u'SubnetId': 'subnet-d47a2bfa', u'InstanceType': 't1.micro', u'CapacityReservationSpecification': {u'CapacityReservationPreference': 'open'}, u'NetworkInterfaces': [{u'Status': 'in-use', u'MacAddress': '12:1e:a4:70:f9:6d', u'SourceDestCheck': True, u'VpcId': 'vpc-d2d3b4a8', u'Description': '', u'NetworkInterfaceId': 'eni-06e80bd1c87f5956a', u'PrivateIpAddresses': [{u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'PrivateIpAddress': '172.31.84.45', u'Primary': True, u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'PrivateDnsName': 'ip-172-31-84-45.ec2.internal', u'InterfaceType': 'interface', u'Attachment': {u'Status': 'attached', u'DeviceIndex': 0, u'DeleteOnTermination': True, u'AttachmentId': 'eni-attach-0024a9a26d81a3383', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 32, tzinfo=tzlocal())}, u'Groups': [{u'GroupName': 'ssh', u'GroupId': 'sg-036de2537c059a4af'}], u'Ipv6Addresses': [], u'OwnerId': '253049624075', u'PrivateIpAddress': '172.31.84.45', u'SubnetId': 'subnet-d47a2bfa', u'Association': {u'PublicIp': '3.83.220.244', u'PublicDnsName': 'ec2-3-83-220-244.compute-1.amazonaws.com', u'IpOwnerId': 'amazon'}}], u'SourceDestCheck': True, u'Placement': {u'Tenancy': 'default', u'GroupName': '', u'AvailabilityZone': 'us-east-1d'}, u'Hypervisor': 'xen', u'BlockDeviceMappings': [{u'DeviceName': '/dev/xvda', u'Ebs': {u'Status': 'attached', u'DeleteOnTermination': True, u'VolumeId': 'vol-034ba8600ddd7f5e7', u'AttachTime': datetime.datetime(2020, 6, 3, 22, 8, 33, tzinfo=tzlocal())}}], u'Architecture': 'x86_64', u'RootDeviceType': 'ebs', u'RootDeviceName': '/dev/xvda', u'VirtualizationType': 'hvm', u'Tags': [{u'Value': 'true', u'Key': 'agentbuilder'}], u'HibernationOptions': {u'Configured': False}, u'MetadataOptions': {u'State': 'applied', u'HttpEndpoint': 'enabled', u'HttpTokens': 'optional', u'HttpPutResponseHopLimit': 1}, u'AmiLaunchIndex': 0}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n","dateCompleted":"2020-06-03T22:09:49.197Z","exitCode":0,"signal":null,"stderr":"","id":"5ed81f5e2a8c780015a488fd","version":0},{"tail":["agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","Timeout launching new instance - max tries exceeded"],"lastUpdateId":5,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_stepId":"5ed820862a8c780015a48902","_taskOutcomeId":"5ed820862a8c780015a48907","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxMgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCBsYXN0SGVhcnRiZWF0VGltZScuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChyZXNbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T22:13:26.753Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-007ac0f67289a351f\" status\n...waiting for \"i-007ac0f67289a351f\" status\n...instance i-007ac0f67289a351f is running\n...instance i-007ac0f67289a351f is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-007ac0f67289a351f]\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nTimeout launching new instance - max tries exceeded\n","dateCompleted":"2020-06-03T22:14:46.120Z","exitCode":0,"signal":null,"stderr":"","id":"5ed820862a8c780015a48908","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","_stepId":"5ed8218b2a8c780015a4890d","_taskOutcomeId":"5ed8218b2a8c780015a48912","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKClgCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T22:17:47.882Z","dateCompleted":"2020-06-03T22:17:47.924Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"  File \"/home/ec2-user/demo/yOk3zl6ikN/PLWY0ATfuz.py\", line 76\n    sys.stdout.flush()`\n                      ^\nSyntaxError: invalid syntax\n","stdout":"","id":"5ed8218b2a8c780015a48913","version":0},{"tail":["agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","Timeout launching new instance - max tries exceeded"],"lastUpdateId":19,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_stepId":"5ed821a92a8c780015a48916","_taskOutcomeId":"5ed821a92a8c780015a4891b","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T22:18:17.685Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-072578ccd7a5c051c\" status\n...waiting for \"i-072578ccd7a5c051c\" status\n...instance i-072578ccd7a5c051c is running\n...instance i-072578ccd7a5c051c is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-072578ccd7a5c051c]\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nTimeout launching new instance - max tries exceeded\n","dateCompleted":"2020-06-03T22:19:56.736Z","exitCode":0,"signal":null,"stderr":"","id":"5ed821a92a8c780015a4891c","version":0},{"tail":["Installed:","  nodejs.x86_64 2:10.21.0-1nodesource                                           ","Dependency Installed:","  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  ","Complete!"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_stepId":"5ed821a92a8c780015a48918","_taskOutcomeId":"5ed8220d2a8c780015a4891e","name":"install node","source":1,"machineId":"ip-172-31-86-201","ipAddress":"172.31.86.201","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T22:19:57.303Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.2zMQCl36EK' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.2zMQCl36EK'\n## Cleaning up...\n+ rm -f '/tmp/tmp.2zMQCl36EK'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n--> Running transaction check\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package           Arch       Version                      Repository      Size\n================================================================================\nInstalling:\n nodejs            x86_64     2:10.21.0-1nodesource        nodesource      20 M\nInstalling for dependencies:\n python26          x86_64     2.6.9-2.89.amzn1             amzn-main      5.8 M\n python26-libs     x86_64     2.6.9-2.89.amzn1             amzn-main      697 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+2 Dependent packages)\nTotal download size: 26 M\nInstalled size: 81 M\nDownloading packages:\nPublic key for nodejs-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               24 MB/s |  26 MB  00:01     \nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : python26-libs-2.6.9-2.89.amzn1.x86_64                        1/3 \n  Installing : python26-2.6.9-2.89.amzn1.x86_64                             2/3 \n  Installing : 2:nodejs-10.21.0-1nodesource.x86_64                          3/3 \n  Verifying  : python26-2.6.9-2.89.amzn1.x86_64                             1/3 \n  Verifying  : 2:nodejs-10.21.0-1nodesource.x86_64                          2/3 \n  Verifying  : python26-libs-2.6.9-2.89.amzn1.x86_64                        3/3 \nInstalled:\n  nodejs.x86_64 2:10.21.0-1nodesource                                           \nDependency Installed:\n  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  \nComplete!\n","dateCompleted":"2020-06-03T22:20:06.200Z","exitCode":0,"signal":null,"stderr":"warning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nWarning: RPMDB altered outside of yum.\n","id":"5ed8220d2a8c780015a4891f","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_stepId":"5ed821a92a8c780015a48919","_taskOutcomeId":"5ed8220d2a8c780015a4891e","name":"build","source":1,"machineId":"ip-172-31-86-201","ipAddress":"172.31.86.201","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnbnVsbCcKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogIm51bGwiLAogICAgICAgICJsb2dEZXN0IjogIm51bGwiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IEtpa2lVdGlsc18xLktpa2lVdGlscy5tYWtlaWQoKTsKCiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2NvbmZpZy5nZXQoJ3JpY2h3aWZ1bmRzJyl9OiR7Y29uZmlnLmdldCgnN2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMScpfUAke2NvbmZpZy5nZXQoJ2dpdGh1Yi5jb20vdGhlaXJvbmNvb2svS2lraS5naXQnKX1gOwoKICAgIGF3YWl0IGZzZS5yZW1vdmUob3V0X3BhdGgpOwogICAgY29uc3QgY21kQ2xvbmUgPSBgZ2l0IGNsb25lIC0tYnJhbmNoIG51bGwgLS1kZXB0aCAxICR7dXJsfSAke291dF9wYXRofS9gOwogICAgY29uc29sZS5sb2coYENsb25pbmcgZ2l0IHJlcG9gLCB7ICdNZXRob2QnOiAnY3JlYXRlQWdlbnQnLCAnQ29tbWFuZCc6IGNtZENsb25lIH0pOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJHtub2RlUmFuZ2V9LSR7cGxhdGZvcm19YDsKICAgIGlmIChhcmNoICE9ICcnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9","status":20,"dateStarted":"2020-06-03T22:20:18.241Z","dateCompleted":"2020-06-03T22:20:18.767Z","exitCode":0,"signal":null,"stderr":"","stdout":"","id":"5ed822222a8c780015a48921","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 8.791s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_stepId":"5ed821a92a8c780015a4891a","_taskOutcomeId":"5ed8220d2a8c780015a4891e","name":"install build agent packages","source":1,"machineId":"ip-172-31-86-201","ipAddress":"172.31.86.201","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-03T22:20:06.201Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.145s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 8.791s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-03T22:20:18.241Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/cM1rMXUKjQ/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/cM1rMXUKjQ/package.json'\nnpm WARN cM1rMXUKjQ No description\nnpm WARN cM1rMXUKjQ No repository field.\nnpm WARN cM1rMXUKjQ No README data\nnpm WARN cM1rMXUKjQ No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/cM1rMXUKjQ/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/cM1rMXUKjQ/package.json'\nnpm WARN cM1rMXUKjQ No description\nnpm WARN cM1rMXUKjQ No repository field.\nnpm WARN cM1rMXUKjQ No README data\nnpm WARN cM1rMXUKjQ No license field.\n","id":"5ed822162a8c780015a48920","version":0},{"tail":["# cmd = \"\"\"","# echo | crontab","# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -","# \"\"\".format(outFile)","# os.system(cmd)"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","_stepId":"5ed827b32a8c780015a48924","_taskOutcomeId":"5ed827b32a8c780015a48929","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBwcmludChkYXRhKQogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBlYzItYWRtaW4sIHRhZ3MpCgogICAgICAgIGlmIHJlc1swXToKICAgICAgICAgICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQocmVzWzFdKQoKICAgICAgICBtYXhUcmllcyA9IDE2CiAgICAgICAgZm9yIGluc3RhbmNlaWQgaW4gYXZhaWxhYmxlX2luc3RhbmNlczoKICAgICAgICAgICAgbnVtVHJpZXMgPSAwCiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZ2V0X2luc3RhbmNlKGluc3RhbmNlaWQpCiAgICAgICAgICAgICAgICAjIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VfbmFtZS5yZXBsYWNlKCcuZWMyLmludGVybmFsJywgJycpCiAgICAgICAgICAgICAgICBwcmludCAnLi4uY2hlY2tpbmcgaWYgQWdlbnQge30gaXMgcnVubmluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIHJlcwogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChyZXNbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T22:44:03.983Z","dateCompleted":"2020-06-03T22:44:04.860Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/qbkorQ6gZK/e6BWwKSRdg.py\", line 155, in <module>\n    LaunchNewAgentBuilder(tags, 1, 1)\n  File \"/home/ec2-user/demo/qbkorQ6gZK/e6BWwKSRdg.py\", line 46, in LaunchNewAgentBuilder\n    res = launch_ec2_instance('ami-099e882b0876c8124', 'kiki-2019Q1', 't1.micro', ['sg-036de2537c059a4af'], 'subnet-d47a2bfa', 'vpc-d2d3b4a8', minCount, maxCount, base64_bytes, ec2-admin, tags)\nNameError: global name 'admin' is not defined\n","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\n#!/usr/bin/python\nimport sys\nimport os\nimport requests\nimport json\nimport gzip\nimport shutil\nimport time\ntoken = ''\norgId = \"5e99cbcb2317950015edb655\"\nemail = \"demo@saasglue.com\"\npassword = \"mypassword\"\nworkingdir = \"/home/ec2-user\"\nplatform = \"linux\"\narch = None\nconfig = {\"tags\": {\"agentbuilder\":\"true\"}, \"propertyOverrides\": {\"inactiveAgentTask\": {\"name\": \"InactiveAgentTask\", \"script\": { \"_id\": \"5ed7e4ed1299560015b652de\"}, \"arguments\": \"\", \"variables\": {\"AWS_ACCESS_KEY_ID\": \"AKIATV2XO2YFWAJMQJSN\", \"AWS_SECRET_ACCESS_KEY\": \"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\"}}, \"inactivePeriodWaitTime\": 600000}}\noutFile = '{}/sg-agent-launcher'.format(workingdir)\ndef RestAPILogin():\n    global token\n    global email\n    global password\n    url = 'http://kiki-go-server.herokuapp.com/login/apiLogin'\n    \n    headers = {\n        'Content-Type': 'application/json'\n    }\n    data = {\n        'email': email,\n        'password': password\n    }\n    res = requests.post(url=url, headers=headers, data=json.dumps(data))\n    if (res.status_code != 200):\n        raise Exception(\n            'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    token = res.cookies.get_dict()['Auth']\ndef GetDownloadUrl():\n    global token\n    global orgId\n    global platform\n    global arch\n    while token == '':\n        RestAPILogin()\n        if token == '':\n            print('API login failed')\n            time.sleep(5)\n            print('Retrying api login')\n    url = 'https://kiki-go-server.herokuapp.com/api/v0/agentDownload/agentstub/{}'.format(platform)\n    if arch:\n        url += ('/' + arch)\n    headers = {\n\t'Cookie': 'Auth={};'.format(token),\n        '_orgId': orgId\n    }\n    while True:\n        res = requests.get(url=url, headers=headers)\n        if (res.status_code == 200):\n            break\n        else:\n            if (res.status_code == 303):\n                time.sleep(10)\n            else:\n                raise Exception(\n                    'Call to {} returned {} - {}'.format(url, res.status_code, res.text))\n    return res.json()['data']\ndef DownloadAgent():\n    global outFile\n    s3url = GetDownloadUrl()\n    res = requests.get(s3url, allow_redirects=True)\n    open('sg-agent-launcher.gz', 'wb').write(res.content)\n    with gzip.open('sg-agent-launcher.gz', 'rb') as f_in:\n        with open(outFile, 'wb') as f_out:\n            shutil.copyfileobj(f_in, f_out)\n    os.chmod(outFile, 0o777)\n    os.remove('sg-agent-launcher.gz')\nDownloadAgent()\nconfigFile = '{}/kiki.cfg'.format(workingdir)\nwith open(configFile, 'w') as f:\n    json.dump(config, f, indent=4)\nos.system('su - ec2-user -c {}'.format(outFile))\n# cmd = \"\"\"\n# echo | crontab\n# (crontab -l ; echo \"*/1 * * * * /usr/bin/flock -n /tmp/start_kiki_agent_launcher.lockfile {}\") | crontab -\n# \"\"\".format(outFile)\n# os.system(cmd)\n","id":"5ed827b32a8c780015a4892a","version":0},{"tail":["No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine","Checking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Found 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Launching between 1 and 1 ec2 instances of type \"t1.micro\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","_stepId":"5ed827dc2a8c780015a4892d","_taskOutcomeId":"5ed827dc2a8c780015a48932","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCAnZWMyLWFkbWluJywgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T22:44:44.508Z","dateCompleted":"2020-06-03T22:44:45.805Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/IvAauilet1/AOqFPpCH6C.py\", line 152, in <module>\n    LaunchNewAgentBuilder(tags, 1, 1)\n  File \"/home/ec2-user/demo/IvAauilet1/AOqFPpCH6C.py\", line 43, in LaunchNewAgentBuilder\n    res = launch_ec2_instance('ami-099e882b0876c8124', 'kiki-2019Q1', 't1.micro', ['sg-036de2537c059a4af'], 'subnet-d47a2bfa', 'vpc-d2d3b4a8', minCount, maxCount, base64_bytes, 'ec2-admin', tags)\n  File \"/home/ec2-user/demo/IvAauilet1/ec2_access.py\", line 41, in launch_ec2_instance\n    IamInstanceProfile=instanceProfile)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/factory.py\", line 520, in do_action\n    response = action(self, *args, **kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/action.py\", line 83, in __call__\n    response = getattr(parent.meta.client, operation_name)(*args, **params)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 316, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 635, in _make_api_call\n    raise error_class(parsed_response, operation_name)\nbotocore.exceptions.ClientError: An error occurred (UnauthorizedOperation) when calling the RunInstances operation: You are not authorized to perform this operation. Encoded authorization failure message: QgxfH40uSI4-NLNM3HDUMZxfzk-WgND-ZEzHni6pvYe7S1a_BBme7g6fSGlK7sS9iiq_0FrVeCY4p1a4BP-DY-vG_XomfCXdZoiv1D0Cy6uqUF3vSXqboFu8CG6-B0pxslqtTeLqfadX6o1ImUrs4WyJ7LMfCFsEh2TYgK8KdVtimiE-r41_pN695AfHZx6iJ-U-fUQr9T9sEBn7VtDc0UYa5LYBmZOQSyjbCErjqAQ5EzKESM81ctuwox3VrLqvMiWgTs2UPS2J_pT26xkxMA_hlrI5qGxHegHZJeG0d1embUznvrguMvMUOHVJqjCPCkHRDytQPInkq7mDFtm9lnRt-IY9gLDXQWwx8z8bSphMHIRyO1AztvvBGtBAaIou7iXQ8V8X69wolmUgWcnfQci_VTzdTnGNBPHFtx2LYtbmRjEJaSbTQ_it0_5KFMG-CEHXIgJQJ3f1kQD9g_Z9HjvI60V5b2tIJufZPRWGV1k_tnBzw30ioaHod_Dr2lOf2h2KtylhQfB2aho5Et9Lcw\n","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n","id":"5ed827dc2a8c780015a48933","version":0},{"tail":["No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine","Checking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Found 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Launching between 1 and 1 ec2 instances of type \"t1.micro\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","_stepId":"5ed82b202a8c780015a48936","_taskOutcomeId":"5ed82b202a8c780015a4893b","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCAnZWMyLWFkbWluJywgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T22:58:40.833Z","dateCompleted":"2020-06-03T22:58:42.086Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/HXQ8zkShlV/woJIfm989h.py\", line 152, in <module>\n    LaunchNewAgentBuilder(tags, 1, 1)\n  File \"/home/ec2-user/demo/HXQ8zkShlV/woJIfm989h.py\", line 43, in LaunchNewAgentBuilder\n    res = launch_ec2_instance('ami-099e882b0876c8124', 'kiki-2019Q1', 't1.micro', ['sg-036de2537c059a4af'], 'subnet-d47a2bfa', 'vpc-d2d3b4a8', minCount, maxCount, base64_bytes, 'ec2-admin', tags)\n  File \"/home/ec2-user/demo/HXQ8zkShlV/ec2_access.py\", line 41, in launch_ec2_instance\n    IamInstanceProfile=instanceProfile)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/factory.py\", line 520, in do_action\n    response = action(self, *args, **kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/action.py\", line 83, in __call__\n    response = getattr(parent.meta.client, operation_name)(*args, **params)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 316, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 635, in _make_api_call\n    raise error_class(parsed_response, operation_name)\nbotocore.exceptions.ClientError: An error occurred (UnauthorizedOperation) when calling the RunInstances operation: You are not authorized to perform this operation. Encoded authorization failure message: OitSr4wwuVtRzspmslZauPvU4zqO1r5d_kChEJ6i4E673MKR308KeWXEsuPo-PY-kU1OGEvoL-ojXMFMP4-E4bzTr0C4BWaRamKFMapS4f2B3Z6IA_EXSRV2eDJ5qjtnD3RKnGSZI5WAMpiTCckO6hngZaBytQuMasP4nruD8SZgm6DVHD11tZQK44_HMVV995yOdW_u79rhRO7IuHK5FAMGHXfffxBnS8fxVAp1sn0zcJ4-Auf1reERxtHA4MGM7tFsS9g32-3QkCGUbikVE5UIuQJ3XyuivBMSLFImRJ3Fwnkq4wBwdkA411BwxkYvh_AA4IvB_s0RRs0sw9WzbqBk-A1tdMwXS54n8GW68JUQGfc6GTmCxSbLeJvcASmVZywcBrs7lyNpCq02x53L0aTOxwGLQhCbM5PwTelYR5uazZFKRFgvJ1ERsxS_rlowsPPNATelzge3XDxJJ4ELqF5w-Orimr2WVh4nzKqJQMsBJApKzNHWllv54l2rYAuujY76rPg3CxIc4mBKtHIing\n","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n","id":"5ed82b202a8c780015a4893c","version":0},{"tail":["No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine","Checking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Found 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Launching between 1 and 1 ec2 instances of type \"t1.micro\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","_stepId":"5ed82da52a8c780015a4893f","_taskOutcomeId":"5ed82da62a8c780015a48944","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCAnZWMyLWFkbWluJywgdGFncykKCiAgICAgICAgaWYgcmVzWzBdOgogICAgICAgICAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChyZXNbMV0pCgogICAgICAgIG1heFRyaWVzID0gMTYKICAgICAgICBmb3IgaW5zdGFuY2VpZCBpbiBhdmFpbGFibGVfaW5zdGFuY2VzOgogICAgICAgICAgICBudW1UcmllcyA9IDAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBGYWxzZQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXRfaW5zdGFuY2UoaW5zdGFuY2VpZCkKICAgICAgICAgICAgICAgICMgcHJpbnQgaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF1bJ1ByaXZhdGVEbnNOYW1lJ10KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZV9uYW1lLnJlcGxhY2UoJy5lYzIuaW50ZXJuYWwnLCAnJykKICAgICAgICAgICAgICAgIHByaW50ICcuLi5jaGVja2luZyBpZiBBZ2VudCB7fSBpcyBydW5uaW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50Lz9maWx0ZXI9bWFjaGluZUlkPT17fSZyZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGluc3RhbmNlX25hbWUpLCAnR0VUJywge30pCiAgICAgICAgICAgICAgICByZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQogICAgICAgICAgICAgICAgcHJpbnQgJ2FnZW50UXVlcnkgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydEJlYXQgPSBkYXRldGltZS51dGNmcm9tdGltZXN0YW1wKHJlc1snZGF0YSddWydsYXN0SGVhcnRiZWF0VGltZSddLzEwMDApCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":22,"dateStarted":"2020-06-03T23:09:26.013Z","dateCompleted":"2020-06-03T23:09:27.308Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/UF4pfDZk10/fJzVLPYu7H.py\", line 152, in <module>\n    LaunchNewAgentBuilder(tags, 1, 1)\n  File \"/home/ec2-user/demo/UF4pfDZk10/fJzVLPYu7H.py\", line 43, in LaunchNewAgentBuilder\n    res = launch_ec2_instance('ami-099e882b0876c8124', 'kiki-2019Q1', 't1.micro', ['sg-036de2537c059a4af'], 'subnet-d47a2bfa', 'vpc-d2d3b4a8', minCount, maxCount, base64_bytes, 'ec2-admin', tags)\n  File \"/home/ec2-user/demo/UF4pfDZk10/ec2_access.py\", line 41, in launch_ec2_instance\n    IamInstanceProfile=instanceProfile)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/factory.py\", line 520, in do_action\n    response = action(self, *args, **kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/action.py\", line 83, in __call__\n    response = getattr(parent.meta.client, operation_name)(*args, **params)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 316, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 635, in _make_api_call\n    raise error_class(parsed_response, operation_name)\nbotocore.exceptions.ClientError: An error occurred (UnauthorizedOperation) when calling the RunInstances operation: You are not authorized to perform this operation. Encoded authorization failure message: p7UdFLPQLli9__vEtGgAsAahfVksK4gv6Z1NUjxkpkNe9471EZIkwzHaTg9eLR3jp5MdC0VyjIv4aXRYEiXM126tC7nNHougHAE0krakBO0Fsp6VOlJr_4cuk5T8pmlNqvGCpzW400Fg0axjzjiJOz-LQ_2fKhuWDMXYLkTP05j3rQS2iAKUghiGOw_630jL6ZbUazGn8SJ1Gz8mJ1VNqeCFMe-wFS9NoBiux0I9SsfEWuKDXdBcCfVbgvxupCwiU-wAZNzIJ2rIZYOxjqlGFpdsXen3IDwn6etFUxFx3FYcDj-R6iLCsQe1-NfM7VkulYimwdn-SEUnjPvQ556mlEstbdqiOrqhKrZjAhOEGb_lQs_Kxd3RMVhVBuO-fSrQCflu3XvLMt9SRefvf7oHyw2e3l00M0QmqXOjlCB_dxeeOmCtEx7DZzxDzs_PoDcGkSSVbauLFTxIyapmpd74e3IWzW-aYS4Kq0bIpK69cd28Knzv0kgLiVu3oaGc6k9I9HZrBtLxKwHpZavJSk00AQ\n","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n","id":"5ed82da62a8c780015a48945","version":0},{"tail":["No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine","Checking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Found 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"","Launching between 1 and 1 ec2 instances of type \"t1.micro\""],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","_stepId":"5ed82fdc2a8c780015a48948","_taskOutcomeId":"5ed82fdc2a8c780015a4894d","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCAnTm9uZScsIHRhZ3MpCgogICAgICAgIGlmIHJlc1swXToKICAgICAgICAgICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQocmVzWzFdKQoKICAgICAgICBtYXhUcmllcyA9IDE2CiAgICAgICAgZm9yIGluc3RhbmNlaWQgaW4gYXZhaWxhYmxlX2luc3RhbmNlczoKICAgICAgICAgICAgbnVtVHJpZXMgPSAwCiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZ2V0X2luc3RhbmNlKGluc3RhbmNlaWQpCiAgICAgICAgICAgICAgICAjIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VfbmFtZS5yZXBsYWNlKCcuZWMyLmludGVybmFsJywgJycpCiAgICAgICAgICAgICAgICBwcmludCAnLi4uY2hlY2tpbmcgaWYgQWdlbnQge30gaXMgcnVubmluZycuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdhZ2VudFF1ZXJ5IC0+ICcsIHJlcwogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBpZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSAyMDAgYW5kIHJlc1snbWV0YSddWydjb3VudCddID4gMDoKICAgICAgICAgICAgICAgICAgICBsYXN0SGVhcnRCZWF0ID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChyZXNbJ2RhdGEnXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":22,"dateStarted":"2020-06-03T23:18:52.280Z","dateCompleted":"2020-06-03T23:18:53.598Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/Yrru3Hi2tz/rlS0NJ9cDt.py\", line 152, in <module>\n    LaunchNewAgentBuilder(tags, 1, 1)\n  File \"/home/ec2-user/demo/Yrru3Hi2tz/rlS0NJ9cDt.py\", line 43, in LaunchNewAgentBuilder\n    res = launch_ec2_instance('ami-099e882b0876c8124', 'kiki-2019Q1', 't1.micro', ['sg-036de2537c059a4af'], 'subnet-d47a2bfa', 'vpc-d2d3b4a8', minCount, maxCount, base64_bytes, 'None', tags)\n  File \"/home/ec2-user/demo/Yrru3Hi2tz/ec2_access.py\", line 41, in launch_ec2_instance\n    IamInstanceProfile=instanceProfile)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/factory.py\", line 520, in do_action\n    response = action(self, *args, **kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/boto3/resources/action.py\", line 83, in __call__\n    response = getattr(parent.meta.client, operation_name)(*args, **params)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 316, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/home/ec2-user/.local/lib/python2.7/site-packages/botocore/client.py\", line 635, in _make_api_call\n    raise error_class(parsed_response, operation_name)\nbotocore.exceptions.ClientError: An error occurred (InvalidParameterValue) when calling the RunInstances operation: Value (None) for parameter iamInstanceProfile.name is invalid. Invalid IAM Instance Profile name\n","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n","id":"5ed82fdc2a8c780015a4894e","version":0},{"tail":["agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","...checking if Agent ip-172-31-80-30 is running","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","...checking if Agent ip-172-31-80-30 is running","agentQuery ->  {u'meta': {u'count': 1}, u'data': [{u'type': u'Agent', u'id': u'5ed830662a8c780015a48958'}], u'statusCode': 200}"],"lastUpdateId":19,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","_stepId":"5ed830042a8c780015a48951","_taskOutcomeId":"5ed830052a8c780015a48956","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0QmVhdCA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAocmVzWydkYXRhJ11bJ2xhc3RIZWFydGJlYXRUaW1lJ10vMTAwMCkKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgbm90IGluc3RhbmNlX2lzX3J1bm5pbmc6CiAgICAgICAgICAgICAgICAgICAgbnVtVHJpZXMgKz0gMQogICAgICAgICAgICAgICAgICAgIGlmIG51bVRyaWVzID49IG1heFRyaWVzOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnVGltZW91dCBsYXVuY2hpbmcgbmV3IGluc3RhbmNlIC0gbWF4IHRyaWVzIGV4Y2VlZGVkJwogICAgICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50ICdOZXcgaW5zdGFuY2Uge30gcmVhZHknLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCgoKCgpkZWYgUmVzdEFQSUNhbGwodXJsLCBtZXRob2QsIGhlYWRlcnMsIGRhdGE9e30pOgogICAgZ2xvYmFsIHRva2VuCgogICAgdHJ5OgogICAgICAgIGRlZmF1bHRfaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvb2tpZSc6ICdBdXRoPXt9OycuZm9ybWF0KHRva2VuKSwKICAgICAgICAgICAgJ19vcmdJZCc6ICc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnCiAgICAgICAgfQoKICAgICAgICBoZWFkZXJzLnVwZGF0ZShkZWZhdWx0X2hlYWRlcnMpCgogICAgICAgIGlmIG1ldGhvZCA9PSAnUE9TVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ1BVVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLnB1dCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnR0VUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMuZ2V0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycykKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oJ3t9IG1ldGhvZCBub3Qgc3VwcG9ydGVkJy5mb3JtYXQobWV0aG9kKSkKICAgICAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgc3RyKHJlc1snc3RhdHVzX2NvZGUnXSlbMF0gIT0gJzInOgogICAgICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQogICAgICAgIAogICAgICAgIHJldHVybiByZXMKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgcHJpbnQgeydNZXRob2QnOiAnUmVzdEFQSUNhbGwnLCAnRXJyb3InOiBleCwgJ3VybCc6IHVybCwgJ21ldGhvZCc6IG1ldGhvZCwgJ19vcmdJZCc6IF9vcmdJZCwgJ2hlYWRlcnMnOiBoZWFkZXJzLCAnZGF0YSc6IGRhdGF9CiAgICAgICAgcmFpc2UgZXgKCgpkZWYgUmVzdEFQSUxvZ2luKCk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB1cmwgPSAnaHR0cDovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vbG9naW4vYXBpTG9naW4nCiAgICAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfQoKICAgIGRhdGEgPSB7CiAgICAgICAgJ2VtYWlsJzogJ2RlbW9Ac2Fhc2dsdWUuY29tJywKICAgICAgICAncGFzc3dvcmQnOiAnbXlwYXNzd29yZCcKICAgIH0KCiAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1qc29uLmR1bXBzKGRhdGEpKQogICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHJlc1snc3RhdHVzX2NvZGUnXSAhPSAyMDA6CiAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICByYWlzZSBFeGNlcHRpb24obXNnKQoKICAgIHRva2VuID0gcmVzLmNvb2tpZXMuZ2V0X2RpY3QoKVsnQXV0aCddCgoKd2hpbGUgdG9rZW4gPT0gJyc6CiAgICBSZXN0QVBJTG9naW4oKQogICAgaWYgdG9rZW4gPT0gJyc6CiAgICAgICAgcHJpbnQgJ0FQSSBsb2dpbiBmYWlsZWQnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICBwcmludCAnUmV0cnlpbmcgYXBpIGxvZ2luJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKCnRhZ3MgPSBqc29uLmxvYWRzKCd7ImFnZW50YnVpbGRlciI6InRydWUifScpCnRhZ3NBcnJheSA9IFtdCmZvciB0IGluIHRhZ3M6CiAgICB0YWdzQXJyYXkuYXBwZW5kKHsna2V5JzogdCwgJ3ZhbHVlJzogdGFnc1t0XX0pCmFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC90YWdzL3t9P3Jlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoanNvbi5kdW1wcyh0YWdzQXJyYXkpKSwgJ0dFVCcsIHt9KQoKcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gNDA0OgogICAgcHJpbnQgJ05vIGFnZW50IHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lJwogICAgc3lzLnN0ZG91dC5mbHVzaAogICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIDEpCmVsaWYgcmVzWydzdGF0dXNDb2RlJ10gIT0gMjAwOgogICAgbXNnID0gJ0NhbGwgdG8gZ2V0IGFnZW50cyB3aXRoIHRhZ3MgZmFpbGVkJwogICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKZWxzZToKICAgIGNudFJ1bm5pbmdBZ2VudHMgPSBsZW4ocmVzWydkYXRhJ10pCiAgICBpZiBjbnRSdW5uaW5nQWdlbnRzIDwgMToKICAgICAgICBudW1BZ2VudHNUb1N0YXJ0ID0gMSAtIGNudFJ1bm5pbmdBZ2VudHMKICAgICAgICBwcmludCAnTGVzcyB0aGFuIDEgYWdlbnRzIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGN1cnJlbnRseSBydW5uaW5nIC0gbGF1bmNoaW5nIG5ldyBhZ2VudCBtYWNoaW5lKHMpJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgbnVtQWdlbnRzVG9TdGFydCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQgJzEgYWdlbnQocykgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgYWxyZWFkeSBydW5uaW5nJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2g=","status":22,"dateStarted":"2020-06-03T23:19:33.102Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0197c8b9803f481dc\" status\n...waiting for \"i-0197c8b9803f481dc\" status\n...instance i-0197c8b9803f481dc is running\n...instance i-0197c8b9803f481dc is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-0197c8b9803f481dc]\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-80-30 is running\nagentQuery ->  {u'meta': {u'count': 1}, u'data': [{u'type': u'Agent', u'id': u'5ed830662a8c780015a48958'}], u'statusCode': 200}\n","dateCompleted":"2020-06-03T23:21:12.036Z","exitCode":1,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"Traceback (most recent call last):\n  File \"/home/ec2-user/demo/USiIsmpdfh/efUdES6j2Y.py\", line 152, in <module>\n  File \"/home/ec2-user/demo/USiIsmpdfh/efUdES6j2Y.py\", line 64, in LaunchNewAgentBuilder\nTypeError: list indices must be integers, not str\n","id":"5ed830052a8c780015a48957","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed832c12a8c780015a48959","_stepId":"5ed832c12a8c780015a4895b","_taskOutcomeId":"5ed832c12a8c780015a4895c","name":"Step1","source":1,"machineId":"ip-172-31-80-30","ipAddress":"172.31.80.30","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-03T23:31:13.383Z","dateCompleted":"2020-06-03T23:31:19.177Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0197c8b9803f481dc\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed832c12a8c780015a4895d","version":0},{"tail":["...checking if Agent ip-172-31-88-250 is running","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","...checking if Agent ip-172-31-88-250 is running","agentQuery ->  {u'meta': {u'count': 1}, u'data': [{u'type': u'Agent', u'id': u'5ed837652a8c780015a48967'}], u'statusCode': 200}","New instance ip-172-31-88-250 ready"],"lastUpdateId":18,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_stepId":"5ed837082a8c780015a48960","_taskOutcomeId":"5ed837092a8c780015a48965","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T23:49:29.020Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-0256f0babbdae062b\" status\n...waiting for \"i-0256f0babbdae062b\" status\n...instance i-0256f0babbdae062b is running\n...instance i-0256f0babbdae062b is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-0256f0babbdae062b]\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-88-250 is running\nagentQuery ->  {u'meta': {u'count': 1}, u'data': [{u'type': u'Agent', u'id': u'5ed837652a8c780015a48967'}], u'statusCode': 200}\nNew instance ip-172-31-88-250 ready\n","dateCompleted":"2020-06-03T23:51:02.864Z","exitCode":0,"signal":null,"stderr":"","id":"5ed837092a8c780015a48966","version":0},{"tail":["Installed:","  nodejs.x86_64 2:10.21.0-1nodesource                                           ","Dependency Installed:","  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  ","Complete!"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_stepId":"5ed837082a8c780015a48962","_taskOutcomeId":"5ed837672a8c780015a48968","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T23:51:03.986Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.zEG3tAhmQo' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.zEG3tAhmQo'\n## Cleaning up...\n+ rm -f '/tmp/tmp.zEG3tAhmQo'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n--> Running transaction check\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package           Arch       Version                      Repository      Size\n================================================================================\nInstalling:\n nodejs            x86_64     2:10.21.0-1nodesource        nodesource      20 M\nInstalling for dependencies:\n python26          x86_64     2.6.9-2.89.amzn1             amzn-main      5.8 M\n python26-libs     x86_64     2.6.9-2.89.amzn1             amzn-main      697 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+2 Dependent packages)\nTotal download size: 26 M\nInstalled size: 81 M\nDownloading packages:\nPublic key for nodejs-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               19 MB/s |  26 MB  00:01     \nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : python26-libs-2.6.9-2.89.amzn1.x86_64                        1/3 \n  Installing : python26-2.6.9-2.89.amzn1.x86_64                             2/3 \n  Installing : 2:nodejs-10.21.0-1nodesource.x86_64                          3/3 \n  Verifying  : python26-2.6.9-2.89.amzn1.x86_64                             1/3 \n  Verifying  : 2:nodejs-10.21.0-1nodesource.x86_64                          2/3 \n  Verifying  : python26-libs-2.6.9-2.89.amzn1.x86_64                        3/3 \nInstalled:\n  nodejs.x86_64 2:10.21.0-1nodesource                                           \nDependency Installed:\n  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  \nComplete!\n","dateCompleted":"2020-06-03T23:51:13.396Z","exitCode":0,"signal":null,"stderr":"warning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nWarning: RPMDB altered outside of yum.\n","id":"5ed837682a8c780015a48969","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_stepId":"5ed837082a8c780015a48963","_taskOutcomeId":"5ed837672a8c780015a48968","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnbnVsbCcKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAibnVsbCIsCiAgICAgICAgImxvZ0Rlc3QiOiAibnVsbCIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gS2lraVV0aWxzXzEuS2lraVV0aWxzLm1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgncmljaHdpZnVuZHMnKX06JHtjb25maWcuZ2V0KCc3ZDdiZDhiYWI5NWM0MDkzN2Y4ZjhiZmRjYzMzNmJhZDJkOTkwZjExJyl9QCR7Y29uZmlnLmdldCgnZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdCcpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggbnVsbCAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCAoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICBhcmNoID0gJyc7CgogICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L251bGwvNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS9udWxsL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKfSkoKTs=","status":20,"dateStarted":"2020-06-03T23:51:24.693Z","dateCompleted":"2020-06-03T23:51:25.226Z","exitCode":0,"signal":null,"stderr":"(node:3250) UnhandledPromiseRejectionWarning: ReferenceError: KikiUtils_1 is not defined\n    at createAgent (/home/ec2-user/NCu5Cr12S2/S8zGcx5PW2.js:87:17)\n(node:3250) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\n(node:3250) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n","stdout":"","id":"5ed8377c2a8c780015a4896b","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 6.861s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_stepId":"5ed837082a8c780015a48964","_taskOutcomeId":"5ed837672a8c780015a48968","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-03T23:51:13.397Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.813s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 6.861s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-03T23:51:24.692Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/NCu5Cr12S2/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/NCu5Cr12S2/package.json'\nnpm WARN NCu5Cr12S2 No description\nnpm WARN NCu5Cr12S2 No repository field.\nnpm WARN NCu5Cr12S2 No README data\nnpm WARN NCu5Cr12S2 No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/NCu5Cr12S2/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/NCu5Cr12S2/package.json'\nnpm WARN NCu5Cr12S2 No description\nnpm WARN NCu5Cr12S2 No repository field.\nnpm WARN NCu5Cr12S2 No README data\nnpm WARN NCu5Cr12S2 No license field.\n","id":"5ed837712a8c780015a4896a","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_stepId":"5ed838172a8c780015a4896e","_taskOutcomeId":"5ed838172a8c780015a48973","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T23:53:59.883Z","dateCompleted":"2020-06-03T23:54:00.590Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed838172a8c780015a48974","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_stepId":"5ed838172a8c780015a48970","_taskOutcomeId":"5ed838192a8c780015a48975","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T23:54:01.791Z","dateCompleted":"2020-06-03T23:54:03.255Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.DgYZSbzP1y' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.DgYZSbzP1y'\n## Cleaning up...\n+ rm -f '/tmp/tmp.DgYZSbzP1y'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed838192a8c780015a48976","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_stepId":"5ed838172a8c780015a48971","_taskOutcomeId":"5ed838192a8c780015a48975","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChudW1iZXIgPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1J10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ251bGwnCiAgICB9LCAnc2hoaCcpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gbnVsbCkKICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogIm51bGwiLAogICAgICAgICJsb2dEZXN0IjogIm51bGwiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IG1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgncmljaHdpZnVuZHMnKX06JHtjb25maWcuZ2V0KCc3ZDdiZDhiYWI5NWM0MDkzN2Y4ZjhiZmRjYzMzNmJhZDJkOTkwZjExJyl9QCR7Y29uZmlnLmdldCgnZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdCcpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggbnVsbCAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCAoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICBhcmNoID0gJyc7CgogICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L251bGwvNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS9udWxsL2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKfSkoKTs=","status":20,"dateStarted":"2020-06-03T23:54:10.556Z","dateCompleted":"2020-06-03T23:54:11.074Z","exitCode":0,"signal":null,"stderr":"(node:3329) UnhandledPromiseRejectionWarning: ReferenceError: len is not defined\n    at makeid (/home/ec2-user/zAcmhSdbZP/bdZRVSffLY.js:11:25)\n    at createAgent (/home/ec2-user/zAcmhSdbZP/bdZRVSffLY.js:100:17)\n(node:3329) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\n(node:3329) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n","stdout":"","id":"5ed838222a8c780015a48978","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 4.877s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_stepId":"5ed838172a8c780015a48972","_taskOutcomeId":"5ed838192a8c780015a48975","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-03T23:54:03.255Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.926s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.877s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-03T23:54:10.555Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/zAcmhSdbZP/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/zAcmhSdbZP/package.json'\nnpm WARN zAcmhSdbZP No description\nnpm WARN zAcmhSdbZP No repository field.\nnpm WARN zAcmhSdbZP No README data\nnpm WARN zAcmhSdbZP No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/zAcmhSdbZP/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/zAcmhSdbZP/package.json'\nnpm WARN zAcmhSdbZP No description\nnpm WARN zAcmhSdbZP No repository field.\nnpm WARN zAcmhSdbZP No README data\nnpm WARN zAcmhSdbZP No license field.\n","id":"5ed8381b2a8c780015a48977","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_stepId":"5ed838bc2a8c780015a4897b","_taskOutcomeId":"5ed838bc2a8c780015a48980","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T23:56:44.854Z","dateCompleted":"2020-06-03T23:56:45.566Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed838bc2a8c780015a48981","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_stepId":"5ed838bc2a8c780015a4897d","_taskOutcomeId":"5ed838be2a8c780015a48982","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T23:56:46.184Z","dateCompleted":"2020-06-03T23:56:47.655Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.rkDtwGci5h' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.rkDtwGci5h'\n## Cleaning up...\n+ rm -f '/tmp/tmp.rkDtwGci5h'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed838be2a8c780015a48983","version":0},{"tail":["Error occurred building saas glue agent: ReferenceError: config is not defined"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_stepId":"5ed838bc2a8c780015a4897e","_taskOutcomeId":"5ed838be2a8c780015a48982","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1J10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ251bGwnCiAgICB9LCAnc2hoaCcpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gbnVsbCkKICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogIm51bGwiLAogICAgICAgICJsb2dEZXN0IjogIm51bGwiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IG1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Y29uZmlnLmdldCgncmljaHdpZnVuZHMnKX06JHtjb25maWcuZ2V0KCc3ZDdiZDhiYWI5NWM0MDkzN2Y4ZjhiZmRjYzMzNmJhZDJkOTkwZjExJyl9QCR7Y29uZmlnLmdldCgnZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdCcpfWA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggbnVsbCAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCAoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L251bGwvNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS9udWxsL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":22,"dateStarted":"2020-06-03T23:56:54.796Z","dateCompleted":"2020-06-03T23:56:55.311Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","stdout":"Error occurred building saas glue agent: ReferenceError: config is not defined\n","id":"5ed838c62a8c780015a48985","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 4.72s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_stepId":"5ed838bc2a8c780015a4897f","_taskOutcomeId":"5ed838be2a8c780015a48982","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-03T23:56:47.655Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.951s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.72s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-03T23:56:54.795Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/FACOobvte8/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/FACOobvte8/package.json'\nnpm WARN FACOobvte8 No description\nnpm WARN FACOobvte8 No repository field.\nnpm WARN FACOobvte8 No README data\nnpm WARN FACOobvte8 No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/FACOobvte8/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/FACOobvte8/package.json'\nnpm WARN FACOobvte8 No description\nnpm WARN FACOobvte8 No repository field.\nnpm WARN FACOobvte8 No README data\nnpm WARN FACOobvte8 No license field.\n","id":"5ed838bf2a8c780015a48984","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_stepId":"5ed838fa2a8c780015a48988","_taskOutcomeId":"5ed838fa2a8c780015a4898d","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T23:57:46.620Z","dateCompleted":"2020-06-03T23:57:47.313Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed838fa2a8c780015a4898e","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_stepId":"5ed838fa2a8c780015a4898a","_taskOutcomeId":"5ed838fc2a8c780015a4898f","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T23:57:48.443Z","dateCompleted":"2020-06-03T23:57:50.145Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.yhtsooeLus' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.yhtsooeLus'\n## Cleaning up...\n+ rm -f '/tmp/tmp.yhtsooeLus'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed838fc2a8c780015a48990","version":0},{"tail":["Cloning git repo { Method: 'createAgent',","  Command:","   'git clone --branch null --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/U3PBe/' }","Error occurred building saas glue agent: Error"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_stepId":"5ed838fa2a8c780015a4898b","_taskOutcomeId":"5ed838fc2a8c780015a4898f","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1J10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ251bGwnCiAgICB9LCAnc2hoaCcpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gbnVsbCkKICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogIm51bGwiLAogICAgICAgICJsb2dEZXN0IjogIm51bGwiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IG1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovL3JpY2h3aWZ1bmRzOjdkN2JkOGJhYjk1YzQwOTM3ZjhmOGJmZGNjMzM2YmFkMmQ5OTBmMTFAZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdGA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggbnVsbCAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCAoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L251bGwvNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS9udWxsL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":22,"dateStarted":"2020-06-03T23:57:57.352Z","dateCompleted":"2020-06-03T23:57:57.891Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch null --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/U3PBe/' }\nError occurred building saas glue agent: Error\n","id":"5ed839052a8c780015a48992","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 4.82s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_stepId":"5ed838fa2a8c780015a4898c","_taskOutcomeId":"5ed838fc2a8c780015a4898f","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-03T23:57:50.145Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.857s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.82s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-03T23:57:57.351Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/ozEL5SfKEX/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/ozEL5SfKEX/package.json'\nnpm WARN ozEL5SfKEX No description\nnpm WARN ozEL5SfKEX No repository field.\nnpm WARN ozEL5SfKEX No README data\nnpm WARN ozEL5SfKEX No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/ozEL5SfKEX/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/ozEL5SfKEX/package.json'\nnpm WARN ozEL5SfKEX No description\nnpm WARN ozEL5SfKEX No repository field.\nnpm WARN ozEL5SfKEX No README data\nnpm WARN ozEL5SfKEX No license field.\n","id":"5ed838fe2a8c780015a48991","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_stepId":"5ed8394e2a8c780015a48995","_taskOutcomeId":"5ed8394e2a8c780015a4899a","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-03T23:59:10.768Z","dateCompleted":"2020-06-03T23:59:11.472Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed8394e2a8c780015a4899b","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_stepId":"5ed8394e2a8c780015a48997","_taskOutcomeId":"5ed8394f2a8c780015a4899c","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-03T23:59:11.725Z","dateCompleted":"2020-06-03T23:59:13.085Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.EtDxfxU2vS' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.EtDxfxU2vS'\n## Cleaning up...\n+ rm -f '/tmp/tmp.EtDxfxU2vS'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed8394f2a8c780015a4899d","version":0},{"tail":["Cloning git repo { Method: 'createAgent',","  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/xVLSp/' }","Error occurred building saas glue agent: Error"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_stepId":"5ed8394e2a8c780015a48998","_taskOutcomeId":"5ed8394f2a8c780015a4899c","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1J10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ3YwLjAuMC4yMjMnCiAgICB9LCAnc2hoaCcpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gbnVsbCkKICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IG1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovL3JpY2h3aWZ1bmRzOjdkN2JkOGJhYjk1YzQwOTM3ZjhmOGJmZGNjMzM2YmFkMmQ5OTBmMTFAZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdGA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggdjAuMC4wLjIyMyAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCAoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L3Byb2R1Y3Rpb24vNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS92MC4wLjAuMjIzL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":22,"dateStarted":"2020-06-03T23:59:20.276Z","dateCompleted":"2020-06-03T23:59:20.807Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/xVLSp/' }\nError occurred building saas glue agent: Error\n","id":"5ed839582a8c780015a4899f","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 4.849s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_stepId":"5ed8394e2a8c780015a48999","_taskOutcomeId":"5ed8394f2a8c780015a4899c","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-03T23:59:13.085Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.866s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.849s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-03T23:59:20.275Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/ngoYsalZVy/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/ngoYsalZVy/package.json'\nnpm WARN ngoYsalZVy No description\nnpm WARN ngoYsalZVy No repository field.\nnpm WARN ngoYsalZVy No README data\nnpm WARN ngoYsalZVy No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/ngoYsalZVy/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/ngoYsalZVy/package.json'\nnpm WARN ngoYsalZVy No description\nnpm WARN ngoYsalZVy No repository field.\nnpm WARN ngoYsalZVy No README data\nnpm WARN ngoYsalZVy No license field.\n","id":"5ed839512a8c780015a4899e","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_stepId":"5ed83a022a8c780015a489a4","_taskOutcomeId":"5ed83a032a8c780015a489aa","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:02:11.329Z","dateCompleted":"2020-06-04T00:02:12.094Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed83a032a8c780015a489ab","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_stepId":"5ed83a1e2a8c780015a489af","_taskOutcomeId":"5ed83a1e2a8c780015a489b5","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:02:38.914Z","dateCompleted":"2020-06-04T00:02:39.626Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed83a1e2a8c780015a489b6","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_stepId":"5ed83a1e2a8c780015a489b1","_taskOutcomeId":"5ed83a202a8c780015a489b7","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:02:40.441Z","dateCompleted":"2020-06-04T00:02:41.980Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.8bJqL1Tb5A' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.8bJqL1Tb5A'\n## Cleaning up...\n+ rm -f '/tmp/tmp.8bJqL1Tb5A'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83a202a8c780015a489b8","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 5.055s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_stepId":"5ed83a1e2a8c780015a489b3","_taskOutcomeId":"5ed83a202a8c780015a489b7","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-04T00:02:41.980Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.976s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 5.055s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:02:49.541Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/a41iHOiM0Q/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/a41iHOiM0Q/package.json'\nnpm WARN a41iHOiM0Q No description\nnpm WARN a41iHOiM0Q No repository field.\nnpm WARN a41iHOiM0Q No README data\nnpm WARN a41iHOiM0Q No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/a41iHOiM0Q/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/a41iHOiM0Q/package.json'\nnpm WARN a41iHOiM0Q No description\nnpm WARN a41iHOiM0Q No repository field.\nnpm WARN a41iHOiM0Q No README data\nnpm WARN a41iHOiM0Q No license field.\n","id":"5ed83a212a8c780015a489b9","version":0},{"tail":["Cloning git repo { Method: 'createAgent',","  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/cA1by/' }","Error occurred building saas glue agent: Error"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_stepId":"5ed83a1e2a8c780015a489b2","_taskOutcomeId":"5ed83a202a8c780015a489b7","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1J10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ3YwLjAuMC4yMjMnCiAgICB9LCAnc2hoaCcpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gbnVsbCkKICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IG1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovL3JpY2h3aWZ1bmRzOjdkN2JkOGJhYjk1YzQwOTM3ZjhmOGJmZGNjMzM2YmFkMmQ5OTBmMTFAZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdGA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggdjAuMC4wLjIyMyAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCAoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L3Byb2R1Y3Rpb24vNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS92MC4wLjAuMjIzL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":22,"dateStarted":"2020-06-04T00:02:53.388Z","dateCompleted":"2020-06-04T00:02:54.383Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/cA1by/' }\nError occurred building saas glue agent: Error\n","id":"5ed83a2d2a8c780015a489bb","version":0},{"tail":["  git.x86_64 0:2.14.6-1.62.amzn1                                                ","Dependency Installed:","  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1","  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1","Complete!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_stepId":"5ed83a1e2a8c780015a489b4","_taskOutcomeId":"5ed83a202a8c780015a489b7","name":"install git on ec2","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:02:49.541Z","dateCompleted":"2020-06-04T00:02:53.388Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package git.x86_64 0:2.14.6-1.62.amzn1 will be installed\n--> Processing Dependency: perl-Git = 2.14.6-1.62.amzn1 for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Term::ReadKey) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git::I18N) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Error) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Running transaction check\n---> Package perl-Error.noarch 1:0.17020-2.9.amzn1 will be installed\n---> Package perl-Git.noarch 0:2.14.6-1.62.amzn1 will be installed\n---> Package perl-TermReadKey.x86_64 0:2.30-20.9.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package              Arch       Version                 Repository        Size\n================================================================================\nInstalling:\n git                  x86_64     2.14.6-1.62.amzn1       amzn-updates      12 M\nInstalling for dependencies:\n perl-Error           noarch     1:0.17020-2.9.amzn1     amzn-main         33 k\n perl-Git             noarch     2.14.6-1.62.amzn1       amzn-updates      69 k\n perl-TermReadKey     x86_64     2.30-20.9.amzn1         amzn-main         33 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+3 Dependent packages)\nTotal download size: 12 M\nInstalled size: 29 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                               17 MB/s |  12 MB  00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Installing : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      2/4 \n  Installing : git-2.14.6-1.62.amzn1.x86_64                                 3/4 \n  Installing : perl-Git-2.14.6-1.62.amzn1.noarch                            4/4 \n  Verifying  : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Verifying  : git-2.14.6-1.62.amzn1.x86_64                                 2/4 \n  Verifying  : perl-Git-2.14.6-1.62.amzn1.noarch                            3/4 \n  Verifying  : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      4/4 \nInstalled:\n  git.x86_64 0:2.14.6-1.62.amzn1                                                \nDependency Installed:\n  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1\n  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1\nComplete!\n","id":"5ed83a292a8c780015a489ba","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_stepId":"5ed83a7c2a8c780015a489be","_taskOutcomeId":"5ed83a7d2a8c780015a489c4","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:04:13.522Z","dateCompleted":"2020-06-04T00:04:14.237Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed83a7d2a8c780015a489c5","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_stepId":"5ed83a922a8c780015a489c9","_taskOutcomeId":"5ed83a922a8c780015a489cf","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:04:34.637Z","dateCompleted":"2020-06-04T00:04:35.365Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed83a922a8c780015a489d0","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_stepId":"5ed83a922a8c780015a489cb","_taskOutcomeId":"5ed83a942a8c780015a489d1","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:04:36.166Z","dateCompleted":"2020-06-04T00:04:37.489Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.Jpr9KgkP49' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.Jpr9KgkP49'\n## Cleaning up...\n+ rm -f '/tmp/tmp.Jpr9KgkP49'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83a942a8c780015a489d2","version":0},{"tail":["Cloning git repo { Method: 'createAgent',","  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/S2uGk/' }","Error occurred building saas glue agent: ReferenceError: child_process_1 is not defined"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_stepId":"5ed83a922a8c780015a489cc","_taskOutcomeId":"5ed83a942a8c780015a489d1","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CgoKbGV0IG1ha2VpZCA9IChsZW4gPSA1LCBsZXR0ZXJzT25seSA9IGZhbHNlKSA9PiB7CiAgICB2YXIgdGV4dCA9ICIiOwogICAgbGV0IHBvc3NpYmxlID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiOwogICAgaWYgKCFsZXR0ZXJzT25seSkKICAgICAgICBwb3NzaWJsZSArPSAiMDEyMzQ1Njc4OSI7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTsKCiAgICByZXR1cm4gdGV4dDsKfQoKCmxldCBSdW5Db21tYW5kID0gYXN5bmMgKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHN0ZG91dCA9ICcnOwogICAgICAgICAgICBsZXQgc3RkZXJyID0gJyc7CiAgICAgICAgICAgIGxldCBjbWQgPSBjaGlsZF9wcm9jZXNzXzEuZXhlYyhjb21tYW5kU3RyaW5nLCBvcHRpb25zKTsKICAgICAgICAgICAgY21kLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxldCBzdHIgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0ICs9IHN0cjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNtZC5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdGRlcnIgKz0gZGF0YS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLm9uKCdleGl0JywgKGNvZGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7ICdjb2RlJzogY29kZSwgJ3N0ZG91dCc6IHN0ZG91dCwgJ3N0ZGVycic6IHN0ZGVyciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgfSk7Cn0KCgpsZXQgZ2VuZXJhdGVUb2tlbiA9ICgpID0+IHsKICAgIHZhciB0b2tlbiA9IGp3dC5zaWduKHsKICAgICAgICBvcmdJZHM6IFsnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1J10sCiAgICAgICAgYWdlbnRTdHViVmVyc2lvbjogJ3YwLjAuMC4yMjMnCiAgICB9LCAnc2hoaCcpOy8vS2V5c1V0aWwuZ2V0UHJpdmF0ZSgpKTsgLy8gdG9kbyAtIGNyZWF0ZSBhIHB1YmxpYyAvIHByaXZhdGUga2V5Cn0KCgpsZXQgY3JlYXRlQWdlbnQgPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgcGtnX2pzb24gPSB7CiAgICAgICAgIm5hbWUiOiAia2lraS1hZ2VudCIsCiAgICAgICAgInZlcnNpb24iOiAiMS4wLjAiLAogICAgICAgICJkZXNjcmlwdGlvbiI6ICJLaUtpIGFnZW50IiwKICAgICAgICAia2V5d29yZHMiOiBbXSwKICAgICAgICAiYXV0aG9yIjogIiIsCiAgICAgICAgImxpY2Vuc2UiOiAiSVNDIiwKICAgICAgICAicGtnIjogewogICAgICAgICAgICAiYXNzZXRzIjogWwogICAgICAgICAgICAgICAgImRlZmF1bHQuanNvbiIKICAgICAgICAgICAgXQogICAgICAgIH0KICAgIH07CgogICAgbGV0IGFwaVBvcnQgPSAnJwogICAgaWYgKG51bGwgIT0gbnVsbCkKICAgIGFwaVBvcnQgPSBudWxsOwogICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7CgogICAgbGV0IGNmZ19qc29uID0gewogICAgICAgICJhcGlVcmwiOiAiaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tIiwKICAgICAgICAiYXBpUG9ydCI6IGFwaVBvcnQsCiAgICAgICAgImFnZW50TG9nc0FQSVZlcnNpb24iOiAidjAiLAogICAgICAgICJ0b2tlbiI6IHRva2VuLAogICAgICAgICJfb3JnSWQiOiAiNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1IiwKICAgICAgICAiZW52IjogInByb2R1Y3Rpb24iLAogICAgICAgICJsb2dEZXN0IjogImZpbGUiCiAgICB9OwoKICAgIGNvbnN0IGZzZSA9IHJlcXVpcmUoImZzLWV4dHJhIik7CiAgICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogICAgbGV0IG91dF9wYXRoID0gYC90bXAva2lraS1hZ2VudC1pbnN0YWxsL2A7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKG91dF9wYXRoKTsKICAgIG91dF9wYXRoICs9IG1ha2VpZCgpOwoKICAgIGNvbnN0IHVybCA9IGBodHRwczovL3JpY2h3aWZ1bmRzOjdkN2JkOGJhYjk1YzQwOTM3ZjhmOGJmZGNjMzM2YmFkMmQ5OTBmMTFAZ2l0aHViLmNvbS90aGVpcm9uY29vay9LaWtpLmdpdGA7CgogICAgYXdhaXQgZnNlLnJlbW92ZShvdXRfcGF0aCk7CiAgICBjb25zdCBjbWRDbG9uZSA9IGBnaXQgY2xvbmUgLS1icmFuY2ggdjAuMC4wLjIyMyAtLWRlcHRoIDEgJHt1cmx9ICR7b3V0X3BhdGh9L2A7CiAgICBjb25zb2xlLmxvZyhgQ2xvbmluZyBnaXQgcmVwb2AsIHsgJ01ldGhvZCc6ICdjcmVhdGVBZ2VudCcsICdDb21tYW5kJzogY21kQ2xvbmUgfSk7CiAgICBsZXQgY2xvbmVSZXMgPSBhd2FpdCBSdW5Db21tYW5kKGNtZENsb25lLCB7fSk7CiAgICBpZiAoY2xvbmVSZXMuY29kZSAhPSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihjbG9uZVJlcy5zdGRlcnIpOwoKICAgIGF3YWl0IFJ1bkNvbW1hbmQoYG5wbSBpYCwgeyBjd2Q6IG91dF9wYXRoICsgJy9hZ2VudCcgfSk7CgogICAgb3V0X3BhdGggKz0gJy9hZ2VudC9kaXN0JzsKICAgIGNvbnN0IHBrZ19wYXRoID0gYCR7b3V0X3BhdGh9L3BrZ19hZ2VudGA7CiAgICBhd2FpdCBmc2UuZW5zdXJlRGlyKHBrZ19wYXRoKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsIEpTT04uc3RyaW5naWZ5KHBrZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9kZWZhdWx0Lmpzb24nLCBKU09OLnN0cmluZ2lmeShjZmdfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwoKICAgIGxldCB0YXJnZXQgPSBgJG5vZGUxMC1saW51eGA7CiAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgIGlmIChhcmNoICE9ICdudWxsJykKICAgICAgICB0YXJnZXQgKz0gYC0ke2FyY2h9YDsKCiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnbnVsbCc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBzM1BhdGggPSBgczM6Ly9hZ2VudC1iaW5hcmllcy9hZ2VudC9wcm9kdWN0aW9uLzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NS9saW51eCR7YXJjaH0vdjAuMC4wLjIyMy9raWtpLWFnZW50YDsKICAgICAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgICAgIHMzUGF0aCArPSAnLmV4ZSc7CgogICAgICAgIHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSA9ICdtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PJwogICAgICAgIGNvbnN0IGNtZCA9IGBhd3MgczMgY3AgJHtvdXRGaWxlUGF0aH0gJHtzM1BhdGh9YAogICAgICAgIGF3YWl0IFJ1bkNvbW1hbmQoY21kKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBvY2N1cnJlZCBidWlsZGluZyBzYWFzIGdsdWUgYWdlbnQ6ICR7ZXJyfWApOwogICAgICAgIHByb2Nlc3MuZXhpdCgtMSk7CiAgICB9Cn0pKCk7","status":22,"dateStarted":"2020-06-04T00:04:45.637Z","dateCompleted":"2020-06-04T00:04:46.220Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/S2uGk/' }\nError occurred building saas glue agent: ReferenceError: child_process_1 is not defined\n","id":"5ed83a9d2a8c780015a489d5","version":0},{"tail":["+ pkg@4.4.8","added 123 packages from 152 contributors and audited 150 packages in 4.986s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_stepId":"5ed83a922a8c780015a489cd","_taskOutcomeId":"5ed83a942a8c780015a489d1","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZw==","status":20,"dateStarted":"2020-06-04T00:04:37.490Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.858s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.986s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:04:44.807Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/BHRt5Gti9i/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/BHRt5Gti9i/package.json'\nnpm WARN BHRt5Gti9i No description\nnpm WARN BHRt5Gti9i No repository field.\nnpm WARN BHRt5Gti9i No README data\nnpm WARN BHRt5Gti9i No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/BHRt5Gti9i/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/BHRt5Gti9i/package.json'\nnpm WARN BHRt5Gti9i No description\nnpm WARN BHRt5Gti9i No repository field.\nnpm WARN BHRt5Gti9i No README data\nnpm WARN BHRt5Gti9i No license field.\n","id":"5ed83a952a8c780015a489d3","version":0},{"tail":["Loaded plugins: priorities, update-motd, upgrade-helper","Package git-2.14.6-1.62.amzn1.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_stepId":"5ed83a922a8c780015a489ce","_taskOutcomeId":"5ed83a942a8c780015a489d1","name":"install git on ec2","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:04:44.807Z","dateCompleted":"2020-06-04T00:04:45.636Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nPackage git-2.14.6-1.62.amzn1.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83a9c2a8c780015a489d4","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_stepId":"5ed83b102a8c780015a489d8","_taskOutcomeId":"5ed83b102a8c780015a489de","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:06:40.636Z","dateCompleted":"2020-06-04T00:06:41.384Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed83b102a8c780015a489df","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_stepId":"5ed83b102a8c780015a489da","_taskOutcomeId":"5ed83b122a8c780015a489e0","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:06:42.489Z","dateCompleted":"2020-06-04T00:06:43.768Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.30gR7emnvO' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.30gR7emnvO'\n## Cleaning up...\n+ rm -f '/tmp/tmp.30gR7emnvO'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83b122a8c780015a489e1","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.761s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_stepId":"5ed83b102a8c780015a489dc","_taskOutcomeId":"5ed83b122a8c780015a489e0","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T00:06:43.768Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.267s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.825s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.761s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:06:53.982Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/YAB0qy4Ffh/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/YAB0qy4Ffh/package.json'\nnpm WARN YAB0qy4Ffh No description\nnpm WARN YAB0qy4Ffh No repository field.\nnpm WARN YAB0qy4Ffh No README data\nnpm WARN YAB0qy4Ffh No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/YAB0qy4Ffh/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/YAB0qy4Ffh/package.json'\nnpm WARN YAB0qy4Ffh No description\nnpm WARN YAB0qy4Ffh No repository field.\nnpm WARN YAB0qy4Ffh No README data\nnpm WARN YAB0qy4Ffh No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/YAB0qy4Ffh/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/YAB0qy4Ffh/package.json'\nnpm WARN YAB0qy4Ffh No description\nnpm WARN YAB0qy4Ffh No repository field.\nnpm WARN YAB0qy4Ffh No README data\nnpm WARN YAB0qy4Ffh No license field.\n","id":"5ed83b132a8c780015a489e2","version":0},{"tail":["  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/2vbUP/' }","> pkg@4.4.8","> Error! Unknown token '$node10' in '$node10-linux'","Error occurred building saas glue agent: Error: Unknown token '$node10' in '$node10-linux'"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_stepId":"5ed83b102a8c780015a489db","_taskOutcomeId":"5ed83b122a8c780015a489e0","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAicHJvZHVjdGlvbiIsCiAgICAgICAgImxvZ0Rlc3QiOiAiZmlsZSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCB2MC4wLjAuMjIzIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGAkbm9kZTEwLWxpbnV4YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L3Byb2R1Y3Rpb24vNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS92MC4wLjAuMjIzL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":22,"dateStarted":"2020-06-04T00:06:54.844Z","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/2vbUP/' }\n> pkg@4.4.8\n> Error! Unknown token '$node10' in '$node10-linux'\nError occurred building saas glue agent: Error: Unknown token '$node10' in '$node10-linux'\n","dateCompleted":"2020-06-04T00:07:16.415Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","id":"5ed83b1e2a8c780015a489e4","version":0},{"tail":["Loaded plugins: priorities, update-motd, upgrade-helper","Package git-2.14.6-1.62.amzn1.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_stepId":"5ed83b102a8c780015a489dd","_taskOutcomeId":"5ed83b122a8c780015a489e0","name":"install git on ec2","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:06:53.982Z","dateCompleted":"2020-06-04T00:06:54.843Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nPackage git-2.14.6-1.62.amzn1.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83b1e2a8c780015a489e3","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_stepId":"5ed83b832a8c780015a489e7","_taskOutcomeId":"5ed83b842a8c780015a489ed","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:08:36.142Z","dateCompleted":"2020-06-04T00:08:36.868Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed83b842a8c780015a489ee","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_stepId":"5ed83b832a8c780015a489e9","_taskOutcomeId":"5ed83b852a8c780015a489ef","name":"install node","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:08:37.850Z","dateCompleted":"2020-06-04T00:08:40.355Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.0cvz6OgzeL' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.0cvz6OgzeL'\n## Cleaning up...\n+ rm -f '/tmp/tmp.0cvz6OgzeL'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83b852a8c780015a489f0","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.652s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_stepId":"5ed83b832a8c780015a489eb","_taskOutcomeId":"5ed83b852a8c780015a489ef","name":"install build agent packages","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T00:08:40.356Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.866s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.952s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.652s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:08:51.082Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/SAfYwbfUVx/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/SAfYwbfUVx/package.json'\nnpm WARN SAfYwbfUVx No description\nnpm WARN SAfYwbfUVx No repository field.\nnpm WARN SAfYwbfUVx No README data\nnpm WARN SAfYwbfUVx No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/SAfYwbfUVx/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/SAfYwbfUVx/package.json'\nnpm WARN SAfYwbfUVx No description\nnpm WARN SAfYwbfUVx No repository field.\nnpm WARN SAfYwbfUVx No README data\nnpm WARN SAfYwbfUVx No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/SAfYwbfUVx/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/SAfYwbfUVx/package.json'\nnpm WARN SAfYwbfUVx No description\nnpm WARN SAfYwbfUVx No repository field.\nnpm WARN SAfYwbfUVx No README data\nnpm WARN SAfYwbfUVx No license field.\n","id":"5ed83b882a8c780015a489f1","version":0},{"tail":["  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/VIIp1/' }","> pkg@4.4.8","> Fetching base Node.js binaries to PKG_CACHE_PATH","Error occurred building saas glue agent: ReferenceError: platform is not defined"],"lastUpdateId":5,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_stepId":"5ed83b832a8c780015a489ea","_taskOutcomeId":"5ed83b852a8c780015a489ef","name":"build","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAicHJvZHVjdGlvbiIsCiAgICAgICAgImxvZ0Rlc3QiOiAiZmlsZSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCB2MC4wLjAuMjIzIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHRhcmdldCA9IGBub2RlMTAtbGludXhgOwogICAgbGV0IGFyY2ggPSAnbnVsbCc7CiAgICBpZiAoYXJjaCAhPSAnbnVsbCcpCiAgICAgICAgdGFyZ2V0ICs9IGAtJHthcmNofWA7CgogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CgogICAgbGV0IG91dEZpbGVOYW1lID0gYCR7cGtnX3BhdGh9L2tpa2ktYWdlbnRgOwogICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgIG91dEZpbGVOYW1lICs9ICcuZXhlJzsKCiAgICByZXR1cm4gb3V0RmlsZU5hbWU7Cn0KCgooYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBvdXRGaWxlUGF0aCA9IGF3YWl0IGNyZWF0ZUFnZW50KCk7CgogICAgICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgICAgIGlmIChhcmNoID09ICdudWxsJykKICAgICAgICAgICAgYXJjaCA9ICcnOwoKICAgICAgICBsZXQgczNQYXRoID0gYHMzOi8vYWdlbnQtYmluYXJpZXMvYWdlbnQvcHJvZHVjdGlvbi81ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUvbGludXgke2FyY2h9L3YwLjAuMC4yMjMva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","status":22,"dateStarted":"2020-06-04T00:08:51.985Z","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/VIIp1/' }\n> pkg@4.4.8\n> Fetching base Node.js binaries to PKG_CACHE_PATH\nError occurred building saas glue agent: ReferenceError: platform is not defined\n","dateCompleted":"2020-06-04T00:09:27.141Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","id":"5ed83b932a8c780015a489f3","version":0},{"tail":["Loaded plugins: priorities, update-motd, upgrade-helper","Package git-2.14.6-1.62.amzn1.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_stepId":"5ed83b832a8c780015a489ec","_taskOutcomeId":"5ed83b852a8c780015a489ef","name":"install git on ec2","source":1,"machineId":"ip-172-31-88-250","ipAddress":"172.31.88.250","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:08:51.082Z","dateCompleted":"2020-06-04T00:08:51.985Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nPackage git-2.14.6-1.62.amzn1.x86_64 already installed and latest version\nNothing to do\n","id":"5ed83b932a8c780015a489f2","version":0},{"tail":["...checking if Agent ip-172-31-81-138 is running","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","...checking if Agent ip-172-31-81-138 is running","agentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}","Timeout launching new instance - max tries exceeded"],"lastUpdateId":19,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_stepId":"5ed842132a8c780015a489f6","_taskOutcomeId":"5ed842132a8c780015a489fc","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgcHJpbnQgJy4uLmNoZWNraW5nIGlmIEFnZW50IHt9IGlzIHJ1bm5pbmcnLmZvcm1hdChpbnN0YW5jZV9uYW1lKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBwcmludCAnYWdlbnRRdWVyeSAtPiAnLCByZXMKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IFRydWUKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnN0YW5jZV9pc19ydW5uaW5nOgogICAgICAgICAgICAgICAgICAgIG51bVRyaWVzICs9IDEKICAgICAgICAgICAgICAgICAgICBpZiBudW1UcmllcyA+PSBtYXhUcmllczoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1RpbWVvdXQgbGF1bmNoaW5nIG5ldyBpbnN0YW5jZSAtIG1heCB0cmllcyBleGNlZWRlZCcKICAgICAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCAnTmV3IGluc3RhbmNlIHt9IHJlYWR5Jy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBicmVhawoKCgoKZGVmIFJlc3RBUElDYWxsKHVybCwgbWV0aG9kLCBoZWFkZXJzLCBkYXRhPXt9KToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHRyeToKICAgICAgICBkZWZhdWx0X2hlYWRlcnMgPSB7CiAgICAgICAgICAgICdDb29raWUnOiAnQXV0aD17fTsnLmZvcm1hdCh0b2tlbiksCiAgICAgICAgICAgICdfb3JnSWQnOiAnNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1JwogICAgICAgIH0KCiAgICAgICAgaGVhZGVycy51cGRhdGUoZGVmYXVsdF9oZWFkZXJzKQoKICAgICAgICBpZiBtZXRob2QgPT0gJ1BPU1QnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdQVVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5wdXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWRhdGEpCiAgICAgICAgZWxpZiBtZXRob2QgPT0gJ0dFVCc6CiAgICAgICAgICAgIHJlcyA9IHJlcXVlc3RzLmdldCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCd7fSBtZXRob2Qgbm90IHN1cHBvcnRlZCcuZm9ybWF0KG1ldGhvZCkpCiAgICAgICAgaWYgJ3N0YXR1c19jb2RlJyBpbiByZXMgYW5kIHN0cihyZXNbJ3N0YXR1c19jb2RlJ10pWzBdICE9ICcyJzoKICAgICAgICAgICAgbXNnID0gJ0NhbGwgdG8ge30gcmV0dXJuZWQge30gLSB7fScuZm9ybWF0KHVybCwgcmVzLnN0YXR1c19jb2RlLCByZXMudGV4dCkKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKICAgICAgICAKICAgICAgICByZXR1cm4gcmVzCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OgogICAgICAgIHByaW50IHsnTWV0aG9kJzogJ1Jlc3RBUElDYWxsJywgJ0Vycm9yJzogZXgsICd1cmwnOiB1cmwsICdtZXRob2QnOiBtZXRob2QsICdfb3JnSWQnOiBfb3JnSWQsICdoZWFkZXJzJzogaGVhZGVycywgJ2RhdGEnOiBkYXRhfQogICAgICAgIHJhaXNlIGV4CgoKZGVmIFJlc3RBUElMb2dpbigpOgogICAgZ2xvYmFsIHRva2VuCgogICAgdXJsID0gJ2h0dHA6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2xvZ2luL2FwaUxvZ2luJwogICAgCiAgICBoZWFkZXJzID0gewogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KCiAgICBkYXRhID0gewogICAgICAgICdlbWFpbCc6ICdkZW1vQHNhYXNnbHVlLmNvbScsCiAgICAgICAgJ3Bhc3N3b3JkJzogJ215cGFzc3dvcmQnCiAgICB9CgogICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9anNvbi5kdW1wcyhkYXRhKSkKICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCByZXNbJ3N0YXR1c19jb2RlJ10gIT0gMjAwOgogICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKG1zZykKCiAgICB0b2tlbiA9IHJlcy5jb29raWVzLmdldF9kaWN0KClbJ0F1dGgnXQoKCndoaWxlIHRva2VuID09ICcnOgogICAgUmVzdEFQSUxvZ2luKCkKICAgIGlmIHRva2VuID09ICcnOgogICAgICAgIHByaW50ICdBUEkgbG9naW4gZmFpbGVkJwogICAgICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgcHJpbnQgJ1JldHJ5aW5nIGFwaSBsb2dpbicKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCgp0YWdzID0ganNvbi5sb2FkcygneyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0nKQp0YWdzQXJyYXkgPSBbXQpmb3IgdCBpbiB0YWdzOgogICAgdGFnc0FycmF5LmFwcGVuZCh7J2tleSc6IHQsICd2YWx1ZSc6IHRhZ3NbdF19KQphZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvdGFncy97fT9yZXNwb25zZUZpZWxkcz1pZCcuZm9ybWF0KGpzb24uZHVtcHModGFnc0FycmF5KSksICdHRVQnLCB7fSkKCnJlcyA9IGFnZW50UXVlcnkuanNvbigpCmlmIHJlc1snc3RhdHVzQ29kZSddID09IDQwNDoKICAgIHByaW50ICdObyBhZ2VudCB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZScKICAgIHN5cy5zdGRvdXQuZmx1c2gKICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCAxKQplbGlmIHJlc1snc3RhdHVzQ29kZSddICE9IDIwMDoKICAgIG1zZyA9ICdDYWxsIHRvIGdldCBhZ2VudHMgd2l0aCB0YWdzIGZhaWxlZCcKICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCmVsc2U6CiAgICBjbnRSdW5uaW5nQWdlbnRzID0gbGVuKHJlc1snZGF0YSddKQogICAgaWYgY250UnVubmluZ0FnZW50cyA8IDE6CiAgICAgICAgbnVtQWdlbnRzVG9TdGFydCA9IDEgLSBjbnRSdW5uaW5nQWdlbnRzCiAgICAgICAgcHJpbnQgJ0xlc3MgdGhhbiAxIGFnZW50cyB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBjdXJyZW50bHkgcnVubmluZyAtIGxhdW5jaGluZyBuZXcgYWdlbnQgbWFjaGluZShzKScKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIDEsIG51bUFnZW50c1RvU3RhcnQpCiAgICBlbHNlOgogICAgICAgIHByaW50ICcxIGFnZW50KHMpIHdpdGggdGFncyAieyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0iIGFscmVhZHkgcnVubmluZycKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNo","status":20,"dateStarted":"2020-06-04T00:36:35.903Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t1.micro\"\n...waiting for \"i-09620d344582bf13b\" status\n...waiting for \"i-09620d344582bf13b\" status\n...instance i-09620d344582bf13b is running\n...instance i-09620d344582bf13b is initializing\nLaunched 1 ec2 t1.micro instance(s) [i-09620d344582bf13b]\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...checking if Agent ip-172-31-81-138 is running\nagentQuery ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\nTimeout launching new instance - max tries exceeded\n","dateCompleted":"2020-06-04T00:38:14.890Z","exitCode":0,"signal":null,"stderr":"","id":"5ed842132a8c780015a489fd","version":0},{"tail":["Installed:","  nodejs.x86_64 2:10.21.0-1nodesource                                           ","Dependency Installed:","  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  ","Complete!"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_stepId":"5ed842132a8c780015a489f8","_taskOutcomeId":"5ed842832a8c780015a48a00","name":"install node","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:38:27.276Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.ZiEAKpi7v6' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.ZiEAKpi7v6'\n## Cleaning up...\n+ rm -f '/tmp/tmp.ZiEAKpi7v6'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n--> Running transaction check\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package           Arch       Version                      Repository      Size\n================================================================================\nInstalling:\n nodejs            x86_64     2:10.21.0-1nodesource        nodesource      20 M\nInstalling for dependencies:\n python26          x86_64     2.6.9-2.89.amzn1             amzn-main      5.8 M\n python26-libs     x86_64     2.6.9-2.89.amzn1             amzn-main      697 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+2 Dependent packages)\nTotal download size: 26 M\nInstalled size: 81 M\nDownloading packages:\nPublic key for nodejs-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               37 MB/s |  26 MB  00:00     \nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : python26-libs-2.6.9-2.89.amzn1.x86_64                        1/3 \n  Installing : python26-2.6.9-2.89.amzn1.x86_64                             2/3 \n  Installing : 2:nodejs-10.21.0-1nodesource.x86_64                          3/3 \n  Verifying  : python26-2.6.9-2.89.amzn1.x86_64                             1/3 \n  Verifying  : 2:nodejs-10.21.0-1nodesource.x86_64                          2/3 \n  Verifying  : python26-libs-2.6.9-2.89.amzn1.x86_64                        3/3 \nInstalled:\n  nodejs.x86_64 2:10.21.0-1nodesource                                           \nDependency Installed:\n  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  \nComplete!\n","dateCompleted":"2020-06-04T00:38:34.833Z","exitCode":0,"signal":null,"stderr":"warning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nWarning: RPMDB altered outside of yum.\n","id":"5ed842832a8c780015a48a01","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.638s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_stepId":"5ed842132a8c780015a489fa","_taskOutcomeId":"5ed842832a8c780015a48a00","name":"install build agent packages","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T00:38:34.833Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.885s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 7.705s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.638s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:38:49.553Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/hCPNZ5bEU3/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/hCPNZ5bEU3/package.json'\nnpm WARN hCPNZ5bEU3 No description\nnpm WARN hCPNZ5bEU3 No repository field.\nnpm WARN hCPNZ5bEU3 No README data\nnpm WARN hCPNZ5bEU3 No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/hCPNZ5bEU3/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/hCPNZ5bEU3/package.json'\nnpm WARN hCPNZ5bEU3 No description\nnpm WARN hCPNZ5bEU3 No repository field.\nnpm WARN hCPNZ5bEU3 No README data\nnpm WARN hCPNZ5bEU3 No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/hCPNZ5bEU3/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/hCPNZ5bEU3/package.json'\nnpm WARN hCPNZ5bEU3 No description\nnpm WARN hCPNZ5bEU3 No repository field.\nnpm WARN hCPNZ5bEU3 No README data\nnpm WARN hCPNZ5bEU3 No license field.\n","id":"5ed8428a2a8c780015a48a02","version":0},{"tail":["  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/QlprI/' }","> pkg@4.4.8","> Fetching base Node.js binaries to PKG_CACHE_PATH","Error occurred building saas glue agent: ReferenceError: platform is not defined"],"lastUpdateId":5,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_stepId":"5ed842132a8c780015a489f9","_taskOutcomeId":"5ed842832a8c780015a48a00","name":"build","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAicHJvZHVjdGlvbiIsCiAgICAgICAgImxvZ0Rlc3QiOiAiZmlsZSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCB2MC4wLjAuMjIzIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L3Byb2R1Y3Rpb24vNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS92MC4wLjAuMjIzL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":22,"dateStarted":"2020-06-04T00:38:53.971Z","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/QlprI/' }\n> pkg@4.4.8\n> Fetching base Node.js binaries to PKG_CACHE_PATH\nError occurred building saas glue agent: ReferenceError: platform is not defined\n","dateCompleted":"2020-06-04T00:41:23.499Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","id":"5ed8429d2a8c780015a48a04","version":0},{"tail":["  git.x86_64 0:2.14.6-1.62.amzn1                                                ","Dependency Installed:","  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1","  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1","Complete!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_stepId":"5ed842132a8c780015a489fb","_taskOutcomeId":"5ed842832a8c780015a48a00","name":"install git on ec2","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:38:49.553Z","dateCompleted":"2020-06-04T00:38:53.971Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package git.x86_64 0:2.14.6-1.62.amzn1 will be installed\n--> Processing Dependency: perl-Git = 2.14.6-1.62.amzn1 for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Term::ReadKey) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git::I18N) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Error) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Running transaction check\n---> Package perl-Error.noarch 1:0.17020-2.9.amzn1 will be installed\n---> Package perl-Git.noarch 0:2.14.6-1.62.amzn1 will be installed\n---> Package perl-TermReadKey.x86_64 0:2.30-20.9.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package              Arch       Version                 Repository        Size\n================================================================================\nInstalling:\n git                  x86_64     2.14.6-1.62.amzn1       amzn-updates      12 M\nInstalling for dependencies:\n perl-Error           noarch     1:0.17020-2.9.amzn1     amzn-main         33 k\n perl-Git             noarch     2.14.6-1.62.amzn1       amzn-updates      69 k\n perl-TermReadKey     x86_64     2.30-20.9.amzn1         amzn-main         33 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+3 Dependent packages)\nTotal download size: 12 M\nInstalled size: 29 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                               16 MB/s |  12 MB  00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Installing : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      2/4 \n  Installing : git-2.14.6-1.62.amzn1.x86_64                                 3/4 \n  Installing : perl-Git-2.14.6-1.62.amzn1.noarch                            4/4 \n  Verifying  : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Verifying  : git-2.14.6-1.62.amzn1.x86_64                                 2/4 \n  Verifying  : perl-Git-2.14.6-1.62.amzn1.noarch                            3/4 \n  Verifying  : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      4/4 \nInstalled:\n  git.x86_64 0:2.14.6-1.62.amzn1                                                \nDependency Installed:\n  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1\n  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1\nComplete!\n","id":"5ed842992a8c780015a48a03","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_stepId":"5ed843a22a8c780015a48a07","_taskOutcomeId":"5ed843a32a8c780015a48a0d","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnLi4uYWdlbnQge30gaXMgaW5pdGlhbGl6aW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-04T00:43:15.061Z","dateCompleted":"2020-06-04T00:43:15.809Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed843a32a8c780015a48a0e","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_stepId":"5ed843a22a8c780015a48a09","_taskOutcomeId":"5ed843a42a8c780015a48a0f","name":"install node","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:43:16.997Z","dateCompleted":"2020-06-04T00:43:19.408Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.dRD3Z9Q4ZT' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.dRD3Z9Q4ZT'\n## Cleaning up...\n+ rm -f '/tmp/tmp.dRD3Z9Q4ZT'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed843a52a8c780015a48a10","version":0},{"tail":["  Command:","   'git clone --branch null --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/0fQnZ/' }","Error occurred building saas glue agent: Error: Cloning into '/tmp/sg-agent-install/0fQnZ'...","warning: Could not find remote branch null to clone.","fatal: Remote branch null not found in upstream origin"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_stepId":"5ed843a22a8c780015a48a0a","_taskOutcomeId":"5ed843a42a8c780015a48a0f","name":"build","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAnbnVsbCcKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAibnVsbCIsCiAgICAgICAgImxvZ0Rlc3QiOiAibnVsbCIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCBudWxsIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgICAgICBsZXQgczNQYXRoID0gYHMzOi8vYWdlbnQtYmluYXJpZXMvYWdlbnQvbnVsbC81ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUvbGludXgke2FyY2h9L251bGwva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","status":22,"dateStarted":"2020-06-04T00:43:31.779Z","dateCompleted":"2020-06-04T00:43:32.499Z","exitCode":255,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch null --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/0fQnZ/' }\nError occurred building saas glue agent: Error: Cloning into '/tmp/sg-agent-install/0fQnZ'...\nwarning: Could not find remote branch null to clone.\nfatal: Remote branch null not found in upstream origin\n","id":"5ed843b32a8c780015a48a13","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.721s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_stepId":"5ed843a22a8c780015a48a0b","_taskOutcomeId":"5ed843a42a8c780015a48a0f","name":"install build agent packages","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T00:43:19.408Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.555s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 4.987s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.721s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:43:30.934Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/4liDOnOCLw/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/4liDOnOCLw/package.json'\nnpm WARN 4liDOnOCLw No description\nnpm WARN 4liDOnOCLw No repository field.\nnpm WARN 4liDOnOCLw No README data\nnpm WARN 4liDOnOCLw No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/4liDOnOCLw/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/4liDOnOCLw/package.json'\nnpm WARN 4liDOnOCLw No description\nnpm WARN 4liDOnOCLw No repository field.\nnpm WARN 4liDOnOCLw No README data\nnpm WARN 4liDOnOCLw No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/4liDOnOCLw/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/4liDOnOCLw/package.json'\nnpm WARN 4liDOnOCLw No description\nnpm WARN 4liDOnOCLw No repository field.\nnpm WARN 4liDOnOCLw No README data\nnpm WARN 4liDOnOCLw No license field.\n","id":"5ed843a72a8c780015a48a11","version":0},{"tail":["Loaded plugins: priorities, update-motd, upgrade-helper","Package git-2.14.6-1.62.amzn1.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_stepId":"5ed843a22a8c780015a48a0c","_taskOutcomeId":"5ed843a42a8c780015a48a0f","name":"install git on ec2","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:43:30.934Z","dateCompleted":"2020-06-04T00:43:31.778Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nPackage git-2.14.6-1.62.amzn1.x86_64 already installed and latest version\nNothing to do\n","id":"5ed843b22a8c780015a48a12","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_stepId":"5ed843ca2a8c780015a48a16","_taskOutcomeId":"5ed843ca2a8c780015a48a1c","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QxLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnLi4uYWdlbnQge30gaXMgaW5pdGlhbGl6aW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-04T00:43:54.926Z","dateCompleted":"2020-06-04T00:43:55.625Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed843ca2a8c780015a48a1d","version":0},{"tail":["     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo","     sudo yum install yarn","Loaded plugins: priorities, update-motd, upgrade-helper","Package 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_stepId":"5ed843ca2a8c780015a48a18","_taskOutcomeId":"5ed843cc2a8c780015a48a1e","name":"install node","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T00:43:56.560Z","dateCompleted":"2020-06-04T00:43:57.830Z","exitCode":0,"signal":null,"stderr":"","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.oo9NQi1ILs' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.oo9NQi1ILs'\n## Cleaning up...\n+ rm -f '/tmp/tmp.oo9NQi1ILs'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nPackage 2:nodejs-10.21.0-1nodesource.x86_64 already installed and latest version\nNothing to do\n","id":"5ed843cc2a8c780015a48a1f","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.638s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_stepId":"5ed843ca2a8c780015a48a1a","_taskOutcomeId":"5ed843cc2a8c780015a48a1e","name":"install build agent packages","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T00:43:57.830Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 0.857s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 5.124s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.638s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T00:44:07.868Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/iIPDrIqSbv/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/iIPDrIqSbv/package.json'\nnpm WARN iIPDrIqSbv No description\nnpm WARN iIPDrIqSbv No repository field.\nnpm WARN iIPDrIqSbv No README data\nnpm WARN iIPDrIqSbv No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/iIPDrIqSbv/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/iIPDrIqSbv/package.json'\nnpm WARN iIPDrIqSbv No description\nnpm WARN iIPDrIqSbv No repository field.\nnpm WARN iIPDrIqSbv No README data\nnpm WARN iIPDrIqSbv No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/iIPDrIqSbv/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/iIPDrIqSbv/package.json'\nnpm WARN iIPDrIqSbv No description\nnpm WARN iIPDrIqSbv No repository field.\nnpm WARN iIPDrIqSbv No README data\nnpm WARN iIPDrIqSbv No license field.\n","id":"5ed843cd2a8c780015a48a20","version":0},{"tail":["Cloning git repo { Method: 'createAgent',","  Command:","   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/w8r36/' }","> pkg@4.4.8"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_stepId":"5ed843ca2a8c780015a48a19","_taskOutcomeId":"5ed843cc2a8c780015a48a1e","name":"build","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAicHJvZHVjdGlvbiIsCiAgICAgICAgImxvZ0Rlc3QiOiAiZmlsZSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCB2MC4wLjAuMjIzIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGxldCByZXMgPSBhd2FpdCBwa2dfMS5leGVjKFtgJHtvdXRfcGF0aH0vTGF1bmNoQWdlbnQuanNgLCAnLS1jb25maWcnLCBwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgJy0tdGFyZ2V0cycsIHRhcmdldCwgJy0tb3V0LXBhdGgnLCBwa2dfcGF0aF0pOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgICAgICBsZXQgczNQYXRoID0gYHMzOi8vYWdlbnQtYmluYXJpZXMvYWdlbnQvcHJvZHVjdGlvbi81ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUvbGludXgke2FyY2h9L3YwLjAuMC4yMjMva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","status":20,"dateStarted":"2020-06-04T00:44:08.711Z","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/w8r36/' }\n> pkg@4.4.8\n","dateCompleted":"2020-06-04T00:44:51.925Z","exitCode":0,"signal":null,"stderr":"","id":"5ed843d82a8c780015a48a22","version":0},{"tail":["Loaded plugins: priorities, update-motd, upgrade-helper","Package git-2.14.6-1.62.amzn1.x86_64 already installed and latest version","Nothing to do"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_stepId":"5ed843ca2a8c780015a48a1b","_taskOutcomeId":"5ed843cc2a8c780015a48a1e","name":"install git on ec2","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T00:44:07.869Z","dateCompleted":"2020-06-04T00:44:08.711Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nPackage git-2.14.6-1.62.amzn1.x86_64 already installed and latest version\nNothing to do\n","id":"5ed843d72a8c780015a48a21","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8465c2a8c780015a48a23","_stepId":"5ed8465c2a8c780015a48a25","_taskOutcomeId":"5ed8465c2a8c780015a48a26","name":"Step1","source":1,"machineId":"ip-172-31-81-138","ipAddress":"172.31.81.138","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-04T00:54:52.234Z","dateCompleted":"2020-06-04T00:54:53.701Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-09620d344582bf13b\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed8465c2a8c780015a48a27","version":0},{"tail":["...agent ip-172-31-83-252 is initializing","...agent ip-172-31-83-252 is initializing","...agent ip-172-31-83-252 is initializing","...agent ip-172-31-83-252 is initializing","New instance ip-172-31-83-252 ready"],"lastUpdateId":23,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_stepId":"5ed850492a8c780015a48a3e","_taskOutcomeId":"5ed8504a2a8c780015a48a44","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwMH19JykKICAgICAgICAKICAgICAgICBkYXRhX2J5dGVzID0gZGF0YS5lbmNvZGUoJ3V0ZjgnKQogICAgICAgIGJhc2U2NF9ieXRlcyA9IGJhc2U2NC5iNjRlbmNvZGUoZGF0YV9ieXRlcykKCiAgICAgICAgcmVzID0gbGF1bmNoX2VjMl9pbnN0YW5jZSgnYW1pLTA5OWU4ODJiMDg3NmM4MTI0JywgJ2tpa2ktMjAxOVExJywgJ3QyLm1pY3JvJywgWydzZy0wMzZkZTI1MzdjMDU5YTRhZiddLCAnc3VibmV0LWQ0N2EyYmZhJywgJ3ZwYy1kMmQzYjRhOCcsIG1pbkNvdW50LCBtYXhDb3VudCwgYmFzZTY0X2J5dGVzLCBOb25lLCB0YWdzKQoKICAgICAgICBpZiByZXNbMF06CiAgICAgICAgICAgIGF2YWlsYWJsZV9pbnN0YW5jZXMuZXh0ZW5kKHJlc1sxXSkKCiAgICAgICAgbWF4VHJpZXMgPSAxNgogICAgICAgIGZvciBpbnN0YW5jZWlkIGluIGF2YWlsYWJsZV9pbnN0YW5jZXM6CiAgICAgICAgICAgIG51bVRyaWVzID0gMAogICAgICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICAgICAgaW5zdGFuY2VfaXNfcnVubmluZyA9IEZhbHNlCiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGdldF9pbnN0YW5jZShpbnN0YW5jZWlkKQogICAgICAgICAgICAgICAgIyBwcmludCBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VbJ1Jlc2VydmF0aW9ucyddWzBdWydJbnN0YW5jZXMnXVswXVsnUHJpdmF0ZURuc05hbWUnXQogICAgICAgICAgICAgICAgaW5zdGFuY2VfbmFtZSA9IGluc3RhbmNlX25hbWUucmVwbGFjZSgnLmVjMi5pbnRlcm5hbCcsICcnKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICBhZ2VudFF1ZXJ5ID0gUmVzdEFQSUNhbGwoJ2h0dHBzOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9hcGkvdjAvYWdlbnQvP2ZpbHRlcj1tYWNoaW5lSWQ9PXt9JnJlc3BvbnNlRmllbGRzPWlkJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSksICdHRVQnLCB7fSkKICAgICAgICAgICAgICAgIHJlcyA9IGFnZW50UXVlcnkuanNvbigpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnLi4uYWdlbnQge30gaXMgaW5pdGlhbGl6aW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-04T01:37:14.074Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t2.micro\"\n...waiting for \"i-046c85fc03bc53cb2\" status\n...waiting for \"i-046c85fc03bc53cb2\" status\n...waiting for \"i-046c85fc03bc53cb2\" status\n...waiting for \"i-046c85fc03bc53cb2\" status\n...waiting for \"i-046c85fc03bc53cb2\" status\n...waiting for \"i-046c85fc03bc53cb2\" status\n...instance i-046c85fc03bc53cb2 is running\n...instance i-046c85fc03bc53cb2 is initializing\nLaunched 1 ec2 t2.micro instance(s) [i-046c85fc03bc53cb2]\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\n...agent ip-172-31-83-252 is initializing\nNew instance ip-172-31-83-252 ready\n","dateCompleted":"2020-06-04T01:39:33.655Z","exitCode":0,"signal":null,"stderr":"","id":"5ed8504a2a8c780015a48a45","version":0},{"tail":["Installed:","  nodejs.x86_64 2:10.21.0-1nodesource                                           ","Dependency Installed:","  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  ","Complete!"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_stepId":"5ed850492a8c780015a48a40","_taskOutcomeId":"5ed850d62a8c780015a48a47","name":"install node","source":1,"machineId":"ip-172-31-83-252","ipAddress":"172.31.83.252","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T01:39:34.033Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.Gv4tGvz4Ap' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.Gv4tGvz4Ap'\n## Cleaning up...\n+ rm -f '/tmp/tmp.Gv4tGvz4Ap'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n--> Running transaction check\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package           Arch       Version                      Repository      Size\n================================================================================\nInstalling:\n nodejs            x86_64     2:10.21.0-1nodesource        nodesource      20 M\nInstalling for dependencies:\n python26          x86_64     2.6.9-2.89.amzn1             amzn-main      5.8 M\n python26-libs     x86_64     2.6.9-2.89.amzn1             amzn-main      697 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+2 Dependent packages)\nTotal download size: 26 M\nInstalled size: 81 M\nDownloading packages:\nPublic key for nodejs-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               24 MB/s |  26 MB  00:01     \nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : python26-libs-2.6.9-2.89.amzn1.x86_64                        1/3 \n  Installing : python26-2.6.9-2.89.amzn1.x86_64                             2/3 \n  Installing : 2:nodejs-10.21.0-1nodesource.x86_64                          3/3 \n  Verifying  : python26-2.6.9-2.89.amzn1.x86_64                             1/3 \n  Verifying  : 2:nodejs-10.21.0-1nodesource.x86_64                          2/3 \n  Verifying  : python26-libs-2.6.9-2.89.amzn1.x86_64                        3/3 \nInstalled:\n  nodejs.x86_64 2:10.21.0-1nodesource                                           \nDependency Installed:\n  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  \nComplete!\n","dateCompleted":"2020-06-04T01:39:41.499Z","exitCode":0,"signal":null,"stderr":"warning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nWarning: RPMDB altered outside of yum.\n","id":"5ed850d62a8c780015a48a48","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.301s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_stepId":"5ed850492a8c780015a48a42","_taskOutcomeId":"5ed850d62a8c780015a48a47","name":"install build agent packages","source":1,"machineId":"ip-172-31-83-252","ipAddress":"172.31.83.252","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T01:39:41.499Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.521s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 5.739s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.301s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T01:39:52.660Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/JOgvutyd0h/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/JOgvutyd0h/package.json'\nnpm WARN JOgvutyd0h No description\nnpm WARN JOgvutyd0h No repository field.\nnpm WARN JOgvutyd0h No README data\nnpm WARN JOgvutyd0h No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/JOgvutyd0h/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/JOgvutyd0h/package.json'\nnpm WARN JOgvutyd0h No description\nnpm WARN JOgvutyd0h No repository field.\nnpm WARN JOgvutyd0h No README data\nnpm WARN JOgvutyd0h No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/JOgvutyd0h/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/JOgvutyd0h/package.json'\nnpm WARN JOgvutyd0h No description\nnpm WARN JOgvutyd0h No repository field.\nnpm WARN JOgvutyd0h No README data\nnpm WARN JOgvutyd0h No license field.\n","id":"5ed850dd2a8c780015a48a49","version":0},{"tail":["> pkg@4.4.8","> Fetching base Node.js binaries to PKG_CACHE_PATH","Build complete","Uploading agent to s3: aws s3 cp /tmp/sg-agent-install/4EiJU/agent/dist/pkg_agent/sg-agent s3://agent-binaries/agent/production/5e99cbcb2317950015edb655/linux/v0.0.0.223/sg-agent","Finished uploading file"],"lastUpdateId":5,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_stepId":"5ed850492a8c780015a48a41","_taskOutcomeId":"5ed850d62a8c780015a48a47","name":"build","source":1,"machineId":"ip-172-31-83-252","ipAddress":"172.31.83.252","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAicHJvZHVjdGlvbiIsCiAgICAgICAgImxvZ0Rlc3QiOiAiZmlsZSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCB2MC4wLjAuMjIzIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvYCwgeyAnTWV0aG9kJzogJ2NyZWF0ZUFnZW50JywgJ0NvbW1hbmQnOiBjbWRDbG9uZSB9KTsKICAgIGxldCBjbG9uZVJlcyA9IGF3YWl0IFJ1bkNvbW1hbmQoY21kQ2xvbmUsIHt9KTsKICAgIGlmIChjbG9uZVJlcy5jb2RlICE9IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNsb25lUmVzLnN0ZGVycik7CgogICAgYXdhaXQgUnVuQ29tbWFuZChgbnBtIGlgLCB7IGN3ZDogb3V0X3BhdGggKyAnL2FnZW50JyB9KTsKCiAgICBvdXRfcGF0aCArPSAnL2FnZW50L2Rpc3QnOwogICAgY29uc3QgcGtnX3BhdGggPSBgJHtvdXRfcGF0aH0vcGtnX2FnZW50YDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIocGtnX3BhdGgpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvcGFja2FnZS5qc29uJywgSlNPTi5zdHJpbmdpZnkocGtnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKICAgIGZzLndyaXRlRmlsZVN5bmMocGtnX3BhdGggKyAnL2RlZmF1bHQuanNvbicsIEpTT04uc3RyaW5naWZ5KGNmZ19qc29uLCBudWxsLCA0KSwgJ3V0Zi04Jyk7CgogICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgIGxldCB0YXJnZXQgPSBgbm9kZTEwLSR7cGxhdGZvcm19YDsKICAgIGxldCBhcmNoID0gJ251bGwnOwogICAgaWYgKGFyY2ggIT0gJ251bGwnKQogICAgICAgIHRhcmdldCArPSBgLSR7YXJjaH1gOwoKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBidWlsZCcpOwogICAgbGV0IHJlcyA9IGF3YWl0IHBrZ18xLmV4ZWMoW2Ake291dF9wYXRofS9MYXVuY2hBZ2VudC5qc2AsICctLWNvbmZpZycsIHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCAnLS10YXJnZXRzJywgdGFyZ2V0LCAnLS1vdXQtcGF0aCcsIHBrZ19wYXRoXSk7CiAgICBjb25zb2xlLmxvZygnQnVpbGQgY29tcGxldGUnKTsKCiAgICBsZXQgb3V0RmlsZU5hbWUgPSBgJHtwa2dfcGF0aH0va2lraS1hZ2VudGA7CiAgICBpZiAocGxhdGZvcm0gPT0gJ3dpbicpCiAgICAgICAgb3V0RmlsZU5hbWUgKz0gJy5leGUnOwoKICAgIHJldHVybiBvdXRGaWxlTmFtZTsKfQoKCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIG91dEZpbGVQYXRoID0gYXdhaXQgY3JlYXRlQWdlbnQoKTsKCiAgICAgICAgbGV0IGFyY2ggPSAnbnVsbCc7CiAgICAgICAgaWYgKGFyY2ggPT0gJ251bGwnKQogICAgICAgICAgICBhcmNoID0gJyc7CgogICAgICAgIGxldCBwbGF0Zm9ybSA9ICdsaW51eCc7CiAgICAgICAgbGV0IHMzUGF0aCA9IGBzMzovL2FnZW50LWJpbmFyaWVzL2FnZW50L3Byb2R1Y3Rpb24vNWU5OWNiY2IyMzE3OTUwMDE1ZWRiNjU1L2xpbnV4JHthcmNofS92MC4wLjAuMjIzL2tpa2ktYWdlbnRgOwogICAgICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICAgICAgczNQYXRoICs9ICcuZXhlJzsKCiAgICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ20zeFJqZlVSQ29FZ0k0NzJKdnd0UHorRWVkUzNDWUx3eEo3aHNwbU8nCiAgICAgICAgY29uc3QgY21kID0gYGF3cyBzMyBjcCAke291dEZpbGVQYXRofSAke3MzUGF0aH1gCiAgICAgICAgY29uc29sZS5sb2coYFVwbG9hZGluZyBhZ2VudCB0byBzMzogJHtjbWR9YCk7CiAgICAgICAgYXdhaXQgUnVuQ29tbWFuZChjbWQpOwogICAgICAgIGNvbnNvbGUubG9nKGBGaW5pc2hlZCB1cGxvYWRpbmcgZmlsZWApOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIG9jY3VycmVkIGJ1aWxkaW5nIHNhYXMgZ2x1ZSBhZ2VudDogJHtlcnJ9YCk7CiAgICAgICAgcHJvY2Vzcy5leGl0KC0xKTsKICAgIH0KfSkoKTs=","status":20,"dateStarted":"2020-06-04T01:39:55.022Z","stdout":"Cloning git repo { Method: 'createAgent',\n  Command:\n   'git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/4EiJU/' }\nStarting build\n> pkg@4.4.8\n> Fetching base Node.js binaries to PKG_CACHE_PATH\nBuild complete\nUploading agent to s3: aws s3 cp /tmp/sg-agent-install/4EiJU/agent/dist/pkg_agent/sg-agent s3://agent-binaries/agent/production/5e99cbcb2317950015edb655/linux/v0.0.0.223/sg-agent\nFinished uploading file\n","dateCompleted":"2020-06-04T01:40:32.062Z","exitCode":0,"signal":null,"stderr":"","id":"5ed850eb2a8c780015a48a4b","version":0},{"tail":["  git.x86_64 0:2.14.6-1.62.amzn1                                                ","Dependency Installed:","  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1","  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1","Complete!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_stepId":"5ed850492a8c780015a48a43","_taskOutcomeId":"5ed850d62a8c780015a48a47","name":"install git on ec2","source":1,"machineId":"ip-172-31-83-252","ipAddress":"172.31.83.252","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T01:39:52.660Z","dateCompleted":"2020-06-04T01:39:55.021Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package git.x86_64 0:2.14.6-1.62.amzn1 will be installed\n--> Processing Dependency: perl-Git = 2.14.6-1.62.amzn1 for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Term::ReadKey) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git::I18N) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Error) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Running transaction check\n---> Package perl-Error.noarch 1:0.17020-2.9.amzn1 will be installed\n---> Package perl-Git.noarch 0:2.14.6-1.62.amzn1 will be installed\n---> Package perl-TermReadKey.x86_64 0:2.30-20.9.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package              Arch       Version                 Repository        Size\n================================================================================\nInstalling:\n git                  x86_64     2.14.6-1.62.amzn1       amzn-updates      12 M\nInstalling for dependencies:\n perl-Error           noarch     1:0.17020-2.9.amzn1     amzn-main         33 k\n perl-Git             noarch     2.14.6-1.62.amzn1       amzn-updates      69 k\n perl-TermReadKey     x86_64     2.30-20.9.amzn1         amzn-main         33 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+3 Dependent packages)\nTotal download size: 12 M\nInstalled size: 29 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                               23 MB/s |  12 MB  00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Installing : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      2/4 \n  Installing : git-2.14.6-1.62.amzn1.x86_64                                 3/4 \n  Installing : perl-Git-2.14.6-1.62.amzn1.noarch                            4/4 \n  Verifying  : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Verifying  : git-2.14.6-1.62.amzn1.x86_64                                 2/4 \n  Verifying  : perl-Git-2.14.6-1.62.amzn1.noarch                            3/4 \n  Verifying  : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      4/4 \nInstalled:\n  git.x86_64 0:2.14.6-1.62.amzn1                                                \nDependency Installed:\n  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1\n  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1\nComplete!\n","id":"5ed850e82a8c780015a48a4a","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed853672a8c780015a48a4c","_stepId":"5ed853672a8c780015a48a4e","_taskOutcomeId":"5ed853672a8c780015a48a4f","name":"Step1","source":1,"machineId":"ip-172-31-83-252","ipAddress":"172.31.83.252","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-04T01:50:32.002Z","dateCompleted":"2020-06-04T01:50:33.374Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-046c85fc03bc53cb2\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed853682a8c780015a48a50","version":0},{"tail":["...agent ip-172-31-83-126 is initializing","...agent ip-172-31-83-126 is initializing","...agent ip-172-31-83-126 is initializing","...agent ip-172-31-83-126 is initializing","Timeout launching new instance - max tries exceeded"],"lastUpdateId":20,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_stepId":"5ed8746f2a8c780015a48a54","_taskOutcomeId":"5ed8746f2a8c780015a48a5a","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDIubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgogICAgICAgIGlmIHJlc1swXToKICAgICAgICAgICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQocmVzWzFdKQoKICAgICAgICBtYXhUcmllcyA9IDE2CiAgICAgICAgZm9yIGluc3RhbmNlaWQgaW4gYXZhaWxhYmxlX2luc3RhbmNlczoKICAgICAgICAgICAgbnVtVHJpZXMgPSAwCiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZ2V0X2luc3RhbmNlKGluc3RhbmNlaWQpCiAgICAgICAgICAgICAgICAjIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VfbmFtZS5yZXBsYWNlKCcuZWMyLmludGVybmFsJywgJycpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgaWYgcmVzWydzdGF0dXNDb2RlJ10gPT0gMjAwIGFuZCByZXNbJ21ldGEnXVsnY291bnQnXSA+IDA6CiAgICAgICAgICAgICAgICAgICAgbGFzdEhlYXJ0YmVhdFRpbWUgPSByZXNbJ2RhdGEnXVswXVsnbGFzdEhlYXJ0YmVhdFRpbWUnXQogICAgICAgICAgICAgICAgICAgIGhiRHRlID0gZGF0ZXRpbWUudXRjZnJvbXRpbWVzdGFtcChsYXN0SGVhcnRiZWF0VGltZS8xMDAwKQogICAgICAgICAgICAgICAgICAgIGRpZmZTZWNvbmRzID0gKGRhdGV0aW1lLnV0Y25vdygpIC0gaGJEdGUpLnRvdGFsX3NlY29uZHMoKTsKICAgICAgICAgICAgICAgICAgICBpZiBkaWZmU2Vjb25kcyA8IDUgKiA2MCAqIDEwMDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnLi4uYWdlbnQge30gaXMgaW5pdGlhbGl6aW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-04T04:11:27.467Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t2.micro\"\n...waiting for \"i-0e2152741c1827ae3\" status\n...waiting for \"i-0e2152741c1827ae3\" status\n...waiting for \"i-0e2152741c1827ae3\" status\n...instance i-0e2152741c1827ae3 is running\n...instance i-0e2152741c1827ae3 is initializing\nLaunched 1 ec2 t2.micro instance(s) [i-0e2152741c1827ae3]\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\n...agent ip-172-31-83-126 is initializing\nTimeout launching new instance - max tries exceeded\n","dateCompleted":"2020-06-04T04:13:16.744Z","exitCode":0,"signal":null,"stderr":"","id":"5ed8746f2a8c780015a48a5b","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8751d2a8c780015a48a5e","_stepId":"5ed8751e2a8c780015a48a60","_taskOutcomeId":"5ed8751e2a8c780015a48a61","name":"Step1","source":1,"machineId":"ip-172-31-83-126","ipAddress":"172.31.83.126","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-04T04:14:22.077Z","dateCompleted":"2020-06-04T04:14:27.202Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0e2152741c1827ae3\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed8751e2a8c780015a48a62","version":0},{"tail":["1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_stepId":"5ed875d02a8c780015a48a65","_taskOutcomeId":"5ed875d02a8c780015a48a6b","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDIubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgogICAgICAgIGlmIHJlc1swXToKICAgICAgICAgICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQocmVzWzFdKQoKICAgICAgICBtYXhUcmllcyA9IDE2CiAgICAgICAgZm9yIGluc3RhbmNlaWQgaW4gYXZhaWxhYmxlX2luc3RhbmNlczoKICAgICAgICAgICAgbnVtVHJpZXMgPSAwCiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZ2V0X2luc3RhbmNlKGluc3RhbmNlaWQpCiAgICAgICAgICAgICAgICAjIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VfbmFtZS5yZXBsYWNlKCcuZWMyLmludGVybmFsJywgJycpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdyZXMgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydGJlYXRUaW1lID0gcmVzWydkYXRhJ11bMF1bJ2xhc3RIZWFydGJlYXRUaW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnbGFzdEhlYXJ0YmVhdFRpbWUgLT4gJywgbGFzdEhlYXJ0YmVhdFRpbWUKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBoYkR0ZSA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAobGFzdEhlYXJ0YmVhdFRpbWUvMTAwMCkKICAgICAgICAgICAgICAgICAgICBwcmludCAnaGJEdGUgLT4gJywgaGJEdGUKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBkaWZmU2Vjb25kcyA9IChkYXRldGltZS51dGNub3coKSAtIGhiRHRlKS50b3RhbF9zZWNvbmRzKCk7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ2RpZmZTZWNvbmRzIC0+ICcsIGRpZmZTZWNvbmRzLCAnLCBhY3RpdmVBZ2VudFRpbWVvdXRNaW51dGVzIC0+IDUsIGRpZmZTZWNvbmRzIC0+ICcsIDUgKiA2MCAqIDEwMDAKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBpZiBkaWZmU2Vjb25kcyA8IDUgKiA2MCAqIDEwMDA6CiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnLi4uYWdlbnQge30gaXMgaW5pdGlhbGl6aW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-04T04:17:20.935Z","dateCompleted":"2020-06-04T04:17:21.672Z","exitCode":0,"signal":null,"stderr":"","stdout":"1 agent(s) with tags \"{\"agentbuilder\":\"true\"}\" already running\n","id":"5ed875d02a8c780015a48a6c","version":0},{"tail":["res ->  {u'meta': {u'count': 1}, u'data': [{u'lastHeartbeatTime': 1591246186059, u'type': u'Agent', u'id': u'5ed87d6c2a8c780015a48a78'}], u'statusCode': 200}","lastHeartbeatTime ->  1591246186059","hbDte ->  2020-06-04 04:49:46","diffSeconds ->  2.801848 , inactivePeriodWaitTime -> 60000, diffSeconds ->  60000","New instance ip-172-31-80-128 ready"],"lastUpdateId":17,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_stepId":"5ed87d0e2a8c780015a48a70","_taskOutcomeId":"5ed87d0e2a8c780015a48a76","name":"step1","source":1,"machineId":"ip-172-31-93-56.ec2.internal","ipAddress":"172.31.93.56","runCode":"aW1wb3J0IGJhc2U2NAppbXBvcnQgc3lzCmltcG9ydCBvcwpmcm9tIG9zIGltcG9ydCBwYXRoCmltcG9ydCByZXF1ZXN0cwppbXBvcnQganNvbgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgdGltZQpmcm9tIGVjMl9hY2Nlc3MgaW1wb3J0ICoKCgp0b2tlbiA9ICcnCgpkZWYgTGF1bmNoTmV3QWdlbnRCdWlsZGVyKHRhZ3MsIG1pbkNvdW50LCBtYXhDb3VudCk6CiAgICBhdmFpbGFibGVfaW5zdGFuY2VzID0gW10KICAgIHByaW50ICdDaGVja2luZyBmb3IgZXhpc3RpbmcgZWMyIGluc3RhbmNlcyB3aXRoIHRhZ3MgInt9IicuZm9ybWF0KHRhZ3MpCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBjdXJyZW50X2luc3RhbmNlcyA9IGdldF9ydW5uaW5nX2luc3RhbmNlc193aXRoX3RhZ3ModGFncykKICAgIG51bUV4aXN0aW5nSW5zdGFuY2VzID0gbGVuKGN1cnJlbnRfaW5zdGFuY2VzKQogICAgcHJpbnQgJ0ZvdW5kIHt9IGV4aXN0aW5nIGVjMiBpbnN0YW5jZXMgd2l0aCB0YWdzICJ7fSInLmZvcm1hdChudW1FeGlzdGluZ0luc3RhbmNlcywgdGFncykKICAgIHN5cy5zdGRvdXQuZmx1c2gKCiAgICBhdmFpbGFibGVfaW5zdGFuY2VzLmV4dGVuZChjdXJyZW50X2luc3RhbmNlcykKCiAgICBpZiBudW1FeGlzdGluZ0luc3RhbmNlcyA8IDE6CiAgICAgICAgaWYgbm90IHBhdGguZXhpc3RzKCdib290c3RyYXAtZWMyLnB5Jyk6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbiAoJ0ZpbGUgYm9vdHN0cmFwLWVjMi5weSBub3QgZm91bmQnKQoKICAgICAgICB3aXRoIG9wZW4oJ2Jvb3RzdHJhcC1lYzIucHknLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGRhdGEgPSBmaWxlLnJlYWQoKQoKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbb3JnSWRdJywgJyI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbZW1haWxdJywgJyJkZW1vQHNhYXNnbHVlLmNvbSInKQogICAgICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoJ1twYXNzd29yZF0nLCAnIm15cGFzc3dvcmQiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbd29ya2luZ2Rpcl0nLCAnIi9ob21lL2VjMi11c2VyIicpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW3BsYXRmb3JtXScsICcibGludXgiJykKICAgICAgICBkYXRhID0gZGF0YS5yZXBsYWNlKCdbYXJjaF0nLCAnTm9uZScpCiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgnW2NvbmZpZ10nLCAneyJ0YWdzIjogeyJhZ2VudGJ1aWxkZXIiOiJ0cnVlIn0sICJwcm9wZXJ0eU92ZXJyaWRlcyI6IHsiaW5hY3RpdmVBZ2VudFRhc2siOiB7Im5hbWUiOiAiSW5hY3RpdmVBZ2VudFRhc2siLCAic2NyaXB0IjogeyAiX2lkIjogIjVlZDdlNGVkMTI5OTU2MDAxNWI2NTJkZSJ9LCAiYXJndW1lbnRzIjogIiIsICJ2YXJpYWJsZXMiOiB7IkFXU19BQ0NFU1NfS0VZX0lEIjogIkFLSUFUVjJYTzJZRldBSk1RSlNOIiwgIkFXU19TRUNSRVRfQUNDRVNTX0tFWSI6ICJtM3hSamZVUkNvRWdJNDcySnZ3dFB6K0VlZFMzQ1lMd3hKN2hzcG1PIn19LCAiaW5hY3RpdmVQZXJpb2RXYWl0VGltZSI6IDYwMDAwfX0nKQogICAgICAgIAogICAgICAgIGRhdGFfYnl0ZXMgPSBkYXRhLmVuY29kZSgndXRmOCcpCiAgICAgICAgYmFzZTY0X2J5dGVzID0gYmFzZTY0LmI2NGVuY29kZShkYXRhX2J5dGVzKQoKICAgICAgICByZXMgPSBsYXVuY2hfZWMyX2luc3RhbmNlKCdhbWktMDk5ZTg4MmIwODc2YzgxMjQnLCAna2lraS0yMDE5UTEnLCAndDIubWljcm8nLCBbJ3NnLTAzNmRlMjUzN2MwNTlhNGFmJ10sICdzdWJuZXQtZDQ3YTJiZmEnLCAndnBjLWQyZDNiNGE4JywgbWluQ291bnQsIG1heENvdW50LCBiYXNlNjRfYnl0ZXMsIE5vbmUsIHRhZ3MpCgogICAgICAgIGlmIHJlc1swXToKICAgICAgICAgICAgYXZhaWxhYmxlX2luc3RhbmNlcy5leHRlbmQocmVzWzFdKQoKICAgICAgICBtYXhUcmllcyA9IDI0CiAgICAgICAgZm9yIGluc3RhbmNlaWQgaW4gYXZhaWxhYmxlX2luc3RhbmNlczoKICAgICAgICAgICAgbnVtVHJpZXMgPSAwCiAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9pc19ydW5uaW5nID0gRmFsc2UKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZ2V0X2luc3RhbmNlKGluc3RhbmNlaWQpCiAgICAgICAgICAgICAgICAjIHByaW50IGluc3RhbmNlWydSZXNlcnZhdGlvbnMnXVswXVsnSW5zdGFuY2VzJ11bMF0KICAgICAgICAgICAgICAgIGluc3RhbmNlX25hbWUgPSBpbnN0YW5jZVsnUmVzZXJ2YXRpb25zJ11bMF1bJ0luc3RhbmNlcyddWzBdWydQcml2YXRlRG5zTmFtZSddCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9uYW1lID0gaW5zdGFuY2VfbmFtZS5yZXBsYWNlKCcuZWMyLmludGVybmFsJywgJycpCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGFnZW50UXVlcnkgPSBSZXN0QVBJQ2FsbCgnaHR0cHM6Ly9raWtpLWdvLXNlcnZlci5oZXJva3VhcHAuY29tL2FwaS92MC9hZ2VudC8/ZmlsdGVyPW1hY2hpbmVJZD09e30mcmVzcG9uc2VGaWVsZHM9aWQgbGFzdEhlYXJ0YmVhdFRpbWUnLmZvcm1hdChpbnN0YW5jZV9uYW1lKSwgJ0dFVCcsIHt9KQogICAgICAgICAgICAgICAgcmVzID0gYWdlbnRRdWVyeS5qc29uKCkKICAgICAgICAgICAgICAgIHByaW50ICdyZXMgLT4gJywgcmVzCiAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgIGlmIHJlc1snc3RhdHVzQ29kZSddID09IDIwMCBhbmQgcmVzWydtZXRhJ11bJ2NvdW50J10gPiAwOgogICAgICAgICAgICAgICAgICAgIGxhc3RIZWFydGJlYXRUaW1lID0gcmVzWydkYXRhJ11bMF1bJ2xhc3RIZWFydGJlYXRUaW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAnbGFzdEhlYXJ0YmVhdFRpbWUgLT4gJywgbGFzdEhlYXJ0YmVhdFRpbWUKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBoYkR0ZSA9IGRhdGV0aW1lLnV0Y2Zyb210aW1lc3RhbXAobGFzdEhlYXJ0YmVhdFRpbWUvMTAwMCkKICAgICAgICAgICAgICAgICAgICBwcmludCAnaGJEdGUgLT4gJywgaGJEdGUKICAgICAgICAgICAgICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICAgICAgICAgICAgICBkaWZmU2Vjb25kcyA9IChkYXRldGltZS51dGNub3coKSAtIGhiRHRlKS50b3RhbF9zZWNvbmRzKCk7CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ2RpZmZTZWNvbmRzIC0+ICcsIGRpZmZTZWNvbmRzLCAnLCBpbmFjdGl2ZVBlcmlvZFdhaXRUaW1lIC0+IDYwMDAwLCBkaWZmU2Vjb25kcyAtPiAnLCA2MDAwMAogICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgIGlmIGRpZmZTZWNvbmRzIC0gIDYwMDAwIDwgLTU6CiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlX2lzX3J1bm5pbmcgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBub3QgaW5zdGFuY2VfaXNfcnVubmluZzoKICAgICAgICAgICAgICAgICAgICBwcmludCAnLi4uYWdlbnQge30gaXMgaW5pdGlhbGl6aW5nJy5mb3JtYXQoaW5zdGFuY2VfbmFtZSkKICAgICAgICAgICAgICAgICAgICBudW1UcmllcyArPSAxCiAgICAgICAgICAgICAgICAgICAgaWYgbnVtVHJpZXMgPj0gbWF4VHJpZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdUaW1lb3V0IGxhdW5jaGluZyBuZXcgaW5zdGFuY2UgLSBtYXggdHJpZXMgZXhjZWVkZWQnCiAgICAgICAgICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ05ldyBpbnN0YW5jZSB7fSByZWFkeScuZm9ybWF0KGluc3RhbmNlX25hbWUpCiAgICAgICAgICAgICAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKCgoKCmRlZiBSZXN0QVBJQ2FsbCh1cmwsIG1ldGhvZCwgaGVhZGVycywgZGF0YT17fSk6CiAgICBnbG9iYWwgdG9rZW4KCiAgICB0cnk6CiAgICAgICAgZGVmYXVsdF9oZWFkZXJzID0gewogICAgICAgICAgICAnQ29va2llJzogJ0F1dGg9e307Jy5mb3JtYXQodG9rZW4pLAogICAgICAgICAgICAnX29yZ0lkJzogJzVlOTljYmNiMjMxNzk1MDAxNWVkYjY1NScKICAgICAgICB9CgogICAgICAgIGhlYWRlcnMudXBkYXRlKGRlZmF1bHRfaGVhZGVycykKCiAgICAgICAgaWYgbWV0aG9kID09ICdQT1NUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucG9zdCh1cmw9dXJsLCBoZWFkZXJzPWhlYWRlcnMsIGRhdGE9ZGF0YSkKICAgICAgICBlbGlmIG1ldGhvZCA9PSAnUFVUJzoKICAgICAgICAgICAgcmVzID0gcmVxdWVzdHMucHV0KHVybD11cmwsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQogICAgICAgIGVsaWYgbWV0aG9kID09ICdHRVQnOgogICAgICAgICAgICByZXMgPSByZXF1ZXN0cy5nZXQodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigne30gbWV0aG9kIG5vdCBzdXBwb3J0ZWQnLmZvcm1hdChtZXRob2QpKQogICAgICAgIGlmICdzdGF0dXNfY29kZScgaW4gcmVzIGFuZCBzdHIocmVzWydzdGF0dXNfY29kZSddKVswXSAhPSAnMic6CiAgICAgICAgICAgIG1zZyA9ICdDYWxsIHRvIHt9IHJldHVybmVkIHt9IC0ge30nLmZvcm1hdCh1cmwsIHJlcy5zdGF0dXNfY29kZSwgcmVzLnRleHQpCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcwogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBleDoKICAgICAgICBwcmludCB7J01ldGhvZCc6ICdSZXN0QVBJQ2FsbCcsICdFcnJvcic6IGV4LCAndXJsJzogdXJsLCAnbWV0aG9kJzogbWV0aG9kLCAnX29yZ0lkJzogX29yZ0lkLCAnaGVhZGVycyc6IGhlYWRlcnMsICdkYXRhJzogZGF0YX0KICAgICAgICByYWlzZSBleAoKCmRlZiBSZXN0QVBJTG9naW4oKToKICAgIGdsb2JhbCB0b2tlbgoKICAgIHVybCA9ICdodHRwOi8va2lraS1nby1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9sb2dpbi9hcGlMb2dpbicKICAgIAogICAgaGVhZGVycyA9IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9CgogICAgZGF0YSA9IHsKICAgICAgICAnZW1haWwnOiAnZGVtb0BzYWFzZ2x1ZS5jb20nLAogICAgICAgICdwYXNzd29yZCc6ICdteXBhc3N3b3JkJwogICAgfQoKICAgIHJlcyA9IHJlcXVlc3RzLnBvc3QodXJsPXVybCwgaGVhZGVycz1oZWFkZXJzLCBkYXRhPWpzb24uZHVtcHMoZGF0YSkpCiAgICBpZiAnc3RhdHVzX2NvZGUnIGluIHJlcyBhbmQgcmVzWydzdGF0dXNfY29kZSddICE9IDIwMDoKICAgICAgICBtc2cgPSAnQ2FsbCB0byB7fSByZXR1cm5lZCB7fSAtIHt9Jy5mb3JtYXQodXJsLCByZXMuc3RhdHVzX2NvZGUsIHJlcy50ZXh0KQogICAgICAgIHJhaXNlIEV4Y2VwdGlvbihtc2cpCgogICAgdG9rZW4gPSByZXMuY29va2llcy5nZXRfZGljdCgpWydBdXRoJ10KCgp3aGlsZSB0b2tlbiA9PSAnJzoKICAgIFJlc3RBUElMb2dpbigpCiAgICBpZiB0b2tlbiA9PSAnJzoKICAgICAgICBwcmludCAnQVBJIGxvZ2luIGZhaWxlZCcKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICAgICAgdGltZS5zbGVlcCg1KQogICAgICAgIHByaW50ICdSZXRyeWluZyBhcGkgbG9naW4nCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAoKdGFncyA9IGpzb24ubG9hZHMoJ3siYWdlbnRidWlsZGVyIjoidHJ1ZSJ9JykKdGFnc0FycmF5ID0gW10KZm9yIHQgaW4gdGFnczoKICAgIHRhZ3NBcnJheS5hcHBlbmQoeydrZXknOiB0LCAndmFsdWUnOiB0YWdzW3RdfSkKYWdlbnRRdWVyeSA9IFJlc3RBUElDYWxsKCdodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20vYXBpL3YwL2FnZW50L3RhZ3Mve30/cmVzcG9uc2VGaWVsZHM9aWQnLmZvcm1hdChqc29uLmR1bXBzKHRhZ3NBcnJheSkpLCAnR0VUJywge30pCgpyZXMgPSBhZ2VudFF1ZXJ5Lmpzb24oKQppZiByZXNbJ3N0YXR1c0NvZGUnXSA9PSA0MDQ6CiAgICBwcmludCAnTm8gYWdlbnQgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUnCiAgICBzeXMuc3Rkb3V0LmZsdXNoCiAgICBMYXVuY2hOZXdBZ2VudEJ1aWxkZXIodGFncywgMSwgMSkKZWxpZiByZXNbJ3N0YXR1c0NvZGUnXSAhPSAyMDA6CiAgICBtc2cgPSAnQ2FsbCB0byBnZXQgYWdlbnRzIHdpdGggdGFncyBmYWlsZWQnCiAgICByYWlzZSBFeGNlcHRpb24obXNnKQplbHNlOgogICAgY250UnVubmluZ0FnZW50cyA9IGxlbihyZXNbJ2RhdGEnXSkKICAgIGlmIGNudFJ1bm5pbmdBZ2VudHMgPCAxOgogICAgICAgIG51bUFnZW50c1RvU3RhcnQgPSAxIC0gY250UnVubmluZ0FnZW50cwogICAgICAgIHByaW50ICdMZXNzIHRoYW4gMSBhZ2VudHMgd2l0aCB0YWdzICJ7ImFnZW50YnVpbGRlciI6InRydWUifSIgY3VycmVudGx5IHJ1bm5pbmcgLSBsYXVuY2hpbmcgbmV3IGFnZW50IG1hY2hpbmUocyknCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaAogICAgICAgIExhdW5jaE5ld0FnZW50QnVpbGRlcih0YWdzLCAxLCBudW1BZ2VudHNUb1N0YXJ0KQogICAgZWxzZToKICAgICAgICBwcmludCAnMSBhZ2VudChzKSB3aXRoIHRhZ3MgInsiYWdlbnRidWlsZGVyIjoidHJ1ZSJ9IiBhbHJlYWR5IHJ1bm5pbmcnCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaA==","status":20,"dateStarted":"2020-06-04T04:48:15.027Z","stdout":"No agent with tags \"{\"agentbuilder\":\"true\"}\" currently running - launching new agent machine\nChecking for existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nFound 0 existing ec2 instances with tags \"{u'agentbuilder': u'true'}\"\nLaunching between 1 and 1 ec2 instances of type \"t2.micro\"\n...waiting for \"i-0cba2c286c231d171\" status\n...waiting for \"i-0cba2c286c231d171\" status\n...waiting for \"i-0cba2c286c231d171\" status\n...instance i-0cba2c286c231d171 is running\n...instance i-0cba2c286c231d171 is initializing\nLaunched 1 ec2 t2.micro instance(s) [i-0cba2c286c231d171]\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 0}, u'data': [], u'statusCode': 200}\n...agent ip-172-31-80-128 is initializing\nres ->  {u'meta': {u'count': 1}, u'data': [{u'lastHeartbeatTime': 1591246186059, u'type': u'Agent', u'id': u'5ed87d6c2a8c780015a48a78'}], u'statusCode': 200}\nlastHeartbeatTime ->  1591246186059\nhbDte ->  2020-06-04 04:49:46\ndiffSeconds ->  2.801848 , inactivePeriodWaitTime -> 60000, diffSeconds ->  60000\nNew instance ip-172-31-80-128 ready\n","dateCompleted":"2020-06-04T04:49:48.872Z","exitCode":0,"signal":null,"stderr":"","id":"5ed87d0f2a8c780015a48a77","version":0},{"tail":["Installed:","  nodejs.x86_64 2:10.21.0-1nodesource                                           ","Dependency Installed:","  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  ","Complete!"],"lastUpdateId":3,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_stepId":"5ed87d0e2a8c780015a48a72","_taskOutcomeId":"5ed87d6e2a8c780015a48a79","name":"install node","source":1,"machineId":"ip-172-31-80-128","ipAddress":"172.31.80.128","runCode":"IyEvYmluL2Jhc2gKZWNobyAiT1NUWVBFID09PSAkT1NUWVBFIgppZiBbWyAiJE9TVFlQRSIgPT0gImxpbnV4LWdudSIgXV07IHRoZW4KICBPU19JRD0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSkKICBlY2hvICJPU19JRCA9PT0gJE9TX0lEIgogIGlmIFtbICIkT1NfSUQiID09ICJcImFtem5cIiIgfHwgIiRPU19JRCIgPT0gImRlYmlhbiIgXV07IHRoZW4KICAgIGVjaG8gImNoZWNraW5nIGlmIG5vZGVqcyBpbnN0YWxsZWQiCiAgICBQS0dfT0s9JChkcGtnLXF1ZXJ5IC1XIC1mPScke1N0YXR1c30nIG5vZGVqcyAyPi9kZXYvbnVsbCB8IGdyZXAgLWMgIm9rIGluc3RhbGxlZCIpCiAgICBpZiBbICIwIiA9PSAiJFBLR19PSyIgXTsgdGhlbgogICAgICBlY2hvICJub2RlanMgbm90IGluc3RhbGxlZCAtIGluc3RhbGxpbmciCiAgICAgIGlmIFtbICIkT1NfSUQiID09ICJkZWJpYW4iIF1dOyB0aGVuCiAgICAgICAgY3VybCAtc0wgaHR0cHM6Ly9kZWIubm9kZXNvdXJjZS5jb20vc2V0dXBfMTAueCAtbyBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gY2htb2QgK3ggbm9kZXNvdXJjZV9zZXR1cC5zaDsgfSB8fCBjaG1vZCAreCBub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgLi9ub2Rlc291cmNlX3NldHVwLnNoCiAgICAgICAgKCggRVVJRCApKSAmJiB7IHN1ZG8gYXB0IGluc3RhbGwgbm9kZWpzOyB9IHx8IGFwdCBpbnN0YWxsIG5vZGVqcwogICAgICAgIG5vZGUgLS12ZXJzaW9uCiAgICAgIGVsaWYgW1sgIiRPU19JRCIgPT0gIlwiYW16blwiIiBdXTsgdGhlbgogICAgICAgIGN1cmwgLXNMIGh0dHBzOi8vcnBtLm5vZGVzb3VyY2UuY29tL3NldHVwXzEwLnggfCBzdWRvIGJhc2ggLQogICAgICAgIHN1ZG8geXVtIC15IGluc3RhbGwgbm9kZWpzCiAgICAgIGZpCiAgICBlbHNlCiAgICAgIGVjaG8gIm5vZGVqcyBhbHJlYWR5IGluc3RhbGxlZCIKICAgIGZpCiAgZmkKZmk=","status":20,"dateStarted":"2020-06-04T04:49:50.235Z","stdout":"OSTYPE === linux-gnu\nOS_ID === \"amzn\"\nchecking if nodejs installed\nnodejs not installed - installing\n## Installing the NodeSource Node.js 10.x repo...\n## Inspecting system...\n+ rpm -q --whatprovides redhat-release || rpm -q --whatprovides centos-release || rpm -q --whatprovides cloudlinux-release || rpm -q --whatprovides sl-release\n+ uname -m\n## Confirming \"el7-x86_64\" is supported...\n+ curl -sLf -o /dev/null 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Downloading release setup RPM...\n+ mktemp\n+ curl -sL -o '/tmp/tmp.BcLzO0Cvvx' 'https://rpm.nodesource.com/pub_10.x/el/7/x86_64/nodesource-release-el7-1.noarch.rpm'\n## Installing release setup RPM...\n+ rpm -i --nosignature --force '/tmp/tmp.BcLzO0Cvvx'\n## Cleaning up...\n+ rm -f '/tmp/tmp.BcLzO0Cvvx'\n## Checking for existing installations...\n+ rpm -qa 'node|npm' | grep -v nodesource\n## Run `sudo yum install -y nodejs` to install Node.js 10.x and npm.\n## You may also need development tools to build native addons:\n     sudo yum install gcc-c++ make\n## To install the Yarn package manager, run:\n     curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n     sudo yum install yarn\nLoaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package nodejs.x86_64 2:10.21.0-1nodesource will be installed\n--> Processing Dependency: python >= 2.6 for package: 2:nodejs-10.21.0-1nodesource.x86_64\n--> Running transaction check\n---> Package python26.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Processing Dependency: libpython2.6.so.1.0()(64bit) for package: python26-2.6.9-2.89.amzn1.x86_64\n--> Running transaction check\n---> Package python26-libs.x86_64 0:2.6.9-2.89.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package           Arch       Version                      Repository      Size\n================================================================================\nInstalling:\n nodejs            x86_64     2:10.21.0-1nodesource        nodesource      20 M\nInstalling for dependencies:\n python26          x86_64     2.6.9-2.89.amzn1             amzn-main      5.8 M\n python26-libs     x86_64     2.6.9-2.89.amzn1             amzn-main      697 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+2 Dependent packages)\nTotal download size: 26 M\nInstalled size: 81 M\nDownloading packages:\nPublic key for nodejs-10.21.0-1nodesource.x86_64.rpm is not installed\n--------------------------------------------------------------------------------\nTotal                                               44 MB/s |  26 MB  00:00     \nRetrieving key from file:///etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : python26-libs-2.6.9-2.89.amzn1.x86_64                        1/3 \n  Installing : python26-2.6.9-2.89.amzn1.x86_64                             2/3 \n  Installing : 2:nodejs-10.21.0-1nodesource.x86_64                          3/3 \n  Verifying  : python26-2.6.9-2.89.amzn1.x86_64                             1/3 \n  Verifying  : 2:nodejs-10.21.0-1nodesource.x86_64                          2/3 \n  Verifying  : python26-libs-2.6.9-2.89.amzn1.x86_64                        3/3 \nInstalled:\n  nodejs.x86_64 2:10.21.0-1nodesource                                           \nDependency Installed:\n  python26.x86_64 0:2.6.9-2.89.amzn1   python26-libs.x86_64 0:2.6.9-2.89.amzn1  \nComplete!\n","dateCompleted":"2020-06-04T04:49:55.926Z","exitCode":0,"signal":null,"stderr":"warning: /var/cache/yum/x86_64/latest/nodesource/packages/nodejs-10.21.0-1nodesource.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 34fa74dd: NOKEY\nImporting GPG key 0x34FA74DD:\n Userid     : \"NodeSource <gpg-rpm@nodesource.com>\"\n Fingerprint: 2e55 207a 95d9 944b 0cc9 3261 5ddb e8d4 34fa 74dd\n Package    : nodesource-release-el7-1.noarch (installed)\n From       : /etc/pki/rpm-gpg/NODESOURCE-GPG-SIGNING-KEY-EL\nWarning: RPMDB altered outside of yum.\n","id":"5ed87d6e2a8c780015a48a7a","version":0},{"tail":["+ child_process@1.0.2","added 1 package and audited 221 packages in 1.335s","5 packages are looking for funding","  run `npm fund` for details","found 0 vulnerabilities"],"lastUpdateId":4,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_stepId":"5ed87d0e2a8c780015a48a74","_taskOutcomeId":"5ed87d6e2a8c780015a48a79","name":"install build agent packages","source":1,"machineId":"ip-172-31-80-128","ipAddress":"172.31.80.128","runCode":"bnBtIGkganNvbndlYnRva2VuCm5wbSBpIHBrZwpucG0gaSBjaGlsZF9wcm9jZXNz","status":20,"dateStarted":"2020-06-04T04:49:55.926Z","stdout":"+ jsonwebtoken@8.5.1\nadded 15 packages from 10 contributors and audited 15 packages in 1.409s\n1 package is looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ pkg@4.4.8\nadded 123 packages from 152 contributors and audited 150 packages in 5.773s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n+ child_process@1.0.2\nadded 1 package and audited 221 packages in 1.335s\n5 packages are looking for funding\n  run `npm fund` for details\nfound 0 vulnerabilities\n","dateCompleted":"2020-06-04T04:50:07.113Z","exitCode":0,"signal":null,"stderr":"npm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/Gf3V3ukmnC/package.json'\nnpm notice created a lockfile as package-lock.json. You should commit this file.\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/Gf3V3ukmnC/package.json'\nnpm WARN Gf3V3ukmnC No description\nnpm WARN Gf3V3ukmnC No repository field.\nnpm WARN Gf3V3ukmnC No README data\nnpm WARN Gf3V3ukmnC No license field.\nnpm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/Gf3V3ukmnC/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/Gf3V3ukmnC/package.json'\nnpm WARN Gf3V3ukmnC No description\nnpm WARN Gf3V3ukmnC No repository field.\nnpm WARN Gf3V3ukmnC No README data\nnpm WARN Gf3V3ukmnC No license field.\nnpm WARN saveError ENOENT: no such file or directory, open '/home/ec2-user/Gf3V3ukmnC/package.json'\nnpm WARN enoent ENOENT: no such file or directory, open '/home/ec2-user/Gf3V3ukmnC/package.json'\nnpm WARN Gf3V3ukmnC No description\nnpm WARN Gf3V3ukmnC No repository field.\nnpm WARN Gf3V3ukmnC No README data\nnpm WARN Gf3V3ukmnC No license field.\n","id":"5ed87d732a8c780015a48a7b","version":0},{"tail":["> pkg@4.4.8","> Fetching base Node.js binaries to PKG_CACHE_PATH","Build complete","Uploading agent to s3: aws s3 cp /tmp/sg-agent-install/JulVw/agent/dist/pkg_agent/sg-agent s3://agent-binaries/agent/production/5e99cbcb2317950015edb655/linux/v0.0.0.223/sg-agent","Finished uploading file"],"lastUpdateId":5,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_stepId":"5ed87d0e2a8c780015a48a73","_taskOutcomeId":"5ed87d6e2a8c780015a48a79","name":"build","source":1,"machineId":"ip-172-31-80-128","ipAddress":"172.31.80.128","runCode":"Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IHBrZ18xID0gcmVxdWlyZSgicGtnIik7CmNvbnN0IGNoaWxkX3Byb2Nlc3NfMSA9IHJlcXVpcmUoImNoaWxkX3Byb2Nlc3MiKTsKCgpsZXQgbWFrZWlkID0gKGxlbiA9IDUsIGxldHRlcnNPbmx5ID0gZmFsc2UpID0+IHsKICAgIHZhciB0ZXh0ID0gIiI7CiAgICBsZXQgcG9zc2libGUgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgICBpZiAoIWxldHRlcnNPbmx5KQogICAgICAgIHBvc3NpYmxlICs9ICIwMTIzNDU2Nzg5IjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwoKICAgIHJldHVybiB0ZXh0Owp9CgoKbGV0IFJ1bkNvbW1hbmQgPSBhc3luYyAoY29tbWFuZFN0cmluZywgb3B0aW9ucykgPT4gewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgc3Rkb3V0ID0gJyc7CiAgICAgICAgICAgIGxldCBzdGRlcnIgPSAnJzsKICAgICAgICAgICAgbGV0IGNtZCA9IGNoaWxkX3Byb2Nlc3NfMS5leGVjKGNvbW1hbmRTdHJpbmcsIG9wdGlvbnMpOwogICAgICAgICAgICBjbWQuc3Rkb3V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGEudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICBzdGRvdXQgKz0gc3RyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY21kLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjbWQub24oJ2V4aXQnLCAoY29kZSkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgJ2NvZGUnOiBjb2RlLCAnc3Rkb3V0Jzogc3Rkb3V0LCAnc3RkZXJyJzogc3RkZXJyIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICB9KTsKfQoKCmxldCBnZW5lcmF0ZVRva2VuID0gKCkgPT4gewogICAgdmFyIHRva2VuID0gand0LnNpZ24oewogICAgICAgIG9yZ0lkczogWyc1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUnXSwKICAgICAgICBhZ2VudFN0dWJWZXJzaW9uOiAndjAuMC4wLjIyMycKICAgIH0sICdzaGhoJyk7Ly9LZXlzVXRpbC5nZXRQcml2YXRlKCkpOyAvLyB0b2RvIC0gY3JlYXRlIGEgcHVibGljIC8gcHJpdmF0ZSBrZXkKfQoKCmxldCBjcmVhdGVBZ2VudCA9IGFzeW5jICgpID0+IHsKICAgIGxldCBwa2dfanNvbiA9IHsKICAgICAgICAibmFtZSI6ICJraWtpLWFnZW50IiwKICAgICAgICAidmVyc2lvbiI6ICIxLjAuMCIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIktpS2kgYWdlbnQiLAogICAgICAgICJrZXl3b3JkcyI6IFtdLAogICAgICAgICJhdXRob3IiOiAiIiwKICAgICAgICAibGljZW5zZSI6ICJJU0MiLAogICAgICAgICJwa2ciOiB7CiAgICAgICAgICAgICJhc3NldHMiOiBbCiAgICAgICAgICAgICAgICAiZGVmYXVsdC5qc29uIgogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgYXBpUG9ydCA9ICcnCiAgICBpZiAobnVsbCAhPSBudWxsKQogICAgYXBpUG9ydCA9IG51bGw7CiAgICBjb25zdCB0b2tlbiA9IGdlbmVyYXRlVG9rZW4oKTsKCiAgICBsZXQgY2ZnX2pzb24gPSB7CiAgICAgICAgImFwaVVybCI6ICJodHRwczovL2tpa2ktZ28tc2VydmVyLmhlcm9rdWFwcC5jb20iLAogICAgICAgICJhcGlQb3J0IjogYXBpUG9ydCwKICAgICAgICAiYWdlbnRMb2dzQVBJVmVyc2lvbiI6ICJ2MCIsCiAgICAgICAgInRva2VuIjogdG9rZW4sCiAgICAgICAgIl9vcmdJZCI6ICI1ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUiLAogICAgICAgICJlbnYiOiAicHJvZHVjdGlvbiIsCiAgICAgICAgImxvZ0Rlc3QiOiAiZmlsZSIKICAgIH07CgogICAgY29uc3QgZnNlID0gcmVxdWlyZSgiZnMtZXh0cmEiKTsKICAgIGNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKCiAgICBsZXQgb3V0X3BhdGggPSBgL3RtcC9raWtpLWFnZW50LWluc3RhbGwvYDsKICAgIGF3YWl0IGZzZS5lbnN1cmVEaXIob3V0X3BhdGgpOwogICAgb3V0X3BhdGggKz0gbWFrZWlkKCk7CgogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmljaHdpZnVuZHM6N2Q3YmQ4YmFiOTVjNDA5MzdmOGY4YmZkY2MzMzZiYWQyZDk5MGYxMUBnaXRodWIuY29tL3RoZWlyb25jb29rL0tpa2kuZ2l0YDsKCiAgICBhd2FpdCBmc2UucmVtb3ZlKG91dF9wYXRoKTsKICAgIGNvbnN0IGNtZENsb25lID0gYGdpdCBjbG9uZSAtLWJyYW5jaCB2MC4wLjAuMjIzIC0tZGVwdGggMSAke3VybH0gJHtvdXRfcGF0aH0vYDsKICAgIGNvbnNvbGUubG9nKGBDbG9uaW5nIGdpdCByZXBvICIke2NtZENsb25lfWApOwogICAgbGV0IGNsb25lUmVzID0gYXdhaXQgUnVuQ29tbWFuZChjbWRDbG9uZSwge30pOwogICAgaWYgKGNsb25lUmVzLmNvZGUgIT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoY2xvbmVSZXMuc3RkZXJyKTsKCiAgICBhd2FpdCBSdW5Db21tYW5kKGBucG0gaWAsIHsgY3dkOiBvdXRfcGF0aCArICcvYWdlbnQnIH0pOwoKICAgIG91dF9wYXRoICs9ICcvYWdlbnQvZGlzdCc7CiAgICBjb25zdCBwa2dfcGF0aCA9IGAke291dF9wYXRofS9wa2dfYWdlbnRgOwogICAgYXdhaXQgZnNlLmVuc3VyZURpcihwa2dfcGF0aCk7CiAgICBmcy53cml0ZUZpbGVTeW5jKHBrZ19wYXRoICsgJy9wYWNrYWdlLmpzb24nLCBKU09OLnN0cmluZ2lmeShwa2dfanNvbiwgbnVsbCwgNCksICd1dGYtOCcpOwogICAgZnMud3JpdGVGaWxlU3luYyhwa2dfcGF0aCArICcvZGVmYXVsdC5qc29uJywgSlNPTi5zdHJpbmdpZnkoY2ZnX2pzb24sIG51bGwsIDQpLCAndXRmLTgnKTsKCiAgICBsZXQgcGxhdGZvcm0gPSAnbGludXgnOwogICAgbGV0IHRhcmdldCA9IGBub2RlMTAtJHtwbGF0Zm9ybX1gOwogICAgbGV0IGFyY2ggPSAnbnVsbCc7CiAgICBpZiAoYXJjaCAhPSAnbnVsbCcpCiAgICAgICAgdGFyZ2V0ICs9IGAtJHthcmNofWA7CgogICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGJ1aWxkJyk7CiAgICBsZXQgcmVzID0gYXdhaXQgcGtnXzEuZXhlYyhbYCR7b3V0X3BhdGh9L0xhdW5jaEFnZW50LmpzYCwgJy0tY29uZmlnJywgcGtnX3BhdGggKyAnL3BhY2thZ2UuanNvbicsICctLXRhcmdldHMnLCB0YXJnZXQsICctLW91dC1wYXRoJywgcGtnX3BhdGhdKTsKICAgIGNvbnNvbGUubG9nKCdCdWlsZCBjb21wbGV0ZScpOwoKICAgIGxldCBvdXRGaWxlTmFtZSA9IGAke3BrZ19wYXRofS9raWtpLWFnZW50YDsKICAgIGlmIChwbGF0Zm9ybSA9PSAnd2luJykKICAgICAgICBvdXRGaWxlTmFtZSArPSAnLmV4ZSc7CgogICAgcmV0dXJuIG91dEZpbGVOYW1lOwp9CgoKKGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgICAgb3V0RmlsZVBhdGggPSBhd2FpdCBjcmVhdGVBZ2VudCgpOwoKICAgICAgICBsZXQgYXJjaCA9ICdudWxsJzsKICAgICAgICBpZiAoYXJjaCA9PSAnbnVsbCcpCiAgICAgICAgICAgIGFyY2ggPSAnJzsKCiAgICAgICAgbGV0IHBsYXRmb3JtID0gJ2xpbnV4JzsKICAgICAgICBsZXQgczNQYXRoID0gYHMzOi8vYWdlbnQtYmluYXJpZXMvYWdlbnQvcHJvZHVjdGlvbi81ZTk5Y2JjYjIzMTc5NTAwMTVlZGI2NTUvbGludXgke2FyY2h9L3YwLjAuMC4yMjMva2lraS1hZ2VudGA7CiAgICAgICAgaWYgKHBsYXRmb3JtID09ICd3aW4nKQogICAgICAgICAgICBzM1BhdGggKz0gJy5leGUnOwoKICAgICAgICBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgPSAnbTN4UmpmVVJDb0VnSTQ3Mkp2d3RQeitFZWRTM0NZTHd4Sjdoc3BtTycKICAgICAgICBjb25zdCBjbWQgPSBgYXdzIHMzIGNwICR7b3V0RmlsZVBhdGh9ICR7czNQYXRofWAKICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkaW5nIGFnZW50IHRvIHMzOiAke2NtZH1gKTsKICAgICAgICBhd2FpdCBSdW5Db21tYW5kKGNtZCk7CiAgICAgICAgY29uc29sZS5sb2coYEZpbmlzaGVkIHVwbG9hZGluZyBmaWxlYCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3Igb2NjdXJyZWQgYnVpbGRpbmcgc2FhcyBnbHVlIGFnZW50OiAke2Vycn1gKTsKICAgICAgICBwcm9jZXNzLmV4aXQoLTEpOwogICAgfQp9KSgpOw==","status":20,"dateStarted":"2020-06-04T04:50:09.345Z","stdout":"Cloning git repo \"git clone --branch v0.0.0.223 --depth 1 https://richwifunds:7d7bd8bab95c40937f8f8bfdcc336bad2d990f11@github.com/theironcook/Kiki.git /tmp/sg-agent-install/JulVw/\nStarting build\n> pkg@4.4.8\n> Fetching base Node.js binaries to PKG_CACHE_PATH\nBuild complete\nUploading agent to s3: aws s3 cp /tmp/sg-agent-install/JulVw/agent/dist/pkg_agent/sg-agent s3://agent-binaries/agent/production/5e99cbcb2317950015edb655/linux/v0.0.0.223/sg-agent\nFinished uploading file\n","dateCompleted":"2020-06-04T04:50:43.208Z","exitCode":0,"signal":null,"stderr":"","id":"5ed87d812a8c780015a48a7d","version":0},{"tail":["  git.x86_64 0:2.14.6-1.62.amzn1                                                ","Dependency Installed:","  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1","  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1","Complete!"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_stepId":"5ed87d0e2a8c780015a48a75","_taskOutcomeId":"5ed87d6e2a8c780015a48a79","name":"install git on ec2","source":1,"machineId":"ip-172-31-80-128","ipAddress":"172.31.80.128","runCode":"c3VkbyB5dW0gLXkgaW5zdGFsbCBnaXQ=","status":20,"dateStarted":"2020-06-04T04:50:07.113Z","dateCompleted":"2020-06-04T04:50:09.345Z","exitCode":0,"signal":null,"stderr":"","stdout":"Loaded plugins: priorities, update-motd, upgrade-helper\nResolving Dependencies\n--> Running transaction check\n---> Package git.x86_64 0:2.14.6-1.62.amzn1 will be installed\n--> Processing Dependency: perl-Git = 2.14.6-1.62.amzn1 for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Term::ReadKey) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git::I18N) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Git) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Processing Dependency: perl(Error) for package: git-2.14.6-1.62.amzn1.x86_64\n--> Running transaction check\n---> Package perl-Error.noarch 1:0.17020-2.9.amzn1 will be installed\n---> Package perl-Git.noarch 0:2.14.6-1.62.amzn1 will be installed\n---> Package perl-TermReadKey.x86_64 0:2.30-20.9.amzn1 will be installed\n--> Finished Dependency Resolution\nDependencies Resolved\n================================================================================\n Package              Arch       Version                 Repository        Size\n================================================================================\nInstalling:\n git                  x86_64     2.14.6-1.62.amzn1       amzn-updates      12 M\nInstalling for dependencies:\n perl-Error           noarch     1:0.17020-2.9.amzn1     amzn-main         33 k\n perl-Git             noarch     2.14.6-1.62.amzn1       amzn-updates      69 k\n perl-TermReadKey     x86_64     2.30-20.9.amzn1         amzn-main         33 k\nTransaction Summary\n================================================================================\nInstall  1 Package (+3 Dependent packages)\nTotal download size: 12 M\nInstalled size: 29 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                               25 MB/s |  12 MB  00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Installing : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      2/4 \n  Installing : git-2.14.6-1.62.amzn1.x86_64                                 3/4 \n  Installing : perl-Git-2.14.6-1.62.amzn1.noarch                            4/4 \n  Verifying  : 1:perl-Error-0.17020-2.9.amzn1.noarch                        1/4 \n  Verifying  : git-2.14.6-1.62.amzn1.x86_64                                 2/4 \n  Verifying  : perl-Git-2.14.6-1.62.amzn1.noarch                            3/4 \n  Verifying  : perl-TermReadKey-2.30-20.9.amzn1.x86_64                      4/4 \nInstalled:\n  git.x86_64 0:2.14.6-1.62.amzn1                                                \nDependency Installed:\n  perl-Error.noarch 1:0.17020-2.9.amzn1     perl-Git.noarch 0:2.14.6-1.62.amzn1\n  perl-TermReadKey.x86_64 0:2.30-20.9.amzn1\nComplete!\n","id":"5ed87d7f2a8c780015a48a7c","version":0},{"tail":["                \"Name\": \"running\"","            }","        }","    ]","}"],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87dde2a8c780015a48a7e","_stepId":"5ed87dde2a8c780015a48a80","_taskOutcomeId":"5ed87dde2a8c780015a48a81","name":"Step1","source":1,"machineId":"ip-172-31-80-128","ipAddress":"172.31.80.128","runCode":"QVdTX0lOU1RBTkNFX0lEPWBjdXJsIC1zIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZGAKUkVHSU9OPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9keW5hbWljL2luc3RhbmNlLWlkZW50aXR5L2RvY3VtZW50IHwgYXdrIC1GJyInICcvXCJyZWdpb25cIi8geyBwcmludCAkNCB9JykKYXdzIGVjMiB0ZXJtaW5hdGUtaW5zdGFuY2VzIC0taW5zdGFuY2UtaWRzICRBV1NfSU5TVEFOQ0VfSUQgLS1yZWdpb24gJFJFR0lPTg==","status":20,"dateStarted":"2020-06-04T04:51:42.551Z","dateCompleted":"2020-06-04T04:51:43.768Z","exitCode":0,"signal":null,"stderr":"","stdout":"{\n    \"TerminatingInstances\": [\n        {\n            \"InstanceId\": \"i-0cba2c286c231d171\", \n            \"CurrentState\": {\n                \"Code\": 32, \n                \"Name\": \"shutting-down\"\n            }, \n            \"PreviousState\": {\n                \"Code\": 16, \n                \"Name\": \"running\"\n            }\n        }\n    ]\n}\n","id":"5ed87dde2a8c780015a48a82","version":0},{"tail":[],"lastUpdateId":2,"archived":false,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed93ee73edbe80015c5e8a0","_stepId":"5ed93ee73edbe80015c5e8a2","_taskOutcomeId":"5ed93ee83edbe80015c5e8a3","name":"Step1","source":0,"machineId":"sg-1","ipAddress":"10.128.0.2","runCode":"ZWNobyAnaGVsbG8gd29ybGQh","status":22,"dateStarted":"2020-06-04T18:35:20.325Z","dateCompleted":"2020-06-04T18:35:20.458Z","exitCode":2,"runtimeVars":{"route":"fail"},"signal":null,"stderr":"/home/rich/demo/lIM9Vv81Jn/SKVL9TAHOZ.sh: 1: /home/rich/demo/lIM9Vv81Jn/SKVL9TAHOZ.sh: Syntax error: Unterminated quoted string\n","stdout":"","id":"5ed93ee83edbe80015c5e8a4","version":0}],"task":[{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed71e1e22d50c0015abf945","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed71e1e22d50c0015abf946","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed71e1e22d50c0015abf945","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed71e1e22d50c0015abf948","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726a922d50c0015abf94b","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed726a922d50c0015abf94c","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726a922d50c0015abf94b","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed726a922d50c0015abf94e","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726b022d50c0015abf951","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed726b022d50c0015abf952","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed726b022d50c0015abf951","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed726b022d50c0015abf954","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7afb295a4f15084758772","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7afb295a4f15084758773","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7afb295a4f15084758772","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed7afb395a4f15084758775","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c4a31981b9001524c333","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7c4a31981b9001524c334","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c4a31981b9001524c333","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed7c4a31981b9001524c336","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c5931981b9001524c33a","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7c5931981b9001524c33b","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c5931981b9001524c33a","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed7c5941981b9001524c33d","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7c7a0a744670015896463","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7c7a1a744670015896465","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7cc37a74467001589646b","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7cc37a74467001589646d","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild","ok"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cd61dd983000158d2f33","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7cd61dd983000158d2f34","version":0},{"fromRoutes":[["LaunchBuilder","ok"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cd61dd983000158d2f33","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":"ok"},"TTL":null,"id":"5ed7cd61dd983000158d2f36","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7cdd1dd983000158d2f3b","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7cdd1dd983000158d2f3d","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7da80dd983000158d2f43","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7da80dd983000158d2f45","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed7df4e63747e0015807a05","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed5d475759b110015403a49","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"2","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7df4e63747e0015807a03","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed6dcf7759b110015403b6e","5ed6dcf7759b110015403b6f"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed5d475759b110015403a49","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"2"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7df7663747e0015807a0b","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7dfe163747e0015807a12","5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7df7663747e0015807a0d","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed6dcf7759b110015403b6e","5ed6dcf7759b110015403b6f"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e5351299560015b652e0","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e5351299560015b652e2","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed7e5bd1299560015b652ed","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed7e6201299560015b652f2","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e67c1299560015b652f3","runtimeVars":{},"up_dep":{},"id":"5ed7e67c1299560015b652f4","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed6dcf7759b110015403b6e","5ed6dcf7759b110015403b6f"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e5bd1299560015b652eb","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7e6201299560015b652f2"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7e7741299560015b652fd","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e7741299560015b652fb","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7e6201299560015b652f2"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7e7931299560015b65306","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e7931299560015b65304","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e7c71299560015b6530d","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7e8271299560015b65314"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7e7c71299560015b6530f","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed7e8271299560015b65314","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ea811299560015b65318","runtimeVars":{},"up_dep":{},"id":"5ed7ea811299560015b65319","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7ece81299560015b6531e","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7ed481299560015b65325"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7ece81299560015b65320","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":16,"targetAgentId":"5ed7ed481299560015b65325","correlationId":"565880394","_jobId":"5ed7f2f41299560015b65328","runtimeVars":{"route":"fail"},"up_dep":{},"id":"5ed7f2f41299560015b65329","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":16,"targetAgentId":"5ed7ed481299560015b65325","correlationId":"780216731","_jobId":"5ed7f46d1299560015b6532d","runtimeVars":{"route":"fail"},"up_dep":{},"id":"5ed7f46d1299560015b6532e","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7ed481299560015b65325"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7f5791299560015b65335","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7f5791299560015b65333","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7ed481299560015b65325"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7f59a1299560015b6533e","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7f59a1299560015b6533c","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7f6121299560015b65345","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed7f6121299560015b65347","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed7f6791299560015b6534c","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fa3d1299560015b65354","runtimeVars":{},"up_dep":{},"id":"5ed7fa3d1299560015b65355","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f8","5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7fe912a8c780015a48854","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed7feed2a8c780015a4885b"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed7fe912a8c780015a48856","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed7feed2a8c780015a4885b","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed801ab2a8c780015a4885f","runtimeVars":{},"up_dep":{},"id":"5ed801ab2a8c780015a48860","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed8096d2a8c780015a4886a","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f9"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8096d2a8c780015a48868","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed8098b2a8c780015a48873","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f9","5ed808502a8c780015a48864"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8098b2a8c780015a48871","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed809f62a8c780015a4887a","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed80c512a8c780015a4887b","runtimeVars":{},"up_dep":{},"id":"5ed80c512a8c780015a4887c","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed817902a8c780015a48884","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f9","5ed817802a8c780015a48880"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed817902a8c780015a48882","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed817b32a8c780015a4888d","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f9","5ed817802a8c780015a48880"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed817b32a8c780015a4888b","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed817df2a8c780015a48898","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed7e7311299560015b652f9","5ed817802a8c780015a48880"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed817df2a8c780015a48896","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed819372a8c780015a488a4","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed8191f2a8c780015a4889f","5ed8191f2a8c780015a488a0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed819372a8c780015a488a2","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed8197a2a8c780015a488ad","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed8191f2a8c780015a4889f","5ed8191f2a8c780015a488a0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8197a2a8c780015a488ab","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed8198f2a8c780015a488b4"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed819ae2a8c780015a488b8","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed8191f2a8c780015a4889f","5ed8191f2a8c780015a488a0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed819ae2a8c780015a488b6","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed81acd2a8c780015a488c4","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed81acd2a8c780015a488c2","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed81d2e2a8c780015a488ce","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed81d2e2a8c780015a488cc","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed81d832a8c780015a488d4"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed81d9a2a8c780015a488d8","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed81d992a8c780015a488d6","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed81dbf2a8c780015a488e2","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed81dbf2a8c780015a488e0","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed81e502a8c780015a488ed","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed81e502a8c780015a488eb","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed81f5d2a8c780015a488f8","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed81f5d2a8c780015a488f6","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed820862a8c780015a48903","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed820862a8c780015a48901","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed8218b2a8c780015a4890e","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8218b2a8c780015a4890c","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed821a92a8c780015a48915","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed821f82a8c780015a4891d"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git"},"source":1,"up_dep":{},"TTL":null,"id":"5ed821a92a8c780015a48917","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed827b32a8c780015a48925","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed827b32a8c780015a48923","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed827dc2a8c780015a4892e","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed827dc2a8c780015a4892c","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed82b202a8c780015a48937","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed82b202a8c780015a48935","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed82da52a8c780015a48940","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed82da52a8c780015a4893e","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed82fdc2a8c780015a48949","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed82fdc2a8c780015a48947","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":null,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{},"source":1,"up_dep":{"LaunchBuilder":".*"},"TTL":null,"id":"5ed830042a8c780015a48952","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed830042a8c780015a48950","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed830662a8c780015a48958","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed832c12a8c780015a48959","runtimeVars":{},"up_dep":{},"id":"5ed832c12a8c780015a4895a","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed837082a8c780015a4895f","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"source":1,"up_dep":{},"TTL":null,"id":"5ed837082a8c780015a48961","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed838172a8c780015a4896d","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"source":1,"up_dep":{},"TTL":null,"id":"5ed838172a8c780015a4896f","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed838bc2a8c780015a4897a","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed838bc2a8c780015a4897c","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed838fa2a8c780015a48987","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed838fa2a8c780015a48989","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8394e2a8c780015a48994","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8394e2a8c780015a48996","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed83a022a8c780015a489a5","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83a022a8c780015a489a3","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83a1e2a8c780015a489ae","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83a1e2a8c780015a489b0","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed83a7d2a8c780015a489bf","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83a7c2a8c780015a489bd","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83a922a8c780015a489c8","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83a922a8c780015a489ca","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83b102a8c780015a489d7","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83b102a8c780015a489d9","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83b832a8c780015a489e6","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed837652a8c780015a48967"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed83b832a8c780015a489e8","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed842132a8c780015a489f5","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed842782a8c780015a489ff"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed842132a8c780015a489f7","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed843a22a8c780015a48a06","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed842782a8c780015a489ff"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"source":1,"up_dep":{},"TTL":null,"id":"5ed843a22a8c780015a48a08","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed843ca2a8c780015a48a15","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed842782a8c780015a489ff"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"source":1,"up_dep":{},"TTL":null,"id":"5ed843ca2a8c780015a48a17","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed842782a8c780015a489ff","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8465c2a8c780015a48a23","runtimeVars":{},"up_dep":{},"id":"5ed8465c2a8c780015a48a24","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"761955456","_jobId":"5ed84c772a8c780015a48a28","runtimeVars":{},"up_dep":{},"id":"5ed84c772a8c780015a48a29","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"762309184","_jobId":"5ed84c892a8c780015a48a2d","runtimeVars":{},"up_dep":{},"id":"5ed84c892a8c780015a48a2e","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"598452561","_jobId":"5ed84c932a8c780015a48a32","runtimeVars":{},"up_dep":{},"id":"5ed84c932a8c780015a48a33","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"129650621","_jobId":"5ed84c9b2a8c780015a48a37","runtimeVars":{},"up_dep":{},"id":"5ed84c9b2a8c780015a48a38","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed850492a8c780015a48a3d","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed850d22a8c780015a48a46"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"source":1,"up_dep":{},"TTL":null,"id":"5ed850492a8c780015a48a3f","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed850d22a8c780015a48a46","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed853672a8c780015a48a4c","runtimeVars":{},"up_dep":{},"id":"5ed853672a8c780015a48a4d","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed8746f2a8c780015a48a55","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"60000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","activeAgentTimeoutMinutes":"5","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed8746f2a8c780015a48a53","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed874df2a8c780015a48a5d","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8751d2a8c780015a48a5e","runtimeVars":{},"up_dep":{},"id":"5ed8751e2a8c780015a48a5f","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":22,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed874df2a8c780015a48a5d"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"route":"fail"},"source":1,"up_dep":{},"TTL":null,"failureCode":1,"id":"5ed875d02a8c780015a48a66","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"60000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","activeAgentTimeoutMinutes":"5","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed875d02a8c780015a48a64","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"status":5,"autoRestart":false,"down_dep":[["RunBuild",".*"]],"attemptedRunAgentIds":["5e9bd8842f90640015bfd8de"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","name":"LaunchBuilder","targetAgentId":null,"requiredTags":{"ec2admin":"true"},"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"60000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"source":1,"up_dep":{},"TTL":null,"id":"5ed87d0e2a8c780015a48a6f","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":["5ed87d6c2a8c780015a48a78"],"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","name":"RunBuild","targetAgentId":null,"requiredTags":{"agentbuilder":"true"},"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"source":1,"up_dep":{},"TTL":null,"id":"5ed87d0e2a8c780015a48a71","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"name":"InactiveTask","source":1,"targetAgentId":"5ed87d6c2a8c780015a48a78","requiredTags":[],"target":16,"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87dde2a8c780015a48a7e","runtimeVars":{},"up_dep":{},"id":"5ed87dde2a8c780015a48a7f","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"551918924","_jobId":"5ed93ee73edbe80015c5e8a0","runtimeVars":{"route":"fail"},"up_dep":{},"id":"5ed93ee73edbe80015c5e8a1","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"162832293","_jobId":"5ed93f413edbe80015c5e8a5","runtimeVars":{},"up_dep":{},"id":"5ed93f413edbe80015c5e8a6","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"872553855","_jobId":"5ed941293edbe80015c5e8aa","runtimeVars":{},"up_dep":{},"id":"5ed941293edbe80015c5e8ab","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":2,"targetAgentId":"","correlationId":"355177374","_jobId":"5ed9413b3edbe80015c5e8af","runtimeVars":{},"up_dep":{},"id":"5ed9413b3edbe80015c5e8b0","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{"numchucks":"true"},"target":8,"targetAgentId":"","correlationId":"616489909","_jobId":"5ed941593edbe80015c5e8b6","runtimeVars":{},"up_dep":{},"id":"5ed941593edbe80015c5e8b7","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{"numchucks":"true"},"target":8,"targetAgentId":"","correlationId":"963910343","_jobId":"5ed941933edbe80015c5e8bd","runtimeVars":{},"up_dep":{},"id":"5ed941933edbe80015c5e8be","version":0},{"fromRoutes":[],"toRoutes":[],"artifacts":[],"status":5,"autoRestart":false,"down_dep":[],"attemptedRunAgentIds":[],"_orgId":"5e99cbcb2317950015edb655","name":"Task1","source":0,"requiredTags":{},"target":1,"targetAgentId":"","correlationId":"179499438","_jobId":"5ed9426dbdbedb00158b2d41","runtimeVars":{},"up_dep":{},"id":"5ed9426dbdbedb00158b2d42","version":0}],"taskDef":[{"fromRoutes":[],"toRoutes":[],"artifacts":["5ed81ab02a8c780015a488bf","5ed81ab02a8c780015a488c0"],"_jobDefId":"5ed6dc9bae918d37ad199d89","target":4,"name":"LaunchBuilder","requiredTags":{"ec2admin":"true"},"_orgId":"5e99cbcb2317950015edb655","id":"5ed6dc9bae918d37ad199d8a","version":0},{"fromRoutes":[["LaunchBuilder",".*"]],"toRoutes":[],"artifacts":[],"_jobDefId":"5ed6dc9bae918d37ad199d89","target":4,"name":"RunBuild","requiredTags":{"agentbuilder":"true"},"_orgId":"5e99cbcb2317950015edb655","id":"5ed6dd4a759b110015403b70","version":0}],"taskOutcome":[{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","_taskId":"5ed7c7a0a744670015896463","source":1,"dateStarted":"2020-06-03T15:54:09.652Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"status":22,"id":"5ed7c7a1a744670015896468","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7c7a0a744670015896462","_taskId":"5ed7c7a1a744670015896465","source":1,"dateStarted":"2020-06-03T15:54:09.788Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"status":22,"id":"5ed7c7a1a744670015896469","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","_taskId":"5ed7cc37a74467001589646b","source":1,"dateStarted":"2020-06-03T16:13:43.671Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7cc37a744670015896470","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cc37a74467001589646a","_taskId":"5ed7cc37a74467001589646d","source":1,"dateStarted":"2020-06-03T16:13:43.775Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7cc37a744670015896471","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cd61dd983000158d2f33","_taskId":"5ed7cd61dd983000158d2f34","source":1,"dateStarted":"2020-06-03T16:18:41.925Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7cd61dd983000158d2f39","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","_taskId":"5ed7cdd1dd983000158d2f3b","source":1,"dateStarted":"2020-06-03T16:20:33.429Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7cdd1dd983000158d2f40","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7cdd1dd983000158d2f3a","_taskId":"5ed7cdd1dd983000158d2f3d","source":1,"dateStarted":"2020-06-03T16:20:33.538Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7cdd1dd983000158d2f41","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","_taskId":"5ed7da80dd983000158d2f43","source":1,"dateStarted":"2020-06-03T17:14:40.585Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7da80dd983000158d2f48","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7da80dd983000158d2f42","_taskId":"5ed7da80dd983000158d2f45","source":1,"dateStarted":"2020-06-03T17:14:40.718Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7da80dd983000158d2f49","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df4e63747e0015807a02","_taskId":"5ed7df4e63747e0015807a03","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T17:35:12.993Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed5d475759b110015403a49","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"2","route":"fail"},"dateCompleted":"2020-06-03T17:35:13.499Z","route":"fail","id":"5ed7df5163747e0015807a08","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0b","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T17:35:51.806Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10791,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed5d475759b110015403a49","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"2"},"dateCompleted":"2020-06-03T17:40:37.358Z","id":"5ed7df7863747e0015807a10","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","_agentId":"5ed7dfe163747e0015807a12","source":1,"status":21,"dateStarted":"2020-06-03T17:40:38.577Z","ipAddress":"172.31.91.249","machineId":"ip-172-31-91-249","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git"},"dateCompleted":"2020-06-03T17:40:38.694Z","route":"","id":"5ed7e09663747e0015807a13","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":21,"dateStarted":"2020-06-03T17:41:43.841Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git"},"dateCompleted":"2020-06-03T17:41:44.028Z","route":"","id":"5ed7e0d71299560015b652d4","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:42:19.684Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7e0fb1299560015b652d7","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:43:03.569Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7e1271299560015b652d8","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:43:42.870Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7e14e1299560015b652d9","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:44:22.551Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7e1761299560015b652da","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:45:04.627Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7e1a01299560015b652db","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:45:57.665Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7e1d51299560015b652dc","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7df7663747e0015807a0a","_taskId":"5ed7df7663747e0015807a0d","source":1,"dateStarted":"2020-06-03T17:46:35.460Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7e1fb1299560015b652dd","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_taskId":"5ed7e5351299560015b652e0","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T18:00:22.133Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10791,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T18:00:23.184Z","id":"5ed7e5361299560015b652e5","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5351299560015b652df","_taskId":"5ed7e5351299560015b652e2","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T18:00:24.154Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"dateCompleted":"2020-06-03T18:00:24.301Z","route":"fail","id":"5ed7e5381299560015b652e7","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e5bd1299560015b652ea","_taskId":"5ed7e5bd1299560015b652eb","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T18:02:37.589Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10791,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"90000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T18:06:01.541Z","route":"fail","id":"5ed7e5bd1299560015b652f0","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e67c1299560015b652f3","_taskId":"5ed7e67c1299560015b652f4","_agentId":"5ed7e6201299560015b652f2","source":1,"status":20,"dateStarted":"2020-06-03T18:05:48.616Z","ipAddress":"172.31.83.20","machineId":"ip-172-31-83-20","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-03T18:05:53.956Z","id":"5ed7e67c1299560015b652f6","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","_taskId":"5ed7e7741299560015b652fb","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T18:09:56.384Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T18:09:57.262Z","id":"5ed7e7741299560015b65300","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7741299560015b652fa","_taskId":"5ed7e7741299560015b652fd","source":1,"dateStarted":"2020-06-03T18:10:03.258Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7e77b1299560015b65302","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","_taskId":"5ed7e7931299560015b65304","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T18:10:27.709Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T18:10:28.506Z","id":"5ed7e7931299560015b65309","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7931299560015b65303","_taskId":"5ed7e7931299560015b65306","source":1,"dateStarted":"2020-06-03T18:10:34.489Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7e79a1299560015b6530b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_taskId":"5ed7e7c71299560015b6530d","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T18:11:19.167Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T18:14:43.052Z","id":"5ed7e7c71299560015b65312","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7e7c71299560015b6530c","_taskId":"5ed7e7c71299560015b6530f","_agentId":"5ed7e8271299560015b65314","source":1,"status":22,"dateStarted":"2020-06-03T18:14:43.834Z","ipAddress":"172.31.94.102","machineId":"ip-172-31-94-102","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"dateCompleted":"2020-06-03T18:14:43.926Z","route":"fail","id":"5ed7e8931299560015b65315","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ea811299560015b65318","_taskId":"5ed7ea811299560015b65319","_agentId":"5ed7e8271299560015b65314","source":1,"status":20,"dateStarted":"2020-06-03T18:22:57.858Z","ipAddress":"172.31.94.102","machineId":"ip-172-31-94-102","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-03T18:23:02.718Z","id":"5ed7ea811299560015b6531b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_taskId":"5ed7ece81299560015b6531e","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T18:33:12.676Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T18:36:16.498Z","id":"5ed7ece81299560015b65323","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7ece81299560015b6531d","_taskId":"5ed7ece81299560015b65320","_agentId":"5ed7ed481299560015b65325","source":1,"status":22,"dateStarted":"2020-06-03T18:36:16.849Z","ipAddress":"172.31.94.212","machineId":"ip-172-31-94-212","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"dateCompleted":"2020-06-03T18:36:17.135Z","route":"fail","id":"5ed7eda01299560015b65326","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f2f41299560015b65328","_taskId":"5ed7f2f41299560015b65329","_agentId":"5ed7ed481299560015b65325","source":0,"status":22,"correlationId":"565880394","dateStarted":"2020-06-03T18:59:26.308Z","ipAddress":"172.31.94.212","machineId":"ip-172-31-94-212","artifactsDownloadedSize":0,"target":16,"runtimeVars":{"route":"fail"},"dateCompleted":"2020-06-03T18:59:26.377Z","route":"fail","id":"5ed7f30e1299560015b6532b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f46d1299560015b6532d","_taskId":"5ed7f46d1299560015b6532e","_agentId":"5ed7ed481299560015b65325","source":0,"status":22,"correlationId":"780216731","dateStarted":"2020-06-03T19:05:29.758Z","ipAddress":"172.31.94.212","machineId":"ip-172-31-94-212","artifactsDownloadedSize":0,"target":16,"runtimeVars":{"route":"fail"},"dateCompleted":"2020-06-03T19:05:34.732Z","route":"fail","id":"5ed7f4791299560015b65330","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","_taskId":"5ed7f5791299560015b65333","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T19:09:45.778Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T19:09:46.620Z","id":"5ed7f5791299560015b65338","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f5791299560015b65332","_taskId":"5ed7f5791299560015b65335","source":1,"dateStarted":"2020-06-03T19:09:52.752Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7f5801299560015b6533a","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","_taskId":"5ed7f59a1299560015b6533c","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T19:10:18.622Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T19:10:19.569Z","id":"5ed7f59a1299560015b65341","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f59a1299560015b6533b","_taskId":"5ed7f59a1299560015b6533e","source":1,"dateStarted":"2020-06-03T19:10:25.027Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7f5a11299560015b65343","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65345","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T19:12:18.988Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T19:16:24.402Z","id":"5ed7f6131299560015b6534a","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","_agentId":"5ed7f6791299560015b6534c","source":1,"status":21,"dateStarted":"2020-06-03T19:16:25.461Z","ipAddress":"172.31.94.44","machineId":"ip-172-31-94-44","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git"},"dateCompleted":"2020-06-03T19:16:45.462Z","route":"","id":"5ed7f7091299560015b6534d","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","source":1,"dateStarted":"2020-06-03T19:19:36.547Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7f7c81299560015b6534f","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","source":1,"dateStarted":"2020-06-03T19:20:03.068Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7f7e31299560015b65350","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","source":1,"dateStarted":"2020-06-03T19:20:25.633Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7f7f91299560015b65351","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","source":1,"dateStarted":"2020-06-03T19:21:50.316Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed7f84e1299560015b65352","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7f6121299560015b65344","_taskId":"5ed7f6121299560015b65347","source":1,"dateStarted":"2020-06-03T19:29:29.754Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed7fa191299560015b65353","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fa3d1299560015b65354","_taskId":"5ed7fa3d1299560015b65355","_agentId":"5ed7f6791299560015b6534c","source":1,"status":20,"dateStarted":"2020-06-03T19:30:05.200Z","ipAddress":"172.31.94.44","machineId":"ip-172-31-94-44","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-03T19:30:10.700Z","id":"5ed7fa3d1299560015b65357","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_taskId":"5ed7fe912a8c780015a48854","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T19:48:33.872Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10803,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T19:51:38.042Z","id":"5ed7fe922a8c780015a48859","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed7fe912a8c780015a48853","_taskId":"5ed7fe912a8c780015a48856","_agentId":"5ed7feed2a8c780015a4885b","source":1,"status":22,"dateStarted":"2020-06-03T19:51:38.775Z","ipAddress":"172.31.95.68","machineId":"ip-172-31-95-68","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","route":"fail"},"dateCompleted":"2020-06-03T19:51:47.951Z","route":"fail","id":"5ed7ff4a2a8c780015a4885c","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed801ab2a8c780015a4885f","_taskId":"5ed801ab2a8c780015a48860","_agentId":"5ed7feed2a8c780015a4885b","source":1,"status":20,"dateStarted":"2020-06-03T20:01:48.033Z","ipAddress":"172.31.95.68","machineId":"ip-172-31-95-68","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-03T20:01:53.079Z","id":"5ed801ac2a8c780015a48862","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8096d2a8c780015a48867","_taskId":"5ed8096d2a8c780015a48868","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T20:34:53.683Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":2493,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T20:34:53.923Z","route":"fail","id":"5ed8096d2a8c780015a4886e","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_taskId":"5ed8098b2a8c780015a48871","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T20:35:24.056Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10794,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T20:35:46.696Z","id":"5ed8098c2a8c780015a48877","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8098b2a8c780015a48870","_taskId":"5ed8098b2a8c780015a48873","source":1,"dateStarted":"2020-06-03T20:35:47.329Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed809a32a8c780015a48879","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed80c512a8c780015a4887b","_taskId":"5ed80c512a8c780015a4887c","_agentId":"5ed809f62a8c780015a4887a","source":1,"status":20,"dateStarted":"2020-06-03T20:47:13.097Z","ipAddress":"172.31.89.14","machineId":"ip-172-31-89-14","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-03T20:47:18.382Z","id":"5ed80c512a8c780015a4887e","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817902a8c780015a48881","_taskId":"5ed817902a8c780015a48882","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T21:35:12.401Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10965,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T21:35:12.580Z","route":"fail","id":"5ed817902a8c780015a48888","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_taskId":"5ed817b32a8c780015a4888b","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":21,"dateStarted":"2020-06-03T21:35:47.116Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10965,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T21:35:47.499Z","route":"","id":"5ed817b32a8c780015a48891","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817b22a8c780015a4888a","_taskId":"5ed817b32a8c780015a4888b","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T21:36:20.478Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10965,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T21:36:20.670Z","route":"fail","id":"5ed817d42a8c780015a48893","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed817df2a8c780015a48895","_taskId":"5ed817df2a8c780015a48896","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T21:36:31.505Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10965,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T21:36:54.222Z","route":"fail","id":"5ed817df2a8c780015a4889c","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819372a8c780015a488a1","_taskId":"5ed819372a8c780015a488a2","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T21:42:15.334Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T21:42:38.270Z","route":"fail","id":"5ed819372a8c780015a488a8","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_taskId":"5ed8197a2a8c780015a488ab","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T21:43:22.980Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T21:43:24.369Z","id":"5ed8197b2a8c780015a488b1","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8197a2a8c780015a488aa","_taskId":"5ed8197a2a8c780015a488ad","source":1,"dateStarted":"2020-06-03T21:43:24.668Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed8197c2a8c780015a488b3","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_taskId":"5ed819ae2a8c780015a488b6","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T21:44:14.790Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T21:44:15.680Z","id":"5ed819ae2a8c780015a488bc","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed819ae2a8c780015a488b5","_taskId":"5ed819ae2a8c780015a488b8","source":1,"dateStarted":"2020-06-03T21:44:25.298Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed819b92a8c780015a488be","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81acd2a8c780015a488c1","_taskId":"5ed81acd2a8c780015a488c2","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T21:49:01.486Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T21:49:24.690Z","route":"fail","id":"5ed81acd2a8c780015a488c8","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d2e2a8c780015a488cb","_taskId":"5ed81d2e2a8c780015a488cc","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T21:59:10.546Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T21:59:33.477Z","route":"fail","id":"5ed81d2e2a8c780015a488d2","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_taskId":"5ed81d992a8c780015a488d6","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T22:00:58.144Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T22:00:59.079Z","id":"5ed81d9a2a8c780015a488dc","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81d992a8c780015a488d5","_taskId":"5ed81d9a2a8c780015a488d8","source":1,"dateStarted":"2020-06-03T22:01:07.232Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed81da32a8c780015a488de","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81dbf2a8c780015a488df","_taskId":"5ed81dbf2a8c780015a488e0","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T22:01:36.016Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T22:01:58.801Z","route":"fail","id":"5ed81dc02a8c780015a488e6","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81e502a8c780015a488ea","_taskId":"5ed81e502a8c780015a488eb","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T22:04:01.054Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T22:04:23.774Z","route":"fail","id":"5ed81e512a8c780015a488f1","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_taskId":"5ed81f5d2a8c780015a488f6","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T22:08:30.270Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T22:09:49.197Z","id":"5ed81f5e2a8c780015a488fc","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed81f5d2a8c780015a488f5","_taskId":"5ed81f5d2a8c780015a488f8","source":1,"dateStarted":"2020-06-03T22:09:50.442Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed81fae2a8c780015a488fe","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_taskId":"5ed820862a8c780015a48901","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T22:13:26.550Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T22:14:46.120Z","id":"5ed820862a8c780015a48907","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed820862a8c780015a48900","_taskId":"5ed820862a8c780015a48903","source":1,"dateStarted":"2020-06-03T22:14:46.755Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed820d62a8c780015a48909","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8218b2a8c780015a4890b","_taskId":"5ed8218b2a8c780015a4890c","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T22:17:47.481Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T22:17:47.924Z","route":"fail","id":"5ed8218b2a8c780015a48912","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_taskId":"5ed821a92a8c780015a48915","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T22:18:17.517Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T22:19:56.736Z","id":"5ed821a92a8c780015a4891b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed821a92a8c780015a48914","_taskId":"5ed821a92a8c780015a48917","_agentId":"5ed821f82a8c780015a4891d","source":1,"status":20,"dateStarted":"2020-06-03T22:19:57.279Z","ipAddress":"172.31.86.201","machineId":"ip-172-31-86-201","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git"},"dateCompleted":"2020-06-03T22:20:18.769Z","id":"5ed8220d2a8c780015a4891e","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827b32a8c780015a48922","_taskId":"5ed827b32a8c780015a48923","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T22:44:03.786Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T22:44:04.860Z","route":"fail","id":"5ed827b32a8c780015a48929","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed827dc2a8c780015a4892b","_taskId":"5ed827dc2a8c780015a4892c","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T22:44:44.323Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T22:44:45.805Z","route":"fail","id":"5ed827dc2a8c780015a48932","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82b202a8c780015a48934","_taskId":"5ed82b202a8c780015a48935","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T22:58:40.421Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T22:58:42.087Z","route":"fail","id":"5ed82b202a8c780015a4893b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82da52a8c780015a4893d","_taskId":"5ed82da52a8c780015a4893e","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T23:09:25.819Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"ec2-admin","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T23:09:27.308Z","route":"fail","id":"5ed82da62a8c780015a48944","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed82fdc2a8c780015a48946","_taskId":"5ed82fdc2a8c780015a48947","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T23:18:52.139Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T23:18:53.598Z","route":"fail","id":"5ed82fdc2a8c780015a4894d","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed830042a8c780015a4894f","_taskId":"5ed830042a8c780015a48950","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":22,"dateStarted":"2020-06-03T23:19:32.966Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1","route":"fail"},"dateCompleted":"2020-06-03T23:21:12.036Z","route":"fail","id":"5ed830052a8c780015a48956","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed832c12a8c780015a48959","_taskId":"5ed832c12a8c780015a4895a","_agentId":"5ed830662a8c780015a48958","source":1,"status":20,"dateStarted":"2020-06-03T23:31:13.364Z","ipAddress":"172.31.80.30","machineId":"ip-172-31-80-30","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-03T23:31:19.177Z","id":"5ed832c12a8c780015a4895c","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_taskId":"5ed837082a8c780015a4895f","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T23:49:28.771Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T23:51:02.864Z","id":"5ed837092a8c780015a48965","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed837082a8c780015a4895e","_taskId":"5ed837082a8c780015a48961","_agentId":"5ed837652a8c780015a48967","source":1,"status":20,"dateStarted":"2020-06-03T23:51:03.916Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"dateCompleted":"2020-06-03T23:51:25.226Z","id":"5ed837672a8c780015a48968","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_taskId":"5ed838172a8c780015a4896d","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T23:53:59.754Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T23:54:00.590Z","id":"5ed838172a8c780015a48973","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838172a8c780015a4896c","_taskId":"5ed838172a8c780015a4896f","_agentId":"5ed837652a8c780015a48967","source":1,"status":20,"dateStarted":"2020-06-03T23:54:01.757Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"dateCompleted":"2020-06-03T23:54:11.074Z","id":"5ed838192a8c780015a48975","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_taskId":"5ed838bc2a8c780015a4897a","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T23:56:44.675Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T23:56:45.566Z","id":"5ed838bc2a8c780015a48980","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838bc2a8c780015a48979","_taskId":"5ed838bc2a8c780015a4897c","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-03T23:56:46.150Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-03T23:56:55.312Z","route":"fail","id":"5ed838be2a8c780015a48982","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_taskId":"5ed838fa2a8c780015a48987","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T23:57:46.430Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T23:57:47.314Z","id":"5ed838fa2a8c780015a4898d","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed838fa2a8c780015a48986","_taskId":"5ed838fa2a8c780015a48989","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-03T23:57:48.423Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-03T23:57:57.891Z","route":"fail","id":"5ed838fc2a8c780015a4898f","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_taskId":"5ed8394e2a8c780015a48994","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-03T23:59:10.604Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-03T23:59:11.472Z","id":"5ed8394e2a8c780015a4899a","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8394e2a8c780015a48993","_taskId":"5ed8394e2a8c780015a48996","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-03T23:59:11.706Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-03T23:59:20.808Z","route":"fail","id":"5ed8394f2a8c780015a4899c","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a3","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:02:11.114Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:02:12.094Z","id":"5ed83a032a8c780015a489aa","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a022a8c780015a489a2","_taskId":"5ed83a022a8c780015a489a5","source":1,"dateStarted":"2020-06-04T00:02:18.182Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed83a0a2a8c780015a489ac","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489ae","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:02:38.791Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:02:39.626Z","id":"5ed83a1e2a8c780015a489b5","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a1e2a8c780015a489ad","_taskId":"5ed83a1e2a8c780015a489b0","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-04T00:02:40.396Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-04T00:02:54.383Z","route":"fail","id":"5ed83a202a8c780015a489b7","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7c2a8c780015a489bd","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:04:13.126Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:04:14.237Z","id":"5ed83a7d2a8c780015a489c4","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a7c2a8c780015a489bc","_taskId":"5ed83a7d2a8c780015a489bf","source":1,"dateStarted":"2020-06-04T00:04:19.785Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed83a832a8c780015a489c6","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489c8","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:04:34.443Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:04:35.365Z","id":"5ed83a922a8c780015a489cf","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83a922a8c780015a489c7","_taskId":"5ed83a922a8c780015a489ca","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-04T00:04:36.121Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-04T00:04:46.220Z","route":"fail","id":"5ed83a942a8c780015a489d1","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d7","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:06:40.467Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:06:41.384Z","id":"5ed83b102a8c780015a489de","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b102a8c780015a489d6","_taskId":"5ed83b102a8c780015a489d9","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-04T00:06:42.449Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-04T00:07:16.415Z","route":"fail","id":"5ed83b122a8c780015a489e0","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e6","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:08:35.969Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:08:36.868Z","id":"5ed83b842a8c780015a489ed","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed83b832a8c780015a489e5","_taskId":"5ed83b832a8c780015a489e8","_agentId":"5ed837652a8c780015a48967","source":1,"status":22,"dateStarted":"2020-06-04T00:08:37.798Z","ipAddress":"172.31.88.250","machineId":"ip-172-31-88-250","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-04T00:09:27.141Z","route":"fail","id":"5ed83b852a8c780015a489ef","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f5","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:36:35.714Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:38:14.890Z","id":"5ed842132a8c780015a489fc","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f7","source":1,"dateStarted":"2020-06-04T00:38:15.645Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{},"failureCode":1,"route":"","status":21,"id":"5ed842772a8c780015a489fe","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed842132a8c780015a489f4","_taskId":"5ed842132a8c780015a489f7","_agentId":"5ed842782a8c780015a489ff","source":1,"status":22,"dateStarted":"2020-06-04T00:38:27.237Z","ipAddress":"172.31.81.138","machineId":"ip-172-31-81-138","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-04T00:41:23.501Z","route":"fail","id":"5ed842832a8c780015a48a00","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a06","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:43:14.911Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:43:15.809Z","id":"5ed843a32a8c780015a48a0d","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843a22a8c780015a48a05","_taskId":"5ed843a22a8c780015a48a08","_agentId":"5ed842782a8c780015a489ff","source":1,"status":22,"dateStarted":"2020-06-04T00:43:16.954Z","ipAddress":"172.31.81.138","machineId":"ip-172-31-81-138","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux","route":"fail"},"dateCompleted":"2020-06-04T00:43:32.499Z","route":"fail","id":"5ed843a42a8c780015a48a0f","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a15","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T00:43:54.728Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t1.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T00:43:55.625Z","id":"5ed843ca2a8c780015a48a1c","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed843ca2a8c780015a48a14","_taskId":"5ed843ca2a8c780015a48a17","_agentId":"5ed842782a8c780015a489ff","source":1,"status":20,"dateStarted":"2020-06-04T00:43:56.517Z","ipAddress":"172.31.81.138","machineId":"ip-172-31-81-138","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"dateCompleted":"2020-06-04T00:44:51.925Z","id":"5ed843cc2a8c780015a48a1e","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8465c2a8c780015a48a23","_taskId":"5ed8465c2a8c780015a48a24","_agentId":"5ed842782a8c780015a489ff","source":1,"status":20,"dateStarted":"2020-06-04T00:54:52.210Z","ipAddress":"172.31.81.138","machineId":"ip-172-31-81-138","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-04T00:54:53.701Z","id":"5ed8465c2a8c780015a48a26","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c772a8c780015a48a28","_taskId":"5ed84c772a8c780015a48a29","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":20,"correlationId":"761955456","dateStarted":"2020-06-04T01:20:55.441Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T01:20:55.695Z","id":"5ed84c772a8c780015a48a2b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c892a8c780015a48a2d","_taskId":"5ed84c892a8c780015a48a2e","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"762309184","dateStarted":"2020-06-04T01:21:13.248Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T01:21:13.332Z","id":"5ed84c892a8c780015a48a30","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c932a8c780015a48a32","_taskId":"5ed84c932a8c780015a48a33","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":20,"correlationId":"598452561","dateStarted":"2020-06-04T01:21:23.898Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T01:21:24.139Z","id":"5ed84c942a8c780015a48a35","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed84c9b2a8c780015a48a37","_taskId":"5ed84c9b2a8c780015a48a38","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"129650621","dateStarted":"2020-06-04T01:21:31.657Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T01:21:31.708Z","id":"5ed84c9b2a8c780015a48a3a","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3d","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T01:37:13.880Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"600000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T01:39:33.655Z","id":"5ed8504a2a8c780015a48a44","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed850492a8c780015a48a3c","_taskId":"5ed850492a8c780015a48a3f","_agentId":"5ed850d22a8c780015a48a46","source":1,"status":20,"dateStarted":"2020-06-04T01:39:33.989Z","ipAddress":"172.31.83.252","machineId":"ip-172-31-83-252","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"dateCompleted":"2020-06-04T01:40:32.062Z","id":"5ed850d62a8c780015a48a47","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed853672a8c780015a48a4c","_taskId":"5ed853672a8c780015a48a4d","_agentId":"5ed850d22a8c780015a48a46","source":1,"status":20,"dateStarted":"2020-06-04T01:50:31.986Z","ipAddress":"172.31.83.252","machineId":"ip-172-31-83-252","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-04T01:50:33.374Z","id":"5ed853672a8c780015a48a4f","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a53","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T04:11:27.308Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"60000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","activeAgentTimeoutMinutes":"5","MaxCount":"1"},"dateCompleted":"2020-06-04T04:13:16.744Z","id":"5ed8746f2a8c780015a48a5a","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8746f2a8c780015a48a52","_taskId":"5ed8746f2a8c780015a48a55","source":1,"dateStarted":"2020-06-04T04:13:16.971Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed874dc2a8c780015a48a5c","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed8751d2a8c780015a48a5e","_taskId":"5ed8751e2a8c780015a48a5f","_agentId":"5ed874df2a8c780015a48a5d","source":1,"status":20,"dateStarted":"2020-06-04T04:14:22.057Z","ipAddress":"172.31.83.126","machineId":"ip-172-31-83-126","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-04T04:14:27.202Z","id":"5ed8751e2a8c780015a48a61","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a64","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T04:17:20.694Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"60000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","activeAgentTimeoutMinutes":"5","MaxCount":"1"},"dateCompleted":"2020-06-04T04:17:21.672Z","id":"5ed875d02a8c780015a48a6b","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed875d02a8c780015a48a63","_taskId":"5ed875d02a8c780015a48a66","source":1,"dateStarted":"2020-06-04T04:17:27.417Z","ipAddress":"","machineId":"","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"route":"fail"},"failureCode":1,"route":"fail","status":22,"id":"5ed875d72a8c780015a48a6d","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a6f","_agentId":"5e9bd8842f90640015bfd8de","source":1,"status":20,"dateStarted":"2020-06-04T04:48:14.715Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":10966,"target":4,"runtimeVars":{"MinCount":"1","orgId":"5e99cbcb2317950015edb655","email":"demo@saasglue.com","password":"mypassword","workingdir":"/home/ec2-user","tags":"{\"agentbuilder\":\"true\"}","InactiveAgentScriptId":"5ed7e4ed1299560015b652de","AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","AWS_SECRET_ACCESS_KEY":"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","inactivePeriodWaitTime":"60000","ImageId":"'ami-099e882b0876c8124'","KeyName":"'kiki-2019Q1'","InstanceType":"'t2.micro'","SecurityGroupIds":"['sg-036de2537c059a4af']","SubnetId":"'subnet-d47a2bfa'","VpcId":"'vpc-d2d3b4a8'","IAMRole":"None","MaxCount":"1"},"dateCompleted":"2020-06-04T04:49:48.872Z","id":"5ed87d0e2a8c780015a48a76","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87d0e2a8c780015a48a6e","_taskId":"5ed87d0e2a8c780015a48a71","_agentId":"5ed87d6c2a8c780015a48a78","source":1,"status":20,"dateStarted":"2020-06-04T04:49:50.167Z","ipAddress":"172.31.80.128","machineId":"ip-172-31-80-128","artifactsDownloadedSize":0,"target":4,"runtimeVars":{"AWS_ACCESS_KEY_ID":"AKIATV2XO2YFWAJMQJSN","orgId":"5e99cbcb2317950015edb655","agentVersion":"v0.0.0.223","secret":"shhh","apiUrl":"https://kiki-go-server.herokuapp.com","agentLogsAPIVersion":"v0","environment":"production","logDest":"file","SG_GIT_USERNAME":"richwifunds","SG_GIT_PASSWORD":"7d7bd8bab95c40937f8f8bfdcc336bad2d990f11","SG_GIT_URL":"github.com/theironcook/Kiki.git","platform":"linux"},"dateCompleted":"2020-06-04T04:50:43.208Z","id":"5ed87d6e2a8c780015a48a79","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed87dde2a8c780015a48a7e","_taskId":"5ed87dde2a8c780015a48a7f","_agentId":"5ed87d6c2a8c780015a48a78","source":1,"status":20,"dateStarted":"2020-06-04T04:51:42.530Z","ipAddress":"172.31.80.128","machineId":"ip-172-31-80-128","artifactsDownloadedSize":0,"target":16,"runtimeVars":{},"dateCompleted":"2020-06-04T04:51:43.768Z","id":"5ed87dde2a8c780015a48a81","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed93ee73edbe80015c5e8a0","_taskId":"5ed93ee73edbe80015c5e8a1","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":22,"correlationId":"551918924","dateStarted":"2020-06-04T18:35:20.172Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":1,"runtimeVars":{"route":"fail"},"dateCompleted":"2020-06-04T18:35:20.459Z","route":"fail","id":"5ed93ee83edbe80015c5e8a3","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed93f413edbe80015c5e8a5","_taskId":"5ed93f413edbe80015c5e8a6","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"162832293","dateStarted":"2020-06-04T18:36:49.856Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T18:36:49.917Z","id":"5ed93f413edbe80015c5e8a8","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941293edbe80015c5e8aa","_taskId":"5ed941293edbe80015c5e8ab","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":20,"correlationId":"872553855","dateStarted":"2020-06-04T18:44:57.451Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T18:44:57.711Z","id":"5ed941293edbe80015c5e8ad","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9413b3edbe80015c5e8af","_taskId":"5ed9413b3edbe80015c5e8b0","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"355177374","dateStarted":"2020-06-04T18:45:15.580Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":2,"runtimeVars":{},"dateCompleted":"2020-06-04T18:45:15.623Z","id":"5ed9413b3edbe80015c5e8b2","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9413b3edbe80015c5e8af","_taskId":"5ed9413b3edbe80015c5e8b0","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":20,"correlationId":"355177374","dateStarted":"2020-06-04T18:45:15.593Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":2,"runtimeVars":{},"dateCompleted":"2020-06-04T18:45:16.348Z","id":"5ed9413b3edbe80015c5e8b4","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941593edbe80015c5e8b6","_taskId":"5ed941593edbe80015c5e8b7","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"616489909","dateStarted":"2020-06-04T18:45:45.464Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":8,"runtimeVars":{},"dateCompleted":"2020-06-04T18:45:45.523Z","id":"5ed941593edbe80015c5e8b9","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941593edbe80015c5e8b6","_taskId":"5ed941593edbe80015c5e8b7","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":20,"correlationId":"616489909","dateStarted":"2020-06-04T18:45:45.470Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":8,"runtimeVars":{},"dateCompleted":"2020-06-04T18:45:45.703Z","id":"5ed941593edbe80015c5e8bb","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941933edbe80015c5e8bd","_taskId":"5ed941933edbe80015c5e8be","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"963910343","dateStarted":"2020-06-04T18:46:43.823Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":8,"runtimeVars":{},"dateCompleted":"2020-06-04T18:46:43.874Z","id":"5ed941933edbe80015c5e8c0","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed941933edbe80015c5e8bd","_taskId":"5ed941933edbe80015c5e8be","_agentId":"5e9bd8c12f90640015bfd8df","source":0,"status":20,"correlationId":"963910343","dateStarted":"2020-06-04T18:46:43.823Z","ipAddress":"10.128.0.2","machineId":"sg-1","artifactsDownloadedSize":0,"target":8,"runtimeVars":{},"dateCompleted":"2020-06-04T18:46:44.035Z","id":"5ed941933edbe80015c5e8c2","version":0},{"_orgId":"5e99cbcb2317950015edb655","_jobId":"5ed9426dbdbedb00158b2d41","_taskId":"5ed9426dbdbedb00158b2d42","_agentId":"5e9bd8842f90640015bfd8de","source":0,"status":20,"correlationId":"179499438","dateStarted":"2020-06-04T18:50:22.087Z","ipAddress":"172.31.93.56","machineId":"ip-172-31-93-56.ec2.internal","artifactsDownloadedSize":0,"target":1,"runtimeVars":{},"dateCompleted":"2020-06-04T18:50:22.240Z","id":"5ed9426ebdbedb00158b2d44","version":0}],"schedule":[],"invoice":[],"paymentMethod":[],"paymentTransaction":[]}